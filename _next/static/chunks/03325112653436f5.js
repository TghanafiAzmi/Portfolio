(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,73172,e=>{"use strict";var t=e.i(43476);function i({children:e,className:i=""}){return(0,t.jsx)("section",{className:`w-full py-8 sm:py-12  ${i}`,children:e})}e.s(["default",()=>i])},89970,64761,e=>{"use strict";let t,i;function n(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var s,a,o,l,h,u,c,d,p,f,m,g,v,_,x,y,M,S,b,E,T,w,A,C,P,R,L,D,I,U={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},N={duration:.5,overwrite:!1,delay:0},O=2*Math.PI,F=O/4,B=0,k=Math.sqrt,z=Math.cos,V=Math.sin,H=function(e){return"string"==typeof e},G=function(e){return"function"==typeof e},W=function(e){return"number"==typeof e},X=function(e){return void 0===e},j=function(e){return"object"==typeof e},Y=function(e){return!1!==e},q=function(){return"u">typeof window},K=function(e){return G(e)||H(e)},$="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},Z=Array.isArray,J=/random\([^)]+\)/g,Q=/,\s*/g,ee=/(?:-?\.?\d|\.)+/gi,et=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,ei=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,en=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,er=/[+-]=-?[.\d]+/,es=/[^,'"\[\]\s]+/gi,ea=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,eo={},el={},eh=function(e){return(el=ek(e,eo))&&iI},eu=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},ec=function(e,t){return!t&&console.warn(e)},ed=function(e,t){return e&&(eo[e]=t)&&el&&(el[e]=t)||eo},ep=function(){return 0},ef={suppressEvents:!0,isStart:!0,kill:!1},em={suppressEvents:!0,kill:!1},eg={suppressEvents:!0},ev={},e_=[],ex={},ey={},eM={},eS=30,eb=[],eE="",eT=function(e){var t,i,n=e[0];if(j(n)||G(n)||(e=[e]),!(t=(n._gsap||{}).harness)){for(i=eb.length;i--&&!eb[i].targetTest(n););t=eb[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new tY(e[i],t)))||e.splice(i,1);return e},ew=function(e){return e._gsap||eT(th(e))[0]._gsap},eA=function(e,t,i){return(i=e[t])&&G(i)?e[t]():X(i)&&e.getAttribute&&e.getAttribute(t)||i},eC=function(e,t){return(e=e.split(",")).forEach(t)||e},eP=function(e){return Math.round(1e5*e)/1e5||0},eR=function(e){return Math.round(1e7*e)/1e7||0},eL=function(e,t){var i=t.charAt(0),n=parseFloat(t.substr(2));return e=parseFloat(e),"+"===i?e+n:"-"===i?e-n:"*"===i?e*n:e/n},eD=function(e,t){for(var i=t.length,n=0;0>e.indexOf(t[n])&&++n<i;);return n<i},eI=function(){var e,t,i=e_.length,n=e_.slice(0);for(e=0,ex={},e_.length=0;e<i;e++)(t=n[e])&&t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0)._lazy=0)},eU=function(e){return!!(e._initted||e._startAt||e.add)},eN=function(e,t,i,n){e_.length&&!E&&eI(),e.render(t,i,n||!!(E&&t<0&&eU(e))),e_.length&&!E&&eI()},eO=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(es).length<2?t:H(e)?e.trim():e},eF=function(e){return e},eB=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},ek=function(e,t){for(var i in t)e[i]=t[i];return e},ez=function e(t,i){for(var n in i)"__proto__"!==n&&"constructor"!==n&&"prototype"!==n&&(t[n]=j(i[n])?e(t[n]||(t[n]={}),i[n]):i[n]);return t},eV=function(e,t){var i,n={};for(i in e)i in t||(n[i]=e[i]);return n},eH=function(e){var t,i=e.parent||w,n=e.keyframes?(t=Z(e.keyframes),function(e,i){for(var n in i)n in e||"duration"===n&&t||"ease"===n||(e[n]=i[n])}):eB;if(Y(e.inherit))for(;i;)n(e,i.vars.defaults),i=i.parent||i._dp;return e},eG=function(e,t){for(var i=e.length,n=i===t.length;n&&i--&&e[i]===t[i];);return i<0},eW=function(e,t,i,n,r){void 0===i&&(i="_first"),void 0===n&&(n="_last");var s,a=e[n];if(r)for(s=t[r];a&&a[r]>s;)a=a._prev;return a?(t._next=a._next,a._next=t):(t._next=e[i],e[i]=t),t._next?t._next._prev=t:e[n]=t,t._prev=a,t.parent=t._dp=e,t},eX=function(e,t,i,n){void 0===i&&(i="_first"),void 0===n&&(n="_last");var r=t._prev,s=t._next;r?r._next=s:e[i]===t&&(e[i]=s),s?s._prev=r:e[n]===t&&(e[n]=r),t._next=t._prev=t.parent=null},ej=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},eY=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},eq=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},eK=function(e,t,i,n){return e._startAt&&(E?e._startAt.revert(em):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,n))},e$=function(e){return e._repeat?eZ(e._tTime,e=e.duration()+e._rDelay)*e:0},eZ=function(e,t){var i=Math.floor(e=eR(e/t));return e&&i===e?i-1:i},eJ=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},eQ=function(e){return e._end=eR(e._start+(e._tDur/Math.abs(e._ts||e._rts||1e-8)||0))},e0=function(e,t){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=eR(i._time-(e._ts>0?t/e._ts:-(((e._dirty?e.totalDuration():e._tDur)-t)/e._ts))),eQ(e),i._dirty||eY(i,e)),e},e1=function(e,t){var i;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(i=eJ(e.rawTime(),t),(!t._dur||ts(0,t.totalDuration(),i)-t._tTime>1e-8)&&t.render(i,!0)),eY(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-1e-8}},e2=function(e,t,i,n){return t.parent&&ej(t),t._start=eR((W(i)?i:i||e!==w?ti(e,i,t):e._time)+t._delay),t._end=eR(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),eW(e,t,"_first","_last",e._sort?"_start":0),e6(t)||(e._recent=t),n||e1(e,t),e._ts<0&&e0(e,e._tTime),e},e3=function(e,t){return(eo.ScrollTrigger||eu("scrollTrigger",t))&&eo.ScrollTrigger.create(t,e)},e4=function(e,t,i,n,r){return(t6(e,t,r),e._initted)?!i&&e._pt&&!E&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&L!==tD.frame?(e_.push(e),e._lazy=[r,n],1):void 0:1},e5=function e(t){var i=t.parent;return i&&i._ts&&i._initted&&!i._lock&&(0>i.rawTime()||e(i))},e6=function(e){var t=e.data;return"isFromStart"===t||"isStart"===t},e8=function(e,t,i,n){var r,s,a,o=e.ratio,l=t<0||!t&&(!e._start&&e5(e)&&!(!e._initted&&e6(e))||(e._ts<0||e._dp._ts<0)&&!e6(e))?0:1,h=e._rDelay,u=0;if(h&&e._repeat&&(s=eZ(u=ts(0,e._tDur,t),h),e._yoyo&&1&s&&(l=1-l),s!==eZ(e._tTime,h)&&(o=1-l,e.vars.repeatRefresh&&e._initted&&e.invalidate())),l!==o||E||n||1e-8===e._zTime||!t&&e._zTime){if(!e._initted&&e4(e,t,n,i,u))return;for(a=e._zTime,e._zTime=t||1e-8*!!i,i||(i=t&&!a),e.ratio=l,e._from&&(l=1-l),e._time=0,e._tTime=u,r=e._pt;r;)r.r(l,r.d),r=r._next;t<0&&eK(e,t,i,!0),e._onUpdate&&!i&&ty(e,"onUpdate"),u&&e._repeat&&!i&&e.parent&&ty(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===l&&(l&&ej(e,1),i||E||(ty(e,l?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},e9=function(e,t,i){var n;if(i>t)for(n=e._first;n&&n._start<=i;){if("isPause"===n.data&&n._start>t)return n;n=n._next}else for(n=e._last;n&&n._start>=i;){if("isPause"===n.data&&n._start<t)return n;n=n._prev}},e7=function(e,t,i,n){var r=e._repeat,s=eR(t)||0,a=e._tTime/e._tDur;return a&&!n&&(e._time*=s/e._dur),e._dur=s,e._tDur=r?r<0?1e10:eR(s*(r+1)+e._rDelay*r):s,a>0&&!n&&e0(e,e._tTime=e._tDur*a),e.parent&&eQ(e),i||eY(e.parent,e),e},te=function(e){return e instanceof tK?eY(e):e7(e,e._dur)},tt={_start:0,endTime:ep,totalDuration:ep},ti=function e(t,i,n){var r,s,a,o=t.labels,l=t._recent||tt,h=t.duration()>=1e8?l.endTime(!1):t._dur;return H(i)&&(isNaN(i)||i in o)?(s=i.charAt(0),a="%"===i.substr(-1),r=i.indexOf("="),"<"===s||">"===s)?(r>=0&&(i=i.replace(/=/,"")),("<"===s?l._start:l.endTime(l._repeat>=0))+(parseFloat(i.substr(1))||0)*(a?(r<0?l:n).totalDuration()/100:1)):r<0?(i in o||(o[i]=h),o[i]):(s=parseFloat(i.charAt(r-1)+i.substr(r+1)),a&&n&&(s=s/100*(Z(n)?n[0]:n).totalDuration()),r>1?e(t,i.substr(0,r-1),n)+s:h+s):null==i?h:+i},tn=function(e,t,i){var n,r,s=W(t[1]),a=(s?2:1)+(e<2?0:1),o=t[a];if(s&&(o.duration=t[1]),o.parent=i,e){for(n=o,r=i;r&&!("immediateRender"in n);)n=r.vars.defaults||{},r=Y(r.vars.inherit)&&r.parent;o.immediateRender=Y(n.immediateRender),e<2?o.runBackwards=1:o.startAt=t[a-1]}return new ir(t[0],o,t[a+1])},tr=function(e,t){return e||0===e?t(e):t},ts=function(e,t,i){return i<e?e:i>t?t:i},ta=function(e,t){return H(e)&&(t=ea.exec(e))?t[1]:""},to=[].slice,tl=function(e,t){return e&&j(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&j(e[0]))&&!e.nodeType&&e!==A},th=function(e,t,i){var n;return T&&!t&&T.selector?T.selector(e):H(e)&&!i&&(C||!tI())?to.call((t||P).querySelectorAll(e),0):Z(e)?(void 0===n&&(n=[]),e.forEach(function(e){var t;return H(e)&&!i||tl(e,1)?(t=n).push.apply(t,th(e)):n.push(e)})||n):tl(e)?to.call(e,0):e?[e]:[]},tu=function(e){return e=th(e)[0]||ec("Invalid scope")||{},function(t){var i=e.current||e.nativeElement||e;return th(t,i.querySelectorAll?i:i===e?ec("Invalid scope")||P.createElement("div"):e)}},tc=function(e){return e.sort(function(){return .5-Math.random()})},td=function(e){if(G(e))return e;var t=j(e)?e:{each:e},i=tH(t.ease),n=t.from||0,r=parseFloat(t.base)||0,s={},a=n>0&&n<1,o=isNaN(n)||a,l=t.axis,h=n,u=n;return H(n)?h=u=({center:.5,edges:.5,end:1})[n]||0:!a&&o&&(h=n[0],u=n[1]),function(e,a,c){var d,p,f,m,g,v,_,x,y,M=(c||t).length,S=s[M];if(!S){if(!(y="auto"===t.grid?0:(t.grid||[1,1e8])[1])){for(_=-1e8;_<(_=c[y++].getBoundingClientRect().left)&&y<M;);y<M&&y--}for(v=0,S=s[M]=[],d=o?Math.min(y,M)*h-.5:n%y,p=1e8===y?0:o?M*u/y-.5:n/y|0,_=0,x=1e8;v<M;v++)f=v%y-d,m=p-(v/y|0),S[v]=g=l?Math.abs("y"===l?m:f):k(f*f+m*m),g>_&&(_=g),g<x&&(x=g);"random"===n&&tc(S),S.max=_-x,S.min=x,S.v=M=(parseFloat(t.amount)||parseFloat(t.each)*(y>M?M-1:l?"y"===l?M/y:y:Math.max(y,M/y))||0)*("edges"===n?-1:1),S.b=M<0?r-M:r,S.u=ta(t.amount||t.each)||0,i=i&&M<0?tz(i):i}return M=(S[e]-S.min)/S.max||0,eR(S.b+(i?i(M):M)*S.v)+S.u}},tp=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var n=eR(Math.round(parseFloat(i)/e)*e*t);return(n-n%1)/t+(W(i)?0:ta(i))}},tf=function(e,t){var i,n,r=Z(e);return!r&&j(e)&&(i=r=e.radius||1e8,e.values?(n=!W((e=th(e.values))[0]))&&(i*=i):e=tp(e.increment)),tr(t,r?G(e)?function(t){return Math.abs((n=e(t))-t)<=i?n:t}:function(t){for(var r,s,a=parseFloat(n?t.x:t),o=parseFloat(n?t.y:0),l=1e8,h=0,u=e.length;u--;)(r=n?(r=e[u].x-a)*r+(s=e[u].y-o)*s:Math.abs(e[u]-a))<l&&(l=r,h=u);return h=!i||l<=i?e[h]:t,n||h===t||W(t)?h:h+ta(t)}:tp(e))},tm=function(e,t,i,n){return tr(Z(e)?!t:!0===i?(i=0,!1):!n,function(){return Z(e)?e[~~(Math.random()*e.length)]:(n=(i=i||1e-5)<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(t-e+.99*i))/i)*i*n)/n})},tg=function(e,t,i){return tr(i,function(i){return e[~~t(i)]})},tv=function(e){return e.replace(J,function(e){var t=e.indexOf("[")+1,i=e.substring(t||7,t?e.indexOf("]"):e.length-1).split(Q);return tm(t?i:+i[0],t?0:+i[1],+i[2]||1e-5)})},t_=function(e,t,i,n,r){var s=t-e,a=n-i;return tr(r,function(t){return i+((t-e)/s*a||0)})},tx=function(e,t,i){var n,r,s,a=e.labels,o=1e8;for(n in a)(r=a[n]-t)<0==!!i&&r&&o>(r=Math.abs(r))&&(s=n,o=r);return s},ty=function(e,t,i){var n,r,s,a=e.vars,o=a[t],l=T,h=e._ctx;if(o)return n=a[t+"Params"],r=a.callbackScope||e,i&&e_.length&&eI(),h&&(T=h),s=n?o.apply(r,n):o.call(r),T=l,s},tM=function(e){return ej(e),e.scrollTrigger&&e.scrollTrigger.kill(!!E),1>e.progress()&&ty(e,"onInterrupt"),e},tS=[],tb=function(e){if(e)if(e=!e.name&&e.default||e,q()||e.headless){var t=e.name,i=G(e),n=t&&!i&&e.init?function(){this._props=[]}:e,r={init:ep,render:ip,add:t3,kill:ig,modifier:im,rawVars:0},s={targetTest:0,get:0,getSetter:ih,aliases:{},register:0};if(tI(),e!==n){if(ey[t])return;eB(n,eB(eV(e,r),s)),ek(n.prototype,ek(r,eV(e,s))),ey[n.prop=t]=n,e.targetTest&&(eb.push(n),ev[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}ed(t,n),e.register&&e.register(iI,n,ix)}else tS.push(e)},tE={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},tT=function(e,t,i){return(6*(e+=e<0?1:e>1?-1:0)<1?t+(i-t)*e*6:e<.5?i:3*e<2?t+(i-t)*(2/3-e)*6:t)*255+.5|0},tw=function(e,t,i){var n,r,s,a,o,l,h,u,c,d,p=e?W(e)?[e>>16,e>>8&255,255&e]:0:tE.black;if(!p){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),tE[e])p=tE[e];else if("#"===e.charAt(0)){if(e.length<6&&(n=e.charAt(1),e="#"+n+n+(r=e.charAt(2))+r+(s=e.charAt(3))+s+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(p=parseInt(e.substr(1,6),16))>>16,p>>8&255,255&p,parseInt(e.substr(7),16)/255];p=[(e=parseInt(e.substr(1),16))>>16,e>>8&255,255&e]}else if("hsl"===e.substr(0,3))if(p=d=e.match(ee),t){if(~e.indexOf("="))return p=e.match(et),i&&p.length<4&&(p[3]=1),p}else a=p[0]%360/360,o=p[1]/100,r=(l=p[2]/100)<=.5?l*(o+1):l+o-l*o,n=2*l-r,p.length>3&&(p[3]*=1),p[0]=tT(a+1/3,n,r),p[1]=tT(a,n,r),p[2]=tT(a-1/3,n,r);else p=e.match(ee)||tE.transparent;p=p.map(Number)}return t&&!d&&(n=p[0]/255,l=((h=Math.max(n,r=p[1]/255,s=p[2]/255))+(u=Math.min(n,r,s)))/2,h===u?a=o=0:(c=h-u,o=l>.5?c/(2-h-u):c/(h+u),a=(h===n?(r-s)/c+6*(r<s):h===r?(s-n)/c+2:(n-r)/c+4)*60),p[0]=~~(a+.5),p[1]=~~(100*o+.5),p[2]=~~(100*l+.5)),i&&p.length<4&&(p[3]=1),p},tA=function(e){var t=[],i=[],n=-1;return e.split(tP).forEach(function(e){var r=e.match(ei)||[];t.push.apply(t,r),i.push(n+=r.length+1)}),t.c=i,t},tC=function(e,t,i){var n,r,s,a,o="",l=(e+o).match(tP),h=t?"hsla(":"rgba(",u=0;if(!l)return e;if(l=l.map(function(e){return(e=tw(e,t,1))&&h+(t?e[0]+","+e[1]+"%,"+e[2]+"%,"+e[3]:e.join(","))+")"}),i&&(s=tA(e),(n=i.c).join(o)!==s.c.join(o)))for(a=(r=e.replace(tP,"1").split(ei)).length-1;u<a;u++)o+=r[u]+(~n.indexOf(u)?l.shift()||h+"0,0,0,0)":(s.length?s:l.length?l:i).shift());if(!r)for(a=(r=e.split(tP)).length-1;u<a;u++)o+=r[u]+l[u];return o+r[a]},tP=function(){var e,t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in tE)t+="|"+e+"\\b";return RegExp(t+")","gi")}(),tR=/hsl[a]?\(/,tL=function(e){var t,i=e.join(" ");if(tP.lastIndex=0,tP.test(i))return t=tR.test(i),e[1]=tC(e[1],t),e[0]=tC(e[0],t,tA(e[1])),!0},tD=(f=Date.now,m=500,g=33,_=v=f(),x=1e3/240,y=1e3/240,M=[],S=function e(t){var i,n,r,s,a=f()-_,o=!0===t;if((a>m||a<0)&&(v+=a-g),_+=a,((i=(r=_-v)-y)>0||o)&&(s=++c.frame,d=r-1e3*c.time,c.time=r/=1e3,y+=i+(i>=x?4:x-i),n=1),o||(l=h(e)),n)for(p=0;p<M.length;p++)M[p](r,d,s,t)},c={time:0,frame:0,tick:function(){S(!0)},deltaRatio:function(e){return d/(1e3/(e||60))},wake:function(){R&&(!C&&q()&&(P=(A=C=window).document||{},eo.gsap=iI,(A.gsapVersions||(A.gsapVersions=[])).push(iI.version),eh(el||A.GreenSockGlobals||!A.gsap&&A||{}),tS.forEach(tb)),u="u">typeof requestAnimationFrame&&requestAnimationFrame,l&&c.sleep(),h=u||function(e){return setTimeout(e,y-1e3*c.time+1|0)},I=1,S(2))},sleep:function(){(u?cancelAnimationFrame:clearTimeout)(l),I=0,h=ep},lagSmoothing:function(e,t){g=Math.min(t||33,m=e||1/0)},fps:function(e){x=1e3/(e||240),y=1e3*c.time+x},add:function(e,t,i){var n=t?function(t,i,r,s){e(t,i,r,s),c.remove(n)}:e;return c.remove(e),M[i?"unshift":"push"](n),tI(),n},remove:function(e,t){~(t=M.indexOf(e))&&M.splice(t,1)&&p>=t&&p--},_listeners:M}),tI=function(){return!I&&tD.wake()},tU={},tN=/^[\d.\-M][\d.\-,\s]/,tO=/["']/g,tF=function(e){for(var t,i,n,r={},s=e.substr(1,e.length-3).split(":"),a=s[0],o=1,l=s.length;o<l;o++)i=s[o],t=o!==l-1?i.lastIndexOf(","):i.length,n=i.substr(0,t),r[a]=isNaN(n)?n.replace(tO,"").trim():+n,a=i.substr(t+1).trim();return r},tB=function(e){var t=e.indexOf("(")+1,i=e.indexOf(")"),n=e.indexOf("(",t);return e.substring(t,~n&&n<i?e.indexOf(")",i+1):i)},tk=function(e){var t=(e+"").split("("),i=tU[t[0]];return i&&t.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[tF(t[1])]:tB(e).split(",").map(eO)):tU._CE&&tN.test(e)?tU._CE("",e):i},tz=function(e){return function(t){return 1-e(1-t)}},tV=function e(t,i){for(var n,r=t._first;r;)r instanceof tK?e(r,i):!r.vars.yoyoEase||r._yoyo&&r._repeat||r._yoyo===i||(r.timeline?e(r.timeline,i):(n=r._ease,r._ease=r._yEase,r._yEase=n,r._yoyo=i)),r=r._next},tH=function(e,t){return e&&(G(e)?e:tU[e]||tk(e))||t},tG=function(e,t,i,n){void 0===i&&(i=function(e){return 1-t(1-e)}),void 0===n&&(n=function(e){return e<.5?t(2*e)/2:1-t((1-e)*2)/2});var r,s={easeIn:t,easeOut:i,easeInOut:n};return eC(e,function(e){for(var t in tU[e]=eo[e]=s,tU[r=e.toLowerCase()]=i,s)tU[r+("easeIn"===t?".in":"easeOut"===t?".out":".inOut")]=tU[e+"."+t]=s[t]}),s},tW=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e((t-.5)*2)/2}},tX=function e(t,i,n){var r=i>=1?i:1,s=(n||(t?.3:.45))/(i<1?i:1),a=s/O*(Math.asin(1/r)||0),o=function(e){return 1===e?1:r*Math.pow(2,-10*e)*V((e-a)*s)+1},l="out"===t?o:"in"===t?function(e){return 1-o(1-e)}:tW(o);return s=O/s,l.config=function(i,n){return e(t,i,n)},l},tj=function e(t,i){void 0===i&&(i=1.70158);var n=function(e){return e?--e*e*((i+1)*e+i)+1:0},r="out"===t?n:"in"===t?function(e){return 1-n(1-e)}:tW(n);return r.config=function(i){return e(t,i)},r};eC("Linear,Quad,Cubic,Quart,Quint,Strong",function(e,t){var i=t<5?t+1:t;tG(e+",Power"+(i-1),t?function(e){return Math.pow(e,i)}:function(e){return e},function(e){return 1-Math.pow(1-e,i)},function(e){return e<.5?Math.pow(2*e,i)/2:1-Math.pow((1-e)*2,i)/2})}),tU.Linear.easeNone=tU.none=tU.Linear.easeIn,tG("Elastic",tX("in"),tX("out"),tX()),tZ=2*(t$=1/2.75),tJ=2.5*t$,tG("Bounce",function(e){return 1-tQ(1-e)},tQ=function(e){return e<t$?7.5625*e*e:e<tZ?7.5625*Math.pow(e-1.5/2.75,2)+.75:e<tJ?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*Math.pow(e-2.625/2.75,2)+.984375}),tG("Expo",function(e){return Math.pow(2,10*(e-1))*e+e*e*e*e*e*e*(1-e)}),tG("Circ",function(e){return-(k(1-e*e)-1)}),tG("Sine",function(e){return 1===e?1:-z(e*F)+1}),tG("Back",tj("in"),tj("out"),tj()),tU.SteppedEase=tU.steps=eo.SteppedEase={config:function(e,t){void 0===e&&(e=1);var i=1/e,n=e+ +!t,r=+!!t,s=.99999999;return function(e){return((n*ts(0,s,e)|0)+r)*i}}},N.ease=tU["quad.out"],eC("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(e){return eE+=e+","+e+"Params,"});var tY=function(e,t){this.id=B++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:eA,this.set=t?t.getSetter:ih},tq=function(){function e(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,e7(this,+e.duration,1,1),this.data=e.data,T&&(this._ctx=T,T.data.push(this)),I||tD.wake()}var t=e.prototype;return t.delay=function(e){return e||0===e?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},t.duration=function(e){return arguments.length?this.totalDuration(this._repeat>0?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},t.totalDuration=function(e){return arguments.length?(this._dirty=0,e7(this,this._repeat<0?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(e,t){if(tI(),!arguments.length)return this._tTime;var i=this._dp;if(i&&i.smoothChildTiming&&this._ts){for(e0(this,e),!i._dp||i.parent||e1(i,this);i&&i.parent;)i.parent._time!==i._start+(i._ts>=0?i._tTime/i._ts:-((i.totalDuration()-i._tTime)/i._ts))&&i.totalTime(i._tTime,!0),i=i.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&e<this._tDur||this._ts<0&&e>0||!this._tDur&&!e)&&e2(this._dp,this,this._start-this._delay)}return(this._tTime!==e||!this._dur&&!t||this._initted&&1e-8===Math.abs(this._zTime)||!this._initted&&this._dur&&e||!e&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=e),eN(this,e,t)),this},t.time=function(e,t){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+e$(this))%(this._dur+this._rDelay)||(e?this._dur:0),t):this._time},t.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(1&this.iteration())?1-e:e)+e$(this),t):this.duration()?Math.min(1,this._time/this._dur):+(this.rawTime()>0)},t.iteration=function(e,t){var i=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*i,t):this._repeat?eZ(this._tTime,i)+1:1},t.timeScale=function(e,t){if(!arguments.length)return -1e-8===this._rts?0:this._rts;if(this._rts===e)return this;var i=this.parent&&this._ts?eJ(this.parent._time,this):this._tTime;return this._rts=+e||0,this._ts=this._ps||-1e-8===e?0:this._rts,this.totalTime(ts(-Math.abs(this._delay),this.totalDuration(),i),!1!==t),eQ(this),eq(this)},t.paused=function(e){return arguments.length?(this._ps!==e&&(this._ps=e,e?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(tI(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&1e-8!==Math.abs(this._zTime)&&(this._tTime-=1e-8)))),this):this._ps},t.startTime=function(e){if(arguments.length){this._start=eR(e);var t=this.parent||this._dp;return t&&(t._sort||!this.parent)&&e2(t,this,this._start-this._delay),this}return this._start},t.endTime=function(e){return this._start+(Y(e)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(e){var t=this.parent||this._dp;return t?e&&(!this._ts||this._repeat&&this._time&&1>this.totalProgress())?this._tTime%(this._dur+this._rDelay):this._ts?eJ(t.rawTime(e),this):this._tTime:this._tTime},t.revert=function(e){void 0===e&&(e=eg);var t=E;return E=e,eU(this)&&(this.timeline&&this.timeline.revert(e),this.totalTime(-.01,e.suppressEvents)),"nested"!==this.data&&!1!==e.kill&&this.kill(),E=t,this},t.globalTime=function(e){for(var t=this,i=arguments.length?e:t.rawTime();t;)i=t._start+i/(Math.abs(t._ts)||1),t=t._dp;return!this.parent&&this._sat?this._sat.globalTime(e):i},t.repeat=function(e){return arguments.length?(this._repeat=e===1/0?-2:e,te(this)):-2===this._repeat?1/0:this._repeat},t.repeatDelay=function(e){if(arguments.length){var t=this._time;return this._rDelay=e,te(this),t?this.time(t):this}return this._rDelay},t.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},t.seek=function(e,t){return this.totalTime(ti(this,e),Y(t))},t.restart=function(e,t){return this.play().totalTime(e?-this._delay:0,Y(t)),this._dur||(this._zTime=-1e-8),this},t.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},t.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},t.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-1e-8:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},t.isActive=function(){var e,t=this.parent||this._dp,i=this._start;return!!(!t||this._ts&&this._initted&&t.isActive()&&(e=t.rawTime(!0))>=i&&e<this.endTime(!0)-1e-8)},t.eventCallback=function(e,t,i){var n=this.vars;return arguments.length>1?(t?(n[e]=t,i&&(n[e+"Params"]=i),"onUpdate"===e&&(this._onUpdate=t)):delete n[e],this):n[e]},t.then=function(e){var t=this,i=t._prom;return new Promise(function(n){var r=G(e)?e:eF,s=function(){var e=t.then;t.then=null,i&&i(),G(r)&&(r=r(t))&&(r.then||r===t)&&(t.then=e),n(r),t.then=e};t._initted&&1===t.totalProgress()&&t._ts>=0||!t._tTime&&t._ts<0?s():t._prom=s})},t.kill=function(){tM(this)},e}();eB(tq.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var tK=function(e){function t(t,i){var r;return void 0===t&&(t={}),(r=e.call(this,t)||this).labels={},r.smoothChildTiming=!!t.smoothChildTiming,r.autoRemoveChildren=!!t.autoRemoveChildren,r._sort=Y(t.sortChildren),w&&e2(t.parent||w,n(r),i),t.reversed&&r.reverse(),t.paused&&r.paused(!0),t.scrollTrigger&&e3(n(r),t.scrollTrigger),r}r(t,e);var i=t.prototype;return i.to=function(e,t,i){return tn(0,arguments,this),this},i.from=function(e,t,i){return tn(1,arguments,this),this},i.fromTo=function(e,t,i,n){return tn(2,arguments,this),this},i.set=function(e,t,i){return t.duration=0,t.parent=this,eH(t).repeatDelay||(t.repeat=0),t.immediateRender=!!t.immediateRender,new ir(e,t,ti(this,i),1),this},i.call=function(e,t,i){return e2(this,ir.delayedCall(0,e,t),i)},i.staggerTo=function(e,t,i,n,r,s,a){return i.duration=t,i.stagger=i.stagger||n,i.onComplete=s,i.onCompleteParams=a,i.parent=this,new ir(e,i,ti(this,r)),this},i.staggerFrom=function(e,t,i,n,r,s,a){return i.runBackwards=1,eH(i).immediateRender=Y(i.immediateRender),this.staggerTo(e,t,i,n,r,s,a)},i.staggerFromTo=function(e,t,i,n,r,s,a,o){return n.startAt=i,eH(n).immediateRender=Y(n.immediateRender),this.staggerTo(e,t,n,r,s,a,o)},i.render=function(e,t,i){var n,r,s,a,o,l,h,u,c,d,p,f,m=this._time,g=this._dirty?this.totalDuration():this._tDur,v=this._dur,_=e<=0?0:eR(e),x=this._zTime<0!=e<0&&(this._initted||!v);if(this!==w&&_>g&&e>=0&&(_=g),_!==this._tTime||i||x){if(m!==this._time&&v&&(_+=this._time-m,e+=this._time-m),n=_,c=this._start,l=!(u=this._ts),x&&(v||(m=this._zTime),(e||!t)&&(this._zTime=e)),this._repeat){if(p=this._yoyo,o=v+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*o+e,t,i);if(n=eR(_%o),_===g?(a=this._repeat,n=v):((a=~~(d=eR(_/o)))&&a===d&&(n=v,a--),n>v&&(n=v)),d=eZ(this._tTime,o),!m&&this._tTime&&d!==a&&this._tTime-d*o-this._dur<=0&&(d=a),p&&1&a&&(n=v-n,f=1),a!==d&&!this._lock){var y=p&&1&d,M=y===(p&&1&a);if(a<d&&(y=!y),m=y?0:_%v?v:_,this._lock=1,this.render(m||(f?0:eR(a*o)),t,!v)._lock=0,this._tTime=_,!t&&this.parent&&ty(this,"onRepeat"),this.vars.repeatRefresh&&!f&&(this.invalidate()._lock=1,d=a),m&&m!==this._time||!this._ts!==l||this.vars.onRepeat&&!this.parent&&!this._act||(v=this._dur,g=this._tDur,M&&(this._lock=2,m=y?v:-1e-4,this.render(m,!0),this.vars.repeatRefresh&&!f&&this.invalidate()),this._lock=0,!this._ts&&!l))return this;tV(this,f)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(h=e9(this,eR(m),eR(n)))&&(_-=n-(n=h._start)),this._tTime=_,this._time=n,this._act=!u,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=e,m=0),!m&&_&&v&&!t&&!d&&(ty(this,"onStart"),this._tTime!==_))return this;if(n>=m&&e>=0)for(r=this._first;r;){if(s=r._next,(r._act||n>=r._start)&&r._ts&&h!==r){if(r.parent!==this)return this.render(e,t,i);if(r.render(r._ts>0?(n-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(n-r._start)*r._ts,t,i),n!==this._time||!this._ts&&!l){h=0,s&&(_+=this._zTime=-1e-8);break}}r=s}else{r=this._last;for(var S=e<0?e:n;r;){if(s=r._prev,(r._act||S<=r._end)&&r._ts&&h!==r){if(r.parent!==this)return this.render(e,t,i);if(r.render(r._ts>0?(S-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(S-r._start)*r._ts,t,i||E&&eU(r)),n!==this._time||!this._ts&&!l){h=0,s&&(_+=this._zTime=S?-1e-8:1e-8);break}}r=s}}if(h&&!t&&(this.pause(),h.render(n>=m?0:-1e-8)._zTime=n>=m?1:-1,this._ts))return this._start=c,eQ(this),this.render(e,t,i);this._onUpdate&&!t&&ty(this,"onUpdate",!0),(_===g&&this._tTime>=this.totalDuration()||!_&&m)&&(c===this._start||Math.abs(u)!==Math.abs(this._ts))&&!this._lock&&((e||!v)&&(_===g&&this._ts>0||!_&&this._ts<0)&&ej(this,1),t||e<0&&!m||!_&&!m&&g||(ty(this,_===g&&e>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(_<g&&this.timeScale()>0)&&this._prom()))}return this},i.add=function(e,t){var i=this;if(W(t)||(t=ti(this,t,e)),!(e instanceof tq)){if(Z(e))return e.forEach(function(e){return i.add(e,t)}),this;if(H(e))return this.addLabel(e,t);if(!G(e))return this;e=ir.delayedCall(0,e)}return this!==e?e2(this,e,t):this},i.getChildren=function(e,t,i,n){void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===n&&(n=-1e8);for(var r=[],s=this._first;s;)s._start>=n&&(s instanceof ir?t&&r.push(s):(i&&r.push(s),e&&r.push.apply(r,s.getChildren(!0,t,i)))),s=s._next;return r},i.getById=function(e){for(var t=this.getChildren(1,1,1),i=t.length;i--;)if(t[i].vars.id===e)return t[i]},i.remove=function(e){return H(e)?this.removeLabel(e):G(e)?this.killTweensOf(e):(e.parent===this&&eX(this,e),e===this._recent&&(this._recent=this._last),eY(this))},i.totalTime=function(t,i){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=eR(tD.time-(this._ts>0?t/this._ts:-((this.totalDuration()-t)/this._ts)))),e.prototype.totalTime.call(this,t,i),this._forcing=0,this):this._tTime},i.addLabel=function(e,t){return this.labels[e]=ti(this,t),this},i.removeLabel=function(e){return delete this.labels[e],this},i.addPause=function(e,t,i){var n=ir.delayedCall(0,t||ep,i);return n.data="isPause",this._hasPause=1,e2(this,n,ti(this,e))},i.removePause=function(e){var t=this._first;for(e=ti(this,e);t;)t._start===e&&"isPause"===t.data&&ej(t),t=t._next},i.killTweensOf=function(e,t,i){for(var n=this.getTweensOf(e,i),r=n.length;r--;)t0!==n[r]&&n[r].kill(e,t);return this},i.getTweensOf=function(e,t){for(var i,n=[],r=th(e),s=this._first,a=W(t);s;)s instanceof ir?eD(s._targets,r)&&(a?(!t0||s._initted&&s._ts)&&s.globalTime(0)<=t&&s.globalTime(s.totalDuration())>t:!t||s.isActive())&&n.push(s):(i=s.getTweensOf(r,t)).length&&n.push.apply(n,i),s=s._next;return n},i.tweenTo=function(e,t){t=t||{};var i,n=this,r=ti(n,e),s=t,a=s.startAt,o=s.onStart,l=s.onStartParams,h=s.immediateRender,u=ir.to(n,eB({ease:t.ease||"none",lazy:!1,immediateRender:!1,time:r,overwrite:"auto",duration:t.duration||Math.abs((r-(a&&"time"in a?a.time:n._time))/n.timeScale())||1e-8,onStart:function(){if(n.pause(),!i){var e=t.duration||Math.abs((r-(a&&"time"in a?a.time:n._time))/n.timeScale());u._dur!==e&&e7(u,e,0,1).render(u._time,!0,!0),i=1}o&&o.apply(u,l||[])}},t));return h?u.render(0):u},i.tweenFromTo=function(e,t,i){return this.tweenTo(t,eB({startAt:{time:ti(this,e)}},i))},i.recent=function(){return this._recent},i.nextLabel=function(e){return void 0===e&&(e=this._time),tx(this,ti(this,e))},i.previousLabel=function(e){return void 0===e&&(e=this._time),tx(this,ti(this,e),1)},i.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.previousLabel(this._time+1e-8)},i.shiftChildren=function(e,t,i){void 0===i&&(i=0);var n,r=this._first,s=this.labels;for(e=eR(e);r;)r._start>=i&&(r._start+=e,r._end+=e),r=r._next;if(t)for(n in s)s[n]>=i&&(s[n]+=e);return eY(this)},i.invalidate=function(t){var i=this._first;for(this._lock=0;i;)i.invalidate(t),i=i._next;return e.prototype.invalidate.call(this,t)},i.clear=function(e){void 0===e&&(e=!0);for(var t,i=this._first;i;)t=i._next,this.remove(i),i=t;return this._dp&&(this._time=this._tTime=this._pTime=0),e&&(this.labels={}),eY(this)},i.totalDuration=function(e){var t,i,n,r=0,s=this._last,a=1e8;if(arguments.length)return this.timeScale((this._repeat<0?this.duration():this.totalDuration())/(this.reversed()?-e:e));if(this._dirty){for(n=this.parent;s;)t=s._prev,s._dirty&&s.totalDuration(),(i=s._start)>a&&this._sort&&s._ts&&!this._lock?(this._lock=1,e2(this,s,i-s._delay,1)._lock=0):a=i,i<0&&s._ts&&(r-=i,(!n&&!this._dp||n&&n.smoothChildTiming)&&(this._start+=eR(i/this._ts),this._time-=i,this._tTime-=i),this.shiftChildren(-i,!1,-Infinity),a=0),s._end>r&&s._ts&&(r=s._end),s=t;e7(this,this===w&&this._time>r?this._time:r,1,1),this._dirty=0}return this._tDur},t.updateRoot=function(e){if(w._ts&&(eN(w,eJ(e,w)),L=tD.frame),tD.frame>=eS){eS+=U.autoSleep||120;var t=w._first;if((!t||!t._ts)&&U.autoSleep&&tD._listeners.length<2){for(;t&&!t._ts;)t=t._next;t||tD.sleep()}}},t}(tq);eB(tK.prototype,{_lock:0,_hasPause:0,_forcing:0});var t$,tZ,tJ,tQ,t0,t1,t2=function(e,t,i,n,r,s,a){var o,l,h,u,c,d,p,f,m=new ix(this._pt,e,t,0,1,id,null,r),g=0,v=0;for(m.b=i,m.e=n,i+="",n+="",(p=~n.indexOf("random("))&&(n=tv(n)),s&&(s(f=[i,n],e,t),i=f[0],n=f[1]),l=i.match(en)||[];o=en.exec(n);)u=o[0],c=n.substring(g,o.index),h?h=(h+1)%5:"rgba("===c.substr(-5)&&(h=1),u!==l[v++]&&(d=parseFloat(l[v-1])||0,m._pt={_next:m._pt,p:c||1===v?c:",",s:d,c:"="===u.charAt(1)?eL(d,u)-d:parseFloat(u)-d,m:h&&h<4?Math.round:0},g=en.lastIndex);return m.c=g<n.length?n.substring(g,n.length):"",m.fp=a,(er.test(n)||p)&&(m.e=0),this._pt=m,m},t3=function(e,t,i,n,r,s,a,o,l,h){G(n)&&(n=n(r||0,e,s));var u,c=e[t],d="get"!==i?i:G(c)?l?e[t.indexOf("set")||!G(e["get"+t.substr(3)])?t:"get"+t.substr(3)](l):e[t]():c,p=G(c)?l?io:ia:is;if(H(n)&&(~n.indexOf("random(")&&(n=tv(n)),"="===n.charAt(1)&&((u=eL(d,n)+(ta(d)||0))||0===u)&&(n=u)),!h||d!==n||t1)return isNaN(d*n)||""===n?(c||t in e||eu(t,n),t2.call(this,e,t,d,n,p,o||U.stringFilter,l)):(u=new ix(this._pt,e,t,+d||0,n-(d||0),"boolean"==typeof c?ic:iu,0,p),l&&(u.fp=l),a&&u.modifier(a,this,e),this._pt=u)},t4=function(e,t,i,n,r){if(G(e)&&(e=ie(e,r,t,i,n)),!j(e)||e.style&&e.nodeType||Z(e)||$(e))return H(e)?ie(e,r,t,i,n):e;var s,a={};for(s in e)a[s]=ie(e[s],r,t,i,n);return a},t5=function(e,t,i,n,r,s){var a,o,l,h;if(ey[e]&&!1!==(a=new ey[e]).init(r,a.rawVars?t[e]:t4(t[e],n,r,s,i),i,n,s)&&(i._pt=o=new ix(i._pt,r,e,0,1,a.render,a,0,a.priority),i!==D))for(l=i._ptLookup[i._targets.indexOf(r)],h=a._props.length;h--;)l[a._props[h]]=o;return a},t6=function e(t,i,n){var r,s,a,o,l,h,u,c,d,p,f,m,g,v=t.vars,_=v.ease,x=v.startAt,y=v.immediateRender,M=v.lazy,S=v.onUpdate,T=v.runBackwards,A=v.yoyoEase,C=v.keyframes,P=v.autoRevert,R=t._dur,L=t._startAt,D=t._targets,I=t.parent,U=I&&"nested"===I.data?I.vars.targets:D,O="auto"===t._overwrite&&!b,F=t.timeline;if(!F||C&&_||(_="none"),t._ease=tH(_,N.ease),t._yEase=A?tz(tH(!0===A?_:A,N.ease)):0,A&&t._yoyo&&!t._repeat&&(A=t._yEase,t._yEase=t._ease,t._ease=A),t._from=!F&&!!v.runBackwards,!F||C&&!v.stagger){if(m=(c=D[0]?ew(D[0]).harness:0)&&v[c.prop],r=eV(v,ev),L&&(L._zTime<0&&L.progress(1),i<0&&T&&y&&!P?L.render(-1,!0):L.revert(T&&R?em:ef),L._lazy=0),x){if(ej(t._startAt=ir.set(D,eB({data:"isStart",overwrite:!1,parent:I,immediateRender:!0,lazy:!L&&Y(M),startAt:null,delay:0,onUpdate:S&&function(){return ty(t,"onUpdate")},stagger:0},x))),t._startAt._dp=0,t._startAt._sat=t,i<0&&(E||!y&&!P)&&t._startAt.revert(em),y&&R&&i<=0&&n<=0){i&&(t._zTime=i);return}}else if(T&&R&&!L)if(i&&(y=!1),a=eB({overwrite:!1,data:"isFromStart",lazy:y&&!L&&Y(M),immediateRender:y,stagger:0,parent:I},r),m&&(a[c.prop]=m),ej(t._startAt=ir.set(D,a)),t._startAt._dp=0,t._startAt._sat=t,i<0&&(E?t._startAt.revert(em):t._startAt.render(-1,!0)),t._zTime=i,y){if(!i)return}else e(t._startAt,1e-8,1e-8);for(s=0,t._pt=t._ptCache=0,M=R&&Y(M)||M&&!R;s<D.length;s++){if(u=(l=D[s])._gsap||eT(D)[s]._gsap,t._ptLookup[s]=p={},ex[u.id]&&e_.length&&eI(),f=U===D?s:U.indexOf(l),c&&!1!==(d=new c).init(l,m||r,t,f,U)&&(t._pt=o=new ix(t._pt,l,d.name,0,1,d.render,d,0,d.priority),d._props.forEach(function(e){p[e]=o}),d.priority&&(h=1)),!c||m)for(a in r)ey[a]&&(d=t5(a,r,t,f,l,U))?d.priority&&(h=1):p[a]=o=t3.call(t,l,a,"get",r[a],f,U,0,v.stringFilter);t._op&&t._op[s]&&t.kill(l,t._op[s]),O&&t._pt&&(t0=t,w.killTweensOf(l,p,t.globalTime(i)),g=!t.parent,t0=0),t._pt&&M&&(ex[u.id]=1)}h&&i_(t),t._onInit&&t._onInit(t)}t._onUpdate=S,t._initted=(!t._op||t._pt)&&!g,C&&i<=0&&F.render(1e8,!0,!0)},t8=function(e,t,i,n,r,s,a,o){var l,h,u,c,d=(e._pt&&e._ptCache||(e._ptCache={}))[t];if(!d)for(d=e._ptCache[t]=[],u=e._ptLookup,c=e._targets.length;c--;){if((l=u[c][t])&&l.d&&l.d._pt)for(l=l.d._pt;l&&l.p!==t&&l.fp!==t;)l=l._next;if(!l)return t1=1,e.vars[t]="+=0",t6(e,a),t1=0,o?ec(t+" not eligible for reset"):1;d.push(l)}for(c=d.length;c--;)(l=(h=d[c])._pt||h).s=(n||0===n)&&!r?n:l.s+(n||0)+s*l.c,l.c=i-l.s,h.e&&(h.e=eP(i)+ta(h.e)),h.b&&(h.b=l.s+ta(h.b))},t9=function(e,t){var i,n,r,s,a=e[0]?ew(e[0]).harness:0,o=a&&a.aliases;if(!o)return t;for(n in i=ek({},t),o)if(n in i)for(r=(s=o[n].split(",")).length;r--;)i[s[r]]=i[n];return i},t7=function(e,t,i,n){var r,s,a=t.ease||n||"power1.inOut";if(Z(t))s=i[e]||(i[e]=[]),t.forEach(function(e,i){return s.push({t:i/(t.length-1)*100,v:e,e:a})});else for(r in t)s=i[r]||(i[r]=[]),"ease"===r||s.push({t:parseFloat(e),v:t[r],e:a})},ie=function(e,t,i,n,r){return G(e)?e.call(t,i,n,r):H(e)&&~e.indexOf("random(")?tv(e):e},it=eE+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",ii={};eC(it+",id,stagger,delay,duration,paused,scrollTrigger",function(e){return ii[e]=1});var ir=function(e){function t(t,i,r,s){"number"==typeof i&&(r.duration=i,i=r,r=null);var a,o,l,h,u,c,d,p,f=e.call(this,s?i:eH(i))||this,m=f.vars,g=m.duration,v=m.delay,_=m.immediateRender,x=m.stagger,y=m.overwrite,M=m.keyframes,S=m.defaults,E=m.scrollTrigger,T=m.yoyoEase,A=i.parent||w,C=(Z(t)||$(t)?W(t[0]):"length"in i)?[t]:th(t);if(f._targets=C.length?eT(C):ec("GSAP target "+t+" not found. https://gsap.com",!U.nullTargetWarn)||[],f._ptLookup=[],f._overwrite=y,M||x||K(g)||K(v)){if(i=f.vars,(a=f.timeline=new tK({data:"nested",defaults:S||{},targets:A&&"nested"===A.data?A.vars.targets:C})).kill(),a.parent=a._dp=n(f),a._start=0,x||K(g)||K(v)){if(h=C.length,d=x&&td(x),j(x))for(u in x)~it.indexOf(u)&&(p||(p={}),p[u]=x[u]);for(o=0;o<h;o++)(l=eV(i,ii)).stagger=0,T&&(l.yoyoEase=T),p&&ek(l,p),c=C[o],l.duration=+ie(g,n(f),o,c,C),l.delay=(+ie(v,n(f),o,c,C)||0)-f._delay,!x&&1===h&&l.delay&&(f._delay=v=l.delay,f._start+=v,l.delay=0),a.to(c,l,d?d(o,c,C):0),a._ease=tU.none;a.duration()?g=v=0:f.timeline=0}else if(M){eH(eB(a.vars.defaults,{ease:"none"})),a._ease=tH(M.ease||i.ease||"none");var P,R,L,D=0;if(Z(M))M.forEach(function(e){return a.to(C,e,">")}),a.duration();else{for(u in l={},M)"ease"===u||"easeEach"===u||t7(u,M[u],l,M.easeEach);for(u in l)for(o=0,P=l[u].sort(function(e,t){return e.t-t.t}),D=0;o<P.length;o++)(L={ease:(R=P[o]).e,duration:(R.t-(o?P[o-1].t:0))/100*g})[u]=R.v,a.to(C,L,D),D+=L.duration;a.duration()<g&&a.to({},{duration:g-a.duration()})}}g||f.duration(g=a.duration())}else f.timeline=0;return!0!==y||b||(t0=n(f),w.killTweensOf(C),t0=0),e2(A,n(f),r),i.reversed&&f.reverse(),i.paused&&f.paused(!0),(_||!g&&!M&&f._start===eR(A._time)&&Y(_)&&function e(t){return!t||t._ts&&e(t.parent)}(n(f))&&"nested"!==A.data)&&(f._tTime=-1e-8,f.render(Math.max(0,-v)||0)),E&&e3(n(f),E),f}r(t,e);var i=t.prototype;return i.render=function(e,t,i){var n,r,s,a,o,l,h,u,c,d=this._time,p=this._tDur,f=this._dur,m=e<0,g=e>p-1e-8&&!m?p:e<1e-8?0:e;if(f){if(g!==this._tTime||!e||i||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==m||this._lazy){if(n=g,u=this.timeline,this._repeat){if(a=f+this._rDelay,this._repeat<-1&&m)return this.totalTime(100*a+e,t,i);if(n=eR(g%a),g===p?(s=this._repeat,n=f):(s=~~(o=eR(g/a)))&&s===o?(n=f,s--):n>f&&(n=f),(l=this._yoyo&&1&s)&&(c=this._yEase,n=f-n),o=eZ(this._tTime,a),n===d&&!i&&this._initted&&s===o)return this._tTime=g,this;s!==o&&(u&&this._yEase&&tV(u,l),this.vars.repeatRefresh&&!l&&!this._lock&&n!==a&&this._initted&&(this._lock=i=1,this.render(eR(a*s),!0).invalidate()._lock=0))}if(!this._initted){if(e4(this,m?e:n,i,t,g))return this._tTime=0,this;if(d!==this._time&&!(i&&this.vars.repeatRefresh&&s!==o))return this;if(f!==this._dur)return this.render(e,t,i)}if(this._tTime=g,this._time=n,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=h=(c||this._ease)(n/f),this._from&&(this.ratio=h=1-h),!d&&g&&!t&&!o&&(ty(this,"onStart"),this._tTime!==g))return this;for(r=this._pt;r;)r.r(h,r.d),r=r._next;u&&u.render(e<0?e:u._dur*u._ease(n/this._dur),t,i)||this._startAt&&(this._zTime=e),this._onUpdate&&!t&&(m&&eK(this,e,t,i),ty(this,"onUpdate")),this._repeat&&s!==o&&this.vars.onRepeat&&!t&&this.parent&&ty(this,"onRepeat"),(g===this._tDur||!g)&&this._tTime===g&&(m&&!this._onUpdate&&eK(this,e,!0,!0),(e||!f)&&(g===this._tDur&&this._ts>0||!g&&this._ts<0)&&ej(this,1),!t&&!(m&&!d)&&(g||d||l)&&(ty(this,g===p?"onComplete":"onReverseComplete",!0),this._prom&&!(g<p&&this.timeScale()>0)&&this._prom()))}}else e8(this,e,t,i);return this},i.targets=function(){return this._targets},i.invalidate=function(t){return t&&this.vars.runBackwards||(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(t),e.prototype.invalidate.call(this,t)},i.resetTo=function(e,t,i,n,r){I||tD.wake(),this._ts||this.play();var s=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return(this._initted||t6(this,s),t8(this,e,t,i,n,this._ease(s/this._dur),s,r))?this.resetTo(e,t,i,n,1):(e0(this,0),this.parent||eW(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},i.kill=function(e,t){if(void 0===t&&(t="all"),!e&&(!t||"all"===t))return this._lazy=this._pt=0,this.parent?tM(this):this.scrollTrigger&&this.scrollTrigger.kill(!!E),this;if(this.timeline){var i=this.timeline.totalDuration();return this.timeline.killTweensOf(e,t,t0&&!0!==t0.vars.overwrite)._first||tM(this),this.parent&&i!==this.timeline.totalDuration()&&e7(this,this._dur*this.timeline._tDur/i,0,1),this}var n,r,s,a,o,l,h,u=this._targets,c=e?th(e):u,d=this._ptLookup,p=this._pt;if((!t||"all"===t)&&eG(u,c))return"all"===t&&(this._pt=0),tM(this);for(n=this._op=this._op||[],"all"!==t&&(H(t)&&(o={},eC(t,function(e){return o[e]=1}),t=o),t=t9(u,t)),h=u.length;h--;)if(~c.indexOf(u[h]))for(o in r=d[h],"all"===t?(n[h]=t,a=r,s={}):(s=n[h]=n[h]||{},a=t),a)(l=r&&r[o])&&("kill"in l.d&&!0!==l.d.kill(o)||eX(this,l,"_pt"),delete r[o]),"all"!==s&&(s[o]=1);return this._initted&&!this._pt&&p&&tM(this),this},t.to=function(e,i){return new t(e,i,arguments[2])},t.from=function(e,t){return tn(1,arguments)},t.delayedCall=function(e,i,n,r){return new t(i,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:e,onComplete:i,onReverseComplete:i,onCompleteParams:n,onReverseCompleteParams:n,callbackScope:r})},t.fromTo=function(e,t,i){return tn(2,arguments)},t.set=function(e,i){return i.duration=0,i.repeatDelay||(i.repeat=0),new t(e,i)},t.killTweensOf=function(e,t,i){return w.killTweensOf(e,t,i)},t}(tq);eB(ir.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),eC("staggerTo,staggerFrom,staggerFromTo",function(e){ir[e]=function(){var t=new tK,i=to.call(arguments,0);return i.splice("staggerFromTo"===e?5:4,0,0),t[e].apply(t,i)}});var is=function(e,t,i){return e[t]=i},ia=function(e,t,i){return e[t](i)},io=function(e,t,i,n){return e[t](n.fp,i)},il=function(e,t,i){return e.setAttribute(t,i)},ih=function(e,t){return G(e[t])?ia:X(e[t])&&e.setAttribute?il:is},iu=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},ic=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},id=function(e,t){var i=t._pt,n="";if(!e&&t.b)n=t.b;else if(1===e&&t.e)n=t.e;else{for(;i;)n=i.p+(i.m?i.m(i.s+i.c*e):Math.round((i.s+i.c*e)*1e4)/1e4)+n,i=i._next;n+=t.c}t.set(t.t,t.p,n,t)},ip=function(e,t){for(var i=t._pt;i;)i.r(e,i.d),i=i._next},im=function(e,t,i,n){for(var r,s=this._pt;s;)r=s._next,s.p===n&&s.modifier(e,t,i),s=r},ig=function(e){for(var t,i,n=this._pt;n;)i=n._next,(n.p!==e||n.op)&&n.op!==e?n.dep||(t=1):eX(this,n,"_pt"),n=i;return!t},iv=function(e,t,i,n){n.mSet(e,t,n.m.call(n.tween,i,n.mt),n)},i_=function(e){for(var t,i,n,r,s=e._pt;s;){for(t=s._next,i=n;i&&i.pr>s.pr;)i=i._next;(s._prev=i?i._prev:r)?s._prev._next=s:n=s,(s._next=i)?i._prev=s:r=s,s=t}e._pt=n},ix=function(){function e(e,t,i,n,r,s,a,o,l){this.t=t,this.s=n,this.c=r,this.p=i,this.r=s||iu,this.d=a||this,this.set=o||is,this.pr=l||0,this._next=e,e&&(e._prev=this)}return e.prototype.modifier=function(e,t,i){this.mSet=this.mSet||this.set,this.set=iv,this.m=e,this.mt=i,this.tween=t},e}();eC(eE+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(e){return ev[e]=1}),eo.TweenMax=eo.TweenLite=ir,eo.TimelineLite=eo.TimelineMax=tK,w=new tK({sortChildren:!1,defaults:N,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),U.stringFilter=tL;var iy=[],iM={},iS=[],ib=0,iE=0,iT=function(e){return(iM[e]||iS).map(function(e){return e()})},iw=function(){var e=Date.now(),t=[];e-ib>2&&(iT("matchMediaInit"),iy.forEach(function(e){var i,n,r,s,a=e.queries,o=e.conditions;for(n in a)(i=A.matchMedia(a[n]).matches)&&(r=1),i!==o[n]&&(o[n]=i,s=1);s&&(e.revert(),r&&t.push(e))}),iT("matchMediaRevert"),t.forEach(function(e){return e.onMatch(e,function(t){return e.add(null,t)})}),ib=e,iT("matchMedia"))},iA=function(){function e(e,t){this.selector=t&&tu(t),this.data=[],this._r=[],this.isReverted=!1,this.id=iE++,e&&this.add(e)}var t=e.prototype;return t.add=function(e,t,i){G(e)&&(i=t,t=e,e=G);var n=this,r=function(){var e,r=T,s=n.selector;return r&&r!==n&&r.data.push(n),i&&(n.selector=tu(i)),T=n,e=t.apply(n,arguments),G(e)&&n._r.push(e),T=r,n.selector=s,n.isReverted=!1,e};return n.last=r,e===G?r(n,function(e){return n.add(null,e)}):e?n[e]=r:r},t.ignore=function(e){var t=T;T=null,e(this),T=t},t.getTweens=function(){var t=[];return this.data.forEach(function(i){return i instanceof e?t.push.apply(t,i.getTweens()):i instanceof ir&&!(i.parent&&"nested"===i.parent.data)&&t.push(i)}),t},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(e,t){var i=this;if(e){for(var n,r=i.getTweens(),s=i.data.length;s--;)"isFlip"===(n=i.data[s]).data&&(n.revert(),n.getChildren(!0,!0,!1).forEach(function(e){return r.splice(r.indexOf(e),1)}));for(r.map(function(e){return{g:e._dur||e._delay||e._sat&&!e._sat.vars.immediateRender?e.globalTime(0):-1/0,t:e}}).sort(function(e,t){return t.g-e.g||-1/0}).forEach(function(t){return t.t.revert(e)}),s=i.data.length;s--;)(n=i.data[s])instanceof tK?"nested"!==n.data&&(n.scrollTrigger&&n.scrollTrigger.revert(),n.kill()):n instanceof ir||!n.revert||n.revert(e);i._r.forEach(function(t){return t(e,i)}),i.isReverted=!0}else this.data.forEach(function(e){return e.kill&&e.kill()});if(this.clear(),t)for(var a=iy.length;a--;)iy[a].id===this.id&&iy.splice(a,1)},t.revert=function(e){this.kill(e||{})},e}(),iC=function(){function e(e){this.contexts=[],this.scope=e,T&&T.data.push(this)}var t=e.prototype;return t.add=function(e,t,i){j(e)||(e={matches:e});var n,r,s,a=new iA(0,i||this.scope),o=a.conditions={};for(r in T&&!a.selector&&(a.selector=T.selector),this.contexts.push(a),t=a.add("onMatch",t),a.queries=e,e)"all"===r?s=1:(n=A.matchMedia(e[r]))&&(0>iy.indexOf(a)&&iy.push(a),(o[r]=n.matches)&&(s=1),n.addListener?n.addListener(iw):n.addEventListener("change",iw));return s&&t(a,function(e){return a.add(null,e)}),this},t.revert=function(e){this.kill(e||{})},t.kill=function(e){this.contexts.forEach(function(t){return t.kill(e,!0)})},e}(),iP={registerPlugin:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];t.forEach(function(e){return tb(e)})},timeline:function(e){return new tK(e)},getTweensOf:function(e,t){return w.getTweensOf(e,t)},getProperty:function(e,t,i,n){H(e)&&(e=th(e)[0]);var r=ew(e||{}).get,s=i?eF:eO;return"native"===i&&(i=""),e?t?s((ey[t]&&ey[t].get||r)(e,t,i,n)):function(t,i,n){return s((ey[t]&&ey[t].get||r)(e,t,i,n))}:e},quickSetter:function(e,t,i){if((e=th(e)).length>1){var n=e.map(function(e){return iI.quickSetter(e,t,i)}),r=n.length;return function(e){for(var t=r;t--;)n[t](e)}}e=e[0]||{};var s=ey[t],a=ew(e),o=a.harness&&(a.harness.aliases||{})[t]||t,l=s?function(t){var n=new s;D._pt=0,n.init(e,i?t+i:t,D,0,[e]),n.render(1,n),D._pt&&ip(1,D)}:a.set(e,o);return s?l:function(t){return l(e,o,i?t+i:t,a,1)}},quickTo:function(e,t,i){var n,r=iI.to(e,eB(((n={})[t]="+=0.1",n.paused=!0,n.stagger=0,n),i||{})),s=function(e,i,n){return r.resetTo(t,e,i,n)};return s.tween=r,s},isTweening:function(e){return w.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=tH(e.ease,N.ease)),ez(N,e||{})},config:function(e){return ez(U,e||{})},registerEffect:function(e){var t=e.name,i=e.effect,n=e.plugins,r=e.defaults,s=e.extendTimeline;(n||"").split(",").forEach(function(e){return e&&!ey[e]&&!eo[e]&&ec(t+" effect requires "+e+" plugin.")}),eM[t]=function(e,t,n){return i(th(e),eB(t||{},r),n)},s&&(tK.prototype[t]=function(e,i,n){return this.add(eM[t](e,j(i)?i:(n=i)&&{},this),n)})},registerEase:function(e,t){tU[e]=tH(t)},parseEase:function(e,t){return arguments.length?tH(e,t):tU},getById:function(e){return w.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var i,n,r=new tK(e);for(r.smoothChildTiming=Y(e.smoothChildTiming),w.remove(r),r._dp=0,r._time=r._tTime=w._time,i=w._first;i;)n=i._next,(t||!(!i._dur&&i instanceof ir&&i.vars.onComplete===i._targets[0]))&&e2(r,i,i._start-i._delay),i=n;return e2(w,r,0),r},context:function(e,t){return e?new iA(e,t):T},matchMedia:function(e){return new iC(e)},matchMediaRefresh:function(){return iy.forEach(function(e){var t,i,n=e.conditions;for(i in n)n[i]&&(n[i]=!1,t=1);t&&e.revert()})||iw()},addEventListener:function(e,t){var i=iM[e]||(iM[e]=[]);~i.indexOf(t)||i.push(t)},removeEventListener:function(e,t){var i=iM[e],n=i&&i.indexOf(t);n>=0&&i.splice(n,1)},utils:{wrap:function e(t,i,n){var r=i-t;return Z(t)?tg(t,e(0,t.length),i):tr(n,function(e){return(r+(e-t)%r)%r+t})},wrapYoyo:function e(t,i,n){var r=i-t,s=2*r;return Z(t)?tg(t,e(0,t.length-1),i):tr(n,function(e){return e=(s+(e-t)%s)%s||0,t+(e>r?s-e:e)})},distribute:td,random:tm,snap:tf,normalize:function(e,t,i){return t_(e,t,0,1,i)},getUnit:ta,clamp:function(e,t,i){return tr(i,function(i){return ts(e,t,i)})},splitColor:tw,toArray:th,selector:tu,mapRange:t_,pipe:function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e){return t.reduce(function(e,t){return t(e)},e)}},unitize:function(e,t){return function(i){return e(parseFloat(i))+(t||ta(i))}},interpolate:function e(t,i,n,r){var s=isNaN(t+i)?0:function(e){return(1-e)*t+e*i};if(!s){var a,o,l,h,u,c=H(t),d={};if(!0===n&&(r=1)&&(n=null),c)t={p:t},i={p:i};else if(Z(t)&&!Z(i)){for(o=1,l=[],u=(h=t.length)-2;o<h;o++)l.push(e(t[o-1],t[o]));h--,s=function(e){var t=Math.min(u,~~(e*=h));return l[t](e-t)},n=i}else r||(t=ek(Z(t)?[]:{},t));if(!l){for(a in i)t3.call(d,t,a,"get",i[a]);s=function(e){return ip(e,d)||(c?t.p:t)}}}return tr(n,s)},shuffle:tc},install:eh,effects:eM,ticker:tD,updateRoot:tK.updateRoot,plugins:ey,globalTimeline:w,core:{PropTween:ix,globals:ed,Tween:ir,Timeline:tK,Animation:tq,getCache:ew,_removeLinkedListItem:eX,reverting:function(){return E},context:function(e){return e&&T&&(T.data.push(e),e._ctx=T),T},suppressOverwrites:function(e){return b=e}}};eC("to,from,fromTo,delayedCall,set,killTweensOf",function(e){return iP[e]=ir[e]}),tD.add(tK.updateRoot),D=iP.to({},{duration:0});var iR=function(e,t){for(var i=e._pt;i&&i.p!==t&&i.op!==t&&i.fp!==t;)i=i._next;return i},iL=function(e,t){var i,n,r,s=e._targets;for(i in t)for(n=s.length;n--;)(r=e._ptLookup[n][i])&&(r=r.d)&&(r._pt&&(r=iR(r,i)),r&&r.modifier&&r.modifier(t[i],e,s[n],i))},iD=function(e,t){return{name:e,headless:1,rawVars:1,init:function(e,i,n){n._onInit=function(e){var n,r;if(H(i)&&(n={},eC(i,function(e){return n[e]=1}),i=n),t){for(r in n={},i)n[r]=t(i[r]);i=n}iL(e,i)}}}},iI=iP.registerPlugin({name:"attr",init:function(e,t,i,n,r){var s,a,o;for(s in this.tween=i,t)o=e.getAttribute(s)||"",(a=this.add(e,"setAttribute",(o||0)+"",t[s],n,r,0,0,s)).op=s,a.b=o,this._props.push(s)},render:function(e,t){for(var i=t._pt;i;)E?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",headless:1,init:function(e,t){for(var i=t.length;i--;)this.add(e,i,e[i]||0,t[i],0,0,0,0,0,1)}},iD("roundProps",tp),iD("modifiers"),iD("snap",tf))||iP;ir.version=tK.version=iI.version="3.14.2",R=1,q()&&tI(),tU.Power0,tU.Power1,tU.Power2,tU.Power3,tU.Power4,tU.Linear,tU.Quad,tU.Cubic,tU.Quart,tU.Quint,tU.Strong,tU.Elastic,tU.Back,tU.SteppedEase,tU.Bounce,tU.Sine,tU.Expo,tU.Circ;var iU,iN,iO,iF,iB,ik,iz,iV={},iH=180/Math.PI,iG=Math.PI/180,iW=Math.atan2,iX=/([A-Z])/g,ij=/(left|right|width|margin|padding|x)/i,iY=/[\s,\(]\S/,iq={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},iK=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},i$=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},iZ=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},iJ=function(e,t){return t.set(t.t,t.p,1===e?t.e:e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},iQ=function(e,t){var i=t.s+t.c*e;t.set(t.t,t.p,~~(i+(i<0?-.5:.5))+t.u,t)},i0=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},i1=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},i2=function(e,t,i){return e.style[t]=i},i3=function(e,t,i){return e.style.setProperty(t,i)},i4=function(e,t,i){return e._gsap[t]=i},i5=function(e,t,i){return e._gsap.scaleX=e._gsap.scaleY=i},i6=function(e,t,i,n,r){var s=e._gsap;s.scaleX=s.scaleY=i,s.renderTransform(r,s)},i8=function(e,t,i,n,r){var s=e._gsap;s[t]=i,s.renderTransform(r,s)},i9="transform",i7=i9+"Origin",ne=function e(t,i){var n=this,r=this.target,s=r.style,a=r._gsap;if(t in iV&&s){if(this.tfm=this.tfm||{},"transform"===t)return iq.transform.split(",").forEach(function(t){return e.call(n,t,i)});if(~(t=iq[t]||t).indexOf(",")?t.split(",").forEach(function(e){return n.tfm[e]=n_(r,e)}):this.tfm[t]=a.x?a[t]:n_(r,t),t===i7&&(this.tfm.zOrigin=a.zOrigin),this.props.indexOf(i9)>=0)return;a.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(i7,i,"")),t=i9}(s||i)&&this.props.push(t,i,s[t])},nt=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},ni=function(){var e,t,i=this.props,n=this.target,r=n.style,s=n._gsap;for(e=0;e<i.length;e+=3)i[e+1]?2===i[e+1]?n[i[e]](i[e+2]):n[i[e]]=i[e+2]:i[e+2]?r[i[e]]=i[e+2]:r.removeProperty("--"===i[e].substr(0,2)?i[e]:i[e].replace(iX,"-$1").toLowerCase());if(this.tfm){for(t in this.tfm)s[t]=this.tfm[t];s.svg&&(s.renderTransform(),n.setAttribute("data-svg-origin",this.svgo||"")),(e=ik())&&e.isStart||r[i9]||(nt(r),s.zOrigin&&r[i7]&&(r[i7]+=" "+s.zOrigin+"px",s.zOrigin=0,s.renderTransform()),s.uncache=1)}},nn=function(e,t){var i={target:e,props:[],revert:ni,save:ne};return e._gsap||iI.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(e){return i.save(e)}),i},nr=function(e,t){var i=iU.createElementNS?iU.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):iU.createElement(e);return i&&i.style?i:iU.createElement(e)},ns=function e(t,i,n){var r=getComputedStyle(t);return r[i]||r.getPropertyValue(i.replace(iX,"-$1").toLowerCase())||r.getPropertyValue(i)||!n&&e(t,no(i)||i,1)||""},na="O,Moz,ms,Ms,Webkit".split(","),no=function(e,t,i){var n=(t||iF).style,r=5;if(e in n&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);r--&&!(na[r]+e in n););return r<0?null:(3===r?"ms":r>=0?na[r]:"")+e},nl=function(){"u">typeof window&&window.document&&(iN=(iU=window.document).documentElement,iF=nr("div")||{style:{}},nr("div"),i7=(i9=no(i9))+"Origin",iF.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",iz=!!no("perspective"),ik=iI.core.reverting,iO=1)},nh=function(e){var t,i=e.ownerSVGElement,n=nr("svg",i&&i.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=e.cloneNode(!0);r.style.display="block",n.appendChild(r),iN.appendChild(n);try{t=r.getBBox()}catch(e){}return n.removeChild(r),iN.removeChild(n),t},nu=function(e,t){for(var i=t.length;i--;)if(e.hasAttribute(t[i]))return e.getAttribute(t[i])},nc=function(e){var t,i;try{t=e.getBBox()}catch(n){t=nh(e),i=1}return t&&(t.width||t.height)||i||(t=nh(e)),!t||t.width||t.x||t.y?t:{x:+nu(e,["x","cx","x1"])||0,y:+nu(e,["y","cy","y1"])||0,width:0,height:0}},nd=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&nc(e))},np=function(e,t){if(t){var i,n=e.style;t in iV&&t!==i7&&(t=i9),n.removeProperty?(("ms"===(i=t.substr(0,2))||"webkit"===t.substr(0,6))&&(t="-"+t),n.removeProperty("--"===i?t:t.replace(iX,"-$1").toLowerCase())):n.removeAttribute(t)}},nf=function(e,t,i,n,r,s){var a=new ix(e._pt,t,i,0,1,s?i1:i0);return e._pt=a,a.b=n,a.e=r,e._props.push(i),a},nm={deg:1,rad:1,turn:1},ng={grid:1,flex:1},nv=function e(t,i,n,r){var s,a,o,l,h=parseFloat(n)||0,u=(n+"").trim().substr((h+"").length)||"px",c=iF.style,d=ij.test(i),p="svg"===t.tagName.toLowerCase(),f=(p?"client":"offset")+(d?"Width":"Height"),m="px"===r,g="%"===r;if(r===u||!h||nm[r]||nm[u])return h;if("px"===u||m||(h=e(t,i,n,"px")),l=t.getCTM&&nd(t),(g||"%"===u)&&(iV[i]||~i.indexOf("adius")))return s=l?t.getBBox()[d?"width":"height"]:t[f],eP(g?h/s*100:h/100*s);if(c[d?"width":"height"]=100+(m?u:r),a="rem"!==r&&~i.indexOf("adius")||"em"===r&&t.appendChild&&!p?t:t.parentNode,l&&(a=(t.ownerSVGElement||{}).parentNode),a&&a!==iU&&a.appendChild||(a=iU.body),(o=a._gsap)&&g&&o.width&&d&&o.time===tD.time&&!o.uncache)return eP(h/o.width*100);if(g&&("height"===i||"width"===i)){var v=t.style[i];t.style[i]=100+r,s=t[f],v?t.style[i]=v:np(t,i)}else(g||"%"===u)&&!ng[ns(a,"display")]&&(c.position=ns(t,"position")),a===t&&(c.position="static"),a.appendChild(iF),s=iF[f],a.removeChild(iF),c.position="absolute";return d&&g&&((o=ew(a)).time=tD.time,o.width=a[f]),eP(m?s*h/100:s&&h?100/s*h:0)},n_=function(e,t,i,n){var r;return iO||nl(),t in iq&&"transform"!==t&&~(t=iq[t]).indexOf(",")&&(t=t.split(",")[0]),iV[t]&&"transform"!==t?(r=nR(e,n),r="transformOrigin"!==t?r[t]:r.svg?r.origin:nL(ns(e,i7))+" "+r.zOrigin+"px"):(!(r=e.style[t])||"auto"===r||n||~(r+"").indexOf("calc("))&&(r=nb[t]&&nb[t](e,t,i)||ns(e,t)||eA(e,t)||+("opacity"===t)),i&&!~(r+"").trim().indexOf(" ")?nv(e,t,r,i)+i:r},nx=function(e,t,i,n){if(!i||"none"===i){var r=no(t,e,1),s=r&&ns(e,r,1);s&&s!==i?(t=r,i=s):"borderColor"===t&&(i=ns(e,"borderTopColor"))}var a,o,l,h,u,c,d,p,f,m,g,v=new ix(this._pt,e.style,t,0,1,id),_=0,x=0;if(v.b=i,v.e=n,i+="","var(--"===(n+="").substring(0,6)&&(n=ns(e,n.substring(4,n.indexOf(")")))),"auto"===n&&(c=e.style[t],e.style[t]=n,n=ns(e,t)||n,c?e.style[t]=c:np(e,t)),tL(a=[i,n]),i=a[0],n=a[1],l=i.match(ei)||[],(n.match(ei)||[]).length){for(;o=ei.exec(n);)d=o[0],f=n.substring(_,o.index),u?u=(u+1)%5:("rgba("===f.substr(-5)||"hsla("===f.substr(-5))&&(u=1),d!==(c=l[x++]||"")&&(h=parseFloat(c)||0,g=c.substr((h+"").length),"="===d.charAt(1)&&(d=eL(h,d)+g),p=parseFloat(d),m=d.substr((p+"").length),_=ei.lastIndex-m.length,m||(m=m||U.units[t]||g,_===n.length&&(n+=m,v.e+=m)),g!==m&&(h=nv(e,t,c,m)||0),v._pt={_next:v._pt,p:f||1===x?f:",",s:h,c:p-h,m:u&&u<4||"zIndex"===t?Math.round:0});v.c=_<n.length?n.substring(_,n.length):""}else v.r="display"===t&&"none"===n?i1:i0;return er.test(n)&&(v.e=0),this._pt=v,v},ny={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},nM=function(e){var t=e.split(" "),i=t[0],n=t[1]||"50%";return("top"===i||"bottom"===i||"left"===n||"right"===n)&&(e=i,i=n,n=e),t[0]=ny[i]||i,t[1]=ny[n]||n,t.join(" ")},nS=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var i,n,r,s=t.t,a=s.style,o=t.u,l=s._gsap;if("all"===o||!0===o)a.cssText="",n=1;else for(r=(o=o.split(",")).length;--r>-1;)iV[i=o[r]]&&(n=1,i="transformOrigin"===i?i7:i9),np(s,i);n&&(np(s,i9),l&&(l.svg&&s.removeAttribute("transform"),a.scale=a.rotate=a.translate="none",nR(s,1),l.uncache=1,nt(a)))}},nb={clearProps:function(e,t,i,n,r){if("isFromStart"!==r.data){var s=e._pt=new ix(e._pt,t,i,0,0,nS);return s.u=n,s.pr=-10,s.tween=r,e._props.push(i),1}}},nE=[1,0,0,1,0,0],nT={},nw=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},nA=function(e){var t=ns(e,i9);return nw(t)?nE:t.substr(7).match(et).map(eP)},nC=function(e,t){var i,n,r,s,a=e._gsap||ew(e),o=e.style,l=nA(e);return a.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(l=[(r=e.transform.baseVal.consolidate().matrix).a,r.b,r.c,r.d,r.e,r.f]).join(",")?nE:l:(l!==nE||e.offsetParent||e===iN||a.svg||(r=o.display,o.display="block",(i=e.parentNode)&&(e.offsetParent||e.getBoundingClientRect().width)||(s=1,n=e.nextElementSibling,iN.appendChild(e)),l=nA(e),r?o.display=r:np(e,"display"),s&&(n?i.insertBefore(e,n):i?i.appendChild(e):iN.removeChild(e))),t&&l.length>6?[l[0],l[1],l[4],l[5],l[12],l[13]]:l)},nP=function(e,t,i,n,r,s){var a,o,l,h,u=e._gsap,c=r||nC(e,!0),d=u.xOrigin||0,p=u.yOrigin||0,f=u.xOffset||0,m=u.yOffset||0,g=c[0],v=c[1],_=c[2],x=c[3],y=c[4],M=c[5],S=t.split(" "),b=parseFloat(S[0])||0,E=parseFloat(S[1])||0;i?c!==nE&&(o=g*x-v*_)&&(l=x/o*b+-_/o*E+(_*M-x*y)/o,h=-v/o*b+g/o*E-(g*M-v*y)/o,b=l,E=h):(b=(a=nc(e)).x+(~S[0].indexOf("%")?b/100*a.width:b),E=a.y+(~(S[1]||S[0]).indexOf("%")?E/100*a.height:E)),n||!1!==n&&u.smooth?(u.xOffset=f+((y=b-d)*g+(M=E-p)*_)-y,u.yOffset=m+(y*v+M*x)-M):u.xOffset=u.yOffset=0,u.xOrigin=b,u.yOrigin=E,u.smooth=!!n,u.origin=t,u.originIsAbsolute=!!i,e.style[i7]="0px 0px",s&&(nf(s,u,"xOrigin",d,b),nf(s,u,"yOrigin",p,E),nf(s,u,"xOffset",f,u.xOffset),nf(s,u,"yOffset",m,u.yOffset)),e.setAttribute("data-svg-origin",b+" "+E)},nR=function(e,t){var i=e._gsap||new tY(e);if("x"in i&&!t&&!i.uncache)return i;var n,r,s,a,o,l,h,u,c,d,p,f,m,g,v,_,x,y,M,S,b,E,T,w,A,C,P,R,L,D,I,N,O=e.style,F=i.scaleX<0,B=getComputedStyle(e),k=ns(e,i7)||"0";return n=r=s=l=h=u=c=d=p=0,a=o=1,i.svg=!!(e.getCTM&&nd(e)),B.translate&&(("none"!==B.translate||"none"!==B.scale||"none"!==B.rotate)&&(O[i9]=("none"!==B.translate?"translate3d("+(B.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==B.rotate?"rotate("+B.rotate+") ":"")+("none"!==B.scale?"scale("+B.scale.split(" ").join(",")+") ":"")+("none"!==B[i9]?B[i9]:"")),O.scale=O.rotate=O.translate="none"),g=nC(e,i.svg),i.svg&&(i.uncache?(A=e.getBBox(),k=i.xOrigin-A.x+"px "+(i.yOrigin-A.y)+"px",w=""):w=!t&&e.getAttribute("data-svg-origin"),nP(e,w||k,!!w||i.originIsAbsolute,!1!==i.smooth,g)),f=i.xOrigin||0,m=i.yOrigin||0,g!==nE&&(y=g[0],M=g[1],S=g[2],b=g[3],n=E=g[4],r=T=g[5],6===g.length?(a=Math.sqrt(y*y+M*M),o=Math.sqrt(b*b+S*S),l=y||M?iW(M,y)*iH:0,(c=S||b?iW(S,b)*iH+l:0)&&(o*=Math.abs(Math.cos(c*iG))),i.svg&&(n-=f-(f*y+m*S),r-=m-(f*M+m*b))):(N=g[6],D=g[7],P=g[8],R=g[9],L=g[10],I=g[11],n=g[12],r=g[13],s=g[14],h=(v=iW(N,L))*iH,v&&(w=E*(_=Math.cos(-v))+P*(x=Math.sin(-v)),A=T*_+R*x,C=N*_+L*x,P=-(E*x)+P*_,R=-(T*x)+R*_,L=-(N*x)+L*_,I=-(D*x)+I*_,E=w,T=A,N=C),u=(v=iW(-S,L))*iH,v&&(w=y*(_=Math.cos(-v))-P*(x=Math.sin(-v)),A=M*_-R*x,C=S*_-L*x,I=b*x+I*_,y=w,M=A,S=C),l=(v=iW(M,y))*iH,v&&(w=y*(_=Math.cos(v))+M*(x=Math.sin(v)),A=E*_+T*x,M=M*_-y*x,T=T*_-E*x,y=w,E=A),h&&Math.abs(h)+Math.abs(l)>359.9&&(h=l=0,u=180-u),a=eP(Math.sqrt(y*y+M*M+S*S)),o=eP(Math.sqrt(T*T+N*N)),c=Math.abs(v=iW(E,T))>2e-4?v*iH:0,p=I?1/(I<0?-I:I):0),i.svg&&(w=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!nw(ns(e,i9)),w&&e.setAttribute("transform",w))),Math.abs(c)>90&&270>Math.abs(c)&&(F?(a*=-1,c+=l<=0?180:-180,l+=l<=0?180:-180):(o*=-1,c+=c<=0?180:-180)),t=t||i.uncache,i.x=n-((i.xPercent=n&&(!t&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-n)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+"px",i.y=r-((i.yPercent=r&&(!t&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-r)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+"px",i.z=s+"px",i.scaleX=eP(a),i.scaleY=eP(o),i.rotation=eP(l)+"deg",i.rotationX=eP(h)+"deg",i.rotationY=eP(u)+"deg",i.skewX=c+"deg",i.skewY=d+"deg",i.transformPerspective=p+"px",(i.zOrigin=parseFloat(k.split(" ")[2])||!t&&i.zOrigin||0)&&(O[i7]=nL(k)),i.xOffset=i.yOffset=0,i.force3D=U.force3D,i.renderTransform=i.svg?nO:iz?nN:nI,i.uncache=0,i},nL=function(e){return(e=e.split(" "))[0]+" "+e[1]},nD=function(e,t,i){var n=ta(t);return eP(parseFloat(t)+parseFloat(nv(e,"x",i+"px",n)))+n},nI=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,nN(e,t)},nU="0deg",nN=function(e,t){var i=t||this,n=i.xPercent,r=i.yPercent,s=i.x,a=i.y,o=i.z,l=i.rotation,h=i.rotationY,u=i.rotationX,c=i.skewX,d=i.skewY,p=i.scaleX,f=i.scaleY,m=i.transformPerspective,g=i.force3D,v=i.target,_=i.zOrigin,x="",y="auto"===g&&e&&1!==e||!0===g;if(_&&(u!==nU||h!==nU)){var M,S=parseFloat(h)*iG,b=Math.sin(S),E=Math.cos(S);s=nD(v,s,-(b*(M=Math.cos(S=parseFloat(u)*iG))*_)),a=nD(v,a,-(-Math.sin(S)*_)),o=nD(v,o,-(E*M*_)+_)}"0px"!==m&&(x+="perspective("+m+") "),(n||r)&&(x+="translate("+n+"%, "+r+"%) "),(y||"0px"!==s||"0px"!==a||"0px"!==o)&&(x+="0px"!==o||y?"translate3d("+s+", "+a+", "+o+") ":"translate("+s+", "+a+") "),l!==nU&&(x+="rotate("+l+") "),h!==nU&&(x+="rotateY("+h+") "),u!==nU&&(x+="rotateX("+u+") "),(c!==nU||d!==nU)&&(x+="skew("+c+", "+d+") "),(1!==p||1!==f)&&(x+="scale("+p+", "+f+") "),v.style[i9]=x||"translate(0, 0)"},nO=function(e,t){var i,n,r,s,a,o=t||this,l=o.xPercent,h=o.yPercent,u=o.x,c=o.y,d=o.rotation,p=o.skewX,f=o.skewY,m=o.scaleX,g=o.scaleY,v=o.target,_=o.xOrigin,x=o.yOrigin,y=o.xOffset,M=o.yOffset,S=o.forceCSS,b=parseFloat(u),E=parseFloat(c);d=parseFloat(d),p=parseFloat(p),(f=parseFloat(f))&&(p+=f=parseFloat(f),d+=f),d||p?(d*=iG,p*=iG,i=Math.cos(d)*m,n=Math.sin(d)*m,r=-(Math.sin(d-p)*g),s=Math.cos(d-p)*g,p&&(f*=iG,r*=a=Math.sqrt(1+(a=Math.tan(p-f))*a),s*=a,f&&(i*=a=Math.sqrt(1+(a=Math.tan(f))*a),n*=a)),i=eP(i),n=eP(n),r=eP(r),s=eP(s)):(i=m,s=g,n=r=0),(b&&!~(u+"").indexOf("px")||E&&!~(c+"").indexOf("px"))&&(b=nv(v,"x",u,"px"),E=nv(v,"y",c,"px")),(_||x||y||M)&&(b=eP(b+_-(_*i+x*r)+y),E=eP(E+x-(_*n+x*s)+M)),(l||h)&&(b=eP(b+l/100*(a=v.getBBox()).width),E=eP(E+h/100*a.height)),a="matrix("+i+","+n+","+r+","+s+","+b+","+E+")",v.setAttribute("transform",a),S&&(v.style[i9]=a)},nF=function(e,t,i,n,r){var s,a,o=H(r),l=parseFloat(r)*(o&&~r.indexOf("rad")?iH:1)-n,h=n+l+"deg";return o&&("short"===(s=r.split("_")[1])&&(l%=360)!=l%180&&(l+=l<0?360:-360),"cw"===s&&l<0?l=(l+36e9)%360-360*~~(l/360):"ccw"===s&&l>0&&(l=(l-36e9)%360-360*~~(l/360))),e._pt=a=new ix(e._pt,t,i,n,l,i$),a.e=h,a.u="deg",e._props.push(i),a},nB=function(e,t){for(var i in t)e[i]=t[i];return e},nk=function(e,t,i){var n,r,s,a,o,l,h,u=nB({},i._gsap),c=i.style;for(r in u.svg?(s=i.getAttribute("transform"),i.setAttribute("transform",""),c[i9]=t,n=nR(i,1),np(i,i9),i.setAttribute("transform",s)):(s=getComputedStyle(i)[i9],c[i9]=t,n=nR(i,1),c[i9]=s),iV)(s=u[r])!==(a=n[r])&&0>"perspective,force3D,transformOrigin,svgOrigin".indexOf(r)&&(o=ta(s)!==(h=ta(a))?nv(i,r,s,h):parseFloat(s),l=parseFloat(a),e._pt=new ix(e._pt,n,r,o,l-o,iK),e._pt.u=h||0,e._props.push(r));nB(n,u)};eC("padding,margin,Width,Radius",function(e,t){var i="Right",n="Bottom",r="Left",s=(t<3?["Top",i,n,r]:["Top"+r,"Top"+i,n+i,n+r]).map(function(i){return t<2?e+i:"border"+i+e});nb[t>1?"border"+e:e]=function(e,t,i,n,r){var a,o;if(arguments.length<4)return 5===(o=(a=s.map(function(t){return n_(e,t,i)})).join(" ")).split(a[0]).length?a[0]:o;a=(n+"").split(" "),o={},s.forEach(function(e,t){return o[e]=a[t]=a[t]||a[(t-1)/2|0]}),e.init(t,o,r)}});var nz={name:"css",register:nl,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,i,n,r){var s,a,o,l,h,u,c,d,p,f,m,g,v,_,x,y,M,S=this._props,b=e.style,E=i.vars.startAt;for(c in iO||nl(),this.styles=this.styles||nn(e),y=this.styles.props,this.tween=i,t)if("autoRound"!==c&&(a=t[c],!(ey[c]&&t5(c,t,i,n,e,r)))){if(h=typeof a,u=nb[c],"function"===h&&(h=typeof(a=a.call(i,n,e,r))),"string"===h&&~a.indexOf("random(")&&(a=tv(a)),u)u(this,e,c,a,i)&&(x=1);else if("--"===c.substr(0,2))s=(getComputedStyle(e).getPropertyValue(c)+"").trim(),a+="",tP.lastIndex=0,!tP.test(s)&&(d=ta(s),(p=ta(a))?d!==p&&(s=nv(e,c,s,p)+p):d&&(a+=d)),this.add(b,"setProperty",s,a,n,r,0,0,c),S.push(c),y.push(c,0,b[c]);else if("undefined"!==h){if(E&&c in E?(H(s="function"==typeof E[c]?E[c].call(i,n,e,r):E[c])&&~s.indexOf("random(")&&(s=tv(s)),ta(s+"")||"auto"===s||(s+=U.units[c]||ta(n_(e,c))||""),"="===(s+"").charAt(1)&&(s=n_(e,c))):s=n_(e,c),l=parseFloat(s),(f="string"===h&&"="===a.charAt(1)&&a.substr(0,2))&&(a=a.substr(2)),o=parseFloat(a),c in iq&&("autoAlpha"===c&&(1===l&&"hidden"===n_(e,"visibility")&&o&&(l=0),y.push("visibility",0,b.visibility),nf(this,b,"visibility",l?"inherit":"hidden",o?"inherit":"hidden",!o)),"scale"!==c&&"transform"!==c&&~(c=iq[c]).indexOf(",")&&(c=c.split(",")[0])),m=c in iV){if(this.styles.save(c),M=a,"string"===h&&"var(--"===a.substring(0,6)){if("calc("===(a=ns(e,a.substring(4,a.indexOf(")")))).substring(0,5)){var T=e.style.perspective;e.style.perspective=a,a=ns(e,"perspective"),T?e.style.perspective=T:np(e,"perspective")}o=parseFloat(a)}if(g||((v=e._gsap).renderTransform&&!t.parseTransform||nR(e,t.parseTransform),_=!1!==t.smoothOrigin&&v.smooth,(g=this._pt=new ix(this._pt,b,i9,0,1,v.renderTransform,v,0,-1)).dep=1),"scale"===c)this._pt=new ix(this._pt,v,"scaleY",v.scaleY,(f?eL(v.scaleY,f+o):o)-v.scaleY||0,iK),this._pt.u=0,S.push("scaleY",c),c+="X";else if("transformOrigin"===c){y.push(i7,0,b[i7]),a=nM(a),v.svg?nP(e,a,0,_,0,this):((p=parseFloat(a.split(" ")[2])||0)!==v.zOrigin&&nf(this,v,"zOrigin",v.zOrigin,p),nf(this,b,c,nL(s),nL(a)));continue}else if("svgOrigin"===c){nP(e,a,1,_,0,this);continue}else if(c in nT){nF(this,v,c,l,f?eL(l,f+a):a);continue}else if("smoothOrigin"===c){nf(this,v,"smooth",v.smooth,a);continue}else if("force3D"===c){v[c]=a;continue}else if("transform"===c){nk(this,a,e);continue}}else c in b||(c=no(c)||c);if(m||(o||0===o)&&(l||0===l)&&!iY.test(a)&&c in b)d=(s+"").substr((l+"").length),o||(o=0),p=ta(a)||(c in U.units?U.units[c]:d),d!==p&&(l=nv(e,c,s,p)),this._pt=new ix(this._pt,m?v:b,c,l,(f?eL(l,f+o):o)-l,!m&&("px"===p||"zIndex"===c)&&!1!==t.autoRound?iQ:iK),this._pt.u=p||0,m&&M!==a?(this._pt.b=s,this._pt.e=M,this._pt.r=iJ):d!==p&&"%"!==p&&(this._pt.b=s,this._pt.r=iZ);else if(c in b)nx.call(this,e,c,s,f?f+a:a);else if(c in e)this.add(e,c,s||e[c],f?f+a:a,n,r);else if("parseTransform"!==c){eu(c,a);continue}m||(c in b?y.push(c,0,b[c]):"function"==typeof e[c]?y.push(c,2,e[c]()):y.push(c,1,s||e[c])),S.push(c)}}x&&i_(this)},render:function(e,t){if(t.tween._time||!ik())for(var i=t._pt;i;)i.r(e,i.d),i=i._next;else t.styles.revert()},get:n_,aliases:iq,getSetter:function(e,t,i){var n=iq[t];return n&&0>n.indexOf(",")&&(t=n),t in iV&&t!==i7&&(e._gsap.x||n_(e,"x"))?i&&iB===i?"scale"===t?i5:i4:(iB=i||{},"scale"===t?i6:i8):e.style&&!X(e.style[t])?i2:~t.indexOf("-")?i3:ih(e,t)},core:{_removeProperty:np,_getMatrix:nC}};iI.utils.checkPrefix=no,iI.core.getStyleSaver=nn,a=eC("x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+(s="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(e){iV[e]=1}),eC(s,function(e){U.units[e]="deg",nT[e]=1}),iq[a[13]]="x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+s,eC("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(e){var t=e.split(":");iq[t[1]]=a[t[0]]}),eC("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(e){U.units[e]="px"}),iI.registerPlugin(nz);var nV=iI.registerPlugin(nz)||iI;nV.core.Tween,e.s(["default",()=>nV,"gsap",()=>nV],89970);var nH=e.i(43476),nG=e.i(71645);let nW=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],nX=new Set(nW),nj=(e,t,i)=>i>t?t:i<e?e:i,nY={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},nq={...nY,transform:e=>nj(0,1,e)},nK={...nY,default:1},n$=e=>Math.round(1e5*e)/1e5,nZ=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu,nJ=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,nQ=(e,t)=>i=>!!("string"==typeof i&&nJ.test(i)&&i.startsWith(e)||t&&null!=i&&Object.prototype.hasOwnProperty.call(i,t)),n0=(e,t,i)=>n=>{if("string"!=typeof n)return n;let[r,s,a,o]=n.match(nZ);return{[e]:parseFloat(r),[t]:parseFloat(s),[i]:parseFloat(a),alpha:void 0!==o?parseFloat(o):1}},n1={...nY,transform:e=>Math.round(nj(0,255,e))},n2={test:nQ("rgb","red"),parse:n0("red","green","blue"),transform:({red:e,green:t,blue:i,alpha:n=1})=>"rgba("+n1.transform(e)+", "+n1.transform(t)+", "+n1.transform(i)+", "+n$(nq.transform(n))+")"},n3={test:nQ("#"),parse:function(e){let t="",i="",n="",r="";return e.length>5?(t=e.substring(1,3),i=e.substring(3,5),n=e.substring(5,7),r=e.substring(7,9)):(t=e.substring(1,2),i=e.substring(2,3),n=e.substring(3,4),r=e.substring(4,5),t+=t,i+=i,n+=n,r+=r),{red:parseInt(t,16),green:parseInt(i,16),blue:parseInt(n,16),alpha:r?parseInt(r,16)/255:1}},transform:n2.transform},n4=e=>({test:t=>"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),n5=n4("deg"),n6=n4("%"),n8=n4("px"),n9=n4("vh"),n7=n4("vw"),re={...n6,parse:e=>n6.parse(e)/100,transform:e=>n6.transform(100*e)},rt={test:nQ("hsl","hue"),parse:n0("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:i,alpha:n=1})=>"hsla("+Math.round(e)+", "+n6.transform(n$(t))+", "+n6.transform(n$(i))+", "+n$(nq.transform(n))+")"},ri={test:e=>n2.test(e)||n3.test(e)||rt.test(e),parse:e=>n2.test(e)?n2.parse(e):rt.test(e)?rt.parse(e):n3.parse(e),transform:e=>"string"==typeof e?e:e.hasOwnProperty("red")?n2.transform(e):rt.transform(e),getAnimatableNone:e=>{let t=ri.parse(e);return t.alpha=0,ri.transform(t)}},rn=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu,rr="number",rs="color",ra=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ro(e){let t=e.toString(),i=[],n={color:[],number:[],var:[]},r=[],s=0,a=t.replace(ra,e=>(ri.test(e)?(n.color.push(s),r.push(rs),i.push(ri.parse(e))):e.startsWith("var(")?(n.var.push(s),r.push("var"),i.push(e)):(n.number.push(s),r.push(rr),i.push(parseFloat(e))),++s,"${}")).split("${}");return{values:i,split:a,indexes:n,types:r}}function rl(e){return ro(e).values}function rh(e){let{split:t,types:i}=ro(e),n=t.length;return e=>{let r="";for(let s=0;s<n;s++)if(r+=t[s],void 0!==e[s]){let t=i[s];t===rr?r+=n$(e[s]):t===rs?r+=ri.transform(e[s]):r+=e[s]}return r}}let ru=e=>"number"==typeof e?0:ri.test(e)?ri.getAnimatableNone(e):e,rc={test:function(e){return isNaN(e)&&"string"==typeof e&&(e.match(nZ)?.length||0)+(e.match(rn)?.length||0)>0},parse:rl,createTransformer:rh,getAnimatableNone:function(e){let t=rl(e);return rh(e)(t.map(ru))}},rd=new Set(["brightness","contrast","saturate","opacity"]);function rp(e){let[t,i]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;let[n]=i.match(nZ)||[];if(!n)return e;let r=i.replace(n,""),s=+!!rd.has(t);return n!==i&&(s*=100),t+"("+s+r+")"}let rf=/\b([a-z-]*)\(.*?\)/gu,rm={...rc,getAnimatableNone:e=>{let t=e.match(rf);return t?t.map(rp).join(" "):e}},rg={...nY,transform:Math.round},rv={borderWidth:n8,borderTopWidth:n8,borderRightWidth:n8,borderBottomWidth:n8,borderLeftWidth:n8,borderRadius:n8,borderTopLeftRadius:n8,borderTopRightRadius:n8,borderBottomRightRadius:n8,borderBottomLeftRadius:n8,width:n8,maxWidth:n8,height:n8,maxHeight:n8,top:n8,right:n8,bottom:n8,left:n8,inset:n8,insetBlock:n8,insetBlockStart:n8,insetBlockEnd:n8,insetInline:n8,insetInlineStart:n8,insetInlineEnd:n8,padding:n8,paddingTop:n8,paddingRight:n8,paddingBottom:n8,paddingLeft:n8,paddingBlock:n8,paddingBlockStart:n8,paddingBlockEnd:n8,paddingInline:n8,paddingInlineStart:n8,paddingInlineEnd:n8,margin:n8,marginTop:n8,marginRight:n8,marginBottom:n8,marginLeft:n8,marginBlock:n8,marginBlockStart:n8,marginBlockEnd:n8,marginInline:n8,marginInlineStart:n8,marginInlineEnd:n8,fontSize:n8,backgroundPositionX:n8,backgroundPositionY:n8,rotate:n5,rotateX:n5,rotateY:n5,rotateZ:n5,scale:nK,scaleX:nK,scaleY:nK,scaleZ:nK,skew:n5,skewX:n5,skewY:n5,distance:n8,translateX:n8,translateY:n8,translateZ:n8,x:n8,y:n8,z:n8,perspective:n8,transformPerspective:n8,opacity:nq,originX:re,originY:re,originZ:n8,zIndex:rg,fillOpacity:nq,strokeOpacity:nq,numOctaves:rg},r_={...rv,color:ri,backgroundColor:ri,outlineColor:ri,fill:ri,stroke:ri,borderColor:ri,borderTopColor:ri,borderRightColor:ri,borderBottomColor:ri,borderLeftColor:ri,filter:rm,WebkitFilter:rm},rx=e=>r_[e],ry=()=>({translate:0,scale:1,origin:0,originPoint:0}),rM=()=>({x:ry(),y:ry()}),rS=()=>({min:0,max:0}),rb=()=>({x:rS(),y:rS()}),rE=e=>!!(e&&e.getVelocity),rT=new Set(["width","height","top","left","right","bottom",...nW]),rw=e=>t=>t.test(e),rA=[nY,n8,n6,n5,n7,n9,{test:e=>"auto"===e,parse:e=>e}],rC=e=>rA.find(rw(e));var rP=e.i(47167);let rR=()=>{},rL=()=>{};rP.default;let rD=e=>t=>"string"==typeof t&&t.startsWith(e),rI=rD("--"),rU=rD("var(--"),rN=e=>!!rU(e)&&rO.test(e.split("/*")[0].trim()),rO=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function rF(e){return"string"==typeof e&&e.split("/*")[0].includes("var(--")}let rB=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u,rk=e=>180*e/Math.PI,rz=e=>rH(rk(Math.atan2(e[1],e[0]))),rV={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:rz,rotateZ:rz,skewX:e=>rk(Math.atan(e[1])),skewY:e=>rk(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},rH=e=>((e%=360)<0&&(e+=360),e),rG=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),rW=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),rX={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:rG,scaleY:rW,scale:e=>(rG(e)+rW(e))/2,rotateX:e=>rH(rk(Math.atan2(e[6],e[5]))),rotateY:e=>rH(rk(Math.atan2(-e[2],e[0]))),rotateZ:rz,rotate:rz,skewX:e=>rk(Math.atan(e[4])),skewY:e=>rk(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function rj(e){return+!!e.includes("scale")}function rY(e,t){let i,n;if(!e||"none"===e)return rj(t);let r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);if(r)i=rX,n=r;else{let t=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=rV,n=t}if(!n)return rj(t);let s=i[t],a=n[1].split(",").map(rq);return"function"==typeof s?s(a):a[s]}function rq(e){return parseFloat(e.trim())}let rK=e=>e===nY||e===n8,r$=new Set(["x","y","z"]),rZ=nW.filter(e=>!r$.has(e)),rJ={width:({x:e},{paddingLeft:t="0",paddingRight:i="0"})=>e.max-e.min-parseFloat(t)-parseFloat(i),height:({y:e},{paddingTop:t="0",paddingBottom:i="0"})=>e.max-e.min-parseFloat(t)-parseFloat(i),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>rY(t,"x"),y:(e,{transform:t})=>rY(t,"y")};rJ.translateX=rJ.x,rJ.translateY=rJ.y;let rQ=e=>e,r0={},r1=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function r2(e,t){let i=!1,n=!0,r={delta:0,timestamp:0,isProcessing:!1},s=()=>i=!0,a=r1.reduce((e,i)=>(e[i]=function(e,t){let i=new Set,n=new Set,r=!1,s=!1,a=new WeakSet,o={delta:0,timestamp:0,isProcessing:!1},l=0;function h(t){a.has(t)&&(u.schedule(t),e()),l++,t(o)}let u={schedule:(e,t=!1,s=!1)=>{let o=s&&r?i:n;return t&&a.add(e),o.has(e)||o.add(e),e},cancel:e=>{n.delete(e),a.delete(e)},process:e=>{if(o=e,r){s=!0;return}r=!0,[i,n]=[n,i],i.forEach(h),t,l=0,i.clear(),r=!1,s&&(s=!1,u.process(e))}};return u}(s,t?i:void 0),e),{}),{setup:o,read:l,resolveKeyframes:h,preUpdate:u,update:c,preRender:d,render:p,postRender:f}=a,m=()=>{let s=r0.useManualTiming?r.timestamp:performance.now();i=!1,r0.useManualTiming||(r.delta=n?1e3/60:Math.max(Math.min(s-r.timestamp,40),1)),r.timestamp=s,r.isProcessing=!0,o.process(r),l.process(r),h.process(r),u.process(r),c.process(r),d.process(r),p.process(r),f.process(r),r.isProcessing=!1,i&&t&&(n=!1,e(m))};return{schedule:r1.reduce((t,s)=>{let o=a[s];return t[s]=(t,s=!1,a=!1)=>(!i&&(i=!0,n=!0,r.isProcessing||e(m)),o.schedule(t,s,a)),t},{}),cancel:e=>{for(let t=0;t<r1.length;t++)a[r1[t]].cancel(e)},state:r,steps:a}}let{schedule:r3,cancel:r4,state:r5,steps:r6}=r2("u">typeof requestAnimationFrame?requestAnimationFrame:rQ,!0),r8=new Set,r9=!1,r7=!1,se=!1;function st(){if(r7){let e=Array.from(r8).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),i=new Map;t.forEach(e=>{let t,n=(t=[],rZ.forEach(i=>{let n=e.getValue(i);void 0!==n&&(t.push([i,n.get()]),n.set(+!!i.startsWith("scale")))}),t);n.length&&(i.set(e,n),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();let t=i.get(e);t&&t.forEach(([t,i])=>{e.getValue(t)?.set(i)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}r7=!1,r9=!1,r8.forEach(e=>e.complete(se)),r8.clear()}function si(){r8.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(r7=!0)})}class sn{constructor(e,t,i,n,r,s=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=n,this.element=r,this.isAsync=s}scheduleResolve(){this.state="scheduled",this.isAsync?(r8.add(this),r9||(r9=!0,r3.read(si),r3.resolveKeyframes(st))):(this.readKeyframes(),this.complete())}readKeyframes(){let{unresolvedKeyframes:e,name:t,element:i,motionValue:n}=this;if(null===e[0]){let r=n?.get(),s=e[e.length-1];if(void 0!==r)e[0]=r;else if(i&&t){let n=i.readValue(t,s);null!=n&&(e[0]=n)}void 0===e[0]&&(e[0]=s),n&&void 0===r&&n.set(e[0])}for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),r8.delete(this)}cancel(){"scheduled"===this.state&&(r8.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}function sr(e,t){let i=rx(e);return i!==rm&&(i=rc),i.getAnimatableNone?i.getAnimatableNone(t):void 0}let ss=new Set(["auto","none","0"]);class sa extends sn{constructor(e,t,i,n,r){super(e,t,i,n,r,!0)}readKeyframes(){let{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let i=0;i<e.length;i++){let n=e[i];if("string"==typeof n&&rN(n=n.trim())){let r=function e(t,i,n=1){rL(n<=4,`Max CSS variable fallback depth detected in property "${t}". This may indicate a circular fallback dependency.`,"max-css-var-depth");let[r,s]=function(e){let t=rB.exec(e);if(!t)return[,];let[,i,n,r]=t;return[`--${i??n}`,r]}(t);if(!r)return;let a=window.getComputedStyle(i).getPropertyValue(r);if(a){let e=a.trim();return/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e)?parseFloat(e):e}return rN(s)?e(s,i,n+1):s}(n,t.current);void 0!==r&&(e[i]=r),i===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!rT.has(i)||2!==e.length)return;let[n,r]=e,s=rC(n),a=rC(r);if(rF(n)!==rF(r)&&rJ[i]){this.needsMeasurement=!0;return}if(s!==a)if(rK(s)&&rK(a))for(let t=0;t<e.length;t++){let i=e[t];"string"==typeof i&&(e[t]=parseFloat(i))}else rJ[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){let{unresolvedKeyframes:e,name:t}=this,i=[];for(let t=0;t<e.length;t++)(null===e[t]||function(e){if("number"==typeof e)return 0===e;if(null===e)return!0;return"none"===e||"0"===e||/^0[^.\s]+$/u.test(e)}(e[t]))&&i.push(t);i.length&&function(e,t,i){let n,r=0;for(;r<e.length&&!n;){let t=e[r];"string"==typeof t&&!ss.has(t)&&ro(t).values.length&&(n=e[r]),r++}if(n&&i)for(let r of t)e[r]=sr(i,n)}(e,i,t)}measureInitialState(){let{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;"height"===i&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=rJ[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;let n=t[t.length-1];void 0!==n&&e.getValue(i,n).jump(n,!1)}measureEndState(){let{element:e,name:t,unresolvedKeyframes:i}=this;if(!e||!e.current)return;let n=e.getValue(t);n&&n.jump(this.measuredOrigin,!1);let r=i.length-1,s=i[r];i[r]=rJ[t](e.measureViewportBox(),window.getComputedStyle(e.current)),null!==s&&void 0===this.finalKeyframe&&(this.finalKeyframe=s),this.removedTransforms?.length&&this.removedTransforms.forEach(([t,i])=>{e.getValue(t).set(i)}),this.resolveNoneKeyframes()}}function so(e,t){-1===e.indexOf(t)&&e.push(t)}function sl(e,t){let i=e.indexOf(t);i>-1&&e.splice(i,1)}class sh{constructor(){this.subscriptions=[]}add(e){return so(this.subscriptions,e),()=>sl(this.subscriptions,e)}notify(e,t,i){let n=this.subscriptions.length;if(n)if(1===n)this.subscriptions[0](e,t,i);else for(let r=0;r<n;r++){let n=this.subscriptions[r];n&&n(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}let{schedule:su}=r2(queueMicrotask,!1);function sc(){t=void 0}let sd={now:()=>(void 0===t&&sd.set(r5.isProcessing||r0.useManualTiming?r5.timestamp:performance.now()),t),set:e=>{t=e,queueMicrotask(sc)}},sp={current:void 0};class sf{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=e=>{let t=sd.now();if(this.updatedAt!==t&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(let e of this.dependents)e.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=sd.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=!isNaN(parseFloat(this.current)))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new sh);let i=this.events[e].add(t);return"change"===e?()=>{i(),r3.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(let e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return sp.current&&sp.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){var e;let t=sd.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||t-this.updatedAt>30)return 0;let i=Math.min(this.updatedAt-this.prevUpdatedAt,30);return e=parseFloat(this.current)-parseFloat(this.prevFrameValue),i?1e3/i*e:0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function sm(e,t){return new sf(e,t)}let sg=[...rA,ri,rc],sv={current:null},s_={current:!1},sx="u">typeof window,sy=new WeakMap;function sM(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}function sS(e){return"string"==typeof e||Array.isArray(e)}let sb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],sE=["initial",...sb];function sT(e){return sM(e.animate)||sE.some(t=>sS(e[t]))}function sw(e){return!!(sT(e)||e.variants)}function sA(e){let t=[{},{}];return e?.values.forEach((e,i)=>{t[0][i]=e.get(),t[1][i]=e.getVelocity()}),t}function sC(e,t,i,n){if("function"==typeof t){let[r,s]=sA(n);t=t(void 0!==i?i:e.custom,r,s)}if("string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t){let[r,s]=sA(n);t=t(void 0!==i?i:e.custom,r,s)}return t}let sP=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],sR={};class sL{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:n,blockInitialAnimation:r,visualState:s},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=sn,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{let e=sd.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,r3.render(this.render,!1,!0))};const{latestValues:o,renderState:l}=s;this.latestValues=o,this.baseTarget={...o},this.initialValues=t.initial?{...o}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=n,this.options=a,this.blockInitialAnimation=!!r,this.isControllingVariants=sT(t),this.isVariantNode=sw(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:h,...u}=this.scrapeMotionValuesFromProps(t,{},this);for(const e in u){const t=u[e];void 0!==o[e]&&rE(t)&&t.set(o[e])}}mount(e){this.current=e,sy.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),"never"===this.reducedMotionConfig?this.shouldReduceMotion=!1:"always"===this.reducedMotionConfig?this.shouldReduceMotion=!0:(s_.current||function(){if(s_.current=!0,sx)if(window.matchMedia){let e=window.matchMedia("(prefers-reduced-motion)"),t=()=>sv.current=e.matches;e.addEventListener("change",t),t()}else sv.current=!1}(),this.shouldReduceMotion=sv.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){for(let e in this.projection&&this.projection.unmount(),r4(this.notifyUpdate),r4(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this),this.events)this.events[e].clear();for(let e in this.features){let t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){let i;this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();let n=nX.has(e);n&&this.onBindTransform&&this.onBindTransform();let r=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&r3.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});"u">typeof window&&window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),i&&i(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in sR){let t=sR[e];if(!t)continue;let{isEnabled:i,Feature:n}=t;if(!this.features[e]&&n&&i(this.props)&&(this.features[e]=new n(this)),this.features[e]){let t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):rb()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let t=0;t<sP.length;t++){let i=sP[t];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);let n=e["on"+i];n&&(this.propEventSubscriptions[i]=this.on(i,n))}this.prevMotionValues=function(e,t,i){for(let n in t){let r=t[n],s=i[n];if(rE(r))e.addValue(n,r);else if(rE(s))e.addValue(n,sm(r,{owner:e}));else if(s!==r)if(e.hasValue(n)){let t=e.getValue(n);!0===t.liveStyle?t.jump(r):t.hasAnimated||t.set(r)}else{let t=e.getStaticValue(n);e.addValue(n,sm(void 0!==t?t:r,{owner:e}))}}for(let n in i)void 0===t[n]&&e.removeValue(n);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){let t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){let i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);let t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return void 0===i&&void 0!==t&&(i=sm(null===t?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){let i=void 0===this.latestValues[e]&&this.current?this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];if(null!=i){let n,r;if("string"==typeof i&&(n=i,/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n)||(r=i,/^0[^.\s]+$/u.test(r))))i=parseFloat(i);else{let n;n=i,!sg.find(rw(n))&&rc.test(t)&&(i=sr(e,t))}this.setBaseTarget(e,rE(i)?i.get():i)}return rE(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){let t,{initial:i}=this.props;if("string"==typeof i||"object"==typeof i){let n=sC(this.props,i,this.presenceContext?.custom);n&&(t=n[e])}if(i&&void 0!==t)return t;let n=this.getBaseTargetFromProps(this.props,e);return void 0===n||rE(n)?void 0!==this.initialValues[e]&&void 0===t?void 0:this.baseTarget[e]:n}on(e,t){return this.events[e]||(this.events[e]=new sh),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){su.render(this.render)}}class sD extends sL{constructor(){super(...arguments),this.KeyframeResolver=sa}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){let i=e.style;return i?i[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);let{children:e}=this.props;rE(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function sI(e){return e.replace(/([A-Z])/g,e=>`-${e.toLowerCase()}`)}let sU=(e,t)=>t&&"number"==typeof e?t.transform(e):e,sN={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},sO=nW.length;function sF(e,t,i){let{style:n,vars:r,transformOrigin:s}=e,a=!1,o=!1;for(let e in t){let i=t[e];if(nX.has(e)){a=!0;continue}if(rI(e)){r[e]=i;continue}{let t=sU(i,rv[e]);e.startsWith("origin")?(o=!0,s[e]=t):n[e]=t}}if(!t.transform&&(a||i?n.transform=function(e,t,i){let n="",r=!0;for(let s=0;s<sO;s++){let a=nW[s],o=e[a];if(void 0===o)continue;let l=!0;if("number"==typeof o)l=o===+!!a.startsWith("scale");else{let e=parseFloat(o);l=a.startsWith("scale")?1===e:0===e}if(!l||i){let e=sU(o,rv[a]);if(!l){r=!1;let t=sN[a]||a;n+=`${t}(${e}) `}i&&(t[a]=e)}}return n=n.trim(),i?n=i(t,r?"":n):r&&(n="none"),n}(t,e.transform,i):n.transform&&(n.transform="none")),o){let{originX:e="50%",originY:t="50%",originZ:i=0}=s;n.transformOrigin=`${e} ${t} ${i}`}}let sB={offset:"stroke-dashoffset",array:"stroke-dasharray"},sk={offset:"strokeDashoffset",array:"strokeDasharray"},sz=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function sV(e,{attrX:t,attrY:i,attrScale:n,pathLength:r,pathSpacing:s=1,pathOffset:a=0,...o},l,h,u){if(sF(e,o,h),l){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};let{attrs:c,style:d}=e;for(let e of(c.transform&&(d.transform=c.transform,delete c.transform),(d.transform||c.transformOrigin)&&(d.transformOrigin=c.transformOrigin??"50% 50%",delete c.transformOrigin),d.transform&&(d.transformBox=u?.transformBox??"fill-box",delete c.transformBox),sz))void 0!==c[e]&&(d[e]=c[e],delete c[e]);void 0!==t&&(c.x=t),void 0!==i&&(c.y=i),void 0!==n&&(c.scale=n),void 0!==r&&function(e,t,i=1,n=0,r=!0){e.pathLength=1;let s=r?sB:sk;e[s.offset]=`${-n}`,e[s.array]=`${t} ${i}`}(c,r,s,a,!1)}let sH=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),sG=e=>"string"==typeof e&&"svg"===e.toLowerCase();function sW(e,{style:t,vars:i},n,r){let s,a=e.style;for(s in t)a[s]=t[s];for(s in r?.applyProjectionStyles(a,n),i)a.setProperty(s,i[s])}function sX(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}let sj={correct:(e,t)=>{if(!t.target)return e;if("string"==typeof e)if(!n8.test(e))return e;else e=parseFloat(e);let i=sX(e,t.target.x),n=sX(e,t.target.y);return`${i}% ${n}%`}},sY=(e,t,i)=>e+(t-e)*i,sq={borderRadius:{...sj,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:sj,borderTopRightRadius:sj,borderBottomLeftRadius:sj,borderBottomRightRadius:sj,boxShadow:{correct:(e,{treeScale:t,projectionDelta:i})=>{let n=rc.parse(e);if(n.length>5)return e;let r=rc.createTransformer(e),s=+("number"!=typeof n[0]),a=i.x.scale*t.x,o=i.y.scale*t.y;n[0+s]/=a,n[1+s]/=o;let l=sY(a,o,.5);return"number"==typeof n[2+s]&&(n[2+s]/=l),"number"==typeof n[3+s]&&(n[3+s]/=l),r(n)}}};function sK(e,{layout:t,layoutId:i}){return nX.has(e)||e.startsWith("origin")||(t||void 0!==i)&&(!!sq[e]||"opacity"===e)}function s$(e,t,i){let n=e.style,r=t?.style,s={};if(!n)return s;for(let t in n)(rE(n[t])||r&&rE(r[t])||sK(t,e)||i?.getValue(t)?.liveStyle!==void 0)&&(s[t]=n[t]);return s}function sZ(e,t,i){let n=s$(e,t,i);for(let i in e)(rE(e[i])||rE(t[i]))&&(n[-1!==nW.indexOf(i)?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i]=e[i]);return n}class sJ extends sD{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=rb}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(nX.has(t)){let e=rx(t);return e&&e.default||0}return t=sH.has(t)?t:sI(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return sZ(e,t,i)}build(e,t,i){sV(e,t,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,t,i,n){for(let i in sW(e,t,void 0,n),t.attrs)e.setAttribute(sH.has(i)?i:sI(i),t.attrs[i])}mount(e){this.isSVGTag=sG(e.tagName),super.mount(e)}}function sQ({top:e,left:t,right:i,bottom:n}){return{x:{min:t,max:i},y:{min:e,max:n}}}function s0(e){return void 0===e||1===e}function s1({scale:e,scaleX:t,scaleY:i}){return!s0(e)||!s0(t)||!s0(i)}function s2(e){return s1(e)||s3(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function s3(e){var t,i;return(t=e.x)&&"0%"!==t||(i=e.y)&&"0%"!==i}function s4(e,t,i,n,r){return void 0!==r&&(e=n+r*(e-n)),n+i*(e-n)+t}function s5(e,t=0,i=1,n,r){e.min=s4(e.min,t,i,n,r),e.max=s4(e.max,t,i,n,r)}function s6(e,{x:t,y:i}){s5(e.x,t.translate,t.scale,t.originPoint),s5(e.y,i.translate,i.scale,i.originPoint)}function s8(e,t){e.min=e.min+t,e.max=e.max+t}function s9(e,t,i,n,r=.5){let s=sY(e.min,e.max,r);s5(e,t,i,s,n)}function s7(e,t){s9(e.x,t.x,t.scaleX,t.scale,t.originX),s9(e.y,t.y,t.scaleY,t.scale,t.originY)}function ae(e,t){return sQ(function(e,t){if(!t)return e;let i=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:i.y,left:i.x,bottom:n.y,right:n.x}}(e.getBoundingClientRect(),t))}class at extends sD{constructor(){super(...arguments),this.type="html",this.renderInstance=sW}readValueFromInstance(e,t){if(nX.has(t))return this.projection?.isProjecting?rj(t):((e,t)=>{let{transform:i="none"}=getComputedStyle(e);return rY(i,t)})(e,t);{let i=window.getComputedStyle(e),n=(rI(t)?i.getPropertyValue(t):i[t])||0;return"string"==typeof n?n.trim():n}}measureInstanceViewportBox(e,{transformPagePoint:t}){return ae(e,t)}build(e,t,i){sF(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return s$(e,t,i)}}let ai=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function an(e){if("string"!=typeof e||e.includes("-"));else if(ai.indexOf(e)>-1||/[A-Z]/u.test(e))return!0;return!1}let ar=(0,nG.createContext)({}),as=(0,nG.createContext)({strict:!1}),aa=(0,nG.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),ao=(0,nG.createContext)({});function al(e){return Array.isArray(e)?e.join(" "):e}let ah=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function au(e,t,i){for(let n in t)rE(t[n])||sK(n,i)||(e[n]=t[n])}let ac=()=>({...ah(),attrs:{}}),ad=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ap(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||ad.has(e)}let af=e=>!ap(e);try{o=(()=>{let e=Error("Cannot find module '@emotion/is-prop-valid'");throw e.code="MODULE_NOT_FOUND",e})().default,"function"==typeof o&&(af=e=>e.startsWith("on")?!ap(e):o(e))}catch{}function am(e){return rE(e)?e.get():e}let ag=(0,nG.createContext)(null);function av(e){let t=(0,nG.useRef)(null);return null===t.current&&(t.current=e()),t.current}let a_=e=>(t,i)=>{let n=(0,nG.useContext)(ao),r=(0,nG.useContext)(ag),s=()=>(function({scrapeMotionValuesFromProps:e,createRenderState:t},i,n,r){return{latestValues:function(e,t,i,n){let r={},s=n(e,{});for(let e in s)r[e]=am(s[e]);let{initial:a,animate:o}=e,l=sT(e),h=sw(e);t&&h&&!l&&!1!==e.inherit&&(void 0===a&&(a=t.initial),void 0===o&&(o=t.animate));let u=!!i&&!1===i.initial,c=(u=u||!1===a)?o:a;if(c&&"boolean"!=typeof c&&!sM(c)){let t=Array.isArray(c)?c:[c];for(let i=0;i<t.length;i++){let n=sC(e,t[i]);if(n){let{transitionEnd:e,transition:t,...i}=n;for(let e in i){let t=i[e];if(Array.isArray(t)){let e=u?t.length-1:0;t=t[e]}null!==t&&(r[e]=t)}for(let t in e)r[t]=e[t]}}}return r}(i,n,r,e),renderState:t()}})(e,t,n,r);return i?s():av(s)},ax=a_({scrapeMotionValuesFromProps:s$,createRenderState:ah}),ay=a_({scrapeMotionValuesFromProps:sZ,createRenderState:ac}),aM="u">typeof window,aS={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ab=!1;function aE(){return!function(){if(ab)return;let e={};for(let t in aS)e[t]={isEnabled:e=>aS[t].some(t=>!!e[t])};sR=e,ab=!0}(),sR}let aT=Symbol.for("motionComponentSymbol"),aw="data-"+sI("framerAppearId"),aA=(0,nG.createContext)({});function aC(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}let aP=aM?nG.useLayoutEffect:nG.useEffect;function aR(e,{forwardMotionProps:t=!1,type:i}={},n,r){n&&function(e){let t=aE();for(let i in e)t[i]={...t[i],...e[i]};sR=t}(n);let s=i?"svg"===i:an(e),a=s?ay:ax;function o(i,n){var o;let l,h,u,c={...(0,nG.useContext)(aa),...i,layoutId:function({layoutId:e}){let t=(0,nG.useContext)(ar).id;return t&&void 0!==e?t+"-"+e:e}(i)},{isStatic:d}=c,p=function(e){let{initial:t,animate:i}=function(e,t){if(sT(e)){let{initial:t,animate:i}=e;return{initial:!1===t||sS(t)?t:void 0,animate:sS(i)?i:void 0}}return!1!==e.inherit?t:{}}(e,(0,nG.useContext)(ao));return(0,nG.useMemo)(()=>({initial:t,animate:i}),[al(t),al(i)])}(i),f=a(i,d);if(!d&&aM){(0,nG.useContext)(as).strict;let t=function(e){let{drag:t,layout:i}=aE();if(!t&&!i)return{};let n={...t,...i};return{MeasureLayout:t?.isEnabled(e)||i?.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}(c);l=t.MeasureLayout,p.visualElement=function(e,t,i,n,r,s){let{visualElement:a}=(0,nG.useContext)(ao),o=(0,nG.useContext)(as),l=(0,nG.useContext)(ag),h=(0,nG.useContext)(aa).reducedMotion,u=(0,nG.useRef)(null),c=(0,nG.useRef)(!1);n=n||o.renderer,!u.current&&n&&(u.current=n(e,{visualState:t,parent:a,props:i,presenceContext:l,blockInitialAnimation:!!l&&!1===l.initial,reducedMotionConfig:h,isSVG:s}),c.current&&u.current&&(u.current.manuallyAnimateOnMount=!0));let d=u.current,p=(0,nG.useContext)(aA);d&&!d.projection&&r&&("html"===d.type||"svg"===d.type)&&function(e,t,i,n){let{layoutId:r,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:h,layoutCrossfade:u}=t;e.projection=new i(e.latestValues,t["data-framer-portal-id"]?void 0:function e(t){if(t)return!1!==t.options.allowProjection?t.projection:e(t.parent)}(e.parent)),e.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!a||o&&aC(o),visualElement:e,animationType:"string"==typeof s?s:"both",initialPromotionConfig:n,crossfade:u,layoutScroll:l,layoutRoot:h})}(u.current,i,r,p);let f=(0,nG.useRef)(!1);(0,nG.useInsertionEffect)(()=>{d&&f.current&&d.update(i,l)});let m=i[aw],g=(0,nG.useRef)(!!m&&!window.MotionHandoffIsComplete?.(m)&&window.MotionHasOptimisedAnimation?.(m));return aP(()=>{c.current=!0,d&&(f.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),g.current&&d.animationState&&d.animationState.animateChanges())}),(0,nG.useEffect)(()=>{d&&(!g.current&&d.animationState&&d.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(m)}),g.current=!1),d.enteringChildren=void 0)}),d}(e,f,c,r,t.ProjectionNode,s)}return(0,nH.jsxs)(ao.Provider,{value:p,children:[l&&p.visualElement?(0,nH.jsx)(l,{visualElement:p.visualElement,...c}):null,function(e,t,i,{latestValues:n},r,s=!1,a){let o=(a??an(e)?function(e,t,i,n){let r=(0,nG.useMemo)(()=>{let i=ac();return sV(i,t,sG(n),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){let t={};au(t,e.style,e),r.style={...t,...r.style}}return r}:function(e,t){let i,n,r={},s=(i=e.style||{},au(n={},i,e),Object.assign(n,function({transformTemplate:e},t){return(0,nG.useMemo)(()=>{let i=ah();return sF(i,t,e),Object.assign({},i.vars,i.style)},[t])}(e,t)),n);return e.drag&&!1!==e.dragListener&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=!0===e.drag?"none":`pan-${"x"===e.drag?"y":"x"}`),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=s,r})(t,n,r,e),l=function(e,t,i){let n={};for(let r in e)("values"!==r||"object"!=typeof e.values)&&(af(r)||!0===i&&ap(r)||!t&&!ap(r)||e.draggable&&r.startsWith("onDrag"))&&(n[r]=e[r]);return n}(t,"string"==typeof e,s),h=e!==nG.Fragment?{...l,...o,ref:i}:{},{children:u}=t,c=(0,nG.useMemo)(()=>rE(u)?u.get():u,[u]);return(0,nG.createElement)(e,{...h,children:c})}(e,i,(o=p.visualElement,h=(0,nG.useRef)(n),(0,nG.useInsertionEffect)(()=>{h.current=n}),u=(0,nG.useRef)(null),(0,nG.useCallback)(e=>{e&&f.onMount?.(e),o&&(e?o.mount(e):o.unmount());let t=h.current;if("function"==typeof t)if(e){let i=t(e);"function"==typeof i&&(u.current=i)}else u.current?(u.current(),u.current=null):t(e);else t&&(t.current=e)},[o])),f,d,t,s)]})}o.displayName=`motion.${"string"==typeof e?e:`create(${e.displayName??e.name??""})`}`;let l=(0,nG.forwardRef)(o);return l[aT]=e,l}class aL{constructor(e){this.isMounted=!1,this.node=e}update(){}}function aD(e,t,i){let n=e.getProps();return sC(n,t,void 0!==i?i:n.custom,e)}function aI(e,t){return e?.[t]??e?.default??e}let aU=e=>Array.isArray(e);function aN(e,t){let i=e.getValue("willChange");if(rE(i)&&i.add)return i.add(t);if(!i&&r0.WillChange){let i=new r0.WillChange("auto");e.addValue("willChange",i),i.add(t)}}let aO=e=>1e3*e,aF=(e,t)=>i=>t(e(i)),aB=(...e)=>e.reduce(aF),ak={layout:0,mainThread:0,waapi:0};function az(e,t,i){return(i<0&&(i+=1),i>1&&(i-=1),i<1/6)?e+(t-e)*6*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e}function aV(e,t){return i=>i>0?t:e}let aH=(e,t,i)=>{let n=e*e,r=i*(t*t-n)+n;return r<0?0:Math.sqrt(r)},aG=[n3,n2,rt];function aW(e){let t=aG.find(t=>t.test(e));if(rR(!!t,`'${e}' is not an animatable color. Use the equivalent color code instead.`,"color-not-animatable"),!t)return!1;let i=t.parse(e);return t===rt&&(i=function({hue:e,saturation:t,lightness:i,alpha:n}){e/=360,i/=100;let r=0,s=0,a=0;if(t/=100){let n=i<.5?i*(1+t):i+t-i*t,o=2*i-n;r=az(o,n,e+1/3),s=az(o,n,e),a=az(o,n,e-1/3)}else r=s=a=i;return{red:Math.round(255*r),green:Math.round(255*s),blue:Math.round(255*a),alpha:n}}(i)),i}let aX=(e,t)=>{let i=aW(e),n=aW(t);if(!i||!n)return aV(e,t);let r={...i};return e=>(r.red=aH(i.red,n.red,e),r.green=aH(i.green,n.green,e),r.blue=aH(i.blue,n.blue,e),r.alpha=sY(i.alpha,n.alpha,e),n2.transform(r))},aj=new Set(["none","hidden"]);function aY(e,t){return i=>sY(e,t,i)}function aq(e){return"number"==typeof e?aY:"string"==typeof e?rN(e)?aV:ri.test(e)?aX:aZ:Array.isArray(e)?aK:"object"==typeof e?ri.test(e)?aX:a$:aV}function aK(e,t){let i=[...e],n=i.length,r=e.map((e,i)=>aq(e)(e,t[i]));return e=>{for(let t=0;t<n;t++)i[t]=r[t](e);return i}}function a$(e,t){let i={...e,...t},n={};for(let r in i)void 0!==e[r]&&void 0!==t[r]&&(n[r]=aq(e[r])(e[r],t[r]));return e=>{for(let t in n)i[t]=n[t](e);return i}}let aZ=(e,t)=>{let i=rc.createTransformer(t),n=ro(e),r=ro(t);if(!(n.indexes.var.length===r.indexes.var.length&&n.indexes.color.length===r.indexes.color.length&&n.indexes.number.length>=r.indexes.number.length))return rR(!0,`Complex values '${e}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`,"complex-values-different"),aV(e,t);if(aj.has(e)&&!r.values.length||aj.has(t)&&!n.values.length)return aj.has(e)?i=>i<=0?e:t:i=>i>=1?t:e;return aB(aK(function(e,t){let i=[],n={color:0,var:0,number:0};for(let r=0;r<t.values.length;r++){let s=t.types[r],a=e.indexes[s][n[s]],o=e.values[a]??0;i[r]=o,n[s]++}return i}(n,r),r.values),i)};function aJ(e,t,i){return"number"==typeof e&&"number"==typeof t&&"number"==typeof i?sY(e,t,i):aq(e)(e,t)}let aQ=e=>{let t=({timestamp:t})=>e(t);return{start:(e=!0)=>r3.update(t,e),stop:()=>r4(t),now:()=>r5.isProcessing?r5.timestamp:sd.now()}},a0=(e,t,i=10)=>{let n="",r=Math.max(Math.round(t/i),2);for(let t=0;t<r;t++)n+=Math.round(1e4*e(t/(r-1)))/1e4+", ";return`linear(${n.substring(0,n.length-2)})`};function a1(e){let t=0,i=e.next(t);for(;!i.done&&t<2e4;)t+=50,i=e.next(t);return t>=2e4?1/0:t}function a2(e,t,i){var n,r;let s=Math.max(t-5,0);return n=i-e(s),(r=t-s)?1e3/r*n:0}let a3=.01,a4=2,a5=.005,a6=.5;function a8(e,t){return e*Math.sqrt(1-t*t)}let a9=["duration","bounce"],a7=["stiffness","damping","mass"];function oe(e,t){return t.some(t=>void 0!==e[t])}function ot(e=.3,t=.3){let i,n="object"!=typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e,{restSpeed:r,restDelta:s}=n,a=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:a},{stiffness:h,damping:u,mass:c,duration:d,velocity:p,isResolvedFromDuration:f}=function(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!oe(e,a7)&&oe(e,a9))if(e.visualDuration){let i=2*Math.PI/(1.2*e.visualDuration),n=i*i,r=2*nj(.05,1,1-(e.bounce||0))*Math.sqrt(n);t={...t,mass:1,stiffness:n,damping:r}}else{let i=function({duration:e=800,bounce:t=.3,velocity:i=0,mass:n=1}){let r,s;rR(e<=aO(10),"Spring duration must be 10 seconds or less","spring-duration-limit");let a=1-t;a=nj(.05,1,a),e=nj(.01,10,e/1e3),a<1?(r=t=>{let n=t*a,r=n*e;return .001-(n-i)/a8(t,a)*Math.exp(-r)},s=t=>{let n=t*a*e,s=Math.pow(a,2)*Math.pow(t,2)*e,o=Math.exp(-n),l=a8(Math.pow(t,2),a);return(n*i+i-s)*o*(-r(t)+.001>0?-1:1)/l}):(r=t=>-.001+Math.exp(-t*e)*((t-i)*e+1),s=t=>e*e*(i-t)*Math.exp(-t*e));let o=function(e,t,i){let n=i;for(let i=1;i<12;i++)n-=e(n)/t(n);return n}(r,s,5/e);if(e=aO(e),isNaN(o))return{stiffness:100,damping:10,duration:e};{let t=Math.pow(o,2)*n;return{stiffness:t,damping:2*a*Math.sqrt(n*t),duration:e}}}(e);(t={...t,...i,mass:1}).isResolvedFromDuration=!0}return t}({...n,velocity:-((n.velocity||0)/1e3)}),m=p||0,g=u/(2*Math.sqrt(h*c)),v=o-a,_=Math.sqrt(h/c)/1e3,x=5>Math.abs(v);if(r||(r=x?a3:a4),s||(s=x?a5:a6),g<1){let e=a8(_,g);i=t=>o-Math.exp(-g*_*t)*((m+g*_*v)/e*Math.sin(e*t)+v*Math.cos(e*t))}else if(1===g)i=e=>o-Math.exp(-_*e)*(v+(m+_*v)*e);else{let e=_*Math.sqrt(g*g-1);i=t=>{let i=Math.exp(-g*_*t),n=Math.min(e*t,300);return o-i*((m+g*_*v)*Math.sinh(n)+e*v*Math.cosh(n))/e}}let y={calculatedDuration:f&&d||null,next:e=>{let t=i(e);if(f)l.done=e>=d;else{let n=0===e?m:0;g<1&&(n=0===e?aO(m):a2(i,e,t));let a=Math.abs(o-t)<=s;l.done=Math.abs(n)<=r&&a}return l.value=l.done?o:t,l},toString:()=>{let e=Math.min(a1(y),2e4),t=a0(t=>y.next(e*t).value,e,30);return e+"ms "+t},toTransition:()=>{}};return y}function oi({keyframes:e,velocity:t=0,power:i=.8,timeConstant:n=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:h=.5,restSpeed:u}){let c,d,p=e[0],f={done:!1,value:p},m=i*t,g=p+m,v=void 0===a?g:a(g);v!==g&&(m=v-p);let _=e=>-m*Math.exp(-e/n),x=e=>v+_(e),y=e=>{let t=_(e),i=x(e);f.done=Math.abs(t)<=h,f.value=f.done?v:i},M=e=>{let t;if(t=f.value,void 0!==o&&t<o||void 0!==l&&t>l){var i;c=e,d=ot({keyframes:[f.value,(i=f.value,void 0===o?l:void 0===l||Math.abs(o-i)<Math.abs(l-i)?o:l)],velocity:a2(x,e,f.value),damping:r,stiffness:s,restDelta:h,restSpeed:u})}};return M(0),{calculatedDuration:null,next:e=>{let t=!1;return(d||void 0!==c||(t=!0,y(e),M(e)),void 0!==c&&e>=c)?d.next(e-c):(t||y(e),f)}}}ot.applyToOptions=e=>{let t=function(e,t=100,i){let n=i({...e,keyframes:[0,t]}),r=Math.min(a1(n),2e4);return{type:"keyframes",ease:e=>n.next(r*e).value/t,duration:r/1e3}}(e,100,ot);return e.ease=t.ease,e.duration=aO(t.duration),e.type="keyframes",e};let on=(e,t,i)=>(((1-3*i+3*t)*e+(3*i-6*t))*e+3*t)*e;function or(e,t,i,n){return e===t&&i===n?rQ:r=>0===r||1===r?r:on(function(e,t,i,n,r){let s,a,o=0;do(s=on(a=t+(i-t)/2,n,r)-e)>0?i=a:t=a;while(Math.abs(s)>1e-7&&++o<12)return a}(r,0,1,e,i),t,n)}let os=or(.42,0,1,1),oa=or(0,0,.58,1),oo=or(.42,0,.58,1),ol=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,oh=e=>t=>1-e(1-t),ou=or(.33,1.53,.69,.99),oc=oh(ou),od=ol(oc),op=e=>(e*=2)<1?.5*oc(e):.5*(2-Math.pow(2,-10*(e-1))),of=e=>1-Math.sin(Math.acos(e)),om=oh(of),og=ol(of),ov=e=>Array.isArray(e)&&"number"==typeof e[0],o_={linear:rQ,easeIn:os,easeInOut:oo,easeOut:oa,circIn:of,circInOut:og,circOut:om,backIn:oc,backInOut:od,backOut:ou,anticipate:op},ox=e=>{if(ov(e)){rL(4===e.length,"Cubic bezier arrays must contain four numerical values.","cubic-bezier-length");let[t,i,n,r]=e;return or(t,i,n,r)}return"string"==typeof e?(rL(void 0!==o_[e],`Invalid easing type '${e}'`,"invalid-easing-type"),o_[e]):e},oy=(e,t,i)=>{let n=t-e;return 0===n?1:(i-e)/n};function oM(e,t,{clamp:i=!0,ease:n,mixer:r}={}){let s=e.length;if(rL(s===t.length,"Both input and output ranges must be the same length","range-length"),1===s)return()=>t[0];if(2===s&&t[0]===t[1])return()=>t[1];let a=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());let o=function(e,t,i){let n=[],r=i||r0.mix||aJ,s=e.length-1;for(let i=0;i<s;i++){let s=r(e[i],e[i+1]);t&&(s=aB(Array.isArray(t)?t[i]||rQ:t,s)),n.push(s)}return n}(t,n,r),l=o.length,h=i=>{if(a&&i<e[0])return t[0];let n=0;if(l>1)for(;n<e.length-2&&!(i<e[n+1]);n++);let r=oy(e[n],e[n+1],i);return o[n](r)};return i?t=>h(nj(e[0],e[s-1],t)):h}function oS({duration:e=300,keyframes:t,times:i,ease:n="easeInOut"}){var r;let s,a=Array.isArray(n)&&"number"!=typeof n[0]?n.map(ox):ox(n),o={done:!1,value:t[0]},l=oM((r=i&&i.length===t.length?i:(!function(e,t){let i=e[e.length-1];for(let n=1;n<=t;n++){let r=oy(0,t,n);e.push(sY(i,1,r))}}(s=[0],t.length-1),s),r.map(t=>t*e)),t,{ease:Array.isArray(a)?a:t.map(()=>a||oo).splice(0,t.length-1)});return{calculatedDuration:e,next:t=>(o.value=l(t),o.done=t>=e,o)}}let ob=e=>null!==e;function oE(e,{repeat:t,repeatType:i="loop"},n,r=1){let s=e.filter(ob),a=r<0||t&&"loop"!==i&&t%2==1?0:s.length-1;return a&&void 0!==n?n:s[a]}let oT={decay:oi,inertia:oi,tween:oS,keyframes:oS,spring:ot};function ow(e){"string"==typeof e.type&&(e.type=oT[e.type])}class oA{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}let oC=e=>e/100;class oP extends oA{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{let{motionValue:e}=this.options;e&&e.updatedAt!==sd.now()&&this.tick(sd.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),this.options.onStop?.())},ak.mainThread++,this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){let{options:e}=this;ow(e);let{type:t=oS,repeat:i=0,repeatDelay:n=0,repeatType:r,velocity:s=0}=e,{keyframes:a}=e,o=t||oS;o!==oS&&"number"!=typeof a[0]&&(this.mixKeyframes=aB(oC,aJ(a[0],a[1])),a=[0,100]);let l=o({...e,keyframes:a});"mirror"===r&&(this.mirroredGenerator=o({...e,keyframes:[...a].reverse(),velocity:-s})),null===l.calculatedDuration&&(l.calculatedDuration=a1(l));let{calculatedDuration:h}=l;this.calculatedDuration=h,this.resolvedDuration=h+n,this.totalDuration=this.resolvedDuration*(i+1)-n,this.generator=l}updateTime(e){let t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){let{generator:i,totalDuration:n,mixKeyframes:r,mirroredGenerator:s,resolvedDuration:a,calculatedDuration:o}=this;if(null===this.startTime)return i.next(0);let{delay:l=0,keyframes:h,repeat:u,repeatType:c,repeatDelay:d,type:p,onUpdate:f,finalKeyframe:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-n/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);let g=this.currentTime-l*(this.playbackSpeed>=0?1:-1),v=this.playbackSpeed>=0?g<0:g>n;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=n);let _=this.currentTime,x=i;if(u){let e=Math.min(this.currentTime,n)/a,t=Math.floor(e),i=e%1;!i&&e>=1&&(i=1),1===i&&t--,(t=Math.min(t,u+1))%2&&("reverse"===c?(i=1-i,d&&(i-=d/a)):"mirror"===c&&(x=s)),_=nj(0,1,i)*a}let y=v?{done:!1,value:h[0]}:x.next(_);r&&(y.value=r(y.value));let{done:M}=y;v||null===o||(M=this.playbackSpeed>=0?this.currentTime>=n:this.currentTime<=0);let S=null===this.holdTime&&("finished"===this.state||"running"===this.state&&M);return S&&p!==oi&&(y.value=oE(h,this.options,m,this.speed)),f&&f(y.value),S&&this.finish(),y}then(e,t){return this.finished.then(e,t)}get duration(){return this.calculatedDuration/1e3}get iterationDuration(){let{delay:e=0}=this.options||{};return this.duration+e/1e3}get time(){return this.currentTime/1e3}set time(e){e=aO(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(sd.now());let t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=this.currentTime/1e3)}play(){if(this.isStopped)return;let{driver:e=aQ,startTime:t}=this.options;this.driver||(this.driver=e(e=>this.tick(e))),this.options.onPlay?.();let i=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=i):null!==this.holdTime?this.startTime=i-this.holdTime:this.startTime||(this.startTime=t??i),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(sd.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null,ak.mainThread--}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function oR(e){let t;return()=>(void 0===t&&(t=e()),t)}let oL=oR(()=>void 0!==window.ScrollTimeline),oD={},oI=(i=oR(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0}),()=>oD.linearEasing??i()),oU=([e,t,i,n])=>`cubic-bezier(${e}, ${t}, ${i}, ${n})`,oN={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:oU([0,.65,.55,1]),circOut:oU([.55,0,1,.45]),backIn:oU([.31,.01,.66,-.59]),backOut:oU([.33,1.53,.69,.99])};function oO(e){return"function"==typeof e&&"applyToOptions"in e}class oF extends oA{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!e)return;const{element:t,name:i,keyframes:n,pseudoElement:r,allowFlatten:s=!1,finalKeyframe:a,onComplete:o}=e;this.isPseudoElement=!!r,this.allowFlatten=s,this.options=e,rL("string"!=typeof e.type,'Mini animate() doesn\'t support "type" as a string.',"mini-spring");const l=function({type:e,...t}){return oO(e)&&oI()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}(e);this.animation=function(e,t,i,{delay:n=0,duration:r=300,repeat:s=0,repeatType:a="loop",ease:o="easeOut",times:l}={},h){let u={[t]:i};l&&(u.offset=l);let c=function e(t,i){if(t)return"function"==typeof t?oI()?a0(t,i):"ease-out":ov(t)?oU(t):Array.isArray(t)?t.map(t=>e(t,i)||oN.easeOut):oN[t]}(o,r);Array.isArray(c)&&(u.easing=c);let d={delay:n,duration:r,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:s+1,direction:"reverse"===a?"alternate":"normal"};h&&(d.pseudoElement=h);let p=e.animate(u,d);return p}(t,i,n,l,r),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!r){let e=oE(n,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(e):i.startsWith("--")?t.style.setProperty(i,e):t.style[i]=e,this.animation.cancel()}o?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch(e){}}stop(){if(this.isStopped)return;this.isStopped=!0;let{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){return Number(this.animation.effect?.getComputedTiming?.().duration||0)/1e3}get iterationDuration(){let{delay:e=0}=this.options||{};return this.duration+e/1e3}get time(){return(Number(this.animation.currentTime)||0)/1e3}set time(e){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=aO(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(e){this.manualStartTime=this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return(this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&oL())?(this.animation.timeline=e,rQ):t(this)}}let oB={anticipate:op,backInOut:od,circInOut:og};class ok extends oF{constructor(e){!function(e){"string"==typeof e.ease&&e.ease in oB&&(e.ease=oB[e.ease])}(e),ow(e),super(e),void 0!==e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){let{motionValue:t,onUpdate:i,onComplete:n,element:r,...s}=this.options;if(!t)return;if(void 0!==e)return void t.set(e);let a=new oP({...s,autoplay:!1}),o=Math.max(10,sd.now()-this.startTime),l=nj(0,10,o-10);t.setWithVelocity(a.sample(Math.max(0,o-l)).value,a.sample(o).value,l),a.stop()}}let oz=(e,t)=>"zIndex"!==t&&!!("number"==typeof e||Array.isArray(e)||"string"==typeof e&&(rc.test(e)||"0"===e)&&!e.startsWith("url("));function oV(e){e.duration=0,e.type="keyframes"}let oH=new Set(["opacity","clipPath","filter","transform"]),oG=oR(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));class oW extends oA{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:n=0,repeatDelay:r=0,repeatType:s="loop",keyframes:a,name:o,motionValue:l,element:h,...u}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=sd.now();const c={autoplay:e,delay:t,type:i,repeat:n,repeatDelay:r,repeatType:s,name:o,motionValue:l,element:h,...u},d=h?.KeyframeResolver||sn;this.keyframeResolver=new d(a,(e,t,i)=>this.onKeyframesResolved(e,t,c,!i),o,l,h),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,i,n){this.keyframeResolver=void 0;let{name:r,type:s,velocity:a,delay:o,isHandoff:l,onUpdate:h}=i;this.resolvedAt=sd.now(),!function(e,t,i,n){let r=e[0];if(null===r)return!1;if("display"===t||"visibility"===t)return!0;let s=e[e.length-1],a=oz(r,t),o=oz(s,t);return rR(a===o,`You are trying to animate ${t} from "${r}" to "${s}". "${a?s:r}" is not an animatable value.`,"value-not-animatable"),!!a&&!!o&&(function(e){let t=e[0];if(1===e.length)return!0;for(let i=0;i<e.length;i++)if(e[i]!==t)return!0}(e)||("spring"===i||oO(i))&&n)}(e,r,s,a)&&((r0.instantAnimations||!o)&&h?.(oE(e,i,t)),e[0]=e[e.length-1],oV(i),i.repeat=0);let u={startTime:n?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t,...i,keyframes:e},c=!l&&function(e){let{motionValue:t,name:i,repeatDelay:n,repeatType:r,damping:s,type:a}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;let{onUpdate:o,transformTemplate:l}=t.owner.getProps();return oG()&&i&&oH.has(i)&&("transform"!==i||!l)&&!o&&!n&&"mirror"!==r&&0!==s&&"inertia"!==a}(u),d=u.motionValue?.owner?.current,p=c?new ok({...u,element:d}):new oP(u);p.finished.then(()=>{this.notifyFinished()}).catch(rQ),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),se=!0,si(),st(),se=!1),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}let oX={type:"spring",stiffness:500,damping:25,restSpeed:10},oj={type:"keyframes",duration:.8},oY={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},oq=e=>null!==e,oK=(e,t,i,n={},r,s)=>a=>{let o=aI(n,e)||{},l=o.delay||n.delay||0,{elapsed:h=0}=n;h-=aO(l);let u={keyframes:Array.isArray(i)?i:[null,i],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-h,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:s?void 0:r};!function({when:e,delay:t,delayChildren:i,staggerChildren:n,staggerDirection:r,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:h,...u}){return!!Object.keys(u).length}(o)&&Object.assign(u,((e,{keyframes:t})=>t.length>2?oj:nX.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===t[1]?2*Math.sqrt(550):30,restSpeed:10}:oX:oY)(e,u)),u.duration&&(u.duration=aO(u.duration)),u.repeatDelay&&(u.repeatDelay=aO(u.repeatDelay)),void 0!==u.from&&(u.keyframes[0]=u.from);let c=!1;if(!1!==u.type&&(0!==u.duration||u.repeatDelay)||(oV(u),0===u.delay&&(c=!0)),(r0.instantAnimations||r0.skipAnimations)&&(c=!0,oV(u),u.delay=0),u.allowFlatten=!o.type&&!o.ease,c&&!s&&void 0!==t.get()){let e=function(e,{repeat:t,repeatType:i="loop"},n){let r=e.filter(oq),s=t&&"loop"!==i&&t%2==1?0:r.length-1;return r[s]}(u.keyframes,o);if(void 0!==e)return void r3.update(()=>{u.onUpdate(e),u.onComplete()})}return o.isSync?new oP(u):new oW(u)};function o$(e,t,{delay:i=0,transitionOverride:n,type:r}={}){let{transition:s=e.getDefaultTransition(),transitionEnd:a,...o}=t;n&&(s=n);let l=[],h=r&&e.animationState&&e.animationState.getState()[r];for(let t in o){let n=e.getValue(t,e.latestValues[t]??null),r=o[t];if(void 0===r||h&&function({protectedKeys:e,needsAnimating:t},i){let n=e.hasOwnProperty(i)&&!0!==t[i];return t[i]=!1,n}(h,t))continue;let a={delay:i,...aI(s||{},t)},u=n.get();if(void 0!==u&&!n.isAnimating&&!Array.isArray(r)&&r===u&&!a.velocity)continue;let c=!1;if(window.MotionHandoffAnimation){let i=e.props[aw];if(i){let e=window.MotionHandoffAnimation(i,t,r3);null!==e&&(a.startTime=e,c=!0)}}aN(e,t),n.start(oK(t,n,r,e.shouldReduceMotion&&rT.has(t)?{type:!1}:a,e,c));let d=n.animation;d&&l.push(d)}return a&&Promise.all(l).then(()=>{r3.update(()=>{a&&function(e,t){let{transitionEnd:i={},transition:n={},...r}=aD(e,t)||{};for(let t in r={...r,...i}){var s;let i=aU(s=r[t])?s[s.length-1]||0:s;e.hasValue(t)?e.getValue(t).set(i):e.addValue(t,sm(i))}}(e,a)})}),l}function oZ(e,t,i,n=0,r=1){let s=Array.from(e).sort((e,t)=>e.sortNodePosition(t)).indexOf(t),a=e.size,o=(a-1)*n;return"function"==typeof i?i(s,a):1===r?s*n:o-s*n}function oJ(e,t,i={}){let n=aD(e,t,"exit"===i.type?e.presenceContext?.custom:void 0),{transition:r=e.getDefaultTransition()||{}}=n||{};i.transitionOverride&&(r=i.transitionOverride);let s=n?()=>Promise.all(o$(e,n,i)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(n=0)=>{let{delayChildren:s=0,staggerChildren:a,staggerDirection:o}=r;return function(e,t,i=0,n=0,r=0,s=1,a){let o=[];for(let l of e.variantChildren)l.notify("AnimationStart",t),o.push(oJ(l,t,{...a,delay:i+("function"==typeof n?0:n)+oZ(e.variantChildren,l,n,r,s)}).then(()=>l.notify("AnimationComplete",t)));return Promise.all(o)}(e,t,n,s,a,o,i)}:()=>Promise.resolve(),{when:o}=r;if(!o)return Promise.all([s(),a(i.delay)]);{let[e,t]="beforeChildren"===o?[s,a]:[a,s];return e().then(()=>t())}}let oQ=sE.length;function o0(e,t){if(!Array.isArray(t))return!1;let i=t.length;if(i!==e.length)return!1;for(let n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0}let o1=[...sb].reverse(),o2=sb.length;function o3(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function o4(){return{animate:o3(!0),whileInView:o3(),whileHover:o3(),whileTap:o3(),whileDrag:o3(),whileFocus:o3(),exit:o3()}}let o5=0;function o6(e){return[e("x"),e("y")]}let o8=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function o9(e){return o8.has(e.tagName)||!0===e.isContentEditable}function o7(e,t,i,n={passive:!0}){return e.addEventListener(t,i,n),()=>e.removeEventListener(t,i)}let le={x:!1,y:!1};function lt(e){return e.max-e.min}function li(e,t,i,n=.5){e.origin=n,e.originPoint=sY(t.min,t.max,e.origin),e.scale=lt(i)/lt(t),e.translate=sY(i.min,i.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function ln(e,t,i,n){li(e.x,t.x,i.x,n?n.originX:void 0),li(e.y,t.y,i.y,n?n.originY:void 0)}function lr(e,t,i){e.min=i.min+t.min,e.max=e.min+lt(t)}function ls(e,t,i){e.min=t.min-i.min,e.max=e.min+lt(t)}function la(e,t,i){ls(e.x,t.x,i.x),ls(e.y,t.y,i.y)}let lo=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary;function ll(e){return{point:{x:e.pageX,y:e.pageY}}}function lh(e,t,i,n){return o7(e,t,e=>lo(e)&&i(e,ll(e)),n)}let lu=({current:e})=>e?e.ownerDocument.defaultView:null,lc=(e,t)=>Math.abs(e-t),ld=new Set(["auto","scroll"]);class lp{constructor(e,t,{transformPagePoint:i,contextWindow:n=window,dragSnapToOrigin:r=!1,distanceThreshold:s=3,element:a}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=e=>{this.handleScroll(e.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{var e,t;if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let i=lg(this.lastMoveEventInfo,this.history),n=null!==this.startEvent,r=(e=i.offset,t={x:0,y:0},Math.sqrt(lc(e.x,t.x)**2+lc(e.y,t.y)**2)>=this.distanceThreshold);if(!n&&!r)return;let{point:s}=i,{timestamp:a}=r5;this.history.push({...s,timestamp:a});let{onStart:o,onMove:l}=this.handlers;n||(o&&o(this.lastMoveEvent,i),this.startEvent=this.lastMoveEvent),l&&l(this.lastMoveEvent,i)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=lf(t,this.transformPagePoint),r3.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();let{onEnd:i,onSessionEnd:n,resumeAnimation:r}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&r&&r(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let s=lg("pointercancel"===e.type?this.lastMoveEventInfo:lf(t,this.transformPagePoint),this.history);this.startEvent&&i&&i(e,s),n&&n(e,s)},!lo(e))return;this.dragSnapToOrigin=r,this.handlers=t,this.transformPagePoint=i,this.distanceThreshold=s,this.contextWindow=n||window;const o=lf(ll(e),this.transformPagePoint),{point:l}=o,{timestamp:h}=r5;this.history=[{...l,timestamp:h}];const{onSessionStart:u}=t;u&&u(e,lg(o,this.history)),this.removeListeners=aB(lh(this.contextWindow,"pointermove",this.handlePointerMove),lh(this.contextWindow,"pointerup",this.handlePointerUp),lh(this.contextWindow,"pointercancel",this.handlePointerUp)),a&&this.startScrollTracking(a)}startScrollTracking(e){let t=e.parentElement;for(;t;){let e=getComputedStyle(t);(ld.has(e.overflowX)||ld.has(e.overflowY))&&this.scrollPositions.set(t,{x:t.scrollLeft,y:t.scrollTop}),t=t.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(e){let t=this.scrollPositions.get(e);if(!t)return;let i=e===window,n=i?{x:window.scrollX,y:window.scrollY}:{x:e.scrollLeft,y:e.scrollTop},r={x:n.x-t.x,y:n.y-t.y};(0!==r.x||0!==r.y)&&(i?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=r.x,this.lastMoveEventInfo.point.y+=r.y):this.history.length>0&&(this.history[0].x-=r.x,this.history[0].y-=r.y),this.scrollPositions.set(e,n),r3.update(this.updatePoint,!0))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),r4(this.updatePoint)}}function lf(e,t){return t?{point:t(e.point)}:e}function lm(e,t){return{x:e.x-t.x,y:e.y-t.y}}function lg({point:e},t){return{point:e,delta:lm(e,lv(t)),offset:lm(e,t[0]),velocity:function(e,t){if(e.length<2)return{x:0,y:0};let i=e.length-1,n=null,r=lv(e);for(;i>=0&&(n=e[i],!(r.timestamp-n.timestamp>aO(.1)));)i--;if(!n)return{x:0,y:0};let s=(r.timestamp-n.timestamp)/1e3;if(0===s)return{x:0,y:0};let a={x:(r.x-n.x)/s,y:(r.y-n.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}(t,.1)}}function lv(e){return e[e.length-1]}function l_(e,t,i){return{min:void 0!==t?e.min+t:void 0,max:void 0!==i?e.max+i-(e.max-e.min):void 0}}function lx(e,t){let i=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([i,n]=[n,i]),{min:i,max:n}}function ly(e,t,i){return{min:lM(e,t),max:lM(e,i)}}function lM(e,t){return"number"==typeof e?e:e[t]||0}let lS=new WeakMap;class lb{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=rb(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:i}={}){let{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;let r=e=>{t?(this.stopAnimation(),this.snapToCursor(ll(e).point)):this.pauseAnimation()},s=(e,t)=>{this.stopAnimation();let{drag:i,dragPropagation:n,onDragStart:r}=this.getProps();if(i&&!n&&(this.openDragLock&&this.openDragLock(),this.openDragLock=function(e){if("x"===e||"y"===e)if(le[e])return null;else return le[e]=!0,()=>{le[e]=!1};return le.x||le.y?null:(le.x=le.y=!0,()=>{le.x=le.y=!1})}(i),!this.openDragLock))return;this.latestPointerEvent=e,this.latestPanInfo=t,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),o6(e=>{let t=this.getAxisMotionValue(e).get()||0;if(n6.test(t)){let{projection:i}=this.visualElement;if(i&&i.layout){let n=i.layout.layoutBox[e];n&&(t=lt(n)*(parseFloat(t)/100))}}this.originPoint[e]=t}),r&&r3.postRender(()=>r(e,t)),aN(this.visualElement,"transform");let{animationState:s}=this.visualElement;s&&s.setActive("whileDrag",!0)},a=(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t;let{dragPropagation:i,dragDirectionLock:n,onDirectionLock:r,onDrag:s}=this.getProps();if(!i&&!this.openDragLock)return;let{offset:a}=t;if(n&&null===this.currentDirection){this.currentDirection=function(e,t=10){let i=null;return Math.abs(e.y)>t?i="y":Math.abs(e.x)>t&&(i="x"),i}(a),null!==this.currentDirection&&r&&r(this.currentDirection);return}this.updateAxis("x",t.point,a),this.updateAxis("y",t.point,a),this.visualElement.render(),s&&s(e,t)},o=(e,t)=>{this.latestPointerEvent=e,this.latestPanInfo=t,this.stop(e,t),this.latestPointerEvent=null,this.latestPanInfo=null},l=()=>o6(e=>"paused"===this.getAnimationState(e)&&this.getAxisMotionValue(e).animation?.play()),{dragSnapToOrigin:h}=this.getProps();this.panSession=new lp(e,{onSessionStart:r,onStart:s,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:i,contextWindow:lu(this.visualElement),element:this.visualElement.current})}stop(e,t){let i=e||this.latestPointerEvent,n=t||this.latestPanInfo,r=this.isDragging;if(this.cancel(),!r||!n||!i)return;let{velocity:s}=n;this.startAnimation(s);let{onDragEnd:a}=this.getProps();a&&r3.postRender(()=>a(i,n))}cancel(){this.isDragging=!1;let{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.endPanSession();let{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(e,t,i){let{drag:n}=this.getProps();if(!i||!lE(e,n,this.currentDirection))return;let r=this.getAxisMotionValue(e),s=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(s=function(e,{min:t,max:i},n){return void 0!==t&&e<t?e=n?sY(t,e,n.min):Math.max(e,t):void 0!==i&&e>i&&(e=n?sY(i,e,n.max):Math.min(e,i)),e}(s,this.constraints[e],this.elastic[e])),r.set(s)}resolveConstraints(){let{dragConstraints:e,dragElastic:t}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,n=this.constraints;e&&aC(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=function(e,{top:t,left:i,bottom:n,right:r}){return{x:l_(e.x,i,r),y:l_(e.y,t,n)}}(i.layoutBox,e):this.constraints=!1,this.elastic=function(e=.35){return!1===e?e=0:!0===e&&(e=.35),{x:ly(e,"left","right"),y:ly(e,"top","bottom")}}(t),n!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&o6(e=>{var t,n;let r;!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=(t=i.layoutBox[e],n=this.constraints[e],r={},void 0!==n.min&&(r.min=n.min-t.min),void 0!==n.max&&(r.max=n.max-t.min),r))})}resolveRefConstraints(){var e;let{dragConstraints:t,onMeasureDragConstraints:i}=this.getProps();if(!t||!aC(t))return!1;let n=t.current;rL(null!==n,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.","drag-constraints-ref");let{projection:r}=this.visualElement;if(!r||!r.layout)return!1;let s=function(e,t,i){let n=ae(e,i),{scroll:r}=t;return r&&(s8(n.x,r.offset.x),s8(n.y,r.offset.y)),n}(n,r.root,this.visualElement.getTransformPagePoint()),a=(e=r.layout.layoutBox,{x:lx(e.x,s.x),y:lx(e.y,s.y)});if(i){let e=i(function({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}(a));this.hasMutatedConstraints=!!e,e&&(a=sQ(e))}return a}startAnimation(e){let{drag:t,dragMomentum:i,dragElastic:n,dragTransition:r,dragSnapToOrigin:s,onDragTransitionEnd:a}=this.getProps(),o=this.constraints||{};return Promise.all(o6(a=>{if(!lE(a,t,this.currentDirection))return;let l=o&&o[a]||{};s&&(l={min:0,max:0});let h={type:"inertia",velocity:i?e[a]:0,bounceStiffness:n?200:1e6,bounceDamping:n?40:1e7,timeConstant:750,restDelta:1,restSpeed:10,...r,...l};return this.startAxisValueAnimation(a,h)})).then(a)}startAxisValueAnimation(e,t){let i=this.getAxisMotionValue(e);return aN(this.visualElement,e),i.start(oK(e,i,0,t,this.visualElement,!1))}stopAnimation(){o6(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){o6(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){let t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps();return i[t]||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){o6(t=>{let{drag:i}=this.getProps();if(!lE(t,i,this.currentDirection))return;let{projection:n}=this.visualElement,r=this.getAxisMotionValue(t);if(n&&n.layout){let{min:i,max:s}=n.layout.layoutBox[t],a=r.get()||0;r.set(e[t]-sY(i,s,.5)+a)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;let{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!aC(t)||!i||!this.constraints)return;this.stopAnimation();let n={x:0,y:0};o6(e=>{let t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){var i,r;let s,a,o,l=t.get();n[e]=(i={min:l,max:l},r=this.constraints[e],s=.5,a=lt(i),(o=lt(r))>a?s=oy(r.min,r.max-a,i.min):a>o&&(s=oy(i.min,i.max-o,r.min)),nj(0,1,s))}});let{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),o6(t=>{if(!lE(t,e,null))return;let i=this.getAxisMotionValue(t),{min:r,max:s}=this.constraints[t];i.set(sY(r,s,n[t]))})}addListeners(){if(!this.visualElement.current)return;lS.set(this.visualElement,this);let e=this.visualElement.current,t=lh(e,"pointerdown",t=>{let{drag:i,dragListener:n=!0}=this.getProps(),r=t.target,s=r!==e&&o9(r);i&&n&&!s&&this.start(t)}),i=()=>{let{dragConstraints:e}=this.getProps();aC(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",i);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),r3.read(i);let s=o7(window,"resize",()=>this.scalePositionWithinConstraints()),a=n.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(o6(t=>{let i=this.getAxisMotionValue(t);i&&(this.originPoint[t]+=e[t].translate,i.set(i.get()+e[t].translate))}),this.visualElement.render())});return()=>{s(),t(),r(),a&&a()}}getProps(){let e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:n=!1,dragConstraints:r=!1,dragElastic:s=.35,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:n,dragConstraints:r,dragElastic:s,dragMomentum:a}}}function lE(e,t,i){return(!0===t||t===e)&&(null===i||i===e)}let lT=e=>(t,i)=>{e&&r3.postRender(()=>e(t,i))},lw={hasAnimatedSinceResize:!0,hasEverUpdated:!1};var lA=nG;let lC=!1;class lP extends lA.Component{componentDidMount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:n}=this.props,{projection:r}=e;r&&(t.group&&t.group.add(r),i&&i.register&&n&&i.register(r),lC&&r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions({...r.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),lw.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){let{layoutDependency:t,visualElement:i,drag:n,isPresent:r}=this.props,{projection:s}=i;return s&&(s.isPresent=r,e.layoutDependency!==t&&s.setOptions({...s.options,layoutDependency:t}),lC=!0,n||e.layoutDependency!==t||void 0===t||e.isPresent!==r?s.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?s.promote():s.relegate()||r3.postRender(()=>{let e=s.getStack();e&&e.members.length||this.safeToRemove()}))),null}componentDidUpdate(){let{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),su.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:n}=e;lC=!0,n&&(n.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(n),i&&i.deregister&&i.deregister(n))}safeToRemove(){let{safeToRemove:e}=this.props;e&&e()}render(){return null}}function lR(e){let[t,i]=function(e=!0){let t=(0,nG.useContext)(ag);if(null===t)return[!0,null];let{isPresent:i,onExitComplete:n,register:r}=t,s=(0,nG.useId)();(0,nG.useEffect)(()=>{if(e)return r(s)},[e]);let a=(0,nG.useCallback)(()=>e&&n&&n(s),[s,n,e]);return!i&&n?[!1,a]:[!0]}(),n=(0,lA.useContext)(ar);return(0,nH.jsx)(lP,{...e,layoutGroup:n,switchLayoutGroup:(0,lA.useContext)(aA),isPresent:t,safeToRemove:i})}function lL(e,t,i,n,r){return e-=t,e=n+1/i*(e-n),void 0!==r&&(e=n+1/r*(e-n)),e}function lD(e,t,[i,n,r],s,a){!function(e,t=0,i=1,n=.5,r,s=e,a=e){if(n6.test(t)&&(t=parseFloat(t),t=sY(a.min,a.max,t/100)-a.min),"number"!=typeof t)return;let o=sY(s.min,s.max,n);e===s&&(o-=t),e.min=lL(e.min,t,i,o,r),e.max=lL(e.max,t,i,o,r)}(e,t[i],t[n],t[r],t.scale,s,a)}let lI=["x","scaleX","originX"],lU=["y","scaleY","originY"];function lN(e,t,i,n){lD(e.x,t,lI,i?i.x:void 0,n?n.x:void 0),lD(e.y,t,lU,i?i.y:void 0,n?n.y:void 0)}function lO(e,t){e.min=t.min,e.max=t.max}function lF(e,t){lO(e.x,t.x),lO(e.y,t.y)}function lB(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function lk(e){return 0===e.translate&&1===e.scale}function lz(e){return lk(e.x)&&lk(e.y)}function lV(e,t){return e.min===t.min&&e.max===t.max}function lH(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function lG(e,t){return lH(e.x,t.x)&&lH(e.y,t.y)}function lW(e){return lt(e.x)/lt(e.y)}function lX(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}let lj=["TopLeft","TopRight","BottomLeft","BottomRight"],lY=lj.length,lq=e=>"string"==typeof e?parseFloat(e):e,lK=e=>"number"==typeof e||n8.test(e);function l$(e,t){return void 0!==e[t]?e[t]:e.borderRadius}let lZ=lQ(0,.5,om),lJ=lQ(.5,.95,rQ);function lQ(e,t,i){return n=>n<e?0:n>t?1:i(oy(e,t,n))}function l0(e){return"object"==typeof e&&null!==e}function l1(e){return l0(e)&&"ownerSVGElement"in e}let l2=(e,t)=>e.depth-t.depth;class l3{constructor(){this.children=[],this.isDirty=!1}add(e){so(this.children,e),this.isDirty=!0}remove(e){sl(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(l2),this.isDirty=!1,this.children.forEach(e)}}class l4{constructor(){this.members=[]}add(e){so(this.members,e),e.scheduleRender()}remove(e){if(sl(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){let e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){let t,i=this.members.findIndex(t=>e===t);if(0===i)return!1;for(let e=i;e>=0;e--){let i=this.members[e];if(!1!==i.isPresent){t=i;break}}return!!t&&(this.promote(t),!0)}promote(e,t){let i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender();let n=i.options.layoutDependency,r=e.options.layoutDependency;(void 0===n||void 0===r||n!==r)&&(e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0));let{crossfade:s}=e.options;!1===s&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{let{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}let l5=["","X","Y","Z"],l6=0;function l8(e,t,i,n){let{latestValues:r}=t;r[e]&&(i[e]=r[e],t.setStaticValue(e,0),n&&(n[e]=0))}function l9({attachResizeListener:e,defaultParent:t,measureScroll:i,checkIsScrollRoot:n,resetTransform:r}){return class{constructor(e={},i=t?.()){this.id=l6++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(ht),this.nodes.forEach(hl),this.nodes.forEach(hh),this.nodes.forEach(hi)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=i?i.root||i:this,this.path=i?[...i.path,i]:[],this.parent=i,this.depth=i?i.depth+1:0;for(let e=0;e<this.path.length;e++)this.path[e].shouldResetTransform=!0;this.root===this&&(this.nodes=new l3)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new sh),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){let i=this.eventHandlers.get(e);i&&i.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t){if(this.instance)return;this.isSVG=l1(t)&&!(l1(t)&&"svg"===t.tagName),this.instance=t;let{layoutId:i,layout:n,visualElement:r}=this.options;if(r&&!r.current&&r.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(n||i)&&(this.isLayoutDirty=!0),e){let i,n=0,r=()=>this.root.updateBlockedByResize=!1;r3.read(()=>{n=window.innerWidth}),e(t,()=>{let e=window.innerWidth;if(e!==n){let t,s;n=e,this.root.updateBlockedByResize=!0,i&&i(),t=sd.now(),s=({timestamp:e})=>{let i=e-t;i>=250&&(r4(s),r(i-250))},r3.setup(s,!0),i=()=>r4(s),lw.hasAnimatedSinceResize&&(lw.hasAnimatedSinceResize=!1,this.nodes.forEach(ho))}})}i&&this.root.registerSharedNode(i,this),!1!==this.options.animate&&r&&(i||n)&&this.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t,hasRelativeLayoutChanged:i,layout:n})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}let s=this.options.transition||r.getDefaultTransition()||hm,{onLayoutAnimationStart:a,onLayoutAnimationComplete:o}=r.getProps(),l=!this.targetLayout||!lG(this.targetLayout,n),h=!t&&i;if(this.options.layoutRoot||this.resumeFrom||h||t&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);let t={...aI(s,"layout"),onPlay:a,onComplete:o};(r.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t),this.setAnimationOrigin(e,h)}else t||ho(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=n})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);let e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),r4(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){!this.isUpdateBlocked()&&(this.isUpdating=!0,this.nodes&&this.nodes.forEach(hu),this.animationId++)}getTransformTemplate(){let{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&function e(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;let{visualElement:i}=t.options;if(!i)return;let n=i.props[aw];if(window.MotionHasOptimisedAnimation(n,"transform")){let{layout:e,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",r3,!(e||i))}let{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&e(r)}(this),this.root.isUpdating||this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let e=0;e<this.path.length;e++){let t=this.path[e];t.shouldResetTransform=!0,t.updateScroll("snapshot"),t.options.layoutRoot&&t.willUpdate(!1)}let{layoutId:t,layout:i}=this.options;if(void 0===t&&!i)return;let n=this.getTransformTemplate();this.prevTransformTemplateValue=n?n(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(hr);return}if(this.animationId<=this.animationCommitId)return void this.nodes.forEach(hs);this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(ha),this.nodes.forEach(l7),this.nodes.forEach(he)):this.nodes.forEach(hs),this.clearAllSnapshots();let e=sd.now();r5.delta=nj(0,1e3/60,e-r5.timestamp),r5.timestamp=e,r5.isProcessing=!0,r6.update.process(r5),r6.preRender.process(r5),r6.render.process(r5),r5.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,su.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(hn),this.sharedNodes.forEach(hc)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,r3.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){r3.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||lt(this.snapshot.measuredBox.x)||lt(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let e=0;e<this.path.length;e++)this.path[e].updateScroll();let e=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=rb(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);let{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let t=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){let t=n(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:i(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!r)return;let e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!lz(this.projectionDelta),i=this.getTransformTemplate(),n=i?i(this.latestValues,""):void 0,s=n!==this.prevTransformTemplateValue;e&&this.instance&&(t||s2(this.latestValues)||s)&&(r(this.instance,n),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){var t;let i=this.measurePageBox(),n=this.removeElementScroll(i);return e&&(n=this.removeTransform(n)),h_((t=n).x),h_(t.y),{animationId:this.root.animationId,measuredBox:i,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){let{visualElement:e}=this.options;if(!e)return rb();let t=e.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(hy))){let{scroll:e}=this.root;e&&(s8(t.x,e.offset.x),s8(t.y,e.offset.y))}return t}removeElementScroll(e){let t=rb();if(lF(t,e),this.scroll?.wasRoot)return t;for(let i=0;i<this.path.length;i++){let n=this.path[i],{scroll:r,options:s}=n;n!==this.root&&r&&s.layoutScroll&&(r.wasRoot&&lF(t,e),s8(t.x,r.offset.x),s8(t.y,r.offset.y))}return t}applyTransform(e,t=!1){let i=rb();lF(i,e);for(let e=0;e<this.path.length;e++){let n=this.path[e];!t&&n.options.layoutScroll&&n.scroll&&n!==n.root&&s7(i,{x:-n.scroll.offset.x,y:-n.scroll.offset.y}),s2(n.latestValues)&&s7(i,n.latestValues)}return s2(this.latestValues)&&s7(i,this.latestValues),i}removeTransform(e){let t=rb();lF(t,e);for(let e=0;e<this.path.length;e++){let i=this.path[e];if(!i.instance||!s2(i.latestValues))continue;s1(i.latestValues)&&i.updateSnapshot();let n=rb();lF(n,i.measurePageBox()),lN(t,i.latestValues,i.snapshot?i.snapshot.layoutBox:void 0,n)}return s2(this.latestValues)&&lN(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==r5.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){let t=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=t.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=t.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=t.isSharedProjectionDirty);let i=!!this.resumingFrom||this!==t;if(!(e||i&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;let{layout:n,layoutId:r}=this.options;if(!this.layout||!(n||r))return;this.resolvedRelativeTargetAt=r5.timestamp;let s=this.getClosestProjectingParent();if(s&&this.linkedParentVersion!==s.layoutVersion&&!s.options.layoutRoot&&this.removeRelativeTarget(),this.targetDelta||this.relativeTarget||(s&&s.layout?this.createRelativeTarget(s,this.layout.layoutBox,s.layout.layoutBox):this.removeRelativeTarget()),this.relativeTarget||this.targetDelta){if(this.target||(this.target=rb(),this.targetWithTransforms=rb()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target){var a,o,l;this.forceRelativeParentToResolveTarget(),a=this.target,o=this.relativeTarget,l=this.relativeParent.target,lr(a.x,o.x,l.x),lr(a.y,o.y,l.y)}else this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):lF(this.target,this.layout.layoutBox),s6(this.target,this.targetDelta)):lF(this.target,this.layout.layoutBox);this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,s&&!!s.resumingFrom==!!this.resumingFrom&&!s.options.layoutScroll&&s.target&&1!==this.animationProgress?this.createRelativeTarget(s,this.target,s.target):this.relativeParent=this.relativeTarget=void 0)}}getClosestProjectingParent(){if(!(!this.parent||s1(this.parent.latestValues)||s3(this.parent.latestValues)))if(this.parent.isProjecting())return this.parent;else return this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(e,t,i){this.relativeParent=e,this.linkedParentVersion=e.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=rb(),this.relativeTargetOrigin=rb(),la(this.relativeTargetOrigin,t,i),lF(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){let e=this.getLead(),t=!!this.resumingFrom||this!==e,i=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(i=!1),t&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(i=!1),this.resolvedRelativeTargetAt===r5.timestamp&&(i=!1),i)return;let{layout:n,layoutId:r}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(n||r))return;lF(this.layoutCorrected,this.layout.layoutBox);let s=this.treeScale.x,a=this.treeScale.y;!function(e,t,i,n=!1){let r,s,a=i.length;if(a){t.x=t.y=1;for(let o=0;o<a;o++){s=(r=i[o]).projectionDelta;let{visualElement:a}=r.options;(!a||!a.props.style||"contents"!==a.props.style.display)&&(n&&r.options.layoutScroll&&r.scroll&&r!==r.root&&s7(e,{x:-r.scroll.offset.x,y:-r.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,s6(e,s)),n&&s2(r.latestValues)&&s7(e,r.latestValues))}t.x<1.0000000000001&&t.x>.999999999999&&(t.x=1),t.y<1.0000000000001&&t.y>.999999999999&&(t.y=1)}}(this.layoutCorrected,this.treeScale,this.path,t),e.layout&&!e.target&&(1!==this.treeScale.x||1!==this.treeScale.y)&&(e.target=e.layout.layoutBox,e.targetWithTransforms=rb());let{target:o}=e;if(!o){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}this.projectionDelta&&this.prevProjectionDelta?(lB(this.prevProjectionDelta.x,this.projectionDelta.x),lB(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),ln(this.projectionDelta,this.layoutCorrected,o,this.latestValues),this.treeScale.x===s&&this.treeScale.y===a&&lX(this.projectionDelta.x,this.prevProjectionDelta.x)&&lX(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",o))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){if(this.options.visualElement?.scheduleRender(),e){let e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=rM(),this.projectionDelta=rM(),this.projectionDeltaWithTransform=rM()}setAnimationOrigin(e,t=!1){let i,n=this.snapshot,r=n?n.latestValues:{},s={...this.latestValues},a=rM();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;let o=rb(),l=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),h=this.getStack(),u=!h||h.members.length<=1,c=!!(l&&!u&&!0===this.options.crossfade&&!this.path.some(hf));this.animationProgress=0,this.mixTargetDelta=t=>{let n=t/1e3;if(hd(a.x,e.x,n),hd(a.y,e.y,n),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout){var h,d,p,f,m,g;la(o,this.layout.layoutBox,this.relativeParent.layout.layoutBox),p=this.relativeTarget,f=this.relativeTargetOrigin,m=o,g=n,hp(p.x,f.x,m.x,g),hp(p.y,f.y,m.y,g),i&&(h=this.relativeTarget,d=i,lV(h.x,d.x)&&lV(h.y,d.y))&&(this.isProjectionDirty=!1),i||(i=rb()),lF(i,this.relativeTarget)}l&&(this.animationValues=s,function(e,t,i,n,r,s){r?(e.opacity=sY(0,i.opacity??1,lZ(n)),e.opacityExit=sY(t.opacity??1,0,lJ(n))):s&&(e.opacity=sY(t.opacity??1,i.opacity??1,n));for(let r=0;r<lY;r++){let s=`border${lj[r]}Radius`,a=l$(t,s),o=l$(i,s);(void 0!==a||void 0!==o)&&(a||(a=0),o||(o=0),0===a||0===o||lK(a)===lK(o)?(e[s]=Math.max(sY(lq(a),lq(o),n),0),(n6.test(o)||n6.test(a))&&(e[s]+="%")):e[s]=o)}(t.rotate||i.rotate)&&(e.rotate=sY(t.rotate||0,i.rotate||0,n))}(s,r,this.latestValues,n,c,u)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(1e3*!!this.options.layoutRoot)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(r4(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=r3.update(()=>{var t,i,n;let r;lw.hasAnimatedSinceResize=!0,ak.layout++,this.motionValue||(this.motionValue=sm(0)),this.currentAnimation=(t=this.motionValue,i=[0,1e3],n={...e,velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{ak.layout--},onComplete:()=>{ak.layout--,e.onComplete&&e.onComplete(),this.completeAnimation()}},(r=rE(t)?t:sm(t)).start(oK("",r,i,n)),r.animation),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);let e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){let e=this.getLead(),{targetWithTransforms:t,target:i,layout:n,latestValues:r}=e;if(t&&i&&n){if(this!==e&&this.layout&&n&&hx(this.options.animationType,this.layout.layoutBox,n.layoutBox)){i=this.target||rb();let t=lt(this.layout.layoutBox.x);i.x.min=e.target.x.min,i.x.max=i.x.min+t;let n=lt(this.layout.layoutBox.y);i.y.min=e.target.y.min,i.y.max=i.y.min+n}lF(t,i),s7(t,r),ln(this.projectionDeltaWithTransform,this.layoutCorrected,t,r)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new l4),this.sharedNodes.get(e).add(t);let i=t.options.initialPromotionConfig;t.promote({transition:i?i.transition:void 0,preserveFollowOpacity:i&&i.shouldPreserveFollowOpacity?i.shouldPreserveFollowOpacity(t):void 0})}isLead(){let e=this.getStack();return!e||e.lead===this}getLead(){let{layoutId:e}=this.options;return e&&this.getStack()?.lead||this}getPrevLead(){let{layoutId:e}=this.options;return e?this.getStack()?.prevLead:void 0}getStack(){let{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:i}={}){let n=this.getStack();n&&n.promote(this,i),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){let e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){let{visualElement:e}=this.options;if(!e)return;let t=!1,{latestValues:i}=e;if((i.z||i.rotate||i.rotateX||i.rotateY||i.rotateZ||i.skewX||i.skewY)&&(t=!0),!t)return;let n={};i.z&&l8("z",e,n,this.animationValues);for(let t=0;t<l5.length;t++)l8(`rotate${l5[t]}`,e,n,this.animationValues),l8(`skew${l5[t]}`,e,n,this.animationValues);for(let t in e.render(),n)e.setStaticValue(t,n[t]),this.animationValues&&(this.animationValues[t]=n[t]);e.scheduleRender()}applyProjectionStyles(e,t){if(!this.instance||this.isSVG)return;if(!this.isVisible){e.visibility="hidden";return}let i=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,e.visibility="",e.opacity="",e.pointerEvents=am(t?.pointerEvents)||"",e.transform=i?i(this.latestValues,""):"none";return}let n=this.getLead();if(!this.projectionDelta||!this.layout||!n.target){this.options.layoutId&&(e.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,e.pointerEvents=am(t?.pointerEvents)||""),this.hasProjected&&!s2(this.latestValues)&&(e.transform=i?i({},""):"none",this.hasProjected=!1);return}e.visibility="";let r=n.animationValues||n.latestValues;this.applyTransformsToTarget();let s=function(e,t,i){let n="",r=e.x.translate/t.x,s=e.y.translate/t.y,a=i?.z||0;if((r||s||a)&&(n=`translate3d(${r}px, ${s}px, ${a}px) `),(1!==t.x||1!==t.y)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),i){let{transformPerspective:e,rotate:t,rotateX:r,rotateY:s,skewX:a,skewY:o}=i;e&&(n=`perspective(${e}px) ${n}`),t&&(n+=`rotate(${t}deg) `),r&&(n+=`rotateX(${r}deg) `),s&&(n+=`rotateY(${s}deg) `),a&&(n+=`skewX(${a}deg) `),o&&(n+=`skewY(${o}deg) `)}let o=e.x.scale*t.x,l=e.y.scale*t.y;return(1!==o||1!==l)&&(n+=`scale(${o}, ${l})`),n||"none"}(this.projectionDeltaWithTransform,this.treeScale,r);i&&(s=i(r,s)),e.transform=s;let{x:a,y:o}=this.projectionDelta;for(let t in e.transformOrigin=`${100*a.origin}% ${100*o.origin}% 0`,n.animationValues?e.opacity=n===this?r.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:r.opacityExit:e.opacity=n===this?void 0!==r.opacity?r.opacity:"":void 0!==r.opacityExit?r.opacityExit:0,sq){if(void 0===r[t])continue;let{correct:i,applyTo:a,isCSSVariable:o}=sq[t],l="none"===s?r[t]:i(r[t],n);if(a){let t=a.length;for(let i=0;i<t;i++)e[a[i]]=l}else o?this.options.visualElement.renderState.vars[t]=l:e[t]=l}this.options.layoutId&&(e.pointerEvents=n===this?am(t?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>e.currentAnimation?.stop()),this.root.nodes.forEach(hr),this.root.sharedNodes.clear()}}}function l7(e){e.updateLayout()}function he(e){let t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){let{layoutBox:i,measuredBox:n}=e.layout,{animationType:r}=e.options,s=t.source!==e.layout.source;"size"===r?o6(e=>{let n=s?t.measuredBox[e]:t.layoutBox[e],r=lt(n);n.min=i[e].min,n.max=n.min+r}):hx(r,t.layoutBox,i)&&o6(n=>{let r=s?t.measuredBox[n]:t.layoutBox[n],a=lt(i[n]);r.max=r.min+a,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[n].max=e.relativeTarget[n].min+a)});let a=rM();ln(a,i,t.layoutBox);let o=rM();s?ln(o,e.applyTransform(n,!0),t.measuredBox):ln(o,i,t.layoutBox);let l=!lz(a),h=!1;if(!e.resumeFrom){let n=e.getClosestProjectingParent();if(n&&!n.resumeFrom){let{snapshot:r,layout:s}=n;if(r&&s){let a=rb();la(a,t.layoutBox,r.layoutBox);let o=rb();la(o,i,s.layoutBox),lG(a,o)||(h=!0),n.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=a,e.relativeParent=n)}}}e.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:o,layoutDelta:a,hasLayoutChanged:l,hasRelativeLayoutChanged:h})}else if(e.isLead()){let{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function ht(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function hi(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function hn(e){e.clearSnapshot()}function hr(e){e.clearMeasurements()}function hs(e){e.isLayoutDirty=!1}function ha(e){let{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function ho(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function hl(e){e.resolveTargetDelta()}function hh(e){e.calcProjection()}function hu(e){e.resetSkewAndRotation()}function hc(e){e.removeLeadSnapshot()}function hd(e,t,i){e.translate=sY(t.translate,0,i),e.scale=sY(t.scale,1,i),e.origin=t.origin,e.originPoint=t.originPoint}function hp(e,t,i,n){e.min=sY(t.min,i.min,n),e.max=sY(t.max,i.max,n)}function hf(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}let hm={duration:.45,ease:[.4,0,.1,1]},hg=e=>"u">typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),hv=hg("applewebkit/")&&!hg("chrome/")?Math.round:rQ;function h_(e){e.min=hv(e.min),e.max=hv(e.max)}function hx(e,t,i){return"position"===e||"preserve-aspect"===e&&!(.2>=Math.abs(lW(t)-lW(i)))}function hy(e){return e!==e.root&&e.scroll?.wasRoot}let hM=l9({attachResizeListener:(e,t)=>o7(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),hS={current:void 0},hb=l9({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!hS.current){let e=new hM({});e.mount(window),e.setOptions({layoutScroll:!0}),hS.current=e}return hS.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>"fixed"===window.getComputedStyle(e).position});function hE(e,t){let i=function(e,t,i){if(null==e)return[];if(e instanceof EventTarget)return[e];if("string"==typeof e){let t=document,i=(void 0)??t.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e).filter(e=>null!=e)}(e),n=new AbortController;return[i,{passive:!0,...t,signal:n.signal},()=>n.abort()]}function hT(e){return!("touch"===e.pointerType||le.x||le.y)}function hw(e,t,i){let{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover","Start"===i);let r=n["onHover"+i];r&&r3.postRender(()=>r(t,ll(t)))}let hA=(e,t)=>!!t&&(e===t||hA(e,t.parentElement)),hC=new WeakSet;function hP(e){return t=>{"Enter"===t.key&&e(t)}}function hR(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function hL(e){return lo(e)&&!(le.x||le.y)}function hD(e,t,i){let{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap","Start"===i);let r=n["onTap"+("End"===i?"":i)];r&&r3.postRender(()=>r(t,ll(t)))}let hI=new WeakMap,hU=new WeakMap,hN=e=>{let t=hI.get(e.target);t&&t(e)},hO=e=>{e.forEach(hN)},hF={some:0,all:1},hB=function(e,t){if("u"<typeof Proxy)return aR;let i=new Map,n=(i,n)=>aR(i,n,e,t);return new Proxy((e,t)=>n(e,t),{get:(r,s)=>"create"===s?n:(i.has(s)||i.set(s,aR(s,void 0,e,t)),i.get(s))})}({animation:{Feature:class extends aL{constructor(e){super(e),e.animationState||(e.animationState=function(e){let t=t=>Promise.all(t.map(({animation:t,options:i})=>(function(e,t,i={}){let n;if(e.notify("AnimationStart",t),Array.isArray(t))n=Promise.all(t.map(t=>oJ(e,t,i)));else if("string"==typeof t)n=oJ(e,t,i);else{let r="function"==typeof t?aD(e,t,i.custom):t;n=Promise.all(o$(e,r,i))}return n.then(()=>{e.notify("AnimationComplete",t)})})(e,t,i))),i=o4(),n=!0,r=t=>(i,n)=>{let r=aD(e,n,"exit"===t?e.presenceContext?.custom:void 0);if(r){let{transition:e,transitionEnd:t,...n}=r;i={...i,...n,...t}}return i};function s(s){let{props:a}=e,o=function e(t){if(!t)return;if(!t.isControllingVariants){let i=t.parent&&e(t.parent)||{};return void 0!==t.props.initial&&(i.initial=t.props.initial),i}let i={};for(let e=0;e<oQ;e++){let n=sE[e],r=t.props[n];(sS(r)||!1===r)&&(i[n]=r)}return i}(e.parent)||{},l=[],h=new Set,u={},c=1/0;for(let t=0;t<o2;t++){var d,p;let f=o1[t],m=i[f],g=void 0!==a[f]?a[f]:o[f],v=sS(g),_=f===s?m.isActive:null;!1===_&&(c=t);let x=g===o[f]&&g!==a[f]&&v;if(x&&n&&e.manuallyAnimateOnMount&&(x=!1),m.protectedKeys={...u},!m.isActive&&null===_||!g&&!m.prevProp||sM(g)||"boolean"==typeof g)continue;let y=(d=m.prevProp,"string"==typeof(p=g)?p!==d:!!Array.isArray(p)&&!o0(p,d)),M=y||f===s&&m.isActive&&!x&&v||t>c&&v,S=!1,b=Array.isArray(g)?g:[g],E=b.reduce(r(f),{});!1===_&&(E={});let{prevResolvedValues:T={}}=m,w={...T,...E},A=t=>{M=!0,h.has(t)&&(S=!0,h.delete(t)),m.needsAnimating[t]=!0;let i=e.getValue(t);i&&(i.liveStyle=!1)};for(let e in w){let t=E[e],i=T[e];if(!u.hasOwnProperty(e))(aU(t)&&aU(i)?o0(t,i):t===i)?void 0!==t&&h.has(e)?A(e):m.protectedKeys[e]=!0:null!=t?A(e):h.add(e)}m.prevProp=g,m.prevResolvedValues=E,m.isActive&&(u={...u,...E}),n&&e.blockInitialAnimation&&(M=!1);let C=x&&y,P=!C||S;M&&P&&l.push(...b.map(t=>{let i={type:f};if("string"==typeof t&&n&&!C&&e.manuallyAnimateOnMount&&e.parent){let{parent:n}=e,r=aD(n,t);if(n.enteringChildren&&r){let{delayChildren:t}=r.transition||{};i.delay=oZ(n.enteringChildren,e,t)}}return{animation:t,options:i}}))}if(h.size){let t={};if("boolean"!=typeof a.initial){let i=aD(e,Array.isArray(a.initial)?a.initial[0]:a.initial);i&&i.transition&&(t.transition=i.transition)}h.forEach(i=>{let n=e.getBaseTarget(i),r=e.getValue(i);r&&(r.liveStyle=!0),t[i]=n??null}),l.push({animation:t})}let f=!!l.length;return n&&(!1===a.initial||a.initial===a.animate)&&!e.manuallyAnimateOnMount&&(f=!1),n=!1,f?t(l):Promise.resolve()}return{animateChanges:s,setActive:function(t,n){if(i[t].isActive===n)return Promise.resolve();e.variantChildren?.forEach(e=>e.animationState?.setActive(t,n)),i[t].isActive=n;let r=s(t);for(let e in i)i[e].protectedKeys={};return r},setAnimateFunction:function(i){t=i(e)},getState:()=>i,reset:()=>{i=o4()}}}(e))}updateAnimationControlsSubscription(){let{animate:e}=this.node.getProps();sM(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){let{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}},exit:{Feature:class extends aL{constructor(){super(...arguments),this.id=o5++}update(){if(!this.node.presenceContext)return;let{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;let n=this.node.animationState.setActive("exit",!e);t&&!e&&n.then(()=>{t(this.id)})}mount(){let{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}},inView:{Feature:class extends aL{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){var e;let t;this.unmount();let{viewport:i={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:a}=i,o={root:n?n.current:void 0,rootMargin:r,threshold:"number"==typeof s?s:hF[s]},l=e=>{let{isIntersecting:t}=e;if(this.isInView===t||(this.isInView=t,a&&!t&&this.hasEnteredView))return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);let{onViewportEnter:i,onViewportLeave:n}=this.node.getProps(),r=t?i:n;r&&r(e)};return e=this.node.current,t=function({root:e,...t}){let i=e||document;hU.has(i)||hU.set(i,{});let n=hU.get(i),r=JSON.stringify(t);return n[r]||(n[r]=new IntersectionObserver(hO,{root:e,...t})),n[r]}(o),hI.set(e,l),t.observe(e),()=>{hI.delete(e),t.unobserve(e)}}mount(){this.startObserver()}update(){if("u"<typeof IntersectionObserver)return;let{props:e,prevProps:t}=this.node;["amount","margin","root"].some(function({viewport:e={}},{viewport:t={}}={}){return i=>e[i]!==t[i]}(e,t))&&this.startObserver()}unmount(){}}},tap:{Feature:class extends aL{mount(){let{current:e}=this.node;e&&(this.unmount=function(e,t,i={}){let[n,r,s]=hE(e,i),a=e=>{let n=e.currentTarget;if(!hL(e))return;hC.add(n);let s=t(n,e),a=(e,t)=>{window.removeEventListener("pointerup",o),window.removeEventListener("pointercancel",l),hC.has(n)&&hC.delete(n),hL(e)&&"function"==typeof s&&s(e,{success:t})},o=e=>{a(e,n===window||n===document||i.useGlobalTarget||hA(n,e.target))},l=e=>{a(e,!1)};window.addEventListener("pointerup",o,r),window.addEventListener("pointercancel",l,r)};return n.forEach(e=>{(i.useGlobalTarget?window:e).addEventListener("pointerdown",a,r),l0(e)&&"offsetHeight"in e&&(e.addEventListener("focus",e=>((e,t)=>{let i=e.currentTarget;if(!i)return;let n=hP(()=>{if(hC.has(i))return;hR(i,"down");let e=hP(()=>{hR(i,"up")});i.addEventListener("keyup",e,t),i.addEventListener("blur",()=>hR(i,"cancel"),t)});i.addEventListener("keydown",n,t),i.addEventListener("blur",()=>i.removeEventListener("keydown",n),t)})(e,r)),o9(e)||e.hasAttribute("tabindex")||(e.tabIndex=0))}),s}(e,(e,t)=>(hD(this.node,t,"Start"),(e,{success:t})=>hD(this.node,e,t?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends aL{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=aB(o7(this.node.current,"focus",()=>this.onFocus()),o7(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends aL{mount(){let{current:e}=this.node;e&&(this.unmount=function(e,t,i={}){let[n,r,s]=hE(e,i),a=e=>{if(!hT(e))return;let{target:i}=e,n=t(i,e);if("function"!=typeof n||!i)return;let s=e=>{hT(e)&&(n(e),i.removeEventListener("pointerleave",s))};i.addEventListener("pointerleave",s,r)};return n.forEach(e=>{e.addEventListener("pointerenter",a,r)}),s}(e,(e,t)=>(hw(this.node,t,"Start"),e=>hw(this.node,e,"End"))))}unmount(){}}},pan:{Feature:class extends aL{constructor(){super(...arguments),this.removePointerDownListener=rQ}onPointerDown(e){this.session=new lp(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:lu(this.node)})}createPanHandlers(){let{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:n}=this.node.getProps();return{onSessionStart:lT(e),onStart:lT(t),onMove:i,onEnd:(e,t)=>{delete this.session,n&&r3.postRender(()=>n(e,t))}}}mount(){this.removePointerDownListener=lh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends aL{constructor(e){super(e),this.removeGroupControls=rQ,this.removeListeners=rQ,this.controls=new lb(e)}mount(){let{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||rQ}update(){let{dragControls:e}=this.node.getProps(),{dragControls:t}=this.node.prevProps||{};e!==t&&(this.removeGroupControls(),e&&(this.removeGroupControls=e.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}},ProjectionNode:hb,MeasureLayout:lR},layout:{ProjectionNode:hb,MeasureLayout:lR}},(e,t)=>t.isSVG??an(e)?new sJ(t):new at(t,{allowProjection:e!==nG.Fragment}));function hk(e){let t=av(()=>sm(e)),{isStatic:i}=(0,nG.useContext)(aa);if(i){let[,i]=(0,nG.useState)(e);(0,nG.useEffect)(()=>t.on("change",i),[])}return t}function hz(e,t){let i=hk(t()),n=()=>i.set(t());return n(),aP(()=>{let t=()=>r3.preRender(n,!1,!0),i=e.map(e=>e.on("change",t));return()=>{i.forEach(e=>e()),r4(n)}}),i}function hV(e,t){let i=av(()=>[]);return hz(e,()=>{i.length=0;let n=e.length;for(let t=0;t<n;t++)i[t]=e[t].get();return t(i)})}e.s(["default",0,({text:e,disabled:t=!1,speed:i=2,className:n="",color:r="#b5b5b5",shineColor:s="#ffffff",spread:a=120,yoyo:o=!1,pauseOnHover:l=!1,direction:h="left",delay:u=0})=>{let[c,d]=(0,nG.useState)(!1),p=hk(0),f=(0,nG.useRef)(0),m=(0,nG.useRef)(null),g=(0,nG.useRef)("left"===h?1:-1),v=1e3*i,_=1e3*u;!function(e){let t=(0,nG.useRef)(0),{isStatic:i}=(0,nG.useContext)(aa);(0,nG.useEffect)(()=>{if(i)return;let n=({timestamp:i,delta:n})=>{t.current||(t.current=i),e(i-t.current,n)};return r3.update(n,!0),()=>r4(n)},[e])}(e=>{if(t||c){m.current=null;return}if(null===m.current){m.current=e;return}let i=e-m.current;if(m.current=e,f.current+=i,o){let e=v+_,t=f.current%(2*e);if(t<v){let e=t/v*100;p.set(1===g.current?e:100-e)}else if(t<e)p.set(100*(1===g.current));else if(t<e+v){let i=100-(t-e)/v*100;p.set(1===g.current?i:100-i)}else p.set(100*(1!==g.current))}else{let e=f.current%(v+_);if(e<v){let t=e/v*100;p.set(1===g.current?t:100-t)}else p.set(100*(1===g.current))}}),(0,nG.useEffect)(()=>{g.current="left"===h?1:-1,f.current=0,p.set(0)},[h]);let x=function e(t,i,n,r){if("function"==typeof t){let e;return sp.current=[],t(),e=hz(sp.current,t),sp.current=void 0,e}if(void 0!==n&&!Array.isArray(n)&&"function"!=typeof i){var s=t,a=i,o=n,l=r;let h=av(()=>Object.keys(o)),u=av(()=>({}));for(let t of h)u[t]=e(s,a,o[t],l);return u}let h="function"==typeof i?i:function(...e){let t=!Array.isArray(e[0]),i=t?0:-1,n=e[0+i],r=oM(e[1+i],e[2+i],e[3+i]);return t?r(n):r}(i,n,r);return Array.isArray(t)?hV(t,h):hV([t],([e])=>h(e))}(p,e=>`${150-2*e}% center`),y=(0,nG.useCallback)(()=>{l&&d(!0)},[l]),M=(0,nG.useCallback)(()=>{l&&d(!1)},[l]),S={backgroundImage:`linear-gradient(${a}deg, ${r} 0%, ${r} 35%, ${s} 50%, ${r} 65%, ${r} 100%)`,backgroundSize:"200% auto",WebkitBackgroundClip:"text",backgroundClip:"text",WebkitTextFillColor:"transparent"};return(0,nH.jsx)(hB.span,{className:`shiny-text ${n}`,style:{...S,backgroundPosition:x},onMouseEnter:y,onMouseLeave:M,children:e})}],64761)},74701,e=>{"use strict";let t;var i=e.i(43476),n=e.i(73172),r=e.i(71645);let s="srgb",a="srgb-linear",o="display-p3",l="display-p3-linear",h="linear",u="srgb",c="rec709",d="300 es";class p{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});let i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;let i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;let i=this._listeners[e];if(void 0!==i){let e=i.indexOf(t);-1!==e&&i.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;let t=this._listeners[e.type];if(void 0!==t){e.target=this;let i=t.slice(0);for(let t=0,n=i.length;t<n;t++)i[t].call(this,e);e.target=null}}}let f=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],m=Math.PI/180,g=180/Math.PI;function v(){let e=0xffffffff*Math.random()|0,t=0xffffffff*Math.random()|0,i=0xffffffff*Math.random()|0,n=0xffffffff*Math.random()|0;return(f[255&e]+f[e>>8&255]+f[e>>16&255]+f[e>>24&255]+"-"+f[255&t]+f[t>>8&255]+"-"+f[t>>16&15|64]+f[t>>24&255]+"-"+f[63&i|128]+f[i>>8&255]+"-"+f[i>>16&255]+f[i>>24&255]+f[255&n]+f[n>>8&255]+f[n>>16&255]+f[n>>24&255]).toLowerCase()}function _(e,t,i){return Math.max(t,Math.min(i,e))}function x(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/0xffffffff;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/0x7fffffff,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw Error("Invalid component type.")}}function y(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(0xffffffff*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(0x7fffffff*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw Error("Invalid component type.")}}class M{constructor(e=0,t=0){M.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,i=this.y,n=e.elements;return this.x=n[0]*t+n[3]*i+n[6],this.y=n[1]*t+n[4]*i+n[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());return 0===t?Math.PI/2:Math.acos(_(this.dot(e)/t,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let i=Math.cos(t),n=Math.sin(t),r=this.x-e.x,s=this.y-e.y;return this.x=r*i-s*n+e.x,this.y=r*n+s*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class S{constructor(e,t,i,n,r,s,a,o,l){S.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,i,n,r,s,a,o,l)}set(e,t,i,n,r,s,a,o,l){let h=this.elements;return h[0]=e,h[1]=n,h[2]=a,h[3]=t,h[4]=r,h[5]=o,h[6]=i,h[7]=s,h[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,n=t.elements,r=this.elements,s=i[0],a=i[3],o=i[6],l=i[1],h=i[4],u=i[7],c=i[2],d=i[5],p=i[8],f=n[0],m=n[3],g=n[6],v=n[1],_=n[4],x=n[7],y=n[2],M=n[5],S=n[8];return r[0]=s*f+a*v+o*y,r[3]=s*m+a*_+o*M,r[6]=s*g+a*x+o*S,r[1]=l*f+h*v+u*y,r[4]=l*m+h*_+u*M,r[7]=l*g+h*x+u*S,r[2]=c*f+d*v+p*y,r[5]=c*m+d*_+p*M,r[8]=c*g+d*x+p*S,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],s=e[4],a=e[5],o=e[6],l=e[7],h=e[8];return t*s*h-t*a*l-i*r*h+i*a*o+n*r*l-n*s*o}invert(){let e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],s=e[4],a=e[5],o=e[6],l=e[7],h=e[8],u=h*s-a*l,c=a*o-h*r,d=l*r-s*o,p=t*u+i*c+n*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);let f=1/p;return e[0]=u*f,e[1]=(n*l-h*i)*f,e[2]=(a*i-n*s)*f,e[3]=c*f,e[4]=(h*t-n*o)*f,e[5]=(n*r-a*t)*f,e[6]=d*f,e[7]=(i*o-l*t)*f,e[8]=(s*t-i*r)*f,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,n,r,s,a){let o=Math.cos(r),l=Math.sin(r);return this.set(i*o,i*l,-i*(o*s+l*a)+s+e,-n*l,n*o,-n*(-l*s+o*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(b.makeScale(e,t)),this}rotate(e){return this.premultiply(b.makeRotation(-e)),this}translate(e,t){return this.premultiply(b.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,i=e.elements;for(let e=0;e<9;e++)if(t[e]!==i[e])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}let b=new S;function E(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}function T(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;let w={};function A(e){e in w||(w[e]=!0,console.warn(e))}let C=new S().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),P=new S().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),R={[a]:{transfer:h,primaries:c,luminanceCoefficients:[.2126,.7152,.0722],toReference:e=>e,fromReference:e=>e},[s]:{transfer:u,primaries:c,luminanceCoefficients:[.2126,.7152,.0722],toReference:e=>e.convertSRGBToLinear(),fromReference:e=>e.convertLinearToSRGB()},[l]:{transfer:h,primaries:"p3",luminanceCoefficients:[.2289,.6917,.0793],toReference:e=>e.applyMatrix3(P),fromReference:e=>e.applyMatrix3(C)},[o]:{transfer:u,primaries:"p3",luminanceCoefficients:[.2289,.6917,.0793],toReference:e=>e.convertSRGBToLinear().applyMatrix3(P),fromReference:e=>e.applyMatrix3(C).convertLinearToSRGB()}},L=new Set([a,l]),D={enabled:!0,_workingColorSpace:a,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(colorSpace){if(!L.has(colorSpace))throw Error(`Unsupported working color space, "${colorSpace}".`);this._workingColorSpace=colorSpace},convert:function(e,t,i){if(!1===this.enabled||t===i||!t||!i)return e;let n=R[t].toReference;return(0,R[i].fromReference)(n(e))},fromWorkingColorSpace:function(e,t){return this.convert(e,this._workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this._workingColorSpace)},getPrimaries:function(e){return R[e].primaries},getTransfer:function(e){return""===e?h:R[e].transfer},getLuminanceCoefficients:function(e,t=this._workingColorSpace){return e.fromArray(R[t].luminanceCoefficients)}};function I(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function U(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}class N{static getDataURL(e){let i;if(/^data:/i.test(e.src)||"u"<typeof HTMLCanvasElement)return e.src;if(e instanceof HTMLCanvasElement)i=e;else{void 0===t&&(t=T("canvas")),t.width=e.width,t.height=e.height;let n=t.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),i=t}return i.width>2048||i.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),i.toDataURL("image/jpeg",.6)):i.toDataURL("image/png")}static sRGBToLinear(e){if("u">typeof HTMLImageElement&&e instanceof HTMLImageElement||"u">typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"u">typeof ImageBitmap&&e instanceof ImageBitmap){let t=T("canvas");t.width=e.width,t.height=e.height;let i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);let n=i.getImageData(0,0,e.width,e.height),r=n.data;for(let e=0;e<r.length;e++)r[e]=255*I(r[e]/255);return i.putImageData(n,0,0),t}if(!e.data)return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e;{let t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*I(t[e]/255)):t[e]=I(t[e]);return{data:t,width:e.width,height:e.height}}}}let O=0;class F{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:O++}),this.uuid=v(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){let t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];let i={uuid:this.uuid,url:""},n=this.data;if(null!==n){let e;if(Array.isArray(n)){e=[];for(let t=0,i=n.length;t<i;t++)n[t].isDataTexture?e.push(B(n[t].image)):e.push(B(n[t]))}else e=B(n);i.url=e}return t||(e.images[this.uuid]=i),i}}function B(e){return"u">typeof HTMLImageElement&&e instanceof HTMLImageElement||"u">typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"u">typeof ImageBitmap&&e instanceof ImageBitmap?N.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let k=0;class z extends p{constructor(e=z.DEFAULT_IMAGE,t=z.DEFAULT_MAPPING,i=1001,n=1001,r=1006,s=1008,a=1023,o=1009,l=z.DEFAULT_ANISOTROPY,h=""){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:k++}),this.uuid=v(),this.name="",this.source=new F(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=n,this.magFilter=r,this.minFilter=s,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=o,this.offset=new M(0,0),this.repeat=new M(1,1),this.center=new M(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new S,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=h,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];let i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case 1e3:e.x=e.x-Math.floor(e.x);break;case 1001:e.x=e.x<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case 1e3:e.y=e.y-Math.floor(e.y);break;case 1001:e.y=e.y<0?0:1;break;case 1002:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){!0===e&&this.pmremVersion++}}z.DEFAULT_IMAGE=null,z.DEFAULT_MAPPING=300,z.DEFAULT_ANISOTROPY=1;class V{constructor(e=0,t=0,i=0,n=1){V.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=n}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,n){return this.x=e,this.y=t,this.z=i,this.w=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,i=this.y,n=this.z,r=this.w,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*n+s[12]*r,this.y=s[1]*t+s[5]*i+s[9]*n+s[13]*r,this.z=s[2]*t+s[6]*i+s[10]*n+s[14]*r,this.w=s[3]*t+s[7]*i+s[11]*n+s[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,n,r,s=e.elements,a=s[0],o=s[4],l=s[8],h=s[1],u=s[5],c=s[9],d=s[2],p=s[6],f=s[10];if(.01>Math.abs(o-h)&&.01>Math.abs(l-d)&&.01>Math.abs(c-p)){if(.1>Math.abs(o+h)&&.1>Math.abs(l+d)&&.1>Math.abs(c+p)&&.1>Math.abs(a+u+f-3))return this.set(1,0,0,0),this;t=Math.PI;let e=(a+1)/2,s=(u+1)/2,m=(f+1)/2,g=(o+h)/4,v=(l+d)/4,_=(c+p)/4;return e>s&&e>m?e<.01?(i=0,n=.707106781,r=.707106781):(n=g/(i=Math.sqrt(e)),r=v/i):s>m?s<.01?(i=.707106781,n=0,r=.707106781):(i=g/(n=Math.sqrt(s)),r=_/n):m<.01?(i=.707106781,n=.707106781,r=0):(i=v/(r=Math.sqrt(m)),n=_/r),this.set(i,n,r,t),this}let m=Math.sqrt((p-c)*(p-c)+(l-d)*(l-d)+(h-o)*(h-o));return .001>Math.abs(m)&&(m=1),this.x=(p-c)/m,this.y=(l-d)/m,this.z=(h-o)/m,this.w=Math.acos((a+u+f-1)/2),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class H extends p{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new V(0,0,e,t),this.scissorTest=!1,this.viewport=new V(0,0,e,t);const n=new z({width:e,height:t,depth:1},(i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:1006,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i)).mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);n.flipY=!1,n.generateMipmaps=i.generateMipmaps,n.internalFormat=i.internalFormat,this.textures=[];const r=i.count;for(let e=0;e<r;e++)this.textures[e]=n.clone(),this.textures[e].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let n=0,r=this.textures.length;n<r;n++)this.textures[n].image.width=e,this.textures[n].image.height=t,this.textures[n].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++)this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0;let t=Object.assign({},e.texture.image);return this.texture.source=new F(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class G extends H{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class W extends z{constructor(e=null,t=1,i=1,n=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:n},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class X{constructor(e=0,t=0,i=0,n=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=n}static slerpFlat(e,t,i,n,r,s,a){let o=i[n+0],l=i[n+1],h=i[n+2],u=i[n+3],c=r[s+0],d=r[s+1],p=r[s+2],f=r[s+3];if(0===a){e[t+0]=o,e[t+1]=l,e[t+2]=h,e[t+3]=u;return}if(1===a){e[t+0]=c,e[t+1]=d,e[t+2]=p,e[t+3]=f;return}if(u!==f||o!==c||l!==d||h!==p){let e=1-a,t=o*c+l*d+h*p+u*f,i=t>=0?1:-1,n=1-t*t;if(n>Number.EPSILON){let r=Math.sqrt(n),s=Math.atan2(r,t*i);e=Math.sin(e*s)/r,a=Math.sin(a*s)/r}let r=a*i;if(o=o*e+c*r,l=l*e+d*r,h=h*e+p*r,u=u*e+f*r,e===1-a){let e=1/Math.sqrt(o*o+l*l+h*h+u*u);o*=e,l*=e,h*=e,u*=e}}e[t]=o,e[t+1]=l,e[t+2]=h,e[t+3]=u}static multiplyQuaternionsFlat(e,t,i,n,r,s){let a=i[n],o=i[n+1],l=i[n+2],h=i[n+3],u=r[s],c=r[s+1],d=r[s+2],p=r[s+3];return e[t]=a*p+h*u+o*d-l*c,e[t+1]=o*p+h*c+l*u-a*d,e[t+2]=l*p+h*d+a*c-o*u,e[t+3]=h*p-a*u-o*c-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,n){return this._x=e,this._y=t,this._z=i,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){let i=e._x,n=e._y,r=e._z,s=e._order,a=Math.cos,o=Math.sin,l=a(i/2),h=a(n/2),u=a(r/2),c=o(i/2),d=o(n/2),p=o(r/2);switch(s){case"XYZ":this._x=c*h*u+l*d*p,this._y=l*d*u-c*h*p,this._z=l*h*p+c*d*u,this._w=l*h*u-c*d*p;break;case"YXZ":this._x=c*h*u+l*d*p,this._y=l*d*u-c*h*p,this._z=l*h*p-c*d*u,this._w=l*h*u+c*d*p;break;case"ZXY":this._x=c*h*u-l*d*p,this._y=l*d*u+c*h*p,this._z=l*h*p+c*d*u,this._w=l*h*u-c*d*p;break;case"ZYX":this._x=c*h*u-l*d*p,this._y=l*d*u+c*h*p,this._z=l*h*p-c*d*u,this._w=l*h*u+c*d*p;break;case"YZX":this._x=c*h*u+l*d*p,this._y=l*d*u+c*h*p,this._z=l*h*p-c*d*u,this._w=l*h*u-c*d*p;break;case"XZY":this._x=c*h*u-l*d*p,this._y=l*d*u-c*h*p,this._z=l*h*p+c*d*u,this._w=l*h*u+c*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let i=t/2,n=Math.sin(i);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,i=t[0],n=t[4],r=t[8],s=t[1],a=t[5],o=t[9],l=t[2],h=t[6],u=t[10],c=i+a+u;if(c>0){let e=.5/Math.sqrt(c+1);this._w=.25/e,this._x=(h-o)*e,this._y=(r-l)*e,this._z=(s-n)*e}else if(i>a&&i>u){let e=2*Math.sqrt(1+i-a-u);this._w=(h-o)/e,this._x=.25*e,this._y=(n+s)/e,this._z=(r+l)/e}else if(a>u){let e=2*Math.sqrt(1+a-i-u);this._w=(r-l)/e,this._x=(n+s)/e,this._y=.25*e,this._z=(o+h)/e}else{let e=2*Math.sqrt(1+u-i-a);this._w=(s-n)/e,this._x=(r+l)/e,this._y=(o+h)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0):(this._x=0,this._y=-e.z,this._z=e.y)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x),this._w=i,this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(_(this.dot(e),-1,1)))}rotateTowards(e,t){let i=this.angleTo(e);if(0===i)return this;let n=Math.min(1,t/i);return this.slerp(e,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let i=e._x,n=e._y,r=e._z,s=e._w,a=t._x,o=t._y,l=t._z,h=t._w;return this._x=i*h+s*a+n*l-r*o,this._y=n*h+s*o+r*a-i*l,this._z=r*h+s*l+i*o-n*a,this._w=s*h-i*a-n*o-r*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);let i=this._x,n=this._y,r=this._z,s=this._w,a=s*e._w+i*e._x+n*e._y+r*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=i,this._y=n,this._z=r,this;let o=1-a*a;if(o<=Number.EPSILON){let e=1-t;return this._w=e*s+t*this._w,this._x=e*i+t*this._x,this._y=e*n+t*this._y,this._z=e*r+t*this._z,this.normalize(),this}let l=Math.sqrt(o),h=Math.atan2(l,a),u=Math.sin((1-t)*h)/l,c=Math.sin(t*h)/l;return this._w=s*u+this._w*c,this._x=i*u+this._x*c,this._y=n*u+this._y*c,this._z=r*u+this._z*c,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){let e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),n=Math.sqrt(1-i),r=Math.sqrt(i);return this.set(n*Math.sin(e),n*Math.cos(e),r*Math.sin(t),r*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class j{constructor(e=0,t=0,i=0){j.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return void 0===i&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(q.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(q.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,i=this.y,n=this.z,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6]*n,this.y=r[1]*t+r[4]*i+r[7]*n,this.z=r[2]*t+r[5]*i+r[8]*n,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,i=this.y,n=this.z,r=e.elements,s=1/(r[3]*t+r[7]*i+r[11]*n+r[15]);return this.x=(r[0]*t+r[4]*i+r[8]*n+r[12])*s,this.y=(r[1]*t+r[5]*i+r[9]*n+r[13])*s,this.z=(r[2]*t+r[6]*i+r[10]*n+r[14])*s,this}applyQuaternion(e){let t=this.x,i=this.y,n=this.z,r=e.x,s=e.y,a=e.z,o=e.w,l=2*(s*n-a*i),h=2*(a*t-r*n),u=2*(r*i-s*t);return this.x=t+o*l+s*u-a*h,this.y=i+o*h+a*l-r*u,this.z=n+o*u+r*h-s*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,i=this.y,n=this.z,r=e.elements;return this.x=r[0]*t+r[4]*i+r[8]*n,this.y=r[1]*t+r[5]*i+r[9]*n,this.z=r[2]*t+r[6]*i+r[10]*n,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){let i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let i=e.x,n=e.y,r=e.z,s=t.x,a=t.y,o=t.z;return this.x=n*o-r*a,this.y=r*s-i*o,this.z=i*a-n*s,this}projectOnVector(e){let t=e.lengthSq();if(0===t)return this.set(0,0,0);let i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Y.copy(this).projectOnVector(e),this.sub(Y)}reflect(e){return this.sub(Y.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());return 0===t?Math.PI/2:Math.acos(_(this.dot(e)/t,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,i=this.y-e.y,n=this.z-e.z;return t*t+i*i+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){let n=Math.sin(t)*e;return this.x=n*Math.sin(i),this.y=Math.cos(t)*e,this.z=n*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=n,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=Math.random()*Math.PI*2,t=2*Math.random()-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}let Y=new j,q=new X;class K{constructor(e=new j(Infinity,Infinity,Infinity),t=new j(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Z.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Z.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let i=Z.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=Infinity,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let i=e.geometry;if(void 0!==i){let n=i.getAttribute("position");if(!0===t&&void 0!==n&&!0!==e.isInstancedMesh)for(let t=0,i=n.count;t<i;t++)!0===e.isMesh?e.getVertexPosition(t,Z):Z.fromBufferAttribute(n,t),Z.applyMatrix4(e.matrixWorld),this.expandByPoint(Z);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),J.copy(e.boundingBox)):(null===i.boundingBox&&i.computeBoundingBox(),J.copy(i.boundingBox)),J.applyMatrix4(e.matrixWorld),this.union(J)}let n=e.children;for(let e=0,i=n.length;e<i;e++)this.expandByObject(n[e],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Z),Z.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(es),ea.subVectors(this.max,es),Q.subVectors(e.a,es),ee.subVectors(e.b,es),et.subVectors(e.c,es),ei.subVectors(ee,Q),en.subVectors(et,ee),er.subVectors(Q,et);let t=[0,-ei.z,ei.y,0,-en.z,en.y,0,-er.z,er.y,ei.z,0,-ei.x,en.z,0,-en.x,er.z,0,-er.x,-ei.y,ei.x,0,-en.y,en.x,0,-er.y,er.x,0];return!!eh(t,Q,ee,et,ea)&&!!eh(t=[1,0,0,0,1,0,0,0,1],Q,ee,et,ea)&&(eo.crossVectors(ei,en),eh(t=[eo.x,eo.y,eo.z],Q,ee,et,ea))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Z).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(Z).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||($[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),$[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),$[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),$[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),$[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),$[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),$[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),$[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints($)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}let $=[new j,new j,new j,new j,new j,new j,new j,new j],Z=new j,J=new K,Q=new j,ee=new j,et=new j,ei=new j,en=new j,er=new j,es=new j,ea=new j,eo=new j,el=new j;function eh(e,t,i,n,r){for(let s=0,a=e.length-3;s<=a;s+=3){el.fromArray(e,s);let a=r.x*Math.abs(el.x)+r.y*Math.abs(el.y)+r.z*Math.abs(el.z),o=t.dot(el),l=i.dot(el),h=n.dot(el);if(Math.max(-Math.max(o,l,h),Math.min(o,l,h))>a)return!1}return!0}let eu=new K,ec=new j,ed=new j;class ep{constructor(e=new j,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let i=this.center;void 0!==t?i.copy(t):eu.setFromPoints(e).getCenter(i);let n=0;for(let t=0,r=e.length;t<r;t++)n=Math.max(n,i.distanceToSquared(e[t]));return this.radius=Math.sqrt(n),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?e.makeEmpty():(e.set(this.center,this.center),e.expandByScalar(this.radius)),e}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;ec.subVectors(e,this.center);let t=ec.lengthSq();if(t>this.radius*this.radius){let e=Math.sqrt(t),i=(e-this.radius)*.5;this.center.addScaledVector(ec,i/e),this.radius+=i}return this}union(e){return e.isEmpty()||(this.isEmpty()?this.copy(e):!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(ed.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(ec.copy(e.center).add(ed)),this.expandByPoint(ec.copy(e.center).sub(ed)))),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}let ef=new j,em=new j,eg=new j,ev=new j,e_=new j,ex=new j,ey=new j;class eM{constructor(e,t,i,n,r,s,a,o,l,h,u,c,d,p,f,m){eM.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,i,n,r,s,a,o,l,h,u,c,d,p,f,m)}set(e,t,i,n,r,s,a,o,l,h,u,c,d,p,f,m){let g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=n,g[1]=r,g[5]=s,g[9]=a,g[13]=o,g[2]=l,g[6]=h,g[10]=u,g[14]=c,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new eM().fromArray(this.elements)}copy(e){let t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){let t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,i=e.elements,n=1/eS.setFromMatrixColumn(e,0).length(),r=1/eS.setFromMatrixColumn(e,1).length(),s=1/eS.setFromMatrixColumn(e,2).length();return t[0]=i[0]*n,t[1]=i[1]*n,t[2]=i[2]*n,t[3]=0,t[4]=i[4]*r,t[5]=i[5]*r,t[6]=i[6]*r,t[7]=0,t[8]=i[8]*s,t[9]=i[9]*s,t[10]=i[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,i=e.x,n=e.y,r=e.z,s=Math.cos(i),a=Math.sin(i),o=Math.cos(n),l=Math.sin(n),h=Math.cos(r),u=Math.sin(r);if("XYZ"===e.order){let e=s*h,i=s*u,n=a*h,r=a*u;t[0]=o*h,t[4]=-o*u,t[8]=l,t[1]=i+n*l,t[5]=e-r*l,t[9]=-a*o,t[2]=r-e*l,t[6]=n+i*l,t[10]=s*o}else if("YXZ"===e.order){let e=o*h,i=o*u,n=l*h,r=l*u;t[0]=e+r*a,t[4]=n*a-i,t[8]=s*l,t[1]=s*u,t[5]=s*h,t[9]=-a,t[2]=i*a-n,t[6]=r+e*a,t[10]=s*o}else if("ZXY"===e.order){let e=o*h,i=o*u,n=l*h,r=l*u;t[0]=e-r*a,t[4]=-s*u,t[8]=n+i*a,t[1]=i+n*a,t[5]=s*h,t[9]=r-e*a,t[2]=-s*l,t[6]=a,t[10]=s*o}else if("ZYX"===e.order){let e=s*h,i=s*u,n=a*h,r=a*u;t[0]=o*h,t[4]=n*l-i,t[8]=e*l+r,t[1]=o*u,t[5]=r*l+e,t[9]=i*l-n,t[2]=-l,t[6]=a*o,t[10]=s*o}else if("YZX"===e.order){let e=s*o,i=s*l,n=a*o,r=a*l;t[0]=o*h,t[4]=r-e*u,t[8]=n*u+i,t[1]=u,t[5]=s*h,t[9]=-a*h,t[2]=-l*h,t[6]=i*u+n,t[10]=e-r*u}else if("XZY"===e.order){let e=s*o,i=s*l,n=a*o,r=a*l;t[0]=o*h,t[4]=-u,t[8]=l*h,t[1]=e*u+r,t[5]=s*h,t[9]=i*u-n,t[2]=n*u-i,t[6]=a*h,t[10]=r*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(eE,e,eT)}lookAt(e,t,i){let n=this.elements;return eC.subVectors(e,t),0===eC.lengthSq()&&(eC.z=1),eC.normalize(),ew.crossVectors(i,eC),0===ew.lengthSq()&&(1===Math.abs(i.z)?eC.x+=1e-4:eC.z+=1e-4,eC.normalize(),ew.crossVectors(i,eC)),ew.normalize(),eA.crossVectors(eC,ew),n[0]=ew.x,n[4]=eA.x,n[8]=eC.x,n[1]=ew.y,n[5]=eA.y,n[9]=eC.y,n[2]=ew.z,n[6]=eA.z,n[10]=eC.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let i=e.elements,n=t.elements,r=this.elements,s=i[0],a=i[4],o=i[8],l=i[12],h=i[1],u=i[5],c=i[9],d=i[13],p=i[2],f=i[6],m=i[10],g=i[14],v=i[3],_=i[7],x=i[11],y=i[15],M=n[0],S=n[4],b=n[8],E=n[12],T=n[1],w=n[5],A=n[9],C=n[13],P=n[2],R=n[6],L=n[10],D=n[14],I=n[3],U=n[7],N=n[11],O=n[15];return r[0]=s*M+a*T+o*P+l*I,r[4]=s*S+a*w+o*R+l*U,r[8]=s*b+a*A+o*L+l*N,r[12]=s*E+a*C+o*D+l*O,r[1]=h*M+u*T+c*P+d*I,r[5]=h*S+u*w+c*R+d*U,r[9]=h*b+u*A+c*L+d*N,r[13]=h*E+u*C+c*D+d*O,r[2]=p*M+f*T+m*P+g*I,r[6]=p*S+f*w+m*R+g*U,r[10]=p*b+f*A+m*L+g*N,r[14]=p*E+f*C+m*D+g*O,r[3]=v*M+_*T+x*P+y*I,r[7]=v*S+_*w+x*R+y*U,r[11]=v*b+_*A+x*L+y*N,r[15]=v*E+_*C+x*D+y*O,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],i=e[4],n=e[8],r=e[12],s=e[1],a=e[5],o=e[9],l=e[13],h=e[2],u=e[6],c=e[10],d=e[14];return e[3]*(r*o*u-n*l*u-r*a*c+i*l*c+n*a*d-i*o*d)+e[7]*(t*o*d-t*l*c+r*s*c-n*s*d+n*l*h-r*o*h)+e[11]*(t*l*u-t*a*d-r*s*u+i*s*d+r*a*h-i*l*h)+e[15]*(-n*a*h-t*o*u+t*a*c+n*s*u-i*s*c+i*o*h)}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(e,t,i){let n=this.elements;return e.isVector3?(n[12]=e.x,n[13]=e.y,n[14]=e.z):(n[12]=e,n[13]=t,n[14]=i),this}invert(){let e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],s=e[4],a=e[5],o=e[6],l=e[7],h=e[8],u=e[9],c=e[10],d=e[11],p=e[12],f=e[13],m=e[14],g=e[15],v=u*m*l-f*c*l+f*o*d-a*m*d-u*o*g+a*c*g,_=p*c*l-h*m*l-p*o*d+s*m*d+h*o*g-s*c*g,x=h*f*l-p*u*l+p*a*d-s*f*d-h*a*g+s*u*g,y=p*u*o-h*f*o-p*a*c+s*f*c+h*a*m-s*u*m,M=t*v+i*_+n*x+r*y;if(0===M)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let S=1/M;return e[0]=v*S,e[1]=(f*c*r-u*m*r-f*n*d+i*m*d+u*n*g-i*c*g)*S,e[2]=(a*m*r-f*o*r+f*n*l-i*m*l-a*n*g+i*o*g)*S,e[3]=(u*o*r-a*c*r-u*n*l+i*c*l+a*n*d-i*o*d)*S,e[4]=_*S,e[5]=(h*m*r-p*c*r+p*n*d-t*m*d-h*n*g+t*c*g)*S,e[6]=(p*o*r-s*m*r-p*n*l+t*m*l+s*n*g-t*o*g)*S,e[7]=(s*c*r-h*o*r+h*n*l-t*c*l-s*n*d+t*o*d)*S,e[8]=x*S,e[9]=(p*u*r-h*f*r-p*i*d+t*f*d+h*i*g-t*u*g)*S,e[10]=(s*f*r-p*a*r+p*i*l-t*f*l-s*i*g+t*a*g)*S,e[11]=(h*a*r-s*u*r-h*i*l+t*u*l+s*i*d-t*a*d)*S,e[12]=y*S,e[13]=(h*f*n-p*u*n+p*i*c-t*f*c-h*i*m+t*u*m)*S,e[14]=(p*a*n-s*f*n-p*i*o+t*f*o+s*i*m-t*a*m)*S,e[15]=(s*u*n-h*a*n+h*i*o-t*u*o-s*i*c+t*a*c)*S,this}scale(e){let t=this.elements,i=e.x,n=e.y,r=e.z;return t[0]*=i,t[4]*=n,t[8]*=r,t[1]*=i,t[5]*=n,t[9]*=r,t[2]*=i,t[6]*=n,t[10]*=r,t[3]*=i,t[7]*=n,t[11]*=r,this}getMaxScaleOnAxis(){let e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let i=Math.cos(t),n=Math.sin(t),r=1-i,s=e.x,a=e.y,o=e.z,l=r*s,h=r*a;return this.set(l*s+i,l*a-n*o,l*o+n*a,0,l*a+n*o,h*a+i,h*o-n*s,0,l*o-n*a,h*o+n*s,r*o*o+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,n,r,s){return this.set(1,i,r,0,e,1,s,0,t,n,1,0,0,0,0,1),this}compose(e,t,i){let n=this.elements,r=t._x,s=t._y,a=t._z,o=t._w,l=r+r,h=s+s,u=a+a,c=r*l,d=r*h,p=r*u,f=s*h,m=s*u,g=a*u,v=o*l,_=o*h,x=o*u,y=i.x,M=i.y,S=i.z;return n[0]=(1-(f+g))*y,n[1]=(d+x)*y,n[2]=(p-_)*y,n[3]=0,n[4]=(d-x)*M,n[5]=(1-(c+g))*M,n[6]=(m+v)*M,n[7]=0,n[8]=(p+_)*S,n[9]=(m-v)*S,n[10]=(1-(c+f))*S,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,this}decompose(e,t,i){let n=this.elements,r=eS.set(n[0],n[1],n[2]).length(),s=eS.set(n[4],n[5],n[6]).length(),a=eS.set(n[8],n[9],n[10]).length();0>this.determinant()&&(r=-r),e.x=n[12],e.y=n[13],e.z=n[14],eb.copy(this);let o=1/r,l=1/s,h=1/a;return eb.elements[0]*=o,eb.elements[1]*=o,eb.elements[2]*=o,eb.elements[4]*=l,eb.elements[5]*=l,eb.elements[6]*=l,eb.elements[8]*=h,eb.elements[9]*=h,eb.elements[10]*=h,t.setFromRotationMatrix(eb),i.x=r,i.y=s,i.z=a,this}makePerspective(e,t,i,n,r,s,a=2e3){let o,l,h=this.elements;if(2e3===a)o=-(s+r)/(s-r),l=-2*s*r/(s-r);else if(2001===a)o=-s/(s-r),l=-s*r/(s-r);else throw Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return h[0]=2*r/(t-e),h[4]=0,h[8]=(t+e)/(t-e),h[12]=0,h[1]=0,h[5]=2*r/(i-n),h[9]=(i+n)/(i-n),h[13]=0,h[2]=0,h[6]=0,h[10]=o,h[14]=l,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this}makeOrthographic(e,t,i,n,r,s,a=2e3){let o,l,h=this.elements,u=1/(t-e),c=1/(i-n),d=1/(s-r);if(2e3===a)o=(s+r)*d,l=-2*d;else if(2001===a)o=r*d,l=-1*d;else throw Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return h[0]=2*u,h[4]=0,h[8]=0,h[12]=-((t+e)*u),h[1]=0,h[5]=2*c,h[9]=0,h[13]=-((i+n)*c),h[2]=0,h[6]=0,h[10]=l,h[14]=-o,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this}equals(e){let t=this.elements,i=e.elements;for(let e=0;e<16;e++)if(t[e]!==i[e])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){let i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}let eS=new j,eb=new eM,eE=new j(0,0,0),eT=new j(1,1,1),ew=new j,eA=new j,eC=new j,eP=new eM,eR=new X;class eL{constructor(e=0,t=0,i=0,n=eL.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=n}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,n=this._order){return this._x=e,this._y=t,this._z=i,this._order=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){let n=e.elements,r=n[0],s=n[4],a=n[8],o=n[1],l=n[5],h=n[9],u=n[2],c=n[6],d=n[10];switch(t){case"XYZ":this._y=Math.asin(_(a,-1,1)),.9999999>Math.abs(a)?(this._x=Math.atan2(-h,d),this._z=Math.atan2(-s,r)):(this._x=Math.atan2(c,l),this._z=0);break;case"YXZ":this._x=Math.asin(-_(h,-1,1)),.9999999>Math.abs(h)?(this._y=Math.atan2(a,d),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-u,r),this._z=0);break;case"ZXY":this._x=Math.asin(_(c,-1,1)),.9999999>Math.abs(c)?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(o,r));break;case"ZYX":this._y=Math.asin(-_(u,-1,1)),.9999999>Math.abs(u)?(this._x=Math.atan2(c,d),this._z=Math.atan2(o,r)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(_(o,-1,1)),.9999999>Math.abs(o)?(this._x=Math.atan2(-h,l),this._y=Math.atan2(-u,r)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-_(s,-1,1)),.9999999>Math.abs(s)?(this._x=Math.atan2(c,l),this._y=Math.atan2(a,r)):(this._x=Math.atan2(-h,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===i&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return eP.makeRotationFromQuaternion(e),this.setFromRotationMatrix(eP,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return eR.setFromEuler(this),this.setFromQuaternion(eR,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}eL.DEFAULT_ORDER="XYZ";class eD{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!=0}isEnabled(e){return(this.mask&1<<e)!=0}}let eI=0,eU=new j,eN=new X,eO=new eM,eF=new j,eB=new j,ek=new j,ez=new X,eV=new j(1,0,0),eH=new j(0,1,0),eG=new j(0,0,1),eW={type:"added"},eX={type:"removed"},ej={type:"childadded",child:null},eY={type:"childremoved",child:null};class eq extends p{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:eI++}),this.uuid=v(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=eq.DEFAULT_UP.clone();const e=new j,t=new eL,i=new X,n=new j(1,1,1);t._onChange(function(){i.setFromEuler(t,!1)}),i._onChange(function(){t.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new eM},normalMatrix:{value:new S}}),this.matrix=new eM,this.matrixWorld=new eM,this.matrixAutoUpdate=eq.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=eq.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new eD,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return eN.setFromAxisAngle(e,t),this.quaternion.multiply(eN),this}rotateOnWorldAxis(e,t){return eN.setFromAxisAngle(e,t),this.quaternion.premultiply(eN),this}rotateX(e){return this.rotateOnAxis(eV,e)}rotateY(e){return this.rotateOnAxis(eH,e)}rotateZ(e){return this.rotateOnAxis(eG,e)}translateOnAxis(e,t){return eU.copy(e).applyQuaternion(this.quaternion),this.position.add(eU.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(eV,e)}translateY(e){return this.translateOnAxis(eH,e)}translateZ(e){return this.translateOnAxis(eG,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(eO.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?eF.copy(e):eF.set(e,t,i);let n=this.parent;this.updateWorldMatrix(!0,!1),eB.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?eO.lookAt(eB,eF,this.up):eO.lookAt(eF,eB,this.up),this.quaternion.setFromRotationMatrix(eO),n&&(eO.extractRotation(n.matrixWorld),eN.setFromRotationMatrix(eO),this.quaternion.premultiply(eN.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?console.error("THREE.Object3D.add: object can't be added as a child of itself.",e):e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(eW),ej.child=e,this.dispatchEvent(ej),ej.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}let t=this.children.indexOf(e);return -1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(eX),eY.child=e,this.dispatchEvent(eY),eY.child=null),this}removeFromParent(){let e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),eO.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),eO.multiply(e.parent.matrixWorld)),e.applyMatrix4(eO),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(eW),ej.child=e,this.dispatchEvent(ej),ej.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,n=this.children.length;i<n;i++){let n=this.children[i].getObjectByProperty(e,t);if(void 0!==n)return n}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);let n=this.children;for(let r=0,s=n.length;r<s;r++)n[r].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(eB,e,ek),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(eB,ez,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);let t=this.children;for(let i=0,n=t.length;i<n;i++)t[i].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);let t=this.children;for(let i=0,n=t.length;i<n;i++)t[i].traverseVisible(e)}traverseAncestors(e){let t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);let t=this.children;for(let i=0,n=t.length;i<n;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){let i=this.parent;if(!0===e&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===t){let e=this.children;for(let t=0,i=e.length;t<i;t++)e[t].updateWorldMatrix(!1,!0)}}toJSON(e){let t=void 0===e||"string"==typeof e,i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});let n={};function r(t,i){return void 0===t[i.uuid]&&(t[i.uuid]=i.toJSON(e)),i.uuid}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),!0===this.castShadow&&(n.castShadow=!0),!0===this.receiveShadow&&(n.receiveShadow=!0),!1===this.visible&&(n.visible=!1),!1===this.frustumCulled&&(n.frustumCulled=!1),0!==this.renderOrder&&(n.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),n.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(n.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(n.type="BatchedMesh",n.perObjectFrustumCulled=this.perObjectFrustumCulled,n.sortObjects=this.sortObjects,n.drawRanges=this._drawRanges,n.reservedRanges=this._reservedRanges,n.visibility=this._visibility,n.active=this._active,n.bounds=this._bounds.map(e=>({boxInitialized:e.boxInitialized,boxMin:e.box.min.toArray(),boxMax:e.box.max.toArray(),sphereInitialized:e.sphereInitialized,sphereRadius:e.sphere.radius,sphereCenter:e.sphere.center.toArray()})),n.maxInstanceCount=this._maxInstanceCount,n.maxVertexCount=this._maxVertexCount,n.maxIndexCount=this._maxIndexCount,n.geometryInitialized=this._geometryInitialized,n.geometryCount=this._geometryCount,n.matricesTexture=this._matricesTexture.toJSON(e),null!==this._colorsTexture&&(n.colorsTexture=this._colorsTexture.toJSON(e)),null!==this.boundingSphere&&(n.boundingSphere={center:n.boundingSphere.center.toArray(),radius:n.boundingSphere.radius}),null!==this.boundingBox&&(n.boundingBox={min:n.boundingBox.min.toArray(),max:n.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?n.background=this.background.toJSON():this.background.isTexture&&(n.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(n.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){n.geometry=r(e.geometries,this.geometry);let t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){let i=t.shapes;if(Array.isArray(i))for(let t=0,n=i.length;t<n;t++){let n=i[t];r(e.shapes,n)}else r(e.shapes,i)}}if(this.isSkinnedMesh&&(n.bindMode=this.bindMode,n.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(e.skeletons,this.skeleton),n.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){let t=[];for(let i=0,n=this.material.length;i<n;i++)t.push(r(e.materials,this.material[i]));n.material=t}else n.material=r(e.materials,this.material);if(this.children.length>0){n.children=[];for(let t=0;t<this.children.length;t++)n.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){n.animations=[];for(let t=0;t<this.animations.length;t++){let i=this.animations[t];n.animations.push(r(e.animations,i))}}if(t){let t=s(e.geometries),n=s(e.materials),r=s(e.textures),a=s(e.images),o=s(e.shapes),l=s(e.skeletons),h=s(e.animations),u=s(e.nodes);t.length>0&&(i.geometries=t),n.length>0&&(i.materials=n),r.length>0&&(i.textures=r),a.length>0&&(i.images=a),o.length>0&&(i.shapes=o),l.length>0&&(i.skeletons=l),h.length>0&&(i.animations=h),u.length>0&&(i.nodes=u)}return i.object=n,i;function s(e){let t=[];for(let i in e){let n=e[i];delete n.metadata,t.push(n)}return t}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){let i=e.children[t];this.add(i.clone())}return this}}eq.DEFAULT_UP=new j(0,1,0),eq.DEFAULT_MATRIX_AUTO_UPDATE=!0,eq.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;let eK=new j,e$=new j,eZ=new j,eJ=new j,eQ=new j,e0=new j,e1=new j,e2=new j,e3=new j,e4=new j;class e5{constructor(e=new j,t=new j,i=new j){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,n){n.subVectors(i,t),eK.subVectors(e,t),n.cross(eK);let r=n.lengthSq();return r>0?n.multiplyScalar(1/Math.sqrt(r)):n.set(0,0,0)}static getBarycoord(e,t,i,n,r){eK.subVectors(n,t),e$.subVectors(i,t),eZ.subVectors(e,t);let s=eK.dot(eK),a=eK.dot(e$),o=eK.dot(eZ),l=e$.dot(e$),h=e$.dot(eZ),u=s*l-a*a;if(0===u)return r.set(0,0,0),null;let c=1/u,d=(l*o-a*h)*c,p=(s*h-a*o)*c;return r.set(1-d-p,p,d)}static containsPoint(e,t,i,n){return null!==this.getBarycoord(e,t,i,n,eJ)&&eJ.x>=0&&eJ.y>=0&&eJ.x+eJ.y<=1}static getInterpolation(e,t,i,n,r,s,a,o){return null===this.getBarycoord(e,t,i,n,eJ)?(o.x=0,o.y=0,"z"in o&&(o.z=0),"w"in o&&(o.w=0),null):(o.setScalar(0),o.addScaledVector(r,eJ.x),o.addScaledVector(s,eJ.y),o.addScaledVector(a,eJ.z),o)}static isFrontFacing(e,t,i,n){return eK.subVectors(i,t),e$.subVectors(e,t),0>eK.cross(e$).dot(n)}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,n){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[n]),this}setFromAttributeAndIndices(e,t,i,n){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return eK.subVectors(this.c,this.b),e$.subVectors(this.a,this.b),.5*eK.cross(e$).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return e5.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return e5.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,n,r){return e5.getInterpolation(e,this.a,this.b,this.c,t,i,n,r)}containsPoint(e){return e5.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return e5.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let i,n,r=this.a,s=this.b,a=this.c;eQ.subVectors(s,r),e0.subVectors(a,r),e2.subVectors(e,r);let o=eQ.dot(e2),l=e0.dot(e2);if(o<=0&&l<=0)return t.copy(r);e3.subVectors(e,s);let h=eQ.dot(e3),u=e0.dot(e3);if(h>=0&&u<=h)return t.copy(s);let c=o*u-h*l;if(c<=0&&o>=0&&h<=0)return i=o/(o-h),t.copy(r).addScaledVector(eQ,i);e4.subVectors(e,a);let d=eQ.dot(e4),p=e0.dot(e4);if(p>=0&&d<=p)return t.copy(a);let f=d*l-o*p;if(f<=0&&l>=0&&p<=0)return n=l/(l-p),t.copy(r).addScaledVector(e0,n);let m=h*p-d*u;if(m<=0&&u-h>=0&&d-p>=0)return e1.subVectors(a,s),n=(u-h)/(u-h+(d-p)),t.copy(s).addScaledVector(e1,n);let g=1/(m+f+c);return i=f*g,n=c*g,t.copy(r).addScaledVector(eQ,i).addScaledVector(e0,n)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let e6={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32},e8={h:0,s:0,l:0},e9={h:0,s:0,l:0};function e7(e,t,i){return(i<0&&(i+=1),i>1&&(i-=1),i<1/6)?e+(t-e)*6*i:i<.5?t:i<2/3?e+(t-e)*6*(2/3-i):e}class te{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){return void 0===t&&void 0===i?e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e):this.setRGB(e,t,i),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=s){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,D.toWorkingColorSpace(this,t),this}setRGB(e,t,i,n=D.workingColorSpace){return this.r=e,this.g=t,this.b=i,D.toWorkingColorSpace(this,n),this}setHSL(e,t,i,n=D.workingColorSpace){if(e=(e%1+1)%1,t=_(t,0,1),i=_(i,0,1),0===t)this.r=this.g=this.b=i;else{let n=i<=.5?i*(1+t):i+t-i*t,r=2*i-n;this.r=e7(r,n,e+1/3),this.g=e7(r,n,e),this.b=e7(r,n,e-1/3)}return D.toWorkingColorSpace(this,n),this}setStyle(e,t=s){let i;function n(t){void 0!==t&&1>parseFloat(t)&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let r,s=i[1],a=i[2];switch(s){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,t);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){let n=i[1],r=n.length;if(3===r)return this.setRGB(parseInt(n.charAt(0),16)/15,parseInt(n.charAt(1),16)/15,parseInt(n.charAt(2),16)/15,t);if(6===r)return this.setHex(parseInt(n,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=s){let i=e6[e.toLowerCase()];return void 0!==i?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=I(e.r),this.g=I(e.g),this.b=I(e.b),this}copyLinearToSRGB(e){return this.r=U(e.r),this.g=U(e.g),this.b=U(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=s){return D.fromWorkingColorSpace(tt.copy(this),e),65536*Math.round(_(255*tt.r,0,255))+256*Math.round(_(255*tt.g,0,255))+Math.round(_(255*tt.b,0,255))}getHexString(e=s){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=D.workingColorSpace){let i,n;D.fromWorkingColorSpace(tt.copy(this),t);let r=tt.r,s=tt.g,a=tt.b,o=Math.max(r,s,a),l=Math.min(r,s,a),h=(l+o)/2;if(l===o)i=0,n=0;else{let e=o-l;switch(n=h<=.5?e/(o+l):e/(2-o-l),o){case r:i=(s-a)/e+6*(s<a);break;case s:i=(a-r)/e+2;break;case a:i=(r-s)/e+4}i/=6}return e.h=i,e.s=n,e.l=h,e}getRGB(e,t=D.workingColorSpace){return D.fromWorkingColorSpace(tt.copy(this),t),e.r=tt.r,e.g=tt.g,e.b=tt.b,e}getStyle(e=s){D.fromWorkingColorSpace(tt.copy(this),e);let t=tt.r,i=tt.g,n=tt.b;return e!==s?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${n.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*i)},${Math.round(255*n)})`}offsetHSL(e,t,i){return this.getHSL(e8),this.setHSL(e8.h+e,e8.s+t,e8.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){var i,n,r;this.getHSL(e8),e.getHSL(e9);let s=(i=e8.h,(1-t)*i+t*e9.h),a=(n=e8.s,(1-t)*n+t*e9.s),o=(r=e8.l,(1-t)*r+t*e9.l);return this.setHSL(s,a,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){let t=this.r,i=this.g,n=this.b,r=e.elements;return this.r=r[0]*t+r[3]*i+r[6]*n,this.g=r[1]*t+r[4]*i+r[7]*n,this.b=r[2]*t+r[5]*i+r[8]*n,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}let tt=new te;te.NAMES=e6;let ti=0;class tn extends p{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:ti++}),this.uuid=v(),this.name="",this.type="Material",this.blending=1,this.side=0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new te(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=7680,this.stencilZFail=7680,this.stencilZPass=7680,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(let t in e){let i=e[t];if(void 0===i){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}let n=this[t];if(void 0===n){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[t]=i}}toJSON(e){let t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});let i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function n(e){let t=[];for(let i in e){let n=e[i];delete n.metadata,t.push(n)}return t}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(i.dispersion=this.dispersion),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(i.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapRotation&&(i.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(i.blending=this.blending),0!==this.side&&(i.side=this.side),!0===this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=!0),204!==this.blendSrc&&(i.blendSrc=this.blendSrc),205!==this.blendDst&&(i.blendDst=this.blendDst),100!==this.blendEquation&&(i.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(i.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(i.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(i.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(i.depthFunc=this.depthFunc),!1===this.depthTest&&(i.depthTest=this.depthTest),!1===this.depthWrite&&(i.depthWrite=this.depthWrite),!1===this.colorWrite&&(i.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(i.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(i.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(i.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(i.stencilFuncMask=this.stencilFuncMask),7680!==this.stencilFail&&(i.stencilFail=this.stencilFail),7680!==this.stencilZFail&&(i.stencilZFail=this.stencilZFail),7680!==this.stencilZPass&&(i.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(i.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaHash&&(i.alphaHash=!0),!0===this.alphaToCoverage&&(i.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=!0),!0===this.forceSinglePass&&(i.forceSinglePass=!0),!0===this.wireframe&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=!0),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData),t){let t=n(e.textures),r=n(e.images);t.length>0&&(i.textures=t),r.length>0&&(i.images=r)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,i=null;if(null!==t){let e=t.length;i=Array(e);for(let n=0;n!==e;++n)i[n]=t[n].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}onBeforeRender(){console.warn("Material: onBeforeRender() has been removed.")}}class tr extends tn{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new te(0xffffff),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new eL,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}let ts=new j,ta=new M;class to{constructor(e,t,i=!1){if(Array.isArray(e))throw TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=i,this.usage=35044,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=1015,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}get updateRange(){return A("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let n=0,r=this.itemSize;n<r;n++)this.array[e+n]=t.array[i+n];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,i=this.count;t<i;t++)ta.fromBufferAttribute(this,t),ta.applyMatrix3(e),this.setXY(t,ta.x,ta.y);else if(3===this.itemSize)for(let t=0,i=this.count;t<i;t++)ts.fromBufferAttribute(this,t),ts.applyMatrix3(e),this.setXYZ(t,ts.x,ts.y,ts.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)ts.fromBufferAttribute(this,t),ts.applyMatrix4(e),this.setXYZ(t,ts.x,ts.y,ts.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)ts.fromBufferAttribute(this,t),ts.applyNormalMatrix(e),this.setXYZ(t,ts.x,ts.y,ts.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)ts.fromBufferAttribute(this,t),ts.transformDirection(e),this.setXYZ(t,ts.x,ts.y,ts.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=x(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=y(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=x(t,this.array)),t}setX(e,t){return this.normalized&&(t=y(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=x(t,this.array)),t}setY(e,t){return this.normalized&&(t=y(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=x(t,this.array)),t}setZ(e,t){return this.normalized&&(t=y(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=x(t,this.array)),t}setW(e,t){return this.normalized&&(t=y(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=y(t,this.array),i=y(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,n){return e*=this.itemSize,this.normalized&&(t=y(t,this.array),i=y(i,this.array),n=y(n,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this}setXYZW(e,t,i,n,r){return e*=this.itemSize,this.normalized&&(t=y(t,this.array),i=y(i,this.array),n=y(n,this.array),r=y(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),35044!==this.usage&&(e.usage=this.usage),e}}class tl extends to{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class th extends to{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class tu extends to{constructor(e,t,i){super(new Float32Array(e),t,i)}}let tc=0,td=new eM,tp=new eq,tf=new j,tm=new K,tg=new K,tv=new j;class t_ extends p{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:tc++}),this.uuid=v(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(E(e)?th:tl)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);let i=this.attributes.normal;if(void 0!==i){let t=new S().getNormalMatrix(e);i.applyNormalMatrix(t),i.needsUpdate=!0}let n=this.attributes.tangent;return void 0!==n&&(n.transformDirection(e),n.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return td.makeRotationFromQuaternion(e),this.applyMatrix4(td),this}rotateX(e){return td.makeRotationX(e),this.applyMatrix4(td),this}rotateY(e){return td.makeRotationY(e),this.applyMatrix4(td),this}rotateZ(e){return td.makeRotationZ(e),this.applyMatrix4(td),this}translate(e,t,i){return td.makeTranslation(e,t,i),this.applyMatrix4(td),this}scale(e,t,i){return td.makeScale(e,t,i),this.applyMatrix4(td),this}lookAt(e){return tp.lookAt(e),tp.updateMatrix(),this.applyMatrix4(tp.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(tf).negate(),this.translate(tf.x,tf.y,tf.z),this}setFromPoints(e){let t=[];for(let i=0,n=e.length;i<n;i++){let n=e[i];t.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new tu(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new K);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new j(-1/0,-1/0,-1/0),new j(Infinity,Infinity,Infinity));return}if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,i=t.length;e<i;e++){let i=t[e];tm.setFromBufferAttribute(i),this.morphTargetsRelative?(tv.addVectors(this.boundingBox.min,tm.min),this.boundingBox.expandByPoint(tv),tv.addVectors(this.boundingBox.max,tm.max),this.boundingBox.expandByPoint(tv)):(this.boundingBox.expandByPoint(tm.min),this.boundingBox.expandByPoint(tm.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new ep);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new j,1/0);return}if(e){let i=this.boundingSphere.center;if(tm.setFromBufferAttribute(e),t)for(let e=0,i=t.length;e<i;e++){let i=t[e];tg.setFromBufferAttribute(i),this.morphTargetsRelative?(tv.addVectors(tm.min,tg.min),tm.expandByPoint(tv),tv.addVectors(tm.max,tg.max),tm.expandByPoint(tv)):(tm.expandByPoint(tg.min),tm.expandByPoint(tg.max))}tm.getCenter(i);let n=0;for(let t=0,r=e.count;t<r;t++)tv.fromBufferAttribute(e,t),n=Math.max(n,i.distanceToSquared(tv));if(t)for(let r=0,s=t.length;r<s;r++){let s=t[r],a=this.morphTargetsRelative;for(let t=0,r=s.count;t<r;t++)tv.fromBufferAttribute(s,t),a&&(tf.fromBufferAttribute(e,t),tv.add(tf)),n=Math.max(n,i.distanceToSquared(tv))}this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");let i=t.position,n=t.normal,r=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new to(new Float32Array(4*i.count),4));let s=this.getAttribute("tangent"),a=[],o=[];for(let e=0;e<i.count;e++)a[e]=new j,o[e]=new j;let l=new j,h=new j,u=new j,c=new M,d=new M,p=new M,f=new j,m=new j,g=this.groups;0===g.length&&(g=[{start:0,count:e.count}]);for(let t=0,n=g.length;t<n;++t){let n=g[t],s=n.start,v=n.count;for(let t=s,n=s+v;t<n;t+=3)!function(e,t,n){l.fromBufferAttribute(i,e),h.fromBufferAttribute(i,t),u.fromBufferAttribute(i,n),c.fromBufferAttribute(r,e),d.fromBufferAttribute(r,t),p.fromBufferAttribute(r,n),h.sub(l),u.sub(l),d.sub(c),p.sub(c);let s=1/(d.x*p.y-p.x*d.y);isFinite(s)&&(f.copy(h).multiplyScalar(p.y).addScaledVector(u,-d.y).multiplyScalar(s),m.copy(u).multiplyScalar(d.x).addScaledVector(h,-p.x).multiplyScalar(s),a[e].add(f),a[t].add(f),a[n].add(f),o[e].add(m),o[t].add(m),o[n].add(m))}(e.getX(t+0),e.getX(t+1),e.getX(t+2))}let v=new j,_=new j,x=new j,y=new j;function S(e){x.fromBufferAttribute(n,e),y.copy(x);let t=a[e];v.copy(t),v.sub(x.multiplyScalar(x.dot(t))).normalize(),_.crossVectors(y,t);let i=_.dot(o[e]);s.setXYZW(e,v.x,v.y,v.z,i<0?-1:1)}for(let t=0,i=g.length;t<i;++t){let i=g[t],n=i.start,r=i.count;for(let t=n,i=n+r;t<i;t+=3)S(e.getX(t+0)),S(e.getX(t+1)),S(e.getX(t+2))}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(void 0!==t){let i=this.getAttribute("normal");if(void 0===i)i=new to(new Float32Array(3*t.count),3),this.setAttribute("normal",i);else for(let e=0,t=i.count;e<t;e++)i.setXYZ(e,0,0,0);let n=new j,r=new j,s=new j,a=new j,o=new j,l=new j,h=new j,u=new j;if(e)for(let c=0,d=e.count;c<d;c+=3){let d=e.getX(c+0),p=e.getX(c+1),f=e.getX(c+2);n.fromBufferAttribute(t,d),r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,f),h.subVectors(s,r),u.subVectors(n,r),h.cross(u),a.fromBufferAttribute(i,d),o.fromBufferAttribute(i,p),l.fromBufferAttribute(i,f),a.add(h),o.add(h),l.add(h),i.setXYZ(d,a.x,a.y,a.z),i.setXYZ(p,o.x,o.y,o.z),i.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,a=t.count;e<a;e+=3)n.fromBufferAttribute(t,e+0),r.fromBufferAttribute(t,e+1),s.fromBufferAttribute(t,e+2),h.subVectors(s,r),u.subVectors(n,r),h.cross(u),i.setXYZ(e+0,h.x,h.y,h.z),i.setXYZ(e+1,h.x,h.y,h.z),i.setXYZ(e+2,h.x,h.y,h.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){let e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)tv.fromBufferAttribute(e,t),tv.normalize(),e.setXYZ(t,tv.x,tv.y,tv.z)}toNonIndexed(){function e(e,t){let i=e.array,n=e.itemSize,r=e.normalized,s=new i.constructor(t.length*n),a=0,o=0;for(let r=0,l=t.length;r<l;r++){a=e.isInterleavedBufferAttribute?t[r]*e.data.stride+e.offset:t[r]*n;for(let e=0;e<n;e++)s[o++]=i[a++]}return new to(s,n,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new t_,i=this.index.array,n=this.attributes;for(let r in n){let s=e(n[r],i);t.setAttribute(r,s)}let r=this.morphAttributes;for(let n in r){let s=[],a=r[n];for(let t=0,n=a.length;t<n;t++){let n=e(a[t],i);s.push(n)}t.morphAttributes[n]=s}t.morphTargetsRelative=this.morphTargetsRelative;let s=this.groups;for(let e=0,i=s.length;e<i;e++){let i=s[e];t.addGroup(i.start,i.count,i.materialIndex)}return t}toJSON(){let e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){let t=this.parameters;for(let i in t)void 0!==t[i]&&(e[i]=t[i]);return e}e.data={attributes:{}};let t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let i=this.attributes;for(let t in i){let n=i[t];e.data.attributes[t]=n.toJSON(e.data)}let n={},r=!1;for(let t in this.morphAttributes){let i=this.morphAttributes[t],s=[];for(let t=0,n=i.length;t<n;t++){let n=i[t];s.push(n.toJSON(e.data))}s.length>0&&(n[t]=s,r=!0)}r&&(e.data.morphAttributes=n,e.data.morphTargetsRelative=this.morphTargetsRelative);let s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));let a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let i=e.index;null!==i&&this.setIndex(i.clone(t));let n=e.attributes;for(let e in n){let i=n[e];this.setAttribute(e,i.clone(t))}let r=e.morphAttributes;for(let e in r){let i=[],n=r[e];for(let e=0,r=n.length;e<r;e++)i.push(n[e].clone(t));this.morphAttributes[e]=i}this.morphTargetsRelative=e.morphTargetsRelative;let s=e.groups;for(let e=0,t=s.length;e<t;e++){let t=s[e];this.addGroup(t.start,t.count,t.materialIndex)}let a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());let o=e.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}let tx=new eM,ty=new class{constructor(e=new j,t=new j(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ef)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=ef.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ef.copy(this.origin).addScaledVector(this.direction,t),ef.distanceToSquared(e))}distanceSqToSegment(e,t,i,n){let r,s,a,o;em.copy(e).add(t).multiplyScalar(.5),eg.copy(t).sub(e).normalize(),ev.copy(this.origin).sub(em);let l=.5*e.distanceTo(t),h=-this.direction.dot(eg),u=ev.dot(this.direction),c=-ev.dot(eg),d=ev.lengthSq(),p=Math.abs(1-h*h);if(p>0)if(r=h*c-u,s=h*u-c,o=l*p,r>=0)if(s>=-o)if(s<=o){let e=1/p;r*=e,s*=e,a=r*(r+h*s+2*u)+s*(h*r+s+2*c)+d}else a=-(r=Math.max(0,-(h*(s=l)+u)))*r+s*(s+2*c)+d;else a=-(r=Math.max(0,-(h*(s=-l)+u)))*r+s*(s+2*c)+d;else s<=-o?(s=(r=Math.max(0,-(-h*l+u)))>0?-l:Math.min(Math.max(-l,-c),l),a=-r*r+s*(s+2*c)+d):s<=o?(r=0,a=(s=Math.min(Math.max(-l,-c),l))*(s+2*c)+d):(s=(r=Math.max(0,-(h*l+u)))>0?l:Math.min(Math.max(-l,-c),l),a=-r*r+s*(s+2*c)+d);else s=h>0?-l:l,a=-(r=Math.max(0,-(h*s+u)))*r+s*(s+2*c)+d;return i&&i.copy(this.origin).addScaledVector(this.direction,r),n&&n.copy(em).addScaledVector(eg,s),a}intersectSphere(e,t){ef.subVectors(e.center,this.origin);let i=ef.dot(this.direction),n=ef.dot(ef)-i*i,r=e.radius*e.radius;if(n>r)return null;let s=Math.sqrt(r-n),a=i-s,o=i+s;return o<0?null:a<0?this.at(o,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;let i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){let i=this.distanceToPlane(e);return null===i?null:this.at(i,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return!!(0===t||e.normal.dot(this.direction)*t<0)}intersectBox(e,t){let i,n,r,s,a,o,l=1/this.direction.x,h=1/this.direction.y,u=1/this.direction.z,c=this.origin;return(l>=0?(i=(e.min.x-c.x)*l,n=(e.max.x-c.x)*l):(i=(e.max.x-c.x)*l,n=(e.min.x-c.x)*l),h>=0?(r=(e.min.y-c.y)*h,s=(e.max.y-c.y)*h):(r=(e.max.y-c.y)*h,s=(e.min.y-c.y)*h),i>s||r>n||((r>i||isNaN(i))&&(i=r),(s<n||isNaN(n))&&(n=s),u>=0?(a=(e.min.z-c.z)*u,o=(e.max.z-c.z)*u):(a=(e.max.z-c.z)*u,o=(e.min.z-c.z)*u),i>o||a>n||((a>i||i!=i)&&(i=a),(o<n||n!=n)&&(n=o),n<0)))?null:this.at(i>=0?i:n,t)}intersectsBox(e){return null!==this.intersectBox(e,ef)}intersectTriangle(e,t,i,n,r){let s;e_.subVectors(t,e),ex.subVectors(i,e),ey.crossVectors(e_,ex);let a=this.direction.dot(ey);if(a>0){if(n)return null;s=1}else{if(!(a<0))return null;s=-1,a=-a}ev.subVectors(this.origin,e);let o=s*this.direction.dot(ex.crossVectors(ev,ex));if(o<0)return null;let l=s*this.direction.dot(e_.cross(ev));if(l<0||o+l>a)return null;let h=-s*ev.dot(ey);return h<0?null:this.at(h/a,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},tM=new ep,tS=new j,tb=new j,tE=new j,tT=new j,tw=new j,tA=new j,tC=new M,tP=new M,tR=new M,tL=new j,tD=new j,tI=new j,tU=new j,tN=new j;class tO extends eq{constructor(e=new t_,t=new tr){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){let i=e[t[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=i.length;e<t;e++){let t=i[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){let i=this.geometry,n=i.attributes.position,r=i.morphAttributes.position,s=i.morphTargetsRelative;t.fromBufferAttribute(n,e);let a=this.morphTargetInfluences;if(r&&a){tA.set(0,0,0);for(let i=0,n=r.length;i<n;i++){let n=a[i],o=r[i];0!==n&&(tw.fromBufferAttribute(o,e),s?tA.addScaledVector(tw,n):tA.addScaledVector(tw.sub(t),n))}t.add(tA)}return t}raycast(e,t){let i=this.geometry,n=this.material,r=this.matrixWorld;void 0===n||(null===i.boundingSphere&&i.computeBoundingSphere(),tM.copy(i.boundingSphere),tM.applyMatrix4(r),ty.copy(e.ray).recast(e.near),!1===tM.containsPoint(ty.origin)&&(null===ty.intersectSphere(tM,tS)||ty.origin.distanceToSquared(tS)>(e.far-e.near)**2)||(tx.copy(r).invert(),ty.copy(e.ray).applyMatrix4(tx),(null===i.boundingBox||!1!==ty.intersectsBox(i.boundingBox))&&this._computeIntersections(e,t,ty)))}_computeIntersections(e,t,i){let n,r=this.geometry,s=this.material,a=r.index,o=r.attributes.position,l=r.attributes.uv,h=r.attributes.uv1,u=r.attributes.normal,c=r.groups,d=r.drawRange;if(null!==a)if(Array.isArray(s))for(let r=0,o=c.length;r<o;r++){let o=c[r],p=s[o.materialIndex],f=Math.max(o.start,d.start),m=Math.min(a.count,Math.min(o.start+o.count,d.start+d.count));for(let r=f;r<m;r+=3)(n=tF(this,p,e,i,l,h,u,a.getX(r),a.getX(r+1),a.getX(r+2)))&&(n.faceIndex=Math.floor(r/3),n.face.materialIndex=o.materialIndex,t.push(n))}else{let r=Math.max(0,d.start),o=Math.min(a.count,d.start+d.count);for(let c=r;c<o;c+=3)(n=tF(this,s,e,i,l,h,u,a.getX(c),a.getX(c+1),a.getX(c+2)))&&(n.faceIndex=Math.floor(c/3),t.push(n))}else if(void 0!==o)if(Array.isArray(s))for(let r=0,a=c.length;r<a;r++){let a=c[r],p=s[a.materialIndex],f=Math.max(a.start,d.start),m=Math.min(o.count,Math.min(a.start+a.count,d.start+d.count));for(let r=f;r<m;r+=3)(n=tF(this,p,e,i,l,h,u,r,r+1,r+2))&&(n.faceIndex=Math.floor(r/3),n.face.materialIndex=a.materialIndex,t.push(n))}else{let r=Math.max(0,d.start),a=Math.min(o.count,d.start+d.count);for(let o=r;o<a;o+=3)(n=tF(this,s,e,i,l,h,u,o,o+1,o+2))&&(n.faceIndex=Math.floor(o/3),t.push(n))}}}function tF(e,t,i,n,r,s,a,o,l,h){e.getVertexPosition(o,tb),e.getVertexPosition(l,tE),e.getVertexPosition(h,tT);let u=function(e,t,i,n,r,s,a,o){if(null===(1===t.side?n.intersectTriangle(a,s,r,!0,o):n.intersectTriangle(r,s,a,0===t.side,o)))return null;tN.copy(o),tN.applyMatrix4(e.matrixWorld);let l=i.ray.origin.distanceTo(tN);return l<i.near||l>i.far?null:{distance:l,point:tN.clone(),object:e}}(e,t,i,n,tb,tE,tT,tU);if(u){r&&(tC.fromBufferAttribute(r,o),tP.fromBufferAttribute(r,l),tR.fromBufferAttribute(r,h),u.uv=e5.getInterpolation(tU,tb,tE,tT,tC,tP,tR,new M)),s&&(tC.fromBufferAttribute(s,o),tP.fromBufferAttribute(s,l),tR.fromBufferAttribute(s,h),u.uv1=e5.getInterpolation(tU,tb,tE,tT,tC,tP,tR,new M)),a&&(tL.fromBufferAttribute(a,o),tD.fromBufferAttribute(a,l),tI.fromBufferAttribute(a,h),u.normal=e5.getInterpolation(tU,tb,tE,tT,tL,tD,tI,new j),u.normal.dot(n.direction)>0&&u.normal.multiplyScalar(-1));let e={a:o,b:l,c:h,normal:new j,materialIndex:0};e5.getNormal(tb,tE,tT,e.normal),u.face=e}return u}class tB extends t_{constructor(e=1,t=1,i=1,n=1,r=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:n,heightSegments:r,depthSegments:s};const a=this;n=Math.floor(n),r=Math.floor(r);const o=[],l=[],h=[],u=[];let c=0,d=0;function p(e,t,i,n,r,s,p,f,m,g,v){let _=s/m,x=p/g,y=s/2,M=p/2,S=f/2,b=m+1,E=g+1,T=0,w=0,A=new j;for(let s=0;s<E;s++){let a=s*x-M;for(let o=0;o<b;o++){let c=o*_-y;A[e]=c*n,A[t]=a*r,A[i]=S,l.push(A.x,A.y,A.z),A[e]=0,A[t]=0,A[i]=f>0?1:-1,h.push(A.x,A.y,A.z),u.push(o/m),u.push(1-s/g),T+=1}}for(let e=0;e<g;e++)for(let t=0;t<m;t++){let i=c+t+b*e,n=c+t+b*(e+1),r=c+(t+1)+b*(e+1),s=c+(t+1)+b*e;o.push(i,n,s),o.push(n,r,s),w+=6}a.addGroup(d,w,v),d+=w,c+=T}p("z","y","x",-1,-1,i,t,e,s=Math.floor(s),r,0),p("z","y","x",1,-1,i,t,-e,s,r,1),p("x","z","y",1,1,e,i,t,n,s,2),p("x","z","y",1,-1,e,i,-t,n,s,3),p("x","y","z",1,-1,e,t,i,n,r,4),p("x","y","z",-1,-1,e,t,-i,n,r,5),this.setIndex(o),this.setAttribute("position",new tu(l,3)),this.setAttribute("normal",new tu(h,3)),this.setAttribute("uv",new tu(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new tB(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function tk(e){let t={};for(let i in e)for(let n in t[i]={},e[i]){let r=e[i][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[i][n]=null):t[i][n]=r.clone():Array.isArray(r)?t[i][n]=r.slice():t[i][n]=r}return t}function tz(e){let t={};for(let i=0;i<e.length;i++){let n=tk(e[i]);for(let e in n)t[e]=n[e]}return t}function tV(e){let t=e.getRenderTarget();return null===t?e.outputColorSpace:!0===t.isXRRenderTarget?t.texture.colorSpace:D.workingColorSpace}class tH extends tn{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=tk(e.uniforms),this.uniformsGroups=function(e){let t=[];for(let i=0;i<e.length;i++)t.push(e[i].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);for(let i in t.glslVersion=this.glslVersion,t.uniforms={},this.uniforms){let n=this.uniforms[i].value;n&&n.isTexture?t.uniforms[i]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[i]={type:"m4",value:n.toArray()}:t.uniforms[i]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;let i={};for(let e in this.extensions)!0===this.extensions[e]&&(i[e]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class tG extends eq{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new eM,this.projectionMatrix=new eM,this.projectionMatrixInverse=new eM,this.coordinateSystem=2e3}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}let tW=new j,tX=new M,tj=new M;class tY extends tG{constructor(e=50,t=1,i=.1,n=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=n,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=2*g*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(.5*m*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*g*Math.atan(Math.tan(.5*m*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){tW.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(tW.x,tW.y).multiplyScalar(-e/tW.z),tW.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(tW.x,tW.y).multiplyScalar(-e/tW.z)}getViewSize(e,t){return this.getViewBounds(e,tX,tj),t.subVectors(tj,tX)}setViewOffset(e,t,i,n,r,s){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(.5*m*this.fov)/this.zoom,i=2*t,n=this.aspect*i,r=-.5*n,s=this.view;if(null!==this.view&&this.view.enabled){let e=s.fullWidth,a=s.fullHeight;r+=s.offsetX*n/e,t-=s.offsetY*i/a,n*=s.width/e,i*=s.height/a}let a=this.filmOffset;0!==a&&(r+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+n,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}class tq extends eq{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const n=new tY(-90,1,e,t);n.layers=this.layers,this.add(n);const r=new tY(-90,1,e,t);r.layers=this.layers,this.add(r);const s=new tY(-90,1,e,t);s.layers=this.layers,this.add(s);const a=new tY(-90,1,e,t);a.layers=this.layers,this.add(a);const o=new tY(-90,1,e,t);o.layers=this.layers,this.add(o);const l=new tY(-90,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){let e=this.coordinateSystem,t=this.children.concat(),[i,n,r,s,a,o]=t;for(let e of t)this.remove(e);if(2e3===e)i.up.set(0,1,0),i.lookAt(1,0,0),n.up.set(0,1,0),n.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),o.up.set(0,1,0),o.lookAt(0,0,-1);else if(2001===e)i.up.set(0,-1,0),i.lookAt(-1,0,0),n.up.set(0,-1,0),n.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),o.up.set(0,-1,0),o.lookAt(0,0,-1);else throw Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(let e of t)this.add(e),e.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();let{renderTarget:i,activeMipmapLevel:n}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());let[r,s,a,o,l,h]=this.children,u=e.getRenderTarget(),c=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;let f=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,n),e.render(t,r),e.setRenderTarget(i,1,n),e.render(t,s),e.setRenderTarget(i,2,n),e.render(t,a),e.setRenderTarget(i,3,n),e.render(t,o),e.setRenderTarget(i,4,n),e.render(t,l),i.texture.generateMipmaps=f,e.setRenderTarget(i,5,n),e.render(t,h),e.setRenderTarget(u,c,d),e.xr.enabled=p,i.texture.needsPMREMUpdate=!0}}class tK extends z{constructor(e,t,i,n,r,s,a,o,l,h){super(e=void 0!==e?e:[],t=void 0!==t?t:301,i,n,r,s,a,o,l,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class t$ extends G{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1};this.texture=new tK([i,i,i,i,i,i],t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:1006}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},n=new tB(5,5,5),r=new tH({name:"CubemapFromEquirect",uniforms:tk(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:1,blending:0});r.uniforms.tEquirect.value=t;let s=new tO(n,r),a=t.minFilter;return 1008===t.minFilter&&(t.minFilter=1006),new tq(1,10,this).update(e,s),t.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,i,n){let r=e.getRenderTarget();for(let r=0;r<6;r++)e.setRenderTarget(this,r),e.clear(t,i,n);e.setRenderTarget(r)}}let tZ=new j,tJ=new j,tQ=new S;class t0{constructor(e=new j(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,n){return this.normal.set(e,t,i),this.constant=n,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){let n=tZ.subVectors(i,t).cross(tJ.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(n,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){let i=e.delta(tZ),n=this.normal.dot(i);if(0===n)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;let r=-(e.start.dot(this.normal)+this.constant)/n;return r<0||r>1?null:t.copy(e.start).addScaledVector(i,r)}intersectsLine(e){let t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let i=t||tQ.getNormalMatrix(e),n=this.coplanarPoint(tZ).applyMatrix4(e),r=this.normal.applyMatrix3(i).normalize();return this.constant=-n.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}let t1=new ep,t2=new j;class t3{constructor(e=new t0,t=new t0,i=new t0,n=new t0,r=new t0,s=new t0){this.planes=[e,t,i,n,r,s]}set(e,t,i,n,r,s){let a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(n),a[4].copy(r),a[5].copy(s),this}copy(e){let t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=2e3){let i=this.planes,n=e.elements,r=n[0],s=n[1],a=n[2],o=n[3],l=n[4],h=n[5],u=n[6],c=n[7],d=n[8],p=n[9],f=n[10],m=n[11],g=n[12],v=n[13],_=n[14],x=n[15];if(i[0].setComponents(o-r,c-l,m-d,x-g).normalize(),i[1].setComponents(o+r,c+l,m+d,x+g).normalize(),i[2].setComponents(o+s,c+h,m+p,x+v).normalize(),i[3].setComponents(o-s,c-h,m-p,x-v).normalize(),i[4].setComponents(o-a,c-u,m-f,x-_).normalize(),2e3===t)i[5].setComponents(o+a,c+u,m+f,x+_).normalize();else if(2001===t)i[5].setComponents(a,u,f,_).normalize();else throw Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),t1.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{let t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),t1.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(t1)}intersectsSprite(e){return t1.center.set(0,0,0),t1.radius=.7071067811865476,t1.applyMatrix4(e.matrixWorld),this.intersectsSphere(t1)}intersectsSphere(e){let t=this.planes,i=e.center,n=-e.radius;for(let e=0;e<6;e++)if(t[e].distanceToPoint(i)<n)return!1;return!0}intersectsBox(e){let t=this.planes;for(let i=0;i<6;i++){let n=t[i];if(t2.x=n.normal.x>0?e.max.x:e.min.x,t2.y=n.normal.y>0?e.max.y:e.min.y,t2.z=n.normal.z>0?e.max.z:e.min.z,0>n.distanceToPoint(t2))return!1}return!0}containsPoint(e){let t=this.planes;for(let i=0;i<6;i++)if(0>t[i].distanceToPoint(e))return!1;return!0}clone(){return new this.constructor().copy(this)}}function t4(){let e=null,t=!1,i=null,n=null;function r(t,s){i(t,s),n=e.requestAnimationFrame(r)}return{start:function(){!0===t||null!==i&&(n=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(e){i=e},setContext:function(t){e=t}}}function t5(e){let t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(i){i.isInterleavedBufferAttribute&&(i=i.data);let n=t.get(i);n&&(e.deleteBuffer(n.buffer),t.delete(i))},update:function(i,n){if(i.isInterleavedBufferAttribute&&(i=i.data),i.isGLBufferAttribute){let e=t.get(i);(!e||e.version<i.version)&&t.set(i,{buffer:i.buffer,type:i.type,bytesPerElement:i.elementSize,version:i.version});return}let r=t.get(i);if(void 0===r)t.set(i,function(t,i){let n,r=t.array,s=t.usage,a=r.byteLength,o=e.createBuffer();if(e.bindBuffer(i,o),e.bufferData(i,r,s),t.onUploadCallback(),r instanceof Float32Array)n=e.FLOAT;else if(r instanceof Uint16Array)n=t.isFloat16BufferAttribute?e.HALF_FLOAT:e.UNSIGNED_SHORT;else if(r instanceof Int16Array)n=e.SHORT;else if(r instanceof Uint32Array)n=e.UNSIGNED_INT;else if(r instanceof Int32Array)n=e.INT;else if(r instanceof Int8Array)n=e.BYTE;else if(r instanceof Uint8Array)n=e.UNSIGNED_BYTE;else if(r instanceof Uint8ClampedArray)n=e.UNSIGNED_BYTE;else throw Error("THREE.WebGLAttributes: Unsupported buffer data format: "+r);return{buffer:o,type:n,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version,size:a}}(i,n));else if(r.version<i.version){if(r.size!==i.array.byteLength)throw Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(t,i,n){let r=i.array,s=i._updateRange,a=i.updateRanges;if(e.bindBuffer(n,t),-1===s.count&&0===a.length&&e.bufferSubData(n,0,r),0!==a.length){for(let t=0,i=a.length;t<i;t++){let i=a[t];e.bufferSubData(n,i.start*r.BYTES_PER_ELEMENT,r,i.start,i.count)}i.clearUpdateRanges()}-1!==s.count&&(e.bufferSubData(n,s.offset*r.BYTES_PER_ELEMENT,r,s.offset,s.count),s.count=-1),i.onUploadCallback()}(r.buffer,i,n),r.version=i.version}}}}class t6 extends t_{constructor(e=1,t=1,i=1,n=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:n};const r=e/2,s=t/2,a=Math.floor(i),o=Math.floor(n),l=a+1,h=o+1,u=e/a,c=t/o,d=[],p=[],f=[],m=[];for(let e=0;e<h;e++){const t=e*c-s;for(let i=0;i<l;i++){const n=i*u-r;p.push(n,-t,0),f.push(0,0,1),m.push(i/a),m.push(1-e/o)}}for(let e=0;e<o;e++)for(let t=0;t<a;t++){const i=t+l*e,n=t+l*(e+1),r=t+1+l*(e+1),s=t+1+l*e;d.push(i,n,s),d.push(n,r,s)}this.setIndex(d),this.setAttribute("position",new tu(p,3)),this.setAttribute("normal",new tu(f,3)),this.setAttribute("uv",new tu(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new t6(e.width,e.height,e.widthSegments,e.heightSegments)}}let t8={alphahash_fragment:"#ifdef USE_ALPHAHASH\n	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n	const float ALPHA_HASH_SCALE = 0.05;\n	float hash2D( vec2 value ) {\n		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n	}\n	float hash3D( vec3 value ) {\n		return hash2D( vec2( hash2D( value.xy ), value.z ) );\n	}\n	float getAlphaHashThreshold( vec3 position ) {\n		float maxDeriv = max(\n			length( dFdx( position.xyz ) ),\n			length( dFdy( position.xyz ) )\n		);\n		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n		vec2 pixScales = vec2(\n			exp2( floor( log2( pixScale ) ) ),\n			exp2( ceil( log2( pixScale ) ) )\n		);\n		vec2 alpha = vec2(\n			hash3D( floor( pixScales.x * position.xyz ) ),\n			hash3D( floor( pixScales.y * position.xyz ) )\n		);\n		float lerpFactor = fract( log2( pixScale ) );\n		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n		float a = min( lerpFactor, 1.0 - lerpFactor );\n		vec3 cases = vec3(\n			x * x / ( 2.0 * a * ( 1.0 - a ) ),\n			( x - 0.5 * a ) / ( 1.0 - a ),\n			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n		);\n		float threshold = ( x < ( 1.0 - a ) )\n			? ( ( x < a ) ? cases.x : cases.y )\n			: cases.z;\n		return clamp( threshold , 1.0e-6, 1.0 );\n	}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n	#ifdef ALPHA_TO_COVERAGE\n	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n	if ( diffuseColor.a == 0.0 ) discard;\n	#else\n	if ( diffuseColor.a < alphaTest ) discard;\n	#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n	uniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n	reflectedLight.indirectDiffuse *= ambientOcclusion;\n	#if defined( USE_CLEARCOAT ) \n		clearcoatSpecularIndirect *= ambientOcclusion;\n	#endif\n	#if defined( USE_SHEEN ) \n		sheenSpecularIndirect *= ambientOcclusion;\n	#endif\n	#if defined( USE_ENVMAP ) && defined( STANDARD )\n		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n	#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n	uniform sampler2D aoMap;\n	uniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n	#if ! defined( GL_ANGLE_multi_draw )\n	#define gl_DrawID _gl_DrawID\n	uniform int _gl_DrawID;\n	#endif\n	uniform highp sampler2D batchingTexture;\n	uniform highp usampler2D batchingIdTexture;\n	mat4 getBatchingMatrix( const in float i ) {\n		int size = textureSize( batchingTexture, 0 ).x;\n		int j = int( i ) * 4;\n		int x = j % size;\n		int y = j / size;\n		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n		return mat4( v1, v2, v3, v4 );\n	}\n	float getIndirectIndex( const in int i ) {\n		int size = textureSize( batchingIdTexture, 0 ).x;\n		int x = i % size;\n		int y = i / size;\n		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n	}\n#endif\n#ifdef USE_BATCHING_COLOR\n	uniform sampler2D batchingColorTexture;\n	vec3 getBatchingColor( const in float i ) {\n		int size = textureSize( batchingColorTexture, 0 ).x;\n		int j = int( i );\n		int x = j % size;\n		int y = j / size;\n		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n	}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n	vPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n	vec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n	return 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float dotVH = saturate( dot( viewDir, halfDir ) );\n	vec3 F = F_Schlick( specularColor, 1.0, dotVH );\n	float G = G_BlinnPhong_Implicit( );\n	float D = D_BlinnPhong( shininess, dotNH );\n	return F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n	const mat3 XYZ_TO_REC709 = mat3(\n		 3.2404542, -0.9692660,  0.0556434,\n		-1.5371385,  1.8760108, -0.2040259,\n		-0.4985314,  0.0415560,  1.0572252\n	);\n	vec3 Fresnel0ToIor( vec3 fresnel0 ) {\n		vec3 sqrtF0 = sqrt( fresnel0 );\n		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n	}\n	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n	}\n	float IorToFresnel0( float transmittedIor, float incidentIor ) {\n		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n	}\n	vec3 evalSensitivity( float OPD, vec3 shift ) {\n		float phase = 2.0 * PI * OPD * 1.0e-9;\n		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n		xyz /= 1.0685e-7;\n		vec3 rgb = XYZ_TO_REC709 * xyz;\n		return rgb;\n	}\n	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n		vec3 I;\n		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n		float cosTheta2Sq = 1.0 - sinTheta2Sq;\n		if ( cosTheta2Sq < 0.0 ) {\n			return vec3( 1.0 );\n		}\n		float cosTheta2 = sqrt( cosTheta2Sq );\n		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n		float R12 = F_Schlick( R0, 1.0, cosTheta1 );\n		float T121 = 1.0 - R12;\n		float phi12 = 0.0;\n		if ( iridescenceIOR < outsideIOR ) phi12 = PI;\n		float phi21 = PI - phi12;\n		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n		vec3 phi23 = vec3( 0.0 );\n		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n		vec3 phi = vec3( phi21 ) + phi23;\n		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n		vec3 r123 = sqrt( R123 );\n		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n		vec3 C0 = R12 + Rs;\n		I = C0;\n		vec3 Cm = Rs - T121;\n		for ( int m = 1; m <= 2; ++ m ) {\n			Cm *= r123;\n			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n			I += Cm * Sm;\n		}\n		return max( I, vec3( 0.0 ) );\n	}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n	vec2 dHdxy_fwd() {\n		vec2 dSTdx = dFdx( vBumpMapUv );\n		vec2 dSTdy = dFdy( vBumpMapUv );\n		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n		return vec2( dBx, dBy );\n	}\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n		vec3 vN = surf_norm;\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n		float fDet = dot( vSigmaX, R1 ) * faceDirection;\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n	}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n	vec4 plane;\n	#ifdef ALPHA_TO_COVERAGE\n		float distanceToPlane, distanceGradient;\n		float clipOpacity = 1.0;\n		#pragma unroll_loop_start\n		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n			plane = clippingPlanes[ i ];\n			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n			distanceGradient = fwidth( distanceToPlane ) / 2.0;\n			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n			if ( clipOpacity == 0.0 ) discard;\n		}\n		#pragma unroll_loop_end\n		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n			float unionClipOpacity = 1.0;\n			#pragma unroll_loop_start\n			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n				plane = clippingPlanes[ i ];\n				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n				distanceGradient = fwidth( distanceToPlane ) / 2.0;\n				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n			}\n			#pragma unroll_loop_end\n			clipOpacity *= 1.0 - unionClipOpacity;\n		#endif\n		diffuseColor.a *= clipOpacity;\n		if ( diffuseColor.a == 0.0 ) discard;\n	#else\n		#pragma unroll_loop_start\n		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n			plane = clippingPlanes[ i ];\n			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n		}\n		#pragma unroll_loop_end\n		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n			bool clipped = true;\n			#pragma unroll_loop_start\n			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n				plane = clippingPlanes[ i ];\n				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n			}\n			#pragma unroll_loop_end\n			if ( clipped ) discard;\n		#endif\n	#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n	varying vec3 vClipPosition;\n	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n	varying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n	vClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n	diffuseColor *= vColor;\n#elif defined( USE_COLOR )\n	diffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n	varying vec4 vColor;\n#elif defined( USE_COLOR )\n	varying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n	varying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n	varying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n	vColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n	vColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n	vColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n	vColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n	vColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n	const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n	return fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n	float precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n	float precisionSafeLength( vec3 v ) {\n		float maxComponent = max3( abs( v ) );\n		return length( v / maxComponent ) * maxComponent;\n	}\n#endif\nstruct IncidentLight {\n	vec3 color;\n	vec3 direction;\n	bool visible;\n};\nstruct ReflectedLight {\n	vec3 directDiffuse;\n	vec3 directSpecular;\n	vec3 indirectDiffuse;\n	vec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n	varying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n	mat3 tmp;\n	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n	return tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n	return m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n	return vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n	return RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n	#define cubeUV_minMipLevel 4.0\n	#define cubeUV_minTileSize 16.0\n	float getFace( vec3 direction ) {\n		vec3 absDirection = abs( direction );\n		float face = - 1.0;\n		if ( absDirection.x > absDirection.z ) {\n			if ( absDirection.x > absDirection.y )\n				face = direction.x > 0.0 ? 0.0 : 3.0;\n			else\n				face = direction.y > 0.0 ? 1.0 : 4.0;\n		} else {\n			if ( absDirection.z > absDirection.y )\n				face = direction.z > 0.0 ? 2.0 : 5.0;\n			else\n				face = direction.y > 0.0 ? 1.0 : 4.0;\n		}\n		return face;\n	}\n	vec2 getUV( vec3 direction, float face ) {\n		vec2 uv;\n		if ( face == 0.0 ) {\n			uv = vec2( direction.z, direction.y ) / abs( direction.x );\n		} else if ( face == 1.0 ) {\n			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n		} else if ( face == 2.0 ) {\n			uv = vec2( - direction.x, direction.y ) / abs( direction.z );\n		} else if ( face == 3.0 ) {\n			uv = vec2( - direction.z, direction.y ) / abs( direction.x );\n		} else if ( face == 4.0 ) {\n			uv = vec2( - direction.x, direction.z ) / abs( direction.y );\n		} else {\n			uv = vec2( direction.x, direction.y ) / abs( direction.z );\n		}\n		return 0.5 * ( uv + 1.0 );\n	}\n	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n		float face = getFace( direction );\n		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n		mipInt = max( mipInt, cubeUV_minMipLevel );\n		float faceSize = exp2( mipInt );\n		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n		if ( face > 2.0 ) {\n			uv.y += faceSize;\n			face -= 3.0;\n		}\n		uv.x += face * faceSize;\n		uv.x += filterInt * 3.0 * cubeUV_minTileSize;\n		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n		uv.x *= CUBEUV_TEXEL_WIDTH;\n		uv.y *= CUBEUV_TEXEL_HEIGHT;\n		#ifdef texture2DGradEXT\n			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n		#else\n			return texture2D( envMap, uv ).rgb;\n		#endif\n	}\n	#define cubeUV_r0 1.0\n	#define cubeUV_m0 - 2.0\n	#define cubeUV_r1 0.8\n	#define cubeUV_m1 - 1.0\n	#define cubeUV_r4 0.4\n	#define cubeUV_m4 2.0\n	#define cubeUV_r5 0.305\n	#define cubeUV_m5 3.0\n	#define cubeUV_r6 0.21\n	#define cubeUV_m6 4.0\n	float roughnessToMip( float roughness ) {\n		float mip = 0.0;\n		if ( roughness >= cubeUV_r1 ) {\n			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n		} else if ( roughness >= cubeUV_r4 ) {\n			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n		} else if ( roughness >= cubeUV_r5 ) {\n			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n		} else if ( roughness >= cubeUV_r6 ) {\n			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n		} else {\n			mip = - 2.0 * log2( 1.16 * roughness );		}\n		return mip;\n	}\n	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n		float mipF = fract( mip );\n		float mipInt = floor( mip );\n		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n		if ( mipF == 0.0 ) {\n			return vec4( color0, 1.0 );\n		} else {\n			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n			return vec4( mix( color0, color1, mipF ), 1.0 );\n		}\n	}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n	vec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n	mat3 bm = mat3( batchingMatrix );\n	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n	transformedNormal = bm * transformedNormal;\n	#ifdef USE_TANGENT\n		transformedTangent = bm * transformedTangent;\n	#endif\n#endif\n#ifdef USE_INSTANCING\n	mat3 im = mat3( instanceMatrix );\n	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n	transformedNormal = im * transformedNormal;\n	#ifdef USE_TANGENT\n		transformedTangent = im * transformedTangent;\n	#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n	transformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n	#ifdef FLIP_SIDED\n		transformedTangent = - transformedTangent;\n	#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n	uniform sampler2D displacementMap;\n	uniform float displacementScale;\n	uniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n	totalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n	uniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n	vec3( 0.8224621, 0.177538, 0.0 ),\n	vec3( 0.0331941, 0.9668058, 0.0 ),\n	vec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n	vec3( 1.2249401, - 0.2249404, 0.0 ),\n	vec3( - 0.0420569, 1.0420571, 0.0 ),\n	vec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n	return value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n	#ifdef ENV_WORLDPOS\n		vec3 cameraToFrag;\n		if ( isOrthographic ) {\n			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n		} else {\n			cameraToFrag = normalize( vWorldPosition - cameraPosition );\n		}\n		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vec3 reflectVec = reflect( cameraToFrag, worldNormal );\n		#else\n			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n		#endif\n	#else\n		vec3 reflectVec = vReflect;\n	#endif\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n	#else\n		vec4 envColor = vec4( 0.0 );\n	#endif\n	#ifdef ENVMAP_BLENDING_MULTIPLY\n		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_MIX )\n		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_ADD )\n		outgoingLight += envColor.xyz * specularStrength * reflectivity;\n	#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n	uniform float envMapIntensity;\n	uniform float flipEnvMap;\n	uniform mat3 envMapRotation;\n	#ifdef ENVMAP_TYPE_CUBE\n		uniform samplerCube envMap;\n	#else\n		uniform sampler2D envMap;\n	#endif\n	\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n	uniform float reflectivity;\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n		#define ENV_WORLDPOS\n	#endif\n	#ifdef ENV_WORLDPOS\n		varying vec3 vWorldPosition;\n		uniform float refractionRatio;\n	#else\n		varying vec3 vReflect;\n	#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n		#define ENV_WORLDPOS\n	#endif\n	#ifdef ENV_WORLDPOS\n		\n		varying vec3 vWorldPosition;\n	#else\n		varying vec3 vReflect;\n		uniform float refractionRatio;\n	#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n	vec3 getIBLIrradiance( const in vec3 normal ) {\n		#ifdef ENVMAP_TYPE_CUBE_UV\n			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n			return PI * envMapColor.rgb * envMapIntensity;\n		#else\n			return vec3( 0.0 );\n		#endif\n	}\n	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n		#ifdef ENVMAP_TYPE_CUBE_UV\n			vec3 reflectVec = reflect( - viewDir, normal );\n			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n			return envMapColor.rgb * envMapIntensity;\n		#else\n			return vec3( 0.0 );\n		#endif\n	}\n	#ifdef USE_ANISOTROPY\n		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n			#ifdef ENVMAP_TYPE_CUBE_UV\n				vec3 bentNormal = cross( bitangent, viewDir );\n				bentNormal = normalize( cross( bentNormal, bitangent ) );\n				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n				return getIBLRadiance( viewDir, bentNormal, roughness );\n			#else\n				return vec3( 0.0 );\n			#endif\n		}\n	#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n	#ifdef ENV_WORLDPOS\n		vWorldPosition = worldPosition.xyz;\n	#else\n		vec3 cameraToVertex;\n		if ( isOrthographic ) {\n			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n		} else {\n			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n		}\n		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vReflect = reflect( cameraToVertex, worldNormal );\n		#else\n			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n		#endif\n	#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n	vFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n	varying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n	#ifdef FOG_EXP2\n		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n	#else\n		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n	#endif\n	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n	uniform vec3 fogColor;\n	varying float vFogDepth;\n	#ifdef FOG_EXP2\n		uniform float fogDensity;\n	#else\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n	uniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n	float dotNL = dot( normal, lightDirection );\n	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n	#ifdef USE_GRADIENTMAP\n		return vec3( texture2D( gradientMap, coord ).r );\n	#else\n		vec2 fw = fwidth( coord ) * 0.5;\n		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n	#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n	uniform sampler2D lightMap;\n	uniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n	vec3 diffuseColor;\n	float specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_Lambert\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n	uniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n	float x = normal.x, y = normal.y, z = normal.z;\n	vec3 result = shCoefficients[ 0 ] * 0.886227;\n	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n	return result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n	return irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n	vec3 irradiance = ambientLightColor;\n	return irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n	if ( cutoffDistance > 0.0 ) {\n		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n	}\n	return distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n	return smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n	struct DirectionalLight {\n		vec3 direction;\n		vec3 color;\n	};\n	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n		light.color = directionalLight.color;\n		light.direction = directionalLight.direction;\n		light.visible = true;\n	}\n#endif\n#if NUM_POINT_LIGHTS > 0\n	struct PointLight {\n		vec3 position;\n		vec3 color;\n		float distance;\n		float decay;\n	};\n	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n		vec3 lVector = pointLight.position - geometryPosition;\n		light.direction = normalize( lVector );\n		float lightDistance = length( lVector );\n		light.color = pointLight.color;\n		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n		light.visible = ( light.color != vec3( 0.0 ) );\n	}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n	struct SpotLight {\n		vec3 position;\n		vec3 direction;\n		vec3 color;\n		float distance;\n		float decay;\n		float coneCos;\n		float penumbraCos;\n	};\n	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n		vec3 lVector = spotLight.position - geometryPosition;\n		light.direction = normalize( lVector );\n		float angleCos = dot( light.direction, spotLight.direction );\n		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n		if ( spotAttenuation > 0.0 ) {\n			float lightDistance = length( lVector );\n			light.color = spotLight.color * spotAttenuation;\n			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n			light.visible = ( light.color != vec3( 0.0 ) );\n		} else {\n			light.color = vec3( 0.0 );\n			light.visible = false;\n		}\n	}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n	struct RectAreaLight {\n		vec3 color;\n		vec3 position;\n		vec3 halfWidth;\n		vec3 halfHeight;\n	};\n	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;\n	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n	struct HemisphereLight {\n		vec3 direction;\n		vec3 skyColor;\n		vec3 groundColor;\n	};\n	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n		float dotNL = dot( normal, hemiLight.direction );\n		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n		return irradiance;\n	}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n	vec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_Toon\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n	vec3 diffuseColor;\n	vec3 specularColor;\n	float specularShininess;\n	float specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_BlinnPhong\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n	material.ior = ior;\n	#ifdef USE_SPECULAR\n		float specularIntensityFactor = specularIntensity;\n		vec3 specularColorFactor = specularColor;\n		#ifdef USE_SPECULAR_COLORMAP\n			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n		#endif\n		#ifdef USE_SPECULAR_INTENSITYMAP\n			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n		#endif\n		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n	#else\n		float specularIntensityFactor = 1.0;\n		vec3 specularColorFactor = vec3( 1.0 );\n		material.specularF90 = 1.0;\n	#endif\n	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n	material.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n	material.clearcoat = clearcoat;\n	material.clearcoatRoughness = clearcoatRoughness;\n	material.clearcoatF0 = vec3( 0.04 );\n	material.clearcoatF90 = 1.0;\n	#ifdef USE_CLEARCOATMAP\n		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n	#endif\n	#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n	#endif\n	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n	material.clearcoatRoughness += geometryRoughness;\n	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n	material.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n	material.iridescence = iridescence;\n	material.iridescenceIOR = iridescenceIOR;\n	#ifdef USE_IRIDESCENCEMAP\n		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n	#endif\n	#ifdef USE_IRIDESCENCE_THICKNESSMAP\n		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n	#else\n		material.iridescenceThickness = iridescenceThicknessMaximum;\n	#endif\n#endif\n#ifdef USE_SHEEN\n	material.sheenColor = sheenColor;\n	#ifdef USE_SHEEN_COLORMAP\n		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n	#endif\n	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n	#ifdef USE_SHEEN_ROUGHNESSMAP\n		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n	#endif\n#endif\n#ifdef USE_ANISOTROPY\n	#ifdef USE_ANISOTROPYMAP\n		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n	#else\n		vec2 anisotropyV = anisotropyVector;\n	#endif\n	material.anisotropy = length( anisotropyV );\n	if( material.anisotropy == 0.0 ) {\n		anisotropyV = vec2( 1.0, 0.0 );\n	} else {\n		anisotropyV /= material.anisotropy;\n		material.anisotropy = saturate( material.anisotropy );\n	}\n	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n	vec3 diffuseColor;\n	float roughness;\n	vec3 specularColor;\n	float specularF90;\n	float dispersion;\n	#ifdef USE_CLEARCOAT\n		float clearcoat;\n		float clearcoatRoughness;\n		vec3 clearcoatF0;\n		float clearcoatF90;\n	#endif\n	#ifdef USE_IRIDESCENCE\n		float iridescence;\n		float iridescenceIOR;\n		float iridescenceThickness;\n		vec3 iridescenceFresnel;\n		vec3 iridescenceF0;\n	#endif\n	#ifdef USE_SHEEN\n		vec3 sheenColor;\n		float sheenRoughness;\n	#endif\n	#ifdef IOR\n		float ior;\n	#endif\n	#ifdef USE_TRANSMISSION\n		float transmission;\n		float transmissionAlpha;\n		float thickness;\n		float attenuationDistance;\n		vec3 attenuationColor;\n	#endif\n	#ifdef USE_ANISOTROPY\n		float anisotropy;\n		float alphaT;\n		vec3 anisotropyT;\n		vec3 anisotropyB;\n	#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n	float a2 = pow2( alpha );\n	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n	return 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n	float a2 = pow2( alpha );\n	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n	return RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n		float v = 0.5 / ( gv + gl );\n		return saturate(v);\n	}\n	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n		float a2 = alphaT * alphaB;\n		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n		highp float v2 = dot( v, v );\n		float w2 = a2 / v2;\n		return RECIPROCAL_PI * a2 * pow2 ( w2 );\n	}\n#endif\n#ifdef USE_CLEARCOAT\n	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n		vec3 f0 = material.clearcoatF0;\n		float f90 = material.clearcoatF90;\n		float roughness = material.clearcoatRoughness;\n		float alpha = pow2( roughness );\n		vec3 halfDir = normalize( lightDir + viewDir );\n		float dotNL = saturate( dot( normal, lightDir ) );\n		float dotNV = saturate( dot( normal, viewDir ) );\n		float dotNH = saturate( dot( normal, halfDir ) );\n		float dotVH = saturate( dot( viewDir, halfDir ) );\n		vec3 F = F_Schlick( f0, f90, dotVH );\n		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n		float D = D_GGX( alpha, dotNH );\n		return F * ( V * D );\n	}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n	vec3 f0 = material.specularColor;\n	float f90 = material.specularF90;\n	float roughness = material.roughness;\n	float alpha = pow2( roughness );\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNL = saturate( dot( normal, lightDir ) );\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float dotVH = saturate( dot( viewDir, halfDir ) );\n	vec3 F = F_Schlick( f0, f90, dotVH );\n	#ifdef USE_IRIDESCENCE\n		F = mix( F, material.iridescenceFresnel, material.iridescence );\n	#endif\n	#ifdef USE_ANISOTROPY\n		float dotTL = dot( material.anisotropyT, lightDir );\n		float dotTV = dot( material.anisotropyT, viewDir );\n		float dotTH = dot( material.anisotropyT, halfDir );\n		float dotBL = dot( material.anisotropyB, lightDir );\n		float dotBV = dot( material.anisotropyB, viewDir );\n		float dotBH = dot( material.anisotropyB, halfDir );\n		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n	#else\n		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n		float D = D_GGX( alpha, dotNH );\n	#endif\n	return F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n	const float LUT_SIZE = 64.0;\n	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n	const float LUT_BIAS = 0.5 / LUT_SIZE;\n	float dotNV = saturate( dot( N, V ) );\n	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n	uv = uv * LUT_SCALE + LUT_BIAS;\n	return uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n	float l = length( f );\n	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n	float x = dot( v1, v2 );\n	float y = abs( x );\n	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n	float b = 3.4175940 + ( 4.1616724 + y ) * y;\n	float v = a / b;\n	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n	return cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n	vec3 lightNormal = cross( v1, v2 );\n	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n	vec3 T1, T2;\n	T1 = normalize( V - N * dot( V, N ) );\n	T2 = - cross( N, T1 );\n	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n	vec3 coords[ 4 ];\n	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n	coords[ 0 ] = normalize( coords[ 0 ] );\n	coords[ 1 ] = normalize( coords[ 1 ] );\n	coords[ 2 ] = normalize( coords[ 2 ] );\n	coords[ 3 ] = normalize( coords[ 3 ] );\n	vec3 vectorFormFactor = vec3( 0.0 );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n	return vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n	float alpha = pow2( roughness );\n	float invAlpha = 1.0 / alpha;\n	float cos2h = dotNH * dotNH;\n	float sin2h = max( 1.0 - cos2h, 0.0078125 );\n	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n	vec3 halfDir = normalize( lightDir + viewDir );\n	float dotNL = saturate( dot( normal, lightDir ) );\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float dotNH = saturate( dot( normal, halfDir ) );\n	float D = D_Charlie( sheenRoughness, dotNH );\n	float V = V_Neubelt( dotNV, dotNL );\n	return sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n	float dotNV = saturate( dot( normal, viewDir ) );\n	float r2 = roughness * roughness;\n	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n	return saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n	float dotNV = saturate( dot( normal, viewDir ) );\n	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n	vec4 r = roughness * c0 + c1;\n	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n	return fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n	vec2 fab = DFGApprox( normal, viewDir, roughness );\n	return specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n	vec2 fab = DFGApprox( normal, viewDir, roughness );\n	#ifdef USE_IRIDESCENCE\n		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n	#else\n		vec3 Fr = specularColor;\n	#endif\n	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n	float Ess = fab.x + fab.y;\n	float Ems = 1.0 - Ess;\n	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n	singleScatter += FssEss;\n	multiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n		vec3 normal = geometryNormal;\n		vec3 viewDir = geometryViewDir;\n		vec3 position = geometryPosition;\n		vec3 lightPos = rectAreaLight.position;\n		vec3 halfWidth = rectAreaLight.halfWidth;\n		vec3 halfHeight = rectAreaLight.halfHeight;\n		vec3 lightColor = rectAreaLight.color;\n		float roughness = material.roughness;\n		vec3 rectCoords[ 4 ];\n		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n		vec2 uv = LTC_Uv( normal, viewDir, roughness );\n		vec4 t1 = texture2D( ltc_1, uv );\n		vec4 t2 = texture2D( ltc_2, uv );\n		mat3 mInv = mat3(\n			vec3( t1.x, 0, t1.y ),\n			vec3(    0, 1,    0 ),\n			vec3( t1.z, 0, t1.w )\n		);\n		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n	}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	#ifdef USE_CLEARCOAT\n		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n		vec3 ccIrradiance = dotNLcc * directLight.color;\n		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n	#endif\n	#ifdef USE_SHEEN\n		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n	#endif\n	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n	#ifdef USE_CLEARCOAT\n		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n	#endif\n	#ifdef USE_SHEEN\n		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n	#endif\n	vec3 singleScattering = vec3( 0.0 );\n	vec3 multiScattering = vec3( 0.0 );\n	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n	#ifdef USE_IRIDESCENCE\n		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n	#else\n		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n	#endif\n	vec3 totalScattering = singleScattering + multiScattering;\n	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n	reflectedLight.indirectSpecular += radiance * singleScattering;\n	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct				RE_Direct_Physical\n#define RE_Direct_RectArea		RE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular		RE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n	geometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n	float dotNVi = saturate( dot( normal, geometryViewDir ) );\n	if ( material.iridescenceThickness == 0.0 ) {\n		material.iridescence = 0.0;\n	} else {\n		material.iridescence = saturate( material.iridescence );\n	}\n	if ( material.iridescence > 0.0 ) {\n		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n	}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n	PointLight pointLight;\n	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n	PointLightShadow pointLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		pointLight = pointLights[ i ];\n		getPointLightInfo( pointLight, geometryPosition, directLight );\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n		pointLightShadow = pointLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n	SpotLight spotLight;\n	vec4 spotColor;\n	vec3 spotLightCoord;\n	bool inSpotLightMap;\n	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n	SpotLightShadow spotLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		spotLight = spotLights[ i ];\n		getSpotLightInfo( spotLight, geometryPosition, directLight );\n		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n		#else\n		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n		#endif\n		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n		#endif\n		#undef SPOT_LIGHT_MAP_INDEX\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n		spotLightShadow = spotLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n	DirectionalLight directionalLight;\n	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n	DirectionalLightShadow directionalLightShadow;\n	#endif\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		directionalLight = directionalLights[ i ];\n		getDirectionalLightInfo( directionalLight, directLight );\n		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n		directionalLightShadow = directionalLightShadows[ i ];\n		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n	RectAreaLight rectAreaLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n		rectAreaLight = rectAreaLights[ i ];\n		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n	}\n	#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n	vec3 iblIrradiance = vec3( 0.0 );\n	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n	#if defined( USE_LIGHT_PROBES )\n		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n	#endif\n	#if ( NUM_HEMI_LIGHTS > 0 )\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n		}\n		#pragma unroll_loop_end\n	#endif\n#endif\n#if defined( RE_IndirectSpecular )\n	vec3 radiance = vec3( 0.0 );\n	vec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n	#ifdef USE_LIGHTMAP\n		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n		irradiance += lightMapIrradiance;\n	#endif\n	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n		iblIrradiance += getIBLIrradiance( geometryNormal );\n	#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n	#ifdef USE_ANISOTROPY\n		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n	#else\n		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n	#endif\n	#ifdef USE_CLEARCOAT\n		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n	#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n	uniform float logDepthBufFC;\n	varying float vFragDepth;\n	varying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n	varying float vFragDepth;\n	varying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n	vFragDepth = 1.0 + gl_Position.w;\n	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n	vec4 sampledDiffuseColor = texture2D( map, vMapUv );\n	#ifdef DECODE_VIDEO_TEXTURE\n		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n	\n	#endif\n	diffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n	uniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n	#if defined( USE_POINTS_UV )\n		vec2 uv = vUv;\n	#else\n		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n	#endif\n#endif\n#ifdef USE_MAP\n	diffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n	varying vec2 vUv;\n#else\n	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n		uniform mat3 uvTransform;\n	#endif\n#endif\n#ifdef USE_MAP\n	uniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n	metalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n	uniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n	float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n	}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n	vColor *= morphTargetBaseInfluence;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		#if defined( USE_COLOR_ALPHA )\n			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n		#elif defined( USE_COLOR )\n			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n		#endif\n	}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n	objectNormal *= morphTargetBaseInfluence;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n	}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n	#ifndef USE_INSTANCING_MORPH\n		uniform float morphTargetBaseInfluence;\n		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n	#endif\n	uniform sampler2DArray morphTargetsTexture;\n	uniform ivec2 morphTargetsTextureSize;\n	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n		int y = texelIndex / morphTargetsTextureSize.x;\n		int x = texelIndex - y * morphTargetsTextureSize.x;\n		ivec3 morphUV = ivec3( x, y, morphTargetIndex );\n		return texelFetch( morphTargetsTexture, morphUV, 0 );\n	}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n	transformed *= morphTargetBaseInfluence;\n	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n	}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n	vec3 fdx = dFdx( vViewPosition );\n	vec3 fdy = dFdy( vViewPosition );\n	vec3 normal = normalize( cross( fdx, fdy ) );\n#else\n	vec3 normal = normalize( vNormal );\n	#ifdef DOUBLE_SIDED\n		normal *= faceDirection;\n	#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n	#ifdef USE_TANGENT\n		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n	#else\n		mat3 tbn = getTangentFrame( - vViewPosition, normal,\n		#if defined( USE_NORMALMAP )\n			vNormalMapUv\n		#elif defined( USE_CLEARCOAT_NORMALMAP )\n			vClearcoatNormalMapUv\n		#else\n			vUv\n		#endif\n		);\n	#endif\n	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n		tbn[0] *= faceDirection;\n		tbn[1] *= faceDirection;\n	#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	#ifdef USE_TANGENT\n		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n	#else\n		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n	#endif\n	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n		tbn2[0] *= faceDirection;\n		tbn2[1] *= faceDirection;\n	#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n	#ifdef FLIP_SIDED\n		normal = - normal;\n	#endif\n	#ifdef DOUBLE_SIDED\n		normal = normal * faceDirection;\n	#endif\n	normal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n	mapN.xy *= normalScale;\n	normal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n	#ifdef USE_TANGENT\n		varying vec3 vTangent;\n		varying vec3 vBitangent;\n	#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n	#ifdef USE_TANGENT\n		varying vec3 vTangent;\n		varying vec3 vBitangent;\n	#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n	#ifdef USE_TANGENT\n		vTangent = normalize( transformedTangent );\n		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n	#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n	uniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n		vec3 q0 = dFdx( eye_pos.xyz );\n		vec3 q1 = dFdy( eye_pos.xyz );\n		vec2 st0 = dFdx( uv.st );\n		vec2 st1 = dFdy( uv.st );\n		vec3 N = surf_norm;\n		vec3 q1perp = cross( q1, N );\n		vec3 q0perp = cross( N, q0 );\n		vec3 T = q1perp * st0.x + q0perp * st1.x;\n		vec3 B = q1perp * st0.y + q0perp * st1.y;\n		float det = max( dot( T, T ), dot( B, B ) );\n		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n		return mat3( T * scale, B * scale, N );\n	}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n	vec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n	clearcoatMapN.xy *= clearcoatNormalScale;\n	clearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n	uniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	uniform sampler2D clearcoatNormalMap;\n	uniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	uniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n	uniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	uniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n	return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n	return 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n	if( v <= 0.0 )\n		return vec4( 0., 0., 0., 0. );\n	if( v >= 1.0 )\n		return vec4( 1., 1., 1., 1. );\n	float vuf;\n	float af = modf( v * PackFactors.a, vuf );\n	float bf = modf( vuf * ShiftRight8, vuf );\n	float gf = modf( vuf * ShiftRight8, vuf );\n	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n	if( v <= 0.0 )\n		return vec3( 0., 0., 0. );\n	if( v >= 1.0 )\n		return vec3( 1., 1., 1. );\n	float vuf;\n	float bf = modf( v * PackFactors.b, vuf );\n	float gf = modf( vuf * ShiftRight8, vuf );\n	return vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n	if( v <= 0.0 )\n		return vec2( 0., 0. );\n	if( v >= 1.0 )\n		return vec2( 1., 1. );\n	float vuf;\n	float gf = modf( v * 256., vuf );\n	return vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n	return dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n	return dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n	return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n	return depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n	return ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n	gl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n	mvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n	mvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n	gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n	vec3 dithering( vec3 color ) {\n		float grid_position = rand( gl_FragCoord.xy );\n		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n		return color + dither_shift_RGB;\n	}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n	roughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n	uniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n		struct DirectionalLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n		struct SpotLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n		struct PointLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n			float shadowCameraNear;\n			float shadowCameraFar;\n		};\n		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n	#endif\n	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n	}\n	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n		return unpackRGBATo2Half( texture2D( shadow, uv ) );\n	}\n	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n		float occlusion = 1.0;\n		vec2 distribution = texture2DDistribution( shadow, uv );\n		float hard_shadow = step( compare , distribution.x );\n		if (hard_shadow != 1.0 ) {\n			float distance = compare - distribution.x ;\n			float variance = max( 0.00000, distribution.y * distribution.y );\n			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n		}\n		return occlusion;\n	}\n	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n		float shadow = 1.0;\n		shadowCoord.xyz /= shadowCoord.w;\n		shadowCoord.z += shadowBias;\n		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n		if ( frustumTest ) {\n		#if defined( SHADOWMAP_TYPE_PCF )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx0 = - texelSize.x * shadowRadius;\n			float dy0 = - texelSize.y * shadowRadius;\n			float dx1 = + texelSize.x * shadowRadius;\n			float dy1 = + texelSize.y * shadowRadius;\n			float dx2 = dx0 / 2.0;\n			float dy2 = dy0 / 2.0;\n			float dx3 = dx1 / 2.0;\n			float dy3 = dy1 / 2.0;\n			shadow = (\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n			) * ( 1.0 / 17.0 );\n		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx = texelSize.x;\n			float dy = texelSize.y;\n			vec2 uv = shadowCoord.xy;\n			vec2 f = fract( uv * shadowMapSize + 0.5 );\n			uv -= f * texelSize;\n			shadow = (\n				texture2DCompare( shadowMap, uv, shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n					 f.x ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n					 f.x ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n					 f.y ) +\n				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n					 f.y ) +\n				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n						  f.x ),\n					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n						  f.x ),\n					 f.y )\n			) * ( 1.0 / 9.0 );\n		#elif defined( SHADOWMAP_TYPE_VSM )\n			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n		#else\n			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n		#endif\n		}\n		return mix( 1.0, shadow, shadowIntensity );\n	}\n	vec2 cubeToUV( vec3 v, float texelSizeY ) {\n		vec3 absV = abs( v );\n		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n		absV *= scaleToCube;\n		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n		vec2 planar = v.xy;\n		float almostATexel = 1.5 * texelSizeY;\n		float almostOne = 1.0 - almostATexel;\n		if ( absV.z >= almostOne ) {\n			if ( v.z > 0.0 )\n				planar.x = 4.0 - v.x;\n		} else if ( absV.x >= almostOne ) {\n			float signX = sign( v.x );\n			planar.x = v.z * signX + 2.0 * signX;\n		} else if ( absV.y >= almostOne ) {\n			float signY = sign( v.y );\n			planar.x = v.x + 2.0 * signY + 2.0;\n			planar.y = v.z * signY - 2.0;\n		}\n		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n	}\n	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n		float shadow = 1.0;\n		vec3 lightToPosition = shadowCoord.xyz;\n		\n		float lightToPositionLength = length( lightToPosition );\n		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;\n			vec3 bd3D = normalize( lightToPosition );\n			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n				shadow = (\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n				) * ( 1.0 / 9.0 );\n			#else\n				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n			#endif\n		}\n		return mix( 1.0, shadow, shadowIntensity );\n	}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n		struct DirectionalLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n		struct SpotLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n		};\n		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n		struct PointLightShadow {\n			float shadowIntensity;\n			float shadowBias;\n			float shadowNormalBias;\n			float shadowRadius;\n			vec2 shadowMapSize;\n			float shadowCameraNear;\n			float shadowCameraFar;\n		};\n		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n	#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n	vec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n		}\n		#pragma unroll_loop_end\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n		#pragma unroll_loop_start\n		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n		}\n		#pragma unroll_loop_end\n	#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n		shadowWorldPosition = worldPosition;\n		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n		#endif\n		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n	}\n	#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n	float shadow = 1.0;\n	#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHT_SHADOWS > 0\n	DirectionalLightShadow directionalLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n		directionalLight = directionalLightShadows[ i ];\n		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#if NUM_SPOT_LIGHT_SHADOWS > 0\n	SpotLightShadow spotLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n		spotLight = spotLightShadows[ i ];\n		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#if NUM_POINT_LIGHT_SHADOWS > 0\n	PointLightShadow pointLight;\n	#pragma unroll_loop_start\n	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n		pointLight = pointLightShadows[ i ];\n		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n	}\n	#pragma unroll_loop_end\n	#endif\n	#endif\n	return shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n	uniform highp sampler2D boneTexture;\n	mat4 getBoneMatrix( const in float i ) {\n		int size = textureSize( boneTexture, 0 ).x;\n		int j = int( i ) * 4;\n		int x = j % size;\n		int y = j / size;\n		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n		return mat4( v1, v2, v3, v4 );\n	}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	transformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n	#ifdef USE_TANGENT\n		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n	#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n	specularStrength = texelSpecular.r;\n#else\n	specularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n	uniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n	return saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	return saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	color = max( vec3( 0.0 ), color - 0.004 );\n	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n	return a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n	const mat3 ACESInputMat = mat3(\n		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),\n		vec3( 0.04823, 0.01566, 0.83777 )\n	);\n	const mat3 ACESOutputMat = mat3(\n		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),\n		vec3( -0.07367, -0.00605,  1.07602 )\n	);\n	color *= toneMappingExposure / 0.6;\n	color = ACESInputMat * color;\n	color = RRTAndODTFit( color );\n	color = ACESOutputMat * color;\n	return saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n	vec3( 1.6605, - 0.1246, - 0.0182 ),\n	vec3( - 0.5876, 1.1329, - 0.1006 ),\n	vec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n	vec3( 0.6274, 0.0691, 0.0164 ),\n	vec3( 0.3293, 0.9195, 0.0880 ),\n	vec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n	vec3 x2 = x * x;\n	vec3 x4 = x2 * x2;\n	return + 15.5 * x4 * x2\n		- 40.14 * x4 * x\n		+ 31.96 * x4\n		- 6.868 * x2 * x\n		+ 0.4298 * x2\n		+ 0.1191 * x\n		- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n	const mat3 AgXInsetMatrix = mat3(\n		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n	);\n	const mat3 AgXOutsetMatrix = mat3(\n		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n	);\n	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;\n	color *= toneMappingExposure;\n	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n	color = AgXInsetMatrix * color;\n	color = max( color, 1e-10 );	color = log2( color );\n	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n	color = clamp( color, 0.0, 1.0 );\n	color = agxDefaultContrastApprox( color );\n	color = AgXOutsetMatrix * color;\n	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n	color = clamp( color, 0.0, 1.0 );\n	return color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n	const float StartCompression = 0.8 - 0.04;\n	const float Desaturation = 0.15;\n	color *= toneMappingExposure;\n	float x = min( color.r, min( color.g, color.b ) );\n	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n	color -= offset;\n	float peak = max( color.r, max( color.g, color.b ) );\n	if ( peak < StartCompression ) return color;\n	float d = 1. - StartCompression;\n	float newPeak = 1. - d * d / ( peak + d - StartCompression );\n	color *= newPeak / peak;\n	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n	return mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n	material.transmission = transmission;\n	material.transmissionAlpha = 1.0;\n	material.thickness = thickness;\n	material.attenuationDistance = attenuationDistance;\n	material.attenuationColor = attenuationColor;\n	#ifdef USE_TRANSMISSIONMAP\n		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n	#endif\n	#ifdef USE_THICKNESSMAP\n		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n	#endif\n	vec3 pos = vWorldPosition;\n	vec3 v = normalize( cameraPosition - pos );\n	vec3 n = inverseTransformDirection( normal, viewMatrix );\n	vec4 transmitted = getIBLVolumeRefraction(\n		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n		material.attenuationColor, material.attenuationDistance );\n	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n	uniform float transmission;\n	uniform float thickness;\n	uniform float attenuationDistance;\n	uniform vec3 attenuationColor;\n	#ifdef USE_TRANSMISSIONMAP\n		uniform sampler2D transmissionMap;\n	#endif\n	#ifdef USE_THICKNESSMAP\n		uniform sampler2D thicknessMap;\n	#endif\n	uniform vec2 transmissionSamplerSize;\n	uniform sampler2D transmissionSamplerMap;\n	uniform mat4 modelMatrix;\n	uniform mat4 projectionMatrix;\n	varying vec3 vWorldPosition;\n	float w0( float a ) {\n		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n	}\n	float w1( float a ) {\n		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n	}\n	float w2( float a ){\n		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n	}\n	float w3( float a ) {\n		return ( 1.0 / 6.0 ) * ( a * a * a );\n	}\n	float g0( float a ) {\n		return w0( a ) + w1( a );\n	}\n	float g1( float a ) {\n		return w2( a ) + w3( a );\n	}\n	float h0( float a ) {\n		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n	}\n	float h1( float a ) {\n		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n	}\n	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n		uv = uv * texelSize.zw + 0.5;\n		vec2 iuv = floor( uv );\n		vec2 fuv = fract( uv );\n		float g0x = g0( fuv.x );\n		float g1x = g1( fuv.x );\n		float h0x = h0( fuv.x );\n		float h1x = h1( fuv.x );\n		float h0y = h0( fuv.y );\n		float h1y = h1( fuv.y );\n		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n	}\n	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n		vec2 fLodSizeInv = 1.0 / fLodSize;\n		vec2 cLodSizeInv = 1.0 / cLodSize;\n		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n		return mix( fSample, cSample, fract( lod ) );\n	}\n	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n		vec3 modelScale;\n		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n		return normalize( refractionVector ) * thickness * modelScale;\n	}\n	float applyIorToRoughness( const in float roughness, const in float ior ) {\n		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n	}\n	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n	}\n	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n		if ( isinf( attenuationDistance ) ) {\n			return vec3( 1.0 );\n		} else {\n			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;\n		}\n	}\n	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n		const in vec3 attenuationColor, const in float attenuationDistance ) {\n		vec4 transmittedLight;\n		vec3 transmittance;\n		#ifdef USE_DISPERSION\n			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n			for ( int i = 0; i < 3; i ++ ) {\n				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n				vec3 refractedRayExit = position + transmissionRay;\n		\n				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n				vec2 refractionCoords = ndcPos.xy / ndcPos.w;\n				refractionCoords += 1.0;\n				refractionCoords /= 2.0;\n		\n				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n				transmittedLight[ i ] = transmissionSample[ i ];\n				transmittedLight.a += transmissionSample.a;\n				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n			}\n			transmittedLight.a /= 3.0;\n		\n		#else\n		\n			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n			vec3 refractedRayExit = position + transmissionRay;\n			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n			vec2 refractionCoords = ndcPos.xy / ndcPos.w;\n			refractionCoords += 1.0;\n			refractionCoords /= 2.0;\n			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n		\n		#endif\n		vec3 attenuatedColor = transmittance * transmittedLight.rgb;\n		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n	}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n	varying vec2 vUv;\n#endif\n#ifdef USE_MAP\n	varying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n	varying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n	varying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n	varying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n	varying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n	varying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n	varying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n	varying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n	varying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n	varying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n	varying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	varying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	varying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n	varying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	varying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n	varying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n	varying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n	varying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n	varying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n	varying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n	uniform mat3 transmissionMapTransform;\n	varying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n	uniform mat3 thicknessMapTransform;\n	varying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n	varying vec2 vUv;\n#endif\n#ifdef USE_MAP\n	uniform mat3 mapTransform;\n	varying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n	uniform mat3 alphaMapTransform;\n	varying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n	uniform mat3 lightMapTransform;\n	varying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n	uniform mat3 aoMapTransform;\n	varying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n	uniform mat3 bumpMapTransform;\n	varying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n	uniform mat3 normalMapTransform;\n	varying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n	uniform mat3 displacementMapTransform;\n	varying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n	uniform mat3 emissiveMapTransform;\n	varying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n	uniform mat3 metalnessMapTransform;\n	varying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n	uniform mat3 roughnessMapTransform;\n	varying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n	uniform mat3 anisotropyMapTransform;\n	varying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n	uniform mat3 clearcoatMapTransform;\n	varying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	uniform mat3 clearcoatNormalMapTransform;\n	varying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	uniform mat3 clearcoatRoughnessMapTransform;\n	varying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n	uniform mat3 sheenColorMapTransform;\n	varying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n	uniform mat3 sheenRoughnessMapTransform;\n	varying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n	uniform mat3 iridescenceMapTransform;\n	varying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	uniform mat3 iridescenceThicknessMapTransform;\n	varying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n	uniform mat3 specularMapTransform;\n	varying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n	uniform mat3 specularColorMapTransform;\n	varying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n	uniform mat3 specularIntensityMapTransform;\n	varying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n	uniform mat3 transmissionMapTransform;\n	varying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n	uniform mat3 thicknessMapTransform;\n	varying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n	vUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n	vec4 worldPosition = vec4( transformed, 1.0 );\n	#ifdef USE_BATCHING\n		worldPosition = batchingMatrix * worldPosition;\n	#endif\n	#ifdef USE_INSTANCING\n		worldPosition = instanceMatrix * worldPosition;\n	#endif\n	worldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n	gl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n	vec4 texColor = texture2D( t2D, vUv );\n	#ifdef DECODE_VIDEO_TEXTURE\n		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n	#endif\n	texColor.rgb *= backgroundIntensity;\n	gl_FragColor = texColor;\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n	gl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n	uniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n	uniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n	#elif defined( ENVMAP_TYPE_CUBE_UV )\n		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n	#else\n		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n	#endif\n	texColor.rgb *= backgroundIntensity;\n	gl_FragColor = texColor;\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n	gl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n	gl_FragColor = texColor;\n	gl_FragColor.a *= opacity;\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n	#include <uv_vertex>\n	#include <batching_vertex>\n	#include <skinbase_vertex>\n	#include <morphinstance_vertex>\n	#ifdef USE_DISPLACEMENTMAP\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n	uniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n	vec4 diffuseColor = vec4( 1.0 );\n	#include <clipping_planes_fragment>\n	#if DEPTH_PACKING == 3200\n		diffuseColor.a = opacity;\n	#endif\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <logdepthbuf_fragment>\n	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n	#if DEPTH_PACKING == 3200\n		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n	#elif DEPTH_PACKING == 3201\n		gl_FragColor = packDepthToRGBA( fragCoordZ );\n	#elif DEPTH_PACKING == 3202\n		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n	#elif DEPTH_PACKING == 3203\n		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n	#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <batching_vertex>\n	#include <skinbase_vertex>\n	#include <morphinstance_vertex>\n	#ifdef USE_DISPLACEMENTMAP\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <worldpos_vertex>\n	#include <clipping_planes_vertex>\n	vWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n	vec4 diffuseColor = vec4( 1.0 );\n	#include <clipping_planes_fragment>\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	float dist = length( vWorldPosition - referencePosition );\n	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n	dist = saturate( dist );\n	gl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vWorldDirection = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n	vec3 direction = normalize( vWorldDirection );\n	vec2 sampleUV = equirectUv( direction );\n	gl_FragColor = texture2D( tEquirect, sampleUV );\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	vLineDistance = scale * lineDistance;\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	if ( mod( vLineDistance, totalSize ) > dashSize ) {\n		discard;\n	}\n	vec3 outgoingLight = vec3( 0.0 );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinbase_vertex>\n		#include <skinnormal_vertex>\n		#include <defaultnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <specularmap_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	#ifdef USE_LIGHTMAP\n		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n	#else\n		reflectedLight.indirectDiffuse += vec3( 1.0 );\n	#endif\n	#include <aomap_fragment>\n	reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n	vec3 outgoingLight = reflectedLight.indirectDiffuse;\n	#include <envmap_fragment>\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <specularmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_lambert_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n	vViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	vec3 viewDir = normalize( vViewPosition );\n	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n	vec3 y = cross( viewDir, x );\n	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n	#ifdef USE_MATCAP\n		vec4 matcapColor = texture2D( matcap, uv );\n	#else\n		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n	#endif\n	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n	varying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphinstance_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n	vViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n	varying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n	#include <clipping_planes_fragment>\n	#include <logdepthbuf_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n	#ifdef OPAQUE\n		gl_FragColor.a = 1.0;\n	#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphinstance_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <specularmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_phong_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n	varying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n	vWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n	#define IOR\n	#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n	uniform float ior;\n#endif\n#ifdef USE_SPECULAR\n	uniform float specularIntensity;\n	uniform vec3 specularColor;\n	#ifdef USE_SPECULAR_COLORMAP\n		uniform sampler2D specularColorMap;\n	#endif\n	#ifdef USE_SPECULAR_INTENSITYMAP\n		uniform sampler2D specularIntensityMap;\n	#endif\n#endif\n#ifdef USE_CLEARCOAT\n	uniform float clearcoat;\n	uniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n	uniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n	uniform float iridescence;\n	uniform float iridescenceIOR;\n	uniform float iridescenceThicknessMinimum;\n	uniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n	uniform vec3 sheenColor;\n	uniform float sheenRoughness;\n	#ifdef USE_SHEEN_COLORMAP\n		uniform sampler2D sheenColorMap;\n	#endif\n	#ifdef USE_SHEEN_ROUGHNESSMAP\n		uniform sampler2D sheenRoughnessMap;\n	#endif\n#endif\n#ifdef USE_ANISOTROPY\n	uniform vec2 anisotropyVector;\n	#ifdef USE_ANISOTROPYMAP\n		uniform sampler2D anisotropyMap;\n	#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <roughnessmap_fragment>\n	#include <metalnessmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <clearcoat_normal_fragment_begin>\n	#include <clearcoat_normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_physical_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n	#include <transmission_fragment>\n	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n	#ifdef USE_SHEEN\n		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n	#endif\n	#ifdef USE_CLEARCOAT\n		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n	#endif\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <normal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_toon_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n	varying vec2 vUv;\n	uniform mat3 uvTransform;\n#endif\nvoid main() {\n	#ifdef USE_POINTS_UV\n		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n	#endif\n	#include <color_vertex>\n	#include <morphinstance_vertex>\n	#include <morphcolor_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <project_vertex>\n	gl_PointSize = size;\n	#ifdef USE_SIZEATTENUATION\n		bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n	#endif\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	vec3 outgoingLight = vec3( 0.0 );\n	#include <logdepthbuf_fragment>\n	#include <map_particle_fragment>\n	#include <color_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n	#include <batching_vertex>\n	#include <beginnormal_vertex>\n	#include <morphinstance_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n	#include <logdepthbuf_fragment>\n	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n	vec2 scale;\n	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n	#ifndef USE_SIZEATTENUATION\n		bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n		if ( isPerspective ) scale *= - mvPosition.z;\n	#endif\n	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n	vec2 rotatedPosition;\n	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n	mvPosition.xy += rotatedPosition;\n	gl_Position = projectionMatrix * mvPosition;\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <clipping_planes_fragment>\n	vec3 outgoingLight = vec3( 0.0 );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <alphahash_fragment>\n	outgoingLight = diffuseColor.rgb;\n	#include <opaque_fragment>\n	#include <tonemapping_fragment>\n	#include <colorspace_fragment>\n	#include <fog_fragment>\n}"},t9={common:{diffuse:{value:new te(0xffffff)},opacity:{value:1},map:{value:null},mapTransform:{value:new S},alphaMap:{value:null},alphaMapTransform:{value:new S},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new S}},envmap:{envMap:{value:null},envMapRotation:{value:new S},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new S}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new S}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new S},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new S},normalScale:{value:new M(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new S},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new S}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new S}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new S}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new te(0xffffff)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new te(0xffffff)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new S},alphaTest:{value:0},uvTransform:{value:new S}},sprite:{diffuse:{value:new te(0xffffff)},opacity:{value:1},center:{value:new M(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new S},alphaMap:{value:null},alphaMapTransform:{value:new S},alphaTest:{value:0}}},t7={basic:{uniforms:tz([t9.common,t9.specularmap,t9.envmap,t9.aomap,t9.lightmap,t9.fog]),vertexShader:t8.meshbasic_vert,fragmentShader:t8.meshbasic_frag},lambert:{uniforms:tz([t9.common,t9.specularmap,t9.envmap,t9.aomap,t9.lightmap,t9.emissivemap,t9.bumpmap,t9.normalmap,t9.displacementmap,t9.fog,t9.lights,{emissive:{value:new te(0)}}]),vertexShader:t8.meshlambert_vert,fragmentShader:t8.meshlambert_frag},phong:{uniforms:tz([t9.common,t9.specularmap,t9.envmap,t9.aomap,t9.lightmap,t9.emissivemap,t9.bumpmap,t9.normalmap,t9.displacementmap,t9.fog,t9.lights,{emissive:{value:new te(0)},specular:{value:new te(1118481)},shininess:{value:30}}]),vertexShader:t8.meshphong_vert,fragmentShader:t8.meshphong_frag},standard:{uniforms:tz([t9.common,t9.envmap,t9.aomap,t9.lightmap,t9.emissivemap,t9.bumpmap,t9.normalmap,t9.displacementmap,t9.roughnessmap,t9.metalnessmap,t9.fog,t9.lights,{emissive:{value:new te(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:t8.meshphysical_vert,fragmentShader:t8.meshphysical_frag},toon:{uniforms:tz([t9.common,t9.aomap,t9.lightmap,t9.emissivemap,t9.bumpmap,t9.normalmap,t9.displacementmap,t9.gradientmap,t9.fog,t9.lights,{emissive:{value:new te(0)}}]),vertexShader:t8.meshtoon_vert,fragmentShader:t8.meshtoon_frag},matcap:{uniforms:tz([t9.common,t9.bumpmap,t9.normalmap,t9.displacementmap,t9.fog,{matcap:{value:null}}]),vertexShader:t8.meshmatcap_vert,fragmentShader:t8.meshmatcap_frag},points:{uniforms:tz([t9.points,t9.fog]),vertexShader:t8.points_vert,fragmentShader:t8.points_frag},dashed:{uniforms:tz([t9.common,t9.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:t8.linedashed_vert,fragmentShader:t8.linedashed_frag},depth:{uniforms:tz([t9.common,t9.displacementmap]),vertexShader:t8.depth_vert,fragmentShader:t8.depth_frag},normal:{uniforms:tz([t9.common,t9.bumpmap,t9.normalmap,t9.displacementmap,{opacity:{value:1}}]),vertexShader:t8.meshnormal_vert,fragmentShader:t8.meshnormal_frag},sprite:{uniforms:tz([t9.sprite,t9.fog]),vertexShader:t8.sprite_vert,fragmentShader:t8.sprite_frag},background:{uniforms:{uvTransform:{value:new S},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:t8.background_vert,fragmentShader:t8.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new S}},vertexShader:t8.backgroundCube_vert,fragmentShader:t8.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:t8.cube_vert,fragmentShader:t8.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:t8.equirect_vert,fragmentShader:t8.equirect_frag},distanceRGBA:{uniforms:tz([t9.common,t9.displacementmap,{referencePosition:{value:new j},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:t8.distanceRGBA_vert,fragmentShader:t8.distanceRGBA_frag},shadow:{uniforms:tz([t9.lights,t9.fog,{color:{value:new te(0)},opacity:{value:1}}]),vertexShader:t8.shadow_vert,fragmentShader:t8.shadow_frag}};t7.physical={uniforms:tz([t7.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new S},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new S},clearcoatNormalScale:{value:new M(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new S},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new S},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new S},sheen:{value:0},sheenColor:{value:new te(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new S},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new S},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new S},transmissionSamplerSize:{value:new M},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new S},attenuationDistance:{value:0},attenuationColor:{value:new te(0)},specularColor:{value:new te(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new S},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new S},anisotropyVector:{value:new M},anisotropyMap:{value:null},anisotropyMapTransform:{value:new S}}]),vertexShader:t8.meshphysical_vert,fragmentShader:t8.meshphysical_frag};let ie={r:0,b:0,g:0},it=new eL,ii=new eM;function ir(e,t,i,n,r,s,a){let o,l,h=new te(0),c=+(!0!==s),d=null,p=0,f=null;function m(e){let n=!0===e.isScene?e.background:null;return n&&n.isTexture&&(n=(e.backgroundBlurriness>0?i:t).get(n)),n}function g(t,i){t.getRGB(ie,tV(e)),n.buffers.color.setClear(ie.r,ie.g,ie.b,i,a)}return{getClearColor:function(){return h},setClearColor:function(e,t=1){h.set(e),g(h,c=t)},getClearAlpha:function(){return c},setClearAlpha:function(e){g(h,c=e)},render:function(t){let i=!1,r=m(t);null===r?g(h,c):r&&r.isColor&&(g(r,1),i=!0);let s=e.xr.getEnvironmentBlendMode();"additive"===s?n.buffers.color.setClear(0,0,0,1,a):"alpha-blend"===s&&n.buffers.color.setClear(0,0,0,0,a),(e.autoClear||i)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil))},addToRenderList:function(t,i){let n=m(i);n&&(n.isCubeTexture||306===n.mapping)?(void 0===l&&((l=new tO(new tB(1,1,1),new tH({name:"BackgroundCubeMaterial",uniforms:tk(t7.backgroundCube.uniforms),vertexShader:t7.backgroundCube.vertexShader,fragmentShader:t7.backgroundCube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(e,t,i){this.matrixWorld.copyPosition(i.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(l)),it.copy(i.backgroundRotation),it.x*=-1,it.y*=-1,it.z*=-1,n.isCubeTexture&&!1===n.isRenderTargetTexture&&(it.y*=-1,it.z*=-1),l.material.uniforms.envMap.value=n,l.material.uniforms.flipEnvMap.value=n.isCubeTexture&&!1===n.isRenderTargetTexture?-1:1,l.material.uniforms.backgroundBlurriness.value=i.backgroundBlurriness,l.material.uniforms.backgroundIntensity.value=i.backgroundIntensity,l.material.uniforms.backgroundRotation.value.setFromMatrix4(ii.makeRotationFromEuler(it)),l.material.toneMapped=D.getTransfer(n.colorSpace)!==u,(d!==n||p!==n.version||f!==e.toneMapping)&&(l.material.needsUpdate=!0,d=n,p=n.version,f=e.toneMapping),l.layers.enableAll(),t.unshift(l,l.geometry,l.material,0,0,null)):n&&n.isTexture&&(void 0===o&&((o=new tO(new t6(2,2),new tH({name:"BackgroundMaterial",uniforms:tk(t7.background.uniforms),vertexShader:t7.background.vertexShader,fragmentShader:t7.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(o)),o.material.uniforms.t2D.value=n,o.material.uniforms.backgroundIntensity.value=i.backgroundIntensity,o.material.toneMapped=D.getTransfer(n.colorSpace)!==u,!0===n.matrixAutoUpdate&&n.updateMatrix(),o.material.uniforms.uvTransform.value.copy(n.matrix),(d!==n||p!==n.version||f!==e.toneMapping)&&(o.material.needsUpdate=!0,d=n,p=n.version,f=e.toneMapping),o.layers.enableAll(),t.unshift(o,o.geometry,o.material,0,0,null))}}}function is(e,t){let i=e.getParameter(e.MAX_VERTEX_ATTRIBS),n={},r=h(null),s=r,a=!1;function o(t){return e.bindVertexArray(t)}function l(t){return e.deleteVertexArray(t)}function h(e){let t=[],n=[],r=[];for(let e=0;e<i;e++)t[e]=0,n[e]=0,r[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function u(){let e=s.newAttributes;for(let t=0,i=e.length;t<i;t++)e[t]=0}function c(e){d(e,0)}function d(t,i){let n=s.newAttributes,r=s.enabledAttributes,a=s.attributeDivisors;n[t]=1,0===r[t]&&(e.enableVertexAttribArray(t),r[t]=1),a[t]!==i&&(e.vertexAttribDivisor(t,i),a[t]=i)}function p(){let t=s.newAttributes,i=s.enabledAttributes;for(let n=0,r=i.length;n<r;n++)i[n]!==t[n]&&(e.disableVertexAttribArray(n),i[n]=0)}function f(t,i,n,r,s,a,o){!0===o?e.vertexAttribIPointer(t,i,n,s,a):e.vertexAttribPointer(t,i,n,r,s,a)}function m(){g(),a=!0,s!==r&&o((s=r).object)}function g(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:function(i,r,l,m,g){var v,_;let x,y,M,S,b=!1,E=(v=m,_=l,x=!0===r.wireframe,void 0===(y=n[v.id])&&(y={},n[v.id]=y),void 0===(M=y[_.id])&&(M={},y[_.id]=M),void 0===(S=M[x])&&(S=h(e.createVertexArray()),M[x]=S),S);s!==E&&o((s=E).object),(b=function(e,t,i,n){let r=s.attributes,a=t.attributes,o=0,l=i.getAttributes();for(let t in l)if(l[t].location>=0){let i=r[t],n=a[t];if(void 0===n&&("instanceMatrix"===t&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(n=e.instanceColor)),void 0===i||i.attribute!==n||n&&i.data!==n.data)return!0;o++}return s.attributesNum!==o||s.index!==n}(i,m,l,g))&&function(e,t,i,n){let r={},a=t.attributes,o=0,l=i.getAttributes();for(let t in l)if(l[t].location>=0){let i=a[t];void 0===i&&("instanceMatrix"===t&&e.instanceMatrix&&(i=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(i=e.instanceColor));let n={};n.attribute=i,i&&i.data&&(n.data=i.data),r[t]=n,o++}s.attributes=r,s.attributesNum=o,s.index=n}(i,m,l,g),null!==g&&t.update(g,e.ELEMENT_ARRAY_BUFFER),(b||a)&&(a=!1,function(i,n,r,s){u();let a=s.attributes,o=r.getAttributes(),l=n.defaultAttributeValues;for(let n in o){let r=o[n];if(r.location>=0){let o=a[n];if(void 0===o&&("instanceMatrix"===n&&i.instanceMatrix&&(o=i.instanceMatrix),"instanceColor"===n&&i.instanceColor&&(o=i.instanceColor)),void 0!==o){let n=o.normalized,a=o.itemSize,l=t.get(o);if(void 0===l)continue;let h=l.buffer,u=l.type,p=l.bytesPerElement,m=u===e.INT||u===e.UNSIGNED_INT||1013===o.gpuType;if(o.isInterleavedBufferAttribute){let t=o.data,l=t.stride,g=o.offset;if(t.isInstancedInterleavedBuffer){for(let e=0;e<r.locationSize;e++)d(r.location+e,t.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=t.meshPerAttribute*t.count)}else for(let e=0;e<r.locationSize;e++)c(r.location+e);e.bindBuffer(e.ARRAY_BUFFER,h);for(let e=0;e<r.locationSize;e++)f(r.location+e,a/r.locationSize,u,n,l*p,(g+a/r.locationSize*e)*p,m)}else{if(o.isInstancedBufferAttribute){for(let e=0;e<r.locationSize;e++)d(r.location+e,o.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=o.meshPerAttribute*o.count)}else for(let e=0;e<r.locationSize;e++)c(r.location+e);e.bindBuffer(e.ARRAY_BUFFER,h);for(let e=0;e<r.locationSize;e++)f(r.location+e,a/r.locationSize,u,n,a*p,a/r.locationSize*e*p,m)}}else if(void 0!==l){let t=l[n];if(void 0!==t)switch(t.length){case 2:e.vertexAttrib2fv(r.location,t);break;case 3:e.vertexAttrib3fv(r.location,t);break;case 4:e.vertexAttrib4fv(r.location,t);break;default:e.vertexAttrib1fv(r.location,t)}}}}p()}(i,r,l,m),null!==g&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.get(g).buffer))},reset:m,resetDefaultState:g,dispose:function(){for(let e in m(),n){let t=n[e];for(let e in t){let i=t[e];for(let e in i)l(i[e].object),delete i[e];delete t[e]}delete n[e]}},releaseStatesOfGeometry:function(e){if(void 0===n[e.id])return;let t=n[e.id];for(let e in t){let i=t[e];for(let e in i)l(i[e].object),delete i[e];delete t[e]}delete n[e.id]},releaseStatesOfProgram:function(e){for(let t in n){let i=n[t];if(void 0===i[e.id])continue;let r=i[e.id];for(let e in r)l(r[e].object),delete r[e];delete i[e.id]}},initAttributes:u,enableAttribute:c,disableUnusedAttributes:p}}function ia(e,t,i){let n;function r(t,r,s){0!==s&&(e.drawArraysInstanced(n,t,r,s),i.update(r,n,s))}this.setMode=function(e){n=e},this.render=function(t,r){e.drawArrays(n,t,r),i.update(r,n,1)},this.renderInstances=r,this.renderMultiDraw=function(e,r,s){if(0===s)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,e,0,r,0,s);let a=0;for(let e=0;e<s;e++)a+=r[e];i.update(a,n,1)},this.renderMultiDrawInstances=function(e,s,a,o){if(0===a)return;let l=t.get("WEBGL_multi_draw");if(null===l)for(let t=0;t<e.length;t++)r(e[t],s[t],o[t]);else{l.multiDrawArraysInstancedWEBGL(n,e,0,s,0,o,0,a);let t=0;for(let e=0;e<a;e++)t+=s[e];for(let e=0;e<o.length;e++)i.update(t,n,o[e])}}}function io(e,t,i,n){let r;function s(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let a=void 0!==i.precision?i.precision:"highp",o=s(a);o!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",o,"instead."),a=o);let l=!0===i.logarithmicDepthBuffer,h=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),u=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){let i=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:s,textureFormatReadable:function(t){return 1023===t||n.convert(t)===e.getParameter(e.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(i){let r=1016===i&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return 1009===i||n.convert(i)===e.getParameter(e.IMPLEMENTATION_COLOR_READ_TYPE)||1015===i||!!r},precision:a,logarithmicDepthBuffer:l,maxTextures:h,maxVertexTextures:u,maxTextureSize:e.getParameter(e.MAX_TEXTURE_SIZE),maxCubemapSize:e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:e.getParameter(e.MAX_VERTEX_ATTRIBS),maxVertexUniforms:e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:e.getParameter(e.MAX_VARYING_VECTORS),maxFragmentUniforms:e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:u>0,maxSamples:e.getParameter(e.MAX_SAMPLES)}}function il(e){let t=this,i=null,n=0,r=!1,s=!1,a=new t0,o=new S,l={value:null,needsUpdate:!1};function h(e,i,n,r){let s=null!==e?e.length:0,h=null;if(0!==s){if(h=l.value,!0!==r||null===h){let t=n+4*s,r=i.matrixWorldInverse;o.getNormalMatrix(r),(null===h||h.length<t)&&(h=new Float32Array(t));for(let t=0,i=n;t!==s;++t,i+=4)a.copy(e[t]).applyMatrix4(r,o),a.normal.toArray(h,i),h[i+3]=a.constant}l.value=h,l.needsUpdate=!0}return t.numPlanes=s,t.numIntersection=0,h}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){let i=0!==e.length||t||0!==n||r;return r=t,n=e.length,i},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(e,t){i=h(e,t,0)},this.setState=function(a,o,u){let c=a.clippingPlanes,d=a.clipIntersection,p=a.clipShadows,f=e.get(a);if(r&&null!==c&&0!==c.length&&(!s||p)){let e=s?0:n,t=4*e,r=f.clippingState||null;l.value=r,r=h(c,o,t,u);for(let e=0;e!==t;++e)r[e]=i[e];f.clippingState=r,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=e}else s?h(null):(l.value!==i&&(l.value=i,l.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0)}}function ih(e){let t=new WeakMap;function i(e,t){return 303===t?e.mapping=301:304===t&&(e.mapping=302),e}function n(e){let i=e.target;i.removeEventListener("dispose",n);let r=t.get(i);void 0!==r&&(t.delete(i),r.dispose())}return{get:function(r){if(r&&r.isTexture){let s=r.mapping;if(303===s||304===s)if(t.has(r))return i(t.get(r).texture,r.mapping);else{let s=r.image;if(!s||!(s.height>0))return null;{let a=new t$(s.height);return a.fromEquirectangularTexture(e,r),t.set(r,a),r.addEventListener("dispose",n),i(a.texture,r.mapping)}}}return r},dispose:function(){t=new WeakMap}}}class iu extends tG{constructor(e=-1,t=1,i=1,n=-1,r=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=n,this.near=r,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,i,n,r,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2,r=i-e,s=i+e,a=n+t,o=n-t;if(null!==this.view&&this.view.enabled){let e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=e*this.view.offsetX,s=r+e*this.view.width,a-=t*this.view.offsetY,o=a-t*this.view.height}this.projectionMatrix.makeOrthographic(r,s,a,o,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}let ic=[.125,.215,.35,.446,.526,.582],id=new iu,ip=new te,im=null,ig=0,iv=0,i_=!1,ix=(1+Math.sqrt(5))/2,iy=1/ix,iM=[new j(-ix,iy,0),new j(ix,iy,0),new j(-iy,0,ix),new j(iy,0,ix),new j(0,ix,-iy),new j(0,ix,iy),new j(-1,1,-1),new j(1,1,-1),new j(-1,1,1),new j(1,1,1)];class iS{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,n=100){im=this._renderer.getRenderTarget(),ig=this._renderer.getActiveCubeFace(),iv=this._renderer.getActiveMipmapLevel(),i_=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);let r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,i,n,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=iw(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=iT(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(im,ig,iv),this._renderer.xr.enabled=i_,e.scissorTest=!1,iE(e,0,0,e.width,e.height)}_fromTexture(e,t){301===e.mapping||302===e.mapping?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),im=this._renderer.getRenderTarget(),ig=this._renderer.getActiveCubeFace(),iv=this._renderer.getActiveMipmapLevel(),i_=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:1006,minFilter:1006,generateMipmaps:!1,type:1016,format:1023,colorSpace:a,depthBuffer:!1},n=ib(e,t,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){var r;null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=ib(e,t,i);let{_lodMax:n}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){let t=[],i=[],n=[],r=e,s=e-4+1+ic.length;for(let a=0;a<s;a++){let s=Math.pow(2,r);i.push(s);let o=1/s;a>e-4?o=ic[a-e+4-1]:0===a&&(o=0),n.push(o);let l=1/(s-2),h=-l,u=1+l,c=[h,h,u,h,u,u,h,h,u,u,h,u],d=new Float32Array(108),p=new Float32Array(72),f=new Float32Array(36);for(let e=0;e<6;e++){let t=e%3*2/3-1,i=e>2?0:-1,n=[t,i,0,t+2/3,i,0,t+2/3,i+1,0,t,i,0,t+2/3,i+1,0,t,i+1,0];d.set(n,18*e),p.set(c,12*e);let r=[e,e,e,e,e,e];f.set(r,6*e)}let m=new t_;m.setAttribute("position",new to(d,3)),m.setAttribute("uv",new to(p,2)),m.setAttribute("faceIndex",new to(f,1)),t.push(m),r>4&&r--}return{lodPlanes:t,sizeLods:i,sigmas:n}}(n)),this._blurMaterial=(r=n,new tH({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:new Float32Array(20)},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:new j(0,1,0)}},vertexShader:iA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:0,depthTest:!1,depthWrite:!1}))}return n}_compileMaterial(e){let t=new tO(this._lodPlanes[0],e);this._renderer.compile(t,id)}_sceneToCubeUV(e,t,i,n){let r=new tY(90,1,t,i),s=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],o=this._renderer,l=o.autoClear,h=o.toneMapping;o.getClearColor(ip),o.toneMapping=0,o.autoClear=!1;let u=new tr({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),c=new tO(new tB,u),d=!1,p=e.background;p?p.isColor&&(u.color.copy(p),e.background=null,d=!0):(u.color.copy(ip),d=!0);for(let t=0;t<6;t++){let i=t%3;0===i?(r.up.set(0,s[t],0),r.lookAt(a[t],0,0)):1===i?(r.up.set(0,0,s[t]),r.lookAt(0,a[t],0)):(r.up.set(0,s[t],0),r.lookAt(0,0,a[t]));let l=this._cubeSize;iE(n,i*l,t>2?l:0,l,l),o.setRenderTarget(n),d&&o.render(c,r),o.render(e,r)}c.geometry.dispose(),c.material.dispose(),o.toneMapping=h,o.autoClear=l,e.background=p}_textureToCubeUV(e,t){let i=this._renderer,n=301===e.mapping||302===e.mapping;n?(null===this._cubemapMaterial&&(this._cubemapMaterial=iw()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=iT());let r=n?this._cubemapMaterial:this._equirectMaterial,s=new tO(this._lodPlanes[0],r);r.uniforms.envMap.value=e;let a=this._cubeSize;iE(t,0,0,3*a,2*a),i.setRenderTarget(t),i.render(s,id)}_applyPMREM(e){let t=this._renderer,i=t.autoClear;t.autoClear=!1;let n=this._lodPlanes.length;for(let t=1;t<n;t++){let i=Math.sqrt(this._sigmas[t]*this._sigmas[t]-this._sigmas[t-1]*this._sigmas[t-1]),r=iM[(n-t-1)%iM.length];this._blur(e,t-1,t,i,r)}t.autoClear=i}_blur(e,t,i,n,r){let s=this._pingPongRenderTarget;this._halfBlur(e,s,t,i,n,"latitudinal",r),this._halfBlur(s,e,i,i,n,"longitudinal",r)}_halfBlur(e,t,i,n,r,s,a){let o=this._renderer,l=this._blurMaterial;"latitudinal"!==s&&"longitudinal"!==s&&console.error("blur direction must be either latitudinal or longitudinal!");let h=new tO(this._lodPlanes[n],l),u=l.uniforms,c=this._sizeLods[i]-1,d=isFinite(r)?Math.PI/(2*c):2*Math.PI/39,p=r/d,f=isFinite(r)?1+Math.floor(3*p):20;f>20&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${f} samples when the maximum is set to 20`);let m=[],g=0;for(let e=0;e<20;++e){let t=e/p,i=Math.exp(-t*t/2);m.push(i),0===e?g+=i:e<f&&(g+=2*i)}for(let e=0;e<m.length;e++)m[e]=m[e]/g;u.envMap.value=e.texture,u.samples.value=f,u.weights.value=m,u.latitudinal.value="latitudinal"===s,a&&(u.poleAxis.value=a);let{_lodMax:v}=this;u.dTheta.value=d,u.mipInt.value=v-i;let _=this._sizeLods[n],x=4*(this._cubeSize-_);iE(t,3*_*(n>v-4?n-v+4:0),x,3*_,2*_),o.setRenderTarget(t),o.render(h,id)}}function ib(e,t,i){let n=new G(e,t,i);return n.texture.mapping=306,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function iE(e,t,i,n,r){e.viewport.set(t,i,n,r),e.scissor.set(t,i,n,r)}function iT(){return new tH({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:iA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:0,depthTest:!1,depthWrite:!1})}function iw(){return new tH({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:iA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:0,depthTest:!1,depthWrite:!1})}function iA(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function iC(e){let t=new WeakMap,i=null;function n(e){let i=e.target;i.removeEventListener("dispose",n);let r=t.get(i);void 0!==r&&(t.delete(i),r.dispose())}return{get:function(r){if(r&&r.isTexture){let s=r.mapping,a=303===s||304===s,o=301===s||302===s;if(a||o){let s=t.get(r),l=void 0!==s?s.texture.pmremVersion:0;if(r.isRenderTargetTexture&&r.pmremVersion!==l)return null===i&&(i=new iS(e)),(s=a?i.fromEquirectangular(r,s):i.fromCubemap(r,s)).texture.pmremVersion=r.pmremVersion,t.set(r,s),s.texture;{if(void 0!==s)return s.texture;let l=r.image;return a&&l&&l.height>0||o&&l&&function(e){let t=0;for(let i=0;i<6;i++)void 0!==e[i]&&t++;return 6===t}(l)?(null===i&&(i=new iS(e)),(s=a?i.fromEquirectangular(r):i.fromCubemap(r)).texture.pmremVersion=r.pmremVersion,t.set(r,s),r.addEventListener("dispose",n),s.texture):null}}}return r},dispose:function(){t=new WeakMap,null!==i&&(i.dispose(),i=null)}}}function iP(e){let t={};function i(i){let n;if(void 0!==t[i])return t[i];switch(i){case"WEBGL_depth_texture":n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=e.getExtension(i)}return t[i]=n,n}return{has:function(e){return null!==i(e)},init:function(){i("EXT_color_buffer_float"),i("WEBGL_clip_cull_distance"),i("OES_texture_float_linear"),i("EXT_color_buffer_half_float"),i("WEBGL_multisampled_render_to_texture"),i("WEBGL_render_shared_exponent")},get:function(e){let t=i(e);return null===t&&A("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function iR(e,t,i,n){let r={},s=new WeakMap;function a(e){let o=e.target;for(let e in null!==o.index&&t.remove(o.index),o.attributes)t.remove(o.attributes[e]);for(let e in o.morphAttributes){let i=o.morphAttributes[e];for(let e=0,n=i.length;e<n;e++)t.remove(i[e])}o.removeEventListener("dispose",a),delete r[o.id];let l=s.get(o);l&&(t.remove(l),s.delete(o)),n.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,i.memory.geometries--}function o(e){let i=[],n=e.index,r=e.attributes.position,a=0;if(null!==n){let e=n.array;a=n.version;for(let t=0,n=e.length;t<n;t+=3){let n=e[t+0],r=e[t+1],s=e[t+2];i.push(n,r,r,s,s,n)}}else{if(void 0===r)return;let e=r.array;a=r.version;for(let t=0,n=e.length/3-1;t<n;t+=3){let e=t+0,n=t+1,r=t+2;i.push(e,n,n,r,r,e)}}let o=new(E(i)?th:tl)(i,1);o.version=a;let l=s.get(e);l&&t.remove(l),s.set(e,o)}return{get:function(e,t){return!0===r[t.id]||(t.addEventListener("dispose",a),r[t.id]=!0,i.memory.geometries++),t},update:function(i){let n=i.attributes;for(let i in n)t.update(n[i],e.ARRAY_BUFFER);let r=i.morphAttributes;for(let i in r){let n=r[i];for(let i=0,r=n.length;i<r;i++)t.update(n[i],e.ARRAY_BUFFER)}},getWireframeAttribute:function(e){let t=s.get(e);if(t){let i=e.index;null!==i&&t.version<i.version&&o(e)}else o(e);return s.get(e)}}}function iL(e,t,i){let n,r,s;function a(t,a,o){0!==o&&(e.drawElementsInstanced(n,a,r,t*s,o),i.update(a,n,o))}this.setMode=function(e){n=e},this.setIndex=function(e){r=e.type,s=e.bytesPerElement},this.render=function(t,a){e.drawElements(n,a,r,t*s),i.update(a,n,1)},this.renderInstances=a,this.renderMultiDraw=function(e,s,a){if(0===a)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,s,0,r,e,0,a);let o=0;for(let e=0;e<a;e++)o+=s[e];i.update(o,n,1)},this.renderMultiDrawInstances=function(e,o,l,h){if(0===l)return;let u=t.get("WEBGL_multi_draw");if(null===u)for(let t=0;t<e.length;t++)a(e[t]/s,o[t],h[t]);else{u.multiDrawElementsInstancedWEBGL(n,o,0,r,e,0,h,0,l);let t=0;for(let e=0;e<l;e++)t+=o[e];for(let e=0;e<h.length;e++)i.update(t,n,h[e])}}}function iD(e){let t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(i,n,r){switch(t.calls++,n){case e.TRIANGLES:t.triangles+=i/3*r;break;case e.LINES:t.lines+=i/2*r;break;case e.LINE_STRIP:t.lines+=r*(i-1);break;case e.LINE_LOOP:t.lines+=r*i;break;case e.POINTS:t.points+=r*i;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function iI(e,t,i){let n=new WeakMap,r=new V;return{update:function(s,a,o){let l=s.morphTargetInfluences,h=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,u=void 0!==h?h.length:0,c=n.get(a);if(void 0===c||c.count!==u){void 0!==c&&c.texture.dispose();let e=void 0!==a.morphAttributes.position,i=void 0!==a.morphAttributes.normal,s=void 0!==a.morphAttributes.color,o=a.morphAttributes.position||[],l=a.morphAttributes.normal||[],h=a.morphAttributes.color||[],d=0;!0===e&&(d=1),!0===i&&(d=2),!0===s&&(d=3);let p=a.attributes.position.count*d,f=1;p>t.maxTextureSize&&(f=Math.ceil(p/t.maxTextureSize),p=t.maxTextureSize);let m=new Float32Array(p*f*4*u),g=new W(m,p,f,u);g.type=1015,g.needsUpdate=!0;let v=4*d;for(let t=0;t<u;t++){let n=o[t],a=l[t],u=h[t],c=p*f*4*t;for(let t=0;t<n.count;t++){let o=t*v;!0===e&&(r.fromBufferAttribute(n,t),m[c+o+0]=r.x,m[c+o+1]=r.y,m[c+o+2]=r.z,m[c+o+3]=0),!0===i&&(r.fromBufferAttribute(a,t),m[c+o+4]=r.x,m[c+o+5]=r.y,m[c+o+6]=r.z,m[c+o+7]=0),!0===s&&(r.fromBufferAttribute(u,t),m[c+o+8]=r.x,m[c+o+9]=r.y,m[c+o+10]=r.z,m[c+o+11]=4===u.itemSize?r.w:1)}}c={count:u,texture:g,size:new M(p,f)},n.set(a,c),a.addEventListener("dispose",function e(){g.dispose(),n.delete(a),a.removeEventListener("dispose",e)})}if(!0===s.isInstancedMesh&&null!==s.morphTexture)o.getUniforms().setValue(e,"morphTexture",s.morphTexture,i);else{let t=0;for(let e=0;e<l.length;e++)t+=l[e];let i=a.morphTargetsRelative?1:1-t;o.getUniforms().setValue(e,"morphTargetBaseInfluence",i),o.getUniforms().setValue(e,"morphTargetInfluences",l)}o.getUniforms().setValue(e,"morphTargetsTexture",c.texture,i),o.getUniforms().setValue(e,"morphTargetsTextureSize",c.size)}}}function iU(e,t,i,n){let r=new WeakMap;function s(e){let t=e.target;t.removeEventListener("dispose",s),i.remove(t.instanceMatrix),null!==t.instanceColor&&i.remove(t.instanceColor)}return{update:function(a){let o=n.render.frame,l=a.geometry,h=t.get(a,l);if(r.get(h)!==o&&(t.update(h),r.set(h,o)),a.isInstancedMesh&&(!1===a.hasEventListener("dispose",s)&&a.addEventListener("dispose",s),r.get(a)!==o&&(i.update(a.instanceMatrix,e.ARRAY_BUFFER),null!==a.instanceColor&&i.update(a.instanceColor,e.ARRAY_BUFFER),r.set(a,o))),a.isSkinnedMesh){let e=a.skeleton;r.get(e)!==o&&(e.update(),r.set(e,o))}return h},dispose:function(){r=new WeakMap}}}class iN extends z{constructor(e,t,i,n,r,s,a,o,l,h=1026){if(1026!==h&&1027!==h)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&1026===h&&(i=1014),void 0===i&&1027===h&&(i=1020),super(null,n,r,s,a,o,h,i,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:1003,this.minFilter=void 0!==o?o:1003,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){let t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}let iO=new z,iF=new iN(1,1),iB=new W,ik=new class extends z{constructor(e=null,t=1,i=1,n=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:n},this.magFilter=1003,this.minFilter=1003,this.wrapR=1001,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}},iz=new tK,iV=[],iH=[],iG=new Float32Array(16),iW=new Float32Array(9),iX=new Float32Array(4);function ij(e,t,i){let n=e[0];if(n<=0||n>0)return e;let r=t*i,s=iV[r];if(void 0===s&&(s=new Float32Array(r),iV[r]=s),0!==t){n.toArray(s,0);for(let n=1,r=0;n!==t;++n)r+=i,e[n].toArray(s,r)}return s}function iY(e,t){if(e.length!==t.length)return!1;for(let i=0,n=e.length;i<n;i++)if(e[i]!==t[i])return!1;return!0}function iq(e,t){for(let i=0,n=t.length;i<n;i++)e[i]=t[i]}function iK(e,t){let i=iH[t];void 0===i&&(i=new Int32Array(t),iH[t]=i);for(let n=0;n!==t;++n)i[n]=e.allocateTextureUnit();return i}function i$(e,t){let i=this.cache;i[0]!==t&&(e.uniform1f(this.addr,t),i[0]=t)}function iZ(e,t){let i=this.cache;if(void 0!==t.x)(i[0]!==t.x||i[1]!==t.y)&&(e.uniform2f(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(iY(i,t))return;e.uniform2fv(this.addr,t),iq(i,t)}}function iJ(e,t){let i=this.cache;if(void 0!==t.x)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z)&&(e.uniform3f(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else if(void 0!==t.r)(i[0]!==t.r||i[1]!==t.g||i[2]!==t.b)&&(e.uniform3f(this.addr,t.r,t.g,t.b),i[0]=t.r,i[1]=t.g,i[2]=t.b);else{if(iY(i,t))return;e.uniform3fv(this.addr,t),iq(i,t)}}function iQ(e,t){let i=this.cache;if(void 0!==t.x)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z||i[3]!==t.w)&&(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(iY(i,t))return;e.uniform4fv(this.addr,t),iq(i,t)}}function i0(e,t){let i=this.cache,n=t.elements;if(void 0===n){if(iY(i,t))return;e.uniformMatrix2fv(this.addr,!1,t),iq(i,t)}else{if(iY(i,n))return;iX.set(n),e.uniformMatrix2fv(this.addr,!1,iX),iq(i,n)}}function i1(e,t){let i=this.cache,n=t.elements;if(void 0===n){if(iY(i,t))return;e.uniformMatrix3fv(this.addr,!1,t),iq(i,t)}else{if(iY(i,n))return;iW.set(n),e.uniformMatrix3fv(this.addr,!1,iW),iq(i,n)}}function i2(e,t){let i=this.cache,n=t.elements;if(void 0===n){if(iY(i,t))return;e.uniformMatrix4fv(this.addr,!1,t),iq(i,t)}else{if(iY(i,n))return;iG.set(n),e.uniformMatrix4fv(this.addr,!1,iG),iq(i,n)}}function i3(e,t){let i=this.cache;i[0]!==t&&(e.uniform1i(this.addr,t),i[0]=t)}function i4(e,t){let i=this.cache;if(void 0!==t.x)(i[0]!==t.x||i[1]!==t.y)&&(e.uniform2i(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(iY(i,t))return;e.uniform2iv(this.addr,t),iq(i,t)}}function i5(e,t){let i=this.cache;if(void 0!==t.x)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z)&&(e.uniform3i(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else{if(iY(i,t))return;e.uniform3iv(this.addr,t),iq(i,t)}}function i6(e,t){let i=this.cache;if(void 0!==t.x)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z||i[3]!==t.w)&&(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(iY(i,t))return;e.uniform4iv(this.addr,t),iq(i,t)}}function i8(e,t){let i=this.cache;i[0]!==t&&(e.uniform1ui(this.addr,t),i[0]=t)}function i9(e,t){let i=this.cache;if(void 0!==t.x)(i[0]!==t.x||i[1]!==t.y)&&(e.uniform2ui(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(iY(i,t))return;e.uniform2uiv(this.addr,t),iq(i,t)}}function i7(e,t){let i=this.cache;if(void 0!==t.x)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z)&&(e.uniform3ui(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else{if(iY(i,t))return;e.uniform3uiv(this.addr,t),iq(i,t)}}function ne(e,t){let i=this.cache;if(void 0!==t.x)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z||i[3]!==t.w)&&(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(iY(i,t))return;e.uniform4uiv(this.addr,t),iq(i,t)}}function nt(e,t,i){let n,r=this.cache,s=i.allocateTextureUnit();r[0]!==s&&(e.uniform1i(this.addr,s),r[0]=s),this.type===e.SAMPLER_2D_SHADOW?(iF.compareFunction=515,n=iF):n=iO,i.setTexture2D(t||n,s)}function ni(e,t,i){let n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.setTexture3D(t||ik,r)}function nn(e,t,i){let n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.setTextureCube(t||iz,r)}function nr(e,t,i){let n=this.cache,r=i.allocateTextureUnit();n[0]!==r&&(e.uniform1i(this.addr,r),n[0]=r),i.setTexture2DArray(t||iB,r)}function ns(e,t){e.uniform1fv(this.addr,t)}function na(e,t){let i=ij(t,this.size,2);e.uniform2fv(this.addr,i)}function no(e,t){let i=ij(t,this.size,3);e.uniform3fv(this.addr,i)}function nl(e,t){let i=ij(t,this.size,4);e.uniform4fv(this.addr,i)}function nh(e,t){let i=ij(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,i)}function nu(e,t){let i=ij(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,i)}function nc(e,t){let i=ij(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,i)}function nd(e,t){e.uniform1iv(this.addr,t)}function np(e,t){e.uniform2iv(this.addr,t)}function nf(e,t){e.uniform3iv(this.addr,t)}function nm(e,t){e.uniform4iv(this.addr,t)}function ng(e,t){e.uniform1uiv(this.addr,t)}function nv(e,t){e.uniform2uiv(this.addr,t)}function n_(e,t){e.uniform3uiv(this.addr,t)}function nx(e,t){e.uniform4uiv(this.addr,t)}function ny(e,t,i){let n=this.cache,r=t.length,s=iK(i,r);iY(n,s)||(e.uniform1iv(this.addr,s),iq(n,s));for(let e=0;e!==r;++e)i.setTexture2D(t[e]||iO,s[e])}function nM(e,t,i){let n=this.cache,r=t.length,s=iK(i,r);iY(n,s)||(e.uniform1iv(this.addr,s),iq(n,s));for(let e=0;e!==r;++e)i.setTexture3D(t[e]||ik,s[e])}function nS(e,t,i){let n=this.cache,r=t.length,s=iK(i,r);iY(n,s)||(e.uniform1iv(this.addr,s),iq(n,s));for(let e=0;e!==r;++e)i.setTextureCube(t[e]||iz,s[e])}function nb(e,t,i){let n=this.cache,r=t.length,s=iK(i,r);iY(n,s)||(e.uniform1iv(this.addr,s),iq(n,s));for(let e=0;e!==r;++e)i.setTexture2DArray(t[e]||iB,s[e])}class nE{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=function(e){switch(e){case 5126:return i$;case 35664:return iZ;case 35665:return iJ;case 35666:return iQ;case 35674:return i0;case 35675:return i1;case 35676:return i2;case 5124:case 35670:return i3;case 35667:case 35671:return i4;case 35668:case 35672:return i5;case 35669:case 35673:return i6;case 5125:return i8;case 36294:return i9;case 36295:return i7;case 36296:return ne;case 35678:case 36198:case 36298:case 36306:case 35682:return nt;case 35679:case 36299:case 36307:return ni;case 35680:case 36300:case 36308:case 36293:return nn;case 36289:case 36303:case 36311:case 36292:return nr}}(t.type)}}class nT{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return ns;case 35664:return na;case 35665:return no;case 35666:return nl;case 35674:return nh;case 35675:return nu;case 35676:return nc;case 5124:case 35670:return nd;case 35667:case 35671:return np;case 35668:case 35672:return nf;case 35669:case 35673:return nm;case 5125:return ng;case 36294:return nv;case 36295:return n_;case 36296:return nx;case 35678:case 36198:case 36298:case 36306:case 35682:return ny;case 35679:case 36299:case 36307:return nM;case 35680:case 36300:case 36308:case 36293:return nS;case 36289:case 36303:case 36311:case 36292:return nb}}(t.type)}}class nw{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){let n=this.seq;for(let r=0,s=n.length;r!==s;++r){let s=n[r];s.setValue(e,t[s.id],i)}}}let nA=/(\w+)(\])?(\[|\.)?/g;function nC(e,t){e.seq.push(t),e.map[t.id]=t}class nP{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let n=0;n<i;++n){const i=e.getActiveUniform(t,n),r=e.getUniformLocation(t,i.name);!function(e,t,i){let n=e.name,r=n.length;for(nA.lastIndex=0;;){let s=nA.exec(n),a=nA.lastIndex,o=s[1],l="]"===s[2],h=s[3];if(l&&(o|=0),void 0===h||"["===h&&a+2===r){nC(i,void 0===h?new nE(o,e,t):new nT(o,e,t));break}{let e=i.map[o];void 0===e&&nC(i,e=new nw(o)),i=e}}}(i,r,this)}}setValue(e,t,i,n){let r=this.map[t];void 0!==r&&r.setValue(e,i,n)}setOptional(e,t,i){let n=t[i];void 0!==n&&this.setValue(e,i,n)}static upload(e,t,i,n){for(let r=0,s=t.length;r!==s;++r){let s=t[r],a=i[s.id];!1!==a.needsUpdate&&s.setValue(e,a.value,n)}}static seqWithValue(e,t){let i=[];for(let n=0,r=e.length;n!==r;++n){let r=e[n];r.id in t&&i.push(r)}return i}}function nR(e,t,i){let n=e.createShader(t);return e.shaderSource(n,i),e.compileShader(n),n}let nL=0;function nD(e,t,i){let n=e.getShaderParameter(t,e.COMPILE_STATUS),r=e.getShaderInfoLog(t).trim();if(n&&""===r)return"";let s=/ERROR: 0:(\d+)/.exec(r);if(!s)return r;{let n=parseInt(s[1]);return i.toUpperCase()+"\n\n"+r+"\n\n"+function(e,t){let i=e.split("\n"),n=[],r=Math.max(t-6,0),s=Math.min(t+6,i.length);for(let e=r;e<s;e++){let r=e+1;n.push(`${r===t?">":" "} ${r}: ${i[e]}`)}return n.join("\n")}(e.getShaderSource(t),n)}}let nI=new j;function nU(e){return""!==e}function nN(e,t){let i=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,i).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function nO(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}let nF=/^[ \t]*#include +<([\w\d./]+)>/gm;function nB(e){return e.replace(nF,nz)}let nk=new Map;function nz(e,t){let i=t8[t];if(void 0===i){let e=nk.get(t);if(void 0!==e)i=t8[e],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,e);else throw Error("Can not resolve #include <"+t+">")}return nB(i)}let nV=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function nH(e){return e.replace(nV,nG)}function nG(e,t,i,n){let r="";for(let e=parseInt(t);e<parseInt(i);e++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return r}function nW(e){let t=`precision ${e.precision} float;
	precision ${e.precision} int;
	precision ${e.precision} sampler2D;
	precision ${e.precision} samplerCube;
	precision ${e.precision} sampler3D;
	precision ${e.precision} sampler2DArray;
	precision ${e.precision} sampler2DShadow;
	precision ${e.precision} samplerCubeShadow;
	precision ${e.precision} sampler2DArrayShadow;
	precision ${e.precision} isampler2D;
	precision ${e.precision} isampler3D;
	precision ${e.precision} isamplerCube;
	precision ${e.precision} isampler2DArray;
	precision ${e.precision} usampler2D;
	precision ${e.precision} usampler3D;
	precision ${e.precision} usamplerCube;
	precision ${e.precision} usampler2DArray;
	`;return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function nX(e,t,i,n){let r,h,u,p,f,m,g=e.getContext(),v=i.defines,_=i.vertexShader,x=i.fragmentShader,y=(f="SHADOWMAP_TYPE_BASIC",1===i.shadowMapType?f="SHADOWMAP_TYPE_PCF":2===i.shadowMapType?f="SHADOWMAP_TYPE_PCF_SOFT":3===i.shadowMapType&&(f="SHADOWMAP_TYPE_VSM"),f),M=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case 301:case 302:t="ENVMAP_TYPE_CUBE";break;case 306:t="ENVMAP_TYPE_CUBE_UV"}return t}(i),S=(m="ENVMAP_MODE_REFLECTION",i.envMap&&302===i.envMapMode&&(m="ENVMAP_MODE_REFRACTION"),m),b=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case 0:t="ENVMAP_BLENDING_MULTIPLY";break;case 1:t="ENVMAP_BLENDING_MIX";break;case 2:t="ENVMAP_BLENDING_ADD"}return t}(i),E=function(e){let t=e.envMapCubeUVHeight;if(null===t)return null;let i=Math.log2(t)-2;return{texelWidth:1/(3*Math.max(Math.pow(2,i),112)),texelHeight:1/t,maxMip:i}}(i),T=[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(nU).join("\n"),w=function(e){let t=[];for(let i in e){let n=e[i];!1!==n&&t.push("#define "+i+" "+n)}return t.join("\n")}(v),A=g.createProgram(),C=i.glslVersion?"#version "+i.glslVersion+"\n":"";if(i.isRawShaderMaterial)(r=["#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,w].filter(nU).join("\n")).length>0&&(r+="\n"),(h=["#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,w].filter(nU).join("\n")).length>0&&(h+="\n");else{let e,t,n,u;r=[nW(i),"#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,w,i.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",i.batching?"#define USE_BATCHING":"",i.batchingColor?"#define USE_BATCHING_COLOR":"",i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.instancingMorph?"#define USE_INSTANCING_MORPH":"",i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+S:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",i.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",i.displacementMap?"#define USE_DISPLACEMENTMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.anisotropy?"#define USE_ANISOTROPY":"",i.anisotropyMap?"#define USE_ANISOTROPYMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",i.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaHash?"#define USE_ALPHAHASH":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",i.mapUv?"#define MAP_UV "+i.mapUv:"",i.alphaMapUv?"#define ALPHAMAP_UV "+i.alphaMapUv:"",i.lightMapUv?"#define LIGHTMAP_UV "+i.lightMapUv:"",i.aoMapUv?"#define AOMAP_UV "+i.aoMapUv:"",i.emissiveMapUv?"#define EMISSIVEMAP_UV "+i.emissiveMapUv:"",i.bumpMapUv?"#define BUMPMAP_UV "+i.bumpMapUv:"",i.normalMapUv?"#define NORMALMAP_UV "+i.normalMapUv:"",i.displacementMapUv?"#define DISPLACEMENTMAP_UV "+i.displacementMapUv:"",i.metalnessMapUv?"#define METALNESSMAP_UV "+i.metalnessMapUv:"",i.roughnessMapUv?"#define ROUGHNESSMAP_UV "+i.roughnessMapUv:"",i.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+i.anisotropyMapUv:"",i.clearcoatMapUv?"#define CLEARCOATMAP_UV "+i.clearcoatMapUv:"",i.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+i.clearcoatNormalMapUv:"",i.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+i.clearcoatRoughnessMapUv:"",i.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+i.iridescenceMapUv:"",i.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+i.iridescenceThicknessMapUv:"",i.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+i.sheenColorMapUv:"",i.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+i.sheenRoughnessMapUv:"",i.specularMapUv?"#define SPECULARMAP_UV "+i.specularMapUv:"",i.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+i.specularColorMapUv:"",i.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+i.specularIntensityMapUv:"",i.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+i.transmissionMapUv:"",i.thicknessMapUv?"#define THICKNESSMAP_UV "+i.thicknessMapUv:"",i.vertexTangents&&!1===i.flatShading?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUv1s?"#define USE_UV1":"",i.vertexUv2s?"#define USE_UV2":"",i.vertexUv3s?"#define USE_UV3":"",i.pointsUvs?"#define USE_POINTS_UV":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&!1===i.flatShading?"#define USE_MORPHNORMALS":"",i.morphColors?"#define USE_MORPHCOLORS":"",i.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+i.morphTextureStride:"",i.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+i.morphTargetsCount:"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+y:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.numLightProbes>0?"#define USE_LIGHT_PROBES":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif","\n"].filter(nU).join("\n"),h=[nW(i),"#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,w,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+M:"",i.envMap?"#define "+S:"",i.envMap?"#define "+b:"",E?"#define CUBEUV_TEXEL_WIDTH "+E.texelWidth:"",E?"#define CUBEUV_TEXEL_HEIGHT "+E.texelHeight:"",E?"#define CUBEUV_MAX_MIP "+E.maxMip+".0":"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",i.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.anisotropy?"#define USE_ANISOTROPY":"",i.anisotropyMap?"#define USE_ANISOTROPYMAP":"",i.clearcoat?"#define USE_CLEARCOAT":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.dispersion?"#define USE_DISPERSION":"",i.iridescence?"#define USE_IRIDESCENCE":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",i.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaTest?"#define USE_ALPHATEST":"",i.alphaHash?"#define USE_ALPHAHASH":"",i.sheen?"#define USE_SHEEN":"",i.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.vertexTangents&&!1===i.flatShading?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor||i.batchingColor?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUv1s?"#define USE_UV1":"",i.vertexUv2s?"#define USE_UV2":"",i.vertexUv3s?"#define USE_UV3":"",i.pointsUvs?"#define USE_POINTS_UV":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+y:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.numLightProbes>0?"#define USE_LIGHT_PROBES":"",i.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==i.toneMapping?"#define TONE_MAPPING":"",0!==i.toneMapping?t8.tonemapping_pars_fragment:"",0!==i.toneMapping?function(e,t){let i;switch(t){case 1:i="Linear";break;case 2:i="Reinhard";break;case 3:i="OptimizedCineon";break;case 4:i="ACESFilmic";break;case 6:i="AgX";break;case 7:i="Neutral";break;case 5:i="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),i="Linear"}return"vec3 "+e+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",i.opaque?"#define OPAQUE":"",t8.colorspace_pars_fragment,(e=function(e){let t,i=D.getPrimaries(D.workingColorSpace),n=D.getPrimaries(e);switch(i===n?t="":"p3"===i&&n===c?t="LinearDisplayP3ToLinearSRGB":i===c&&"p3"===n&&(t="LinearSRGBToLinearDisplayP3"),e){case a:case l:return[t,"LinearTransferOETF"];case s:case o:return[t,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",e),[t,"LinearTransferOETF"]}}(i.outputColorSpace),`vec4 linearToOutputTexel( vec4 value ) { return ${e[0]}( ${e[1]}( value ) ); }`),(D.getLuminanceCoefficients(nI),t=nI.x.toFixed(4),n=nI.y.toFixed(4),u=nI.z.toFixed(4),`float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( ${t}, ${n}, ${u} );
	return dot( weights, rgb );
}`),i.useDepthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(nU).join("\n")}_=nO(_=nN(_=nB(_),i),i),x=nO(x=nN(x=nB(x),i),i),_=nH(_),x=nH(x),!0!==i.isRawShaderMaterial&&(C="#version 300 es\n",r=[T,"#define attribute in\n#define varying out\n#define texture2D texture"].join("\n")+"\n"+r,h=["#define varying in",i.glslVersion===d?"":"layout(location = 0) out highp vec4 pc_fragColor;",i.glslVersion===d?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth\n#define texture2D texture\n#define textureCube texture\n#define texture2DProj textureProj\n#define texture2DLodEXT textureLod\n#define texture2DProjLodEXT textureProjLod\n#define textureCubeLodEXT textureLod\n#define texture2DGradEXT textureGrad\n#define texture2DProjGradEXT textureProjGrad\n#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+h);let P=C+r+_,R=C+h+x,L=nR(g,g.VERTEX_SHADER,P),I=nR(g,g.FRAGMENT_SHADER,R);function U(t){if(e.debug.checkShaderErrors){let i=g.getProgramInfoLog(A).trim(),n=g.getShaderInfoLog(L).trim(),s=g.getShaderInfoLog(I).trim(),a=!0,o=!0;if(!1===g.getProgramParameter(A,g.LINK_STATUS))if(a=!1,"function"==typeof e.debug.onShaderError)e.debug.onShaderError(g,A,L,I);else{let e=nD(g,L,"vertex"),n=nD(g,I,"fragment");console.error("THREE.WebGLProgram: Shader Error "+g.getError()+" - VALIDATE_STATUS "+g.getProgramParameter(A,g.VALIDATE_STATUS)+"\n\nMaterial Name: "+t.name+"\nMaterial Type: "+t.type+"\n\nProgram Info Log: "+i+"\n"+e+"\n"+n)}else""!==i?console.warn("THREE.WebGLProgram: Program Info Log:",i):(""===n||""===s)&&(o=!1);o&&(t.diagnostics={runnable:a,programLog:i,vertexShader:{log:n,prefix:r},fragmentShader:{log:s,prefix:h}})}g.deleteShader(L),g.deleteShader(I),u=new nP(g,A),p=function(e,t){let i={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){let n=e.getActiveAttrib(t,r),s=n.name,a=1;n.type===e.FLOAT_MAT2&&(a=2),n.type===e.FLOAT_MAT3&&(a=3),n.type===e.FLOAT_MAT4&&(a=4),i[s]={type:n.type,location:e.getAttribLocation(t,s),locationSize:a}}return i}(g,A)}g.attachShader(A,L),g.attachShader(A,I),void 0!==i.index0AttributeName?g.bindAttribLocation(A,0,i.index0AttributeName):!0===i.morphTargets&&g.bindAttribLocation(A,0,"position"),g.linkProgram(A),this.getUniforms=function(){return void 0===u&&U(this),u},this.getAttributes=function(){return void 0===p&&U(this),p};let N=!1===i.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===N&&(N=g.getProgramParameter(A,37297)),N},this.destroy=function(){n.releaseStatesOfProgram(this),g.deleteProgram(A),this.program=void 0},this.type=i.shaderType,this.name=i.shaderName,this.id=nL++,this.cacheKey=t,this.usedTimes=1,this.program=A,this.vertexShader=L,this.fragmentShader=I,this}let nj=0;class nY{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,i=e.fragmentShader,n=this._getShaderStage(t),r=this._getShaderStage(i),s=this._getShaderCacheForMaterial(e);return!1===s.has(n)&&(s.add(n),n.usedTimes++),!1===s.has(r)&&(s.add(r),r.usedTimes++),this}remove(e){for(let t of this.materialCache.get(e))t.usedTimes--,0===t.usedTimes&&this.shaderCache.delete(t.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,i=t.get(e);return void 0===i&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){let t=this.shaderCache,i=t.get(e);return void 0===i&&(i=new nq(e),t.set(e,i)),i}}class nq{constructor(e){this.id=nj++,this.code=e,this.usedTimes=0}}function nK(e,t,i,n,r,s,o){let l=new eD,h=new nY,c=new Set,d=[],p=r.logarithmicDepthBuffer,f=r.vertexTextures,m=r.precision,g={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function v(e){return(c.add(e),0===e)?"uv":`uv${e}`}return{getParameters:function(s,l,d,_,x){let y,M,S,b,E=_.fog,T=x.geometry,w=s.isMeshStandardMaterial?_.environment:null,A=(s.isMeshStandardMaterial?i:t).get(s.envMap||w),C=A&&306===A.mapping?A.image.height:null,P=g[s.type];null!==s.precision&&(m=r.getMaxPrecision(s.precision))!==s.precision&&console.warn("THREE.WebGLProgram.getParameters:",s.precision,"not supported, using",m,"instead.");let R=T.morphAttributes.position||T.morphAttributes.normal||T.morphAttributes.color,L=void 0!==R?R.length:0,I=0;if(void 0!==T.morphAttributes.position&&(I=1),void 0!==T.morphAttributes.normal&&(I=2),void 0!==T.morphAttributes.color&&(I=3),P){let e=t7[P];y=e.vertexShader,M=e.fragmentShader}else y=s.vertexShader,M=s.fragmentShader,h.update(s),S=h.getVertexShaderID(s),b=h.getFragmentShaderID(s);let U=e.getRenderTarget(),N=!0===x.isInstancedMesh,O=!0===x.isBatchedMesh,F=!!s.map,B=!!s.matcap,k=!!A,z=!!s.aoMap,V=!!s.lightMap,H=!!s.bumpMap,G=!!s.normalMap,W=!!s.displacementMap,X=!!s.emissiveMap,j=!!s.metalnessMap,Y=!!s.roughnessMap,q=s.anisotropy>0,K=s.clearcoat>0,$=s.dispersion>0,Z=s.iridescence>0,J=s.sheen>0,Q=s.transmission>0,ee=q&&!!s.anisotropyMap,et=K&&!!s.clearcoatMap,ei=K&&!!s.clearcoatNormalMap,en=K&&!!s.clearcoatRoughnessMap,er=Z&&!!s.iridescenceMap,es=Z&&!!s.iridescenceThicknessMap,ea=J&&!!s.sheenColorMap,eo=J&&!!s.sheenRoughnessMap,el=!!s.specularMap,eh=!!s.specularColorMap,eu=!!s.specularIntensityMap,ec=Q&&!!s.transmissionMap,ed=Q&&!!s.thicknessMap,ep=!!s.gradientMap,ef=!!s.alphaMap,em=s.alphaTest>0,eg=!!s.alphaHash,ev=!!s.extensions,e_=0;s.toneMapped&&(null===U||!0===U.isXRRenderTarget)&&(e_=e.toneMapping);let ex={shaderID:P,shaderType:s.type,shaderName:s.name,vertexShader:y,fragmentShader:M,defines:s.defines,customVertexShaderID:S,customFragmentShaderID:b,isRawShaderMaterial:!0===s.isRawShaderMaterial,glslVersion:s.glslVersion,precision:m,batching:O,batchingColor:O&&null!==x._colorsTexture,instancing:N,instancingColor:N&&null!==x.instanceColor,instancingMorph:N&&null!==x.morphTexture,supportsVertexTextures:f,outputColorSpace:null===U?e.outputColorSpace:!0===U.isXRRenderTarget?U.texture.colorSpace:a,alphaToCoverage:!!s.alphaToCoverage,map:F,matcap:B,envMap:k,envMapMode:k&&A.mapping,envMapCubeUVHeight:C,aoMap:z,lightMap:V,bumpMap:H,normalMap:G,displacementMap:f&&W,emissiveMap:X,normalMapObjectSpace:G&&1===s.normalMapType,normalMapTangentSpace:G&&0===s.normalMapType,metalnessMap:j,roughnessMap:Y,anisotropy:q,anisotropyMap:ee,clearcoat:K,clearcoatMap:et,clearcoatNormalMap:ei,clearcoatRoughnessMap:en,dispersion:$,iridescence:Z,iridescenceMap:er,iridescenceThicknessMap:es,sheen:J,sheenColorMap:ea,sheenRoughnessMap:eo,specularMap:el,specularColorMap:eh,specularIntensityMap:eu,transmission:Q,transmissionMap:ec,thicknessMap:ed,gradientMap:ep,opaque:!1===s.transparent&&1===s.blending&&!1===s.alphaToCoverage,alphaMap:ef,alphaTest:em,alphaHash:eg,combine:s.combine,mapUv:F&&v(s.map.channel),aoMapUv:z&&v(s.aoMap.channel),lightMapUv:V&&v(s.lightMap.channel),bumpMapUv:H&&v(s.bumpMap.channel),normalMapUv:G&&v(s.normalMap.channel),displacementMapUv:W&&v(s.displacementMap.channel),emissiveMapUv:X&&v(s.emissiveMap.channel),metalnessMapUv:j&&v(s.metalnessMap.channel),roughnessMapUv:Y&&v(s.roughnessMap.channel),anisotropyMapUv:ee&&v(s.anisotropyMap.channel),clearcoatMapUv:et&&v(s.clearcoatMap.channel),clearcoatNormalMapUv:ei&&v(s.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:en&&v(s.clearcoatRoughnessMap.channel),iridescenceMapUv:er&&v(s.iridescenceMap.channel),iridescenceThicknessMapUv:es&&v(s.iridescenceThicknessMap.channel),sheenColorMapUv:ea&&v(s.sheenColorMap.channel),sheenRoughnessMapUv:eo&&v(s.sheenRoughnessMap.channel),specularMapUv:el&&v(s.specularMap.channel),specularColorMapUv:eh&&v(s.specularColorMap.channel),specularIntensityMapUv:eu&&v(s.specularIntensityMap.channel),transmissionMapUv:ec&&v(s.transmissionMap.channel),thicknessMapUv:ed&&v(s.thicknessMap.channel),alphaMapUv:ef&&v(s.alphaMap.channel),vertexTangents:!!T.attributes.tangent&&(G||q),vertexColors:s.vertexColors,vertexAlphas:!0===s.vertexColors&&!!T.attributes.color&&4===T.attributes.color.itemSize,pointsUvs:!0===x.isPoints&&!!T.attributes.uv&&(F||ef),fog:!!E,useFog:!0===s.fog,fogExp2:!!E&&E.isFogExp2,flatShading:!0===s.flatShading,sizeAttenuation:!0===s.sizeAttenuation,logarithmicDepthBuffer:p,skinning:!0===x.isSkinnedMesh,morphTargets:void 0!==T.morphAttributes.position,morphNormals:void 0!==T.morphAttributes.normal,morphColors:void 0!==T.morphAttributes.color,morphTargetsCount:L,morphTextureStride:I,numDirLights:l.directional.length,numPointLights:l.point.length,numSpotLights:l.spot.length,numSpotLightMaps:l.spotLightMap.length,numRectAreaLights:l.rectArea.length,numHemiLights:l.hemi.length,numDirLightShadows:l.directionalShadowMap.length,numPointLightShadows:l.pointShadowMap.length,numSpotLightShadows:l.spotShadowMap.length,numSpotLightShadowsWithMaps:l.numSpotLightShadowsWithMaps,numLightProbes:l.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:s.dithering,shadowMapEnabled:e.shadowMap.enabled&&d.length>0,shadowMapType:e.shadowMap.type,toneMapping:e_,decodeVideoTexture:F&&!0===s.map.isVideoTexture&&D.getTransfer(s.map.colorSpace)===u,premultipliedAlpha:s.premultipliedAlpha,doubleSided:2===s.side,flipSided:1===s.side,useDepthPacking:s.depthPacking>=0,depthPacking:s.depthPacking||0,index0AttributeName:s.index0AttributeName,extensionClipCullDistance:ev&&!0===s.extensions.clipCullDistance&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(ev&&!0===s.extensions.multiDraw||O)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:s.customProgramCacheKey()};return ex.vertexUv1s=c.has(1),ex.vertexUv2s=c.has(2),ex.vertexUv3s=c.has(3),c.clear(),ex},getProgramCacheKey:function(t){var i,n,r,s;let a=[];if(t.shaderID?a.push(t.shaderID):(a.push(t.customVertexShaderID),a.push(t.customFragmentShaderID)),void 0!==t.defines)for(let e in t.defines)a.push(e),a.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(i=a,n=t,i.push(n.precision),i.push(n.outputColorSpace),i.push(n.envMapMode),i.push(n.envMapCubeUVHeight),i.push(n.mapUv),i.push(n.alphaMapUv),i.push(n.lightMapUv),i.push(n.aoMapUv),i.push(n.bumpMapUv),i.push(n.normalMapUv),i.push(n.displacementMapUv),i.push(n.emissiveMapUv),i.push(n.metalnessMapUv),i.push(n.roughnessMapUv),i.push(n.anisotropyMapUv),i.push(n.clearcoatMapUv),i.push(n.clearcoatNormalMapUv),i.push(n.clearcoatRoughnessMapUv),i.push(n.iridescenceMapUv),i.push(n.iridescenceThicknessMapUv),i.push(n.sheenColorMapUv),i.push(n.sheenRoughnessMapUv),i.push(n.specularMapUv),i.push(n.specularColorMapUv),i.push(n.specularIntensityMapUv),i.push(n.transmissionMapUv),i.push(n.thicknessMapUv),i.push(n.combine),i.push(n.fogExp2),i.push(n.sizeAttenuation),i.push(n.morphTargetsCount),i.push(n.morphAttributeCount),i.push(n.numDirLights),i.push(n.numPointLights),i.push(n.numSpotLights),i.push(n.numSpotLightMaps),i.push(n.numHemiLights),i.push(n.numRectAreaLights),i.push(n.numDirLightShadows),i.push(n.numPointLightShadows),i.push(n.numSpotLightShadows),i.push(n.numSpotLightShadowsWithMaps),i.push(n.numLightProbes),i.push(n.shadowMapType),i.push(n.toneMapping),i.push(n.numClippingPlanes),i.push(n.numClipIntersection),i.push(n.depthPacking),r=a,s=t,l.disableAll(),s.supportsVertexTextures&&l.enable(0),s.instancing&&l.enable(1),s.instancingColor&&l.enable(2),s.instancingMorph&&l.enable(3),s.matcap&&l.enable(4),s.envMap&&l.enable(5),s.normalMapObjectSpace&&l.enable(6),s.normalMapTangentSpace&&l.enable(7),s.clearcoat&&l.enable(8),s.iridescence&&l.enable(9),s.alphaTest&&l.enable(10),s.vertexColors&&l.enable(11),s.vertexAlphas&&l.enable(12),s.vertexUv1s&&l.enable(13),s.vertexUv2s&&l.enable(14),s.vertexUv3s&&l.enable(15),s.vertexTangents&&l.enable(16),s.anisotropy&&l.enable(17),s.alphaHash&&l.enable(18),s.batching&&l.enable(19),s.dispersion&&l.enable(20),s.batchingColor&&l.enable(21),r.push(l.mask),l.disableAll(),s.fog&&l.enable(0),s.useFog&&l.enable(1),s.flatShading&&l.enable(2),s.logarithmicDepthBuffer&&l.enable(3),s.skinning&&l.enable(4),s.morphTargets&&l.enable(5),s.morphNormals&&l.enable(6),s.morphColors&&l.enable(7),s.premultipliedAlpha&&l.enable(8),s.shadowMapEnabled&&l.enable(9),s.doubleSided&&l.enable(10),s.flipSided&&l.enable(11),s.useDepthPacking&&l.enable(12),s.dithering&&l.enable(13),s.transmission&&l.enable(14),s.sheen&&l.enable(15),s.opaque&&l.enable(16),s.pointsUvs&&l.enable(17),s.decodeVideoTexture&&l.enable(18),s.alphaToCoverage&&l.enable(19),r.push(l.mask),a.push(e.outputColorSpace)),a.push(t.customProgramCacheKey),a.join()},getUniforms:function(e){let t,i=g[e.type];return t=i?tk(t7[i].uniforms):e.uniforms},acquireProgram:function(t,i){let n;for(let e=0,t=d.length;e<t;e++){let t=d[e];if(t.cacheKey===i){n=t,++n.usedTimes;break}}return void 0===n&&(n=new nX(e,i,t,s),d.push(n)),n},releaseProgram:function(e){if(0==--e.usedTimes){let t=d.indexOf(e);d[t]=d[d.length-1],d.pop(),e.destroy()}},releaseShaderCache:function(e){h.remove(e)},programs:d,dispose:function(){h.dispose()}}}function n$(){let e=new WeakMap;return{get:function(t){let i=e.get(t);return void 0===i&&(i={},e.set(t,i)),i},remove:function(t){e.delete(t)},update:function(t,i,n){e.get(t)[i]=n},dispose:function(){e=new WeakMap}}}function nZ(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function nJ(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function nQ(){let e=[],t=0,i=[],n=[],r=[];function s(i,n,r,s,a,o){let l=e[t];return void 0===l?(l={id:i.id,object:i,geometry:n,material:r,groupOrder:s,renderOrder:i.renderOrder,z:a,group:o},e[t]=l):(l.id=i.id,l.object=i,l.geometry=n,l.material=r,l.groupOrder=s,l.renderOrder=i.renderOrder,l.z=a,l.group=o),t++,l}return{opaque:i,transmissive:n,transparent:r,init:function(){t=0,i.length=0,n.length=0,r.length=0},push:function(e,t,a,o,l,h){let u=s(e,t,a,o,l,h);a.transmission>0?n.push(u):!0===a.transparent?r.push(u):i.push(u)},unshift:function(e,t,a,o,l,h){let u=s(e,t,a,o,l,h);a.transmission>0?n.unshift(u):!0===a.transparent?r.unshift(u):i.unshift(u)},finish:function(){for(let i=t,n=e.length;i<n;i++){let t=e[i];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){i.length>1&&i.sort(e||nZ),n.length>1&&n.sort(t||nJ),r.length>1&&r.sort(t||nJ)}}}function n0(){let e=new WeakMap;return{get:function(t,i){let n,r=e.get(t);return void 0===r?(n=new nQ,e.set(t,[n])):i>=r.length?(n=new nQ,r.push(n)):n=r[i],n},dispose:function(){e=new WeakMap}}}function n1(){let e={};return{get:function(t){let i;if(void 0!==e[t.id])return e[t.id];switch(t.type){case"DirectionalLight":i={direction:new j,color:new te};break;case"SpotLight":i={position:new j,direction:new j,color:new te,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new j,color:new te,distance:0,decay:0};break;case"HemisphereLight":i={direction:new j,skyColor:new te,groundColor:new te};break;case"RectAreaLight":i={color:new te,position:new j,halfWidth:new j,halfHeight:new j}}return e[t.id]=i,i}}}let n2=0;function n3(e,t){return 2*!!t.castShadow-2*!!e.castShadow+ +!!t.map-!!e.map}function n4(e){let t,i=new n1,n=(t={},{get:function(e){let i;if(void 0!==t[e.id])return t[e.id];switch(e.type){case"DirectionalLight":case"SpotLight":i={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new M};break;case"PointLight":i={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new M,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=i,i}}),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let e=0;e<9;e++)r.probe.push(new j);let s=new j,a=new eM,o=new eM;return{setup:function(t){let s=0,a=0,o=0;for(let e=0;e<9;e++)r.probe[e].set(0,0,0);let l=0,h=0,u=0,c=0,d=0,p=0,f=0,m=0,g=0,v=0,_=0;t.sort(n3);for(let e=0,x=t.length;e<x;e++){let x=t[e],y=x.color,M=x.intensity,S=x.distance,b=x.shadow&&x.shadow.map?x.shadow.map.texture:null;if(x.isAmbientLight)s+=y.r*M,a+=y.g*M,o+=y.b*M;else if(x.isLightProbe){for(let e=0;e<9;e++)r.probe[e].addScaledVector(x.sh.coefficients[e],M);_++}else if(x.isDirectionalLight){let e=i.get(x);if(e.color.copy(x.color).multiplyScalar(x.intensity),x.castShadow){let e=x.shadow,t=n.get(x);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,r.directionalShadow[l]=t,r.directionalShadowMap[l]=b,r.directionalShadowMatrix[l]=x.shadow.matrix,p++}r.directional[l]=e,l++}else if(x.isSpotLight){let e=i.get(x);e.position.setFromMatrixPosition(x.matrixWorld),e.color.copy(y).multiplyScalar(M),e.distance=S,e.coneCos=Math.cos(x.angle),e.penumbraCos=Math.cos(x.angle*(1-x.penumbra)),e.decay=x.decay,r.spot[u]=e;let t=x.shadow;if(x.map&&(r.spotLightMap[g]=x.map,g++,t.updateMatrices(x),x.castShadow&&v++),r.spotLightMatrix[u]=t.matrix,x.castShadow){let e=n.get(x);e.shadowIntensity=t.intensity,e.shadowBias=t.bias,e.shadowNormalBias=t.normalBias,e.shadowRadius=t.radius,e.shadowMapSize=t.mapSize,r.spotShadow[u]=e,r.spotShadowMap[u]=b,m++}u++}else if(x.isRectAreaLight){let e=i.get(x);e.color.copy(y).multiplyScalar(M),e.halfWidth.set(.5*x.width,0,0),e.halfHeight.set(0,.5*x.height,0),r.rectArea[c]=e,c++}else if(x.isPointLight){let e=i.get(x);if(e.color.copy(x.color).multiplyScalar(x.intensity),e.distance=x.distance,e.decay=x.decay,x.castShadow){let e=x.shadow,t=n.get(x);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,t.shadowCameraNear=e.camera.near,t.shadowCameraFar=e.camera.far,r.pointShadow[h]=t,r.pointShadowMap[h]=b,r.pointShadowMatrix[h]=x.shadow.matrix,f++}r.point[h]=e,h++}else if(x.isHemisphereLight){let e=i.get(x);e.skyColor.copy(x.color).multiplyScalar(M),e.groundColor.copy(x.groundColor).multiplyScalar(M),r.hemi[d]=e,d++}}c>0&&(!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=t9.LTC_FLOAT_1,r.rectAreaLTC2=t9.LTC_FLOAT_2):(r.rectAreaLTC1=t9.LTC_HALF_1,r.rectAreaLTC2=t9.LTC_HALF_2)),r.ambient[0]=s,r.ambient[1]=a,r.ambient[2]=o;let x=r.hash;(x.directionalLength!==l||x.pointLength!==h||x.spotLength!==u||x.rectAreaLength!==c||x.hemiLength!==d||x.numDirectionalShadows!==p||x.numPointShadows!==f||x.numSpotShadows!==m||x.numSpotMaps!==g||x.numLightProbes!==_)&&(r.directional.length=l,r.spot.length=u,r.rectArea.length=c,r.point.length=h,r.hemi.length=d,r.directionalShadow.length=p,r.directionalShadowMap.length=p,r.pointShadow.length=f,r.pointShadowMap.length=f,r.spotShadow.length=m,r.spotShadowMap.length=m,r.directionalShadowMatrix.length=p,r.pointShadowMatrix.length=f,r.spotLightMatrix.length=m+g-v,r.spotLightMap.length=g,r.numSpotLightShadowsWithMaps=v,r.numLightProbes=_,x.directionalLength=l,x.pointLength=h,x.spotLength=u,x.rectAreaLength=c,x.hemiLength=d,x.numDirectionalShadows=p,x.numPointShadows=f,x.numSpotShadows=m,x.numSpotMaps=g,x.numLightProbes=_,r.version=n2++)},setupView:function(e,t){let i=0,n=0,l=0,h=0,u=0,c=t.matrixWorldInverse;for(let t=0,d=e.length;t<d;t++){let d=e[t];if(d.isDirectionalLight){let e=r.directional[i];e.direction.setFromMatrixPosition(d.matrixWorld),s.setFromMatrixPosition(d.target.matrixWorld),e.direction.sub(s),e.direction.transformDirection(c),i++}else if(d.isSpotLight){let e=r.spot[l];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(c),e.direction.setFromMatrixPosition(d.matrixWorld),s.setFromMatrixPosition(d.target.matrixWorld),e.direction.sub(s),e.direction.transformDirection(c),l++}else if(d.isRectAreaLight){let e=r.rectArea[h];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(c),o.identity(),a.copy(d.matrixWorld),a.premultiply(c),o.extractRotation(a),e.halfWidth.set(.5*d.width,0,0),e.halfHeight.set(0,.5*d.height,0),e.halfWidth.applyMatrix4(o),e.halfHeight.applyMatrix4(o),h++}else if(d.isPointLight){let e=r.point[n];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(c),n++}else if(d.isHemisphereLight){let e=r.hemi[u];e.direction.setFromMatrixPosition(d.matrixWorld),e.direction.transformDirection(c),u++}}},state:r}}function n5(e){let t=new n4(e),i=[],n=[],r={lightsArray:i,shadowsArray:n,camera:null,lights:t,transmissionRenderTarget:{}};return{init:function(e){r.camera=e,i.length=0,n.length=0},state:r,setupLights:function(){t.setup(i)},setupLightsView:function(e){t.setupView(i,e)},pushLight:function(e){i.push(e)},pushShadow:function(e){n.push(e)}}}function n6(e){let t=new WeakMap;return{get:function(i,n=0){let r,s=t.get(i);return void 0===s?(r=new n5(e),t.set(i,[r])):n>=s.length?(r=new n5(e),s.push(r)):r=s[n],r},dispose:function(){t=new WeakMap}}}class n8 extends tn{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class n9 extends tn{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function n7(e,t,i){let n=new t3,r=new M,s=new M,a=new V,o=new n8({depthPacking:3201}),l=new n9,h={},u=i.maxTextureSize,c={0:1,1:0,2:2},d=new tH({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new M},radius:{value:4}},vertexShader:"void main() {\n	gl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n	const float samples = float( VSM_SAMPLES );\n	float mean = 0.0;\n	float squared_mean = 0.0;\n	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n	for ( float i = 0.0; i < samples; i ++ ) {\n		float uvOffset = uvStart + i * uvStride;\n		#ifdef HORIZONTAL_PASS\n			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n			mean += distribution.x;\n			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n		#else\n			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n			mean += depth;\n			squared_mean += depth * depth;\n		#endif\n	}\n	mean = mean / samples;\n	squared_mean = squared_mean / samples;\n	float std_dev = sqrt( squared_mean - mean * mean );\n	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=d.clone();p.defines.HORIZONTAL_PASS=1;let f=new t_;f.setAttribute("position",new to(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let m=new tO(f,d),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1;let v=this.type;function _(t,i,n,r){let s=null,a=!0===n.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==a)s=a;else if(s=!0===n.isPointLight?l:o,e.localClippingEnabled&&!0===i.clipShadows&&Array.isArray(i.clippingPlanes)&&0!==i.clippingPlanes.length||i.displacementMap&&0!==i.displacementScale||i.alphaMap&&i.alphaTest>0||i.map&&i.alphaTest>0){let e=s.uuid,t=i.uuid,n=h[e];void 0===n&&(n={},h[e]=n);let r=n[t];void 0===r&&(r=s.clone(),n[t]=r,i.addEventListener("dispose",x)),s=r}return s.visible=i.visible,s.wireframe=i.wireframe,3===r?s.side=null!==i.shadowSide?i.shadowSide:i.side:s.side=null!==i.shadowSide?i.shadowSide:c[i.side],s.alphaMap=i.alphaMap,s.alphaTest=i.alphaTest,s.map=i.map,s.clipShadows=i.clipShadows,s.clippingPlanes=i.clippingPlanes,s.clipIntersection=i.clipIntersection,s.displacementMap=i.displacementMap,s.displacementScale=i.displacementScale,s.displacementBias=i.displacementBias,s.wireframeLinewidth=i.wireframeLinewidth,s.linewidth=i.linewidth,!0===n.isPointLight&&!0===s.isMeshDistanceMaterial&&(e.properties.get(s).light=n),s}function x(e){for(let t in e.target.removeEventListener("dispose",x),h){let i=h[t],n=e.target.uuid;n in i&&(i[n].dispose(),delete i[n])}}this.render=function(i,o,l){if(!1===g.enabled||!1===g.autoUpdate&&!1===g.needsUpdate||0===i.length)return;let h=e.getRenderTarget(),c=e.getActiveCubeFace(),f=e.getActiveMipmapLevel(),x=e.state;x.setBlending(0),x.buffers.color.setClear(1,1,1,1),x.buffers.depth.setTest(!0),x.setScissorTest(!1);let y=3!==v&&3===this.type,M=3===v&&3!==this.type;for(let h=0,c=i.length;h<c;h++){let c=i[h],f=c.shadow;if(void 0===f){console.warn("THREE.WebGLShadowMap:",c,"has no shadow.");continue}if(!1===f.autoUpdate&&!1===f.needsUpdate)continue;r.copy(f.mapSize);let g=f.getFrameExtents();if(r.multiply(g),s.copy(f.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/g.x),r.x=s.x*g.x,f.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/g.y),r.y=s.y*g.y,f.mapSize.y=s.y)),null===f.map||!0===y||!0===M){let e=3!==this.type?{minFilter:1003,magFilter:1003}:{};null!==f.map&&f.map.dispose(),f.map=new G(r.x,r.y,e),f.map.texture.name=c.name+".shadowMap",f.camera.updateProjectionMatrix()}e.setRenderTarget(f.map),e.clear();let v=f.getViewportCount();for(let i=0;i<v;i++){let r=f.getViewport(i);a.set(s.x*r.x,s.y*r.y,s.x*r.z,s.y*r.w),x.viewport(a),f.updateMatrices(c,i),n=f.getFrustum(),function i(r,s,a,o,l){if(!1===r.visible)return;if(r.layers.test(s.layers)&&(r.isMesh||r.isLine||r.isPoints)&&(r.castShadow||r.receiveShadow&&3===l)&&(!r.frustumCulled||n.intersectsObject(r))){r.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,r.matrixWorld);let i=t.update(r),n=r.material;if(Array.isArray(n)){let t=i.groups;for(let h=0,u=t.length;h<u;h++){let u=t[h],c=n[u.materialIndex];if(c&&c.visible){let t=_(r,c,o,l);r.onBeforeShadow(e,r,s,a,i,t,u),e.renderBufferDirect(a,null,i,t,r,u),r.onAfterShadow(e,r,s,a,i,t,u)}}}else if(n.visible){let t=_(r,n,o,l);r.onBeforeShadow(e,r,s,a,i,t,null),e.renderBufferDirect(a,null,i,t,r,null),r.onAfterShadow(e,r,s,a,i,t,null)}}let h=r.children;for(let e=0,t=h.length;e<t;e++)i(h[e],s,a,o,l)}(o,l,f.camera,c,this.type)}!0!==f.isPointLightShadow&&3===this.type&&function(i,n){let s=t.update(m);d.defines.VSM_SAMPLES!==i.blurSamples&&(d.defines.VSM_SAMPLES=i.blurSamples,p.defines.VSM_SAMPLES=i.blurSamples,d.needsUpdate=!0,p.needsUpdate=!0),null===i.mapPass&&(i.mapPass=new G(r.x,r.y)),d.uniforms.shadow_pass.value=i.map.texture,d.uniforms.resolution.value=i.mapSize,d.uniforms.radius.value=i.radius,e.setRenderTarget(i.mapPass),e.clear(),e.renderBufferDirect(n,null,s,d,m,null),p.uniforms.shadow_pass.value=i.mapPass.texture,p.uniforms.resolution.value=i.mapSize,p.uniforms.radius.value=i.radius,e.setRenderTarget(i.map),e.clear(),e.renderBufferDirect(n,null,s,p,m,null)}(f,l),f.needsUpdate=!1}v=this.type,g.needsUpdate=!1,e.setRenderTarget(h,c,f)}}function re(e){let t=new function(){let t=!1,i=new V,n=null,r=new V(0,0,0,0);return{setMask:function(i){n===i||t||(e.colorMask(i,i,i,i),n=i)},setLocked:function(e){t=e},setClear:function(t,n,s,a,o){!0===o&&(t*=a,n*=a,s*=a),i.set(t,n,s,a),!1===r.equals(i)&&(e.clearColor(t,n,s,a),r.copy(i))},reset:function(){t=!1,n=null,r.set(-1,0,0,0)}}},i=new function(){let t=!1,i=null,n=null,r=null;return{setTest:function(t){t?B(e.DEPTH_TEST):k(e.DEPTH_TEST)},setMask:function(n){i===n||t||(e.depthMask(n),i=n)},setFunc:function(t){if(n!==t){switch(t){case 0:e.depthFunc(e.NEVER);break;case 1:e.depthFunc(e.ALWAYS);break;case 2:e.depthFunc(e.LESS);break;case 3:default:e.depthFunc(e.LEQUAL);break;case 4:e.depthFunc(e.EQUAL);break;case 5:e.depthFunc(e.GEQUAL);break;case 6:e.depthFunc(e.GREATER);break;case 7:e.depthFunc(e.NOTEQUAL)}n=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,i=null,n=null,r=null}}},n=new function(){let t=!1,i=null,n=null,r=null,s=null,a=null,o=null,l=null,h=null;return{setTest:function(i){t||(i?B(e.STENCIL_TEST):k(e.STENCIL_TEST))},setMask:function(n){i===n||t||(e.stencilMask(n),i=n)},setFunc:function(t,i,a){(n!==t||r!==i||s!==a)&&(e.stencilFunc(t,i,a),n=t,r=i,s=a)},setOp:function(t,i,n){(a!==t||o!==i||l!==n)&&(e.stencilOp(t,i,n),a=t,o=i,l=n)},setLocked:function(e){t=e},setClear:function(t){h!==t&&(e.clearStencil(t),h=t)},reset:function(){t=!1,i=null,n=null,r=null,s=null,a=null,o=null,l=null,h=null}}},r=new WeakMap,s=new WeakMap,a={},o={},l=new WeakMap,h=[],u=null,c=!1,d=null,p=null,f=null,m=null,g=null,v=null,_=null,x=new te(0,0,0),y=0,M=!1,S=null,b=null,E=null,T=null,w=null,A=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),C=!1,P=e.getParameter(e.VERSION);-1!==P.indexOf("WebGL")?C=parseFloat(/^WebGL (\d)/.exec(P)[1])>=1:-1!==P.indexOf("OpenGL ES")&&(C=parseFloat(/^OpenGL ES (\d)/.exec(P)[1])>=2);let R=null,L={},D=e.getParameter(e.SCISSOR_BOX),I=e.getParameter(e.VIEWPORT),U=new V().fromArray(D),N=new V().fromArray(I);function O(t,i,n,r){let s=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let a=0;a<n;a++)t===e.TEXTURE_3D||t===e.TEXTURE_2D_ARRAY?e.texImage3D(i,0,e.RGBA,1,1,r,0,e.RGBA,e.UNSIGNED_BYTE,s):e.texImage2D(i+a,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,s);return a}let F={};function B(t){!0!==a[t]&&(e.enable(t),a[t]=!0)}function k(t){!1!==a[t]&&(e.disable(t),a[t]=!1)}F[e.TEXTURE_2D]=O(e.TEXTURE_2D,e.TEXTURE_2D,1),F[e.TEXTURE_CUBE_MAP]=O(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),F[e.TEXTURE_2D_ARRAY]=O(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),F[e.TEXTURE_3D]=O(e.TEXTURE_3D,e.TEXTURE_3D,1,1),t.setClear(0,0,0,1),i.setClear(1),n.setClear(0),B(e.DEPTH_TEST),i.setFunc(3),W(!1),X(1),B(e.CULL_FACE),G(0);let z={100:e.FUNC_ADD,101:e.FUNC_SUBTRACT,102:e.FUNC_REVERSE_SUBTRACT};z[103]=e.MIN,z[104]=e.MAX;let H={200:e.ZERO,201:e.ONE,202:e.SRC_COLOR,204:e.SRC_ALPHA,210:e.SRC_ALPHA_SATURATE,208:e.DST_COLOR,206:e.DST_ALPHA,203:e.ONE_MINUS_SRC_COLOR,205:e.ONE_MINUS_SRC_ALPHA,209:e.ONE_MINUS_DST_COLOR,207:e.ONE_MINUS_DST_ALPHA,211:e.CONSTANT_COLOR,212:e.ONE_MINUS_CONSTANT_COLOR,213:e.CONSTANT_ALPHA,214:e.ONE_MINUS_CONSTANT_ALPHA};function G(t,i,n,r,s,a,o,l,h,u){if(0===t){!0===c&&(k(e.BLEND),c=!1);return}if(!1===c&&(B(e.BLEND),c=!0),5!==t){if(t!==d||u!==M){if((100!==p||100!==g)&&(e.blendEquation(e.FUNC_ADD),p=100,g=100),u)switch(t){case 1:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.ONE,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}f=null,m=null,v=null,_=null,x.set(0,0,0),y=0,d=t,M=u}return}s=s||i,a=a||n,o=o||r,(i!==p||s!==g)&&(e.blendEquationSeparate(z[i],z[s]),p=i,g=s),(n!==f||r!==m||a!==v||o!==_)&&(e.blendFuncSeparate(H[n],H[r],H[a],H[o]),f=n,m=r,v=a,_=o),(!1===l.equals(x)||h!==y)&&(e.blendColor(l.r,l.g,l.b,h),x.copy(l),y=h),d=t,M=!1}function W(t){S!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),S=t)}function X(t){0!==t?(B(e.CULL_FACE),t!==b&&(1===t?e.cullFace(e.BACK):2===t?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):k(e.CULL_FACE),b=t}function j(t,i,n){t?(B(e.POLYGON_OFFSET_FILL),(T!==i||w!==n)&&(e.polygonOffset(i,n),T=i,w=n)):k(e.POLYGON_OFFSET_FILL)}return{buffers:{color:t,depth:i,stencil:n},enable:B,disable:k,bindFramebuffer:function(t,i){return o[t]!==i&&(e.bindFramebuffer(t,i),o[t]=i,t===e.DRAW_FRAMEBUFFER&&(o[e.FRAMEBUFFER]=i),t===e.FRAMEBUFFER&&(o[e.DRAW_FRAMEBUFFER]=i),!0)},drawBuffers:function(t,i){let n=h,r=!1;if(t){void 0===(n=l.get(i))&&(n=[],l.set(i,n));let s=t.textures;if(n.length!==s.length||n[0]!==e.COLOR_ATTACHMENT0){for(let t=0,i=s.length;t<i;t++)n[t]=e.COLOR_ATTACHMENT0+t;n.length=s.length,r=!0}}else n[0]!==e.BACK&&(n[0]=e.BACK,r=!0);r&&e.drawBuffers(n)},useProgram:function(t){return u!==t&&(e.useProgram(t),u=t,!0)},setBlending:G,setMaterial:function(r,s){2===r.side?k(e.CULL_FACE):B(e.CULL_FACE);let a=1===r.side;s&&(a=!a),W(a),1===r.blending&&!1===r.transparent?G(0):G(r.blending,r.blendEquation,r.blendSrc,r.blendDst,r.blendEquationAlpha,r.blendSrcAlpha,r.blendDstAlpha,r.blendColor,r.blendAlpha,r.premultipliedAlpha),i.setFunc(r.depthFunc),i.setTest(r.depthTest),i.setMask(r.depthWrite),t.setMask(r.colorWrite);let o=r.stencilWrite;n.setTest(o),o&&(n.setMask(r.stencilWriteMask),n.setFunc(r.stencilFunc,r.stencilRef,r.stencilFuncMask),n.setOp(r.stencilFail,r.stencilZFail,r.stencilZPass)),j(r.polygonOffset,r.polygonOffsetFactor,r.polygonOffsetUnits),!0===r.alphaToCoverage?B(e.SAMPLE_ALPHA_TO_COVERAGE):k(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:W,setCullFace:X,setLineWidth:function(t){t!==E&&(C&&e.lineWidth(t),E=t)},setPolygonOffset:j,setScissorTest:function(t){t?B(e.SCISSOR_TEST):k(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+A-1),R!==t&&(e.activeTexture(t),R=t)},bindTexture:function(t,i,n){void 0===n&&(n=null===R?e.TEXTURE0+A-1:R);let r=L[n];void 0===r&&(r={type:void 0,texture:void 0},L[n]=r),(r.type!==t||r.texture!==i)&&(R!==n&&(e.activeTexture(n),R=n),e.bindTexture(t,i||F[t]),r.type=t,r.texture=i)},unbindTexture:function(){let t=L[R];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},updateUBOMapping:function(t,i){let n=s.get(i);void 0===n&&(n=new WeakMap,s.set(i,n));let r=n.get(t);void 0===r&&(r=e.getUniformBlockIndex(i,t.name),n.set(t,r))},uniformBlockBinding:function(t,i){let n=s.get(i).get(t);r.get(i)!==n&&(e.uniformBlockBinding(i,n,t.__bindingPointIndex),r.set(i,n))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===U.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),U.copy(t))},viewport:function(t){!1===N.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),N.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),e.clearDepth(1),e.stencilMask(0xffffffff),e.stencilFunc(e.ALWAYS,0,0xffffffff),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),a={},R=null,L={},o={},l=new WeakMap,h=[],u=null,c=!1,d=null,p=null,f=null,m=null,g=null,v=null,_=null,x=new te(0,0,0),y=0,M=!1,S=null,b=null,E=null,T=null,w=null,U.set(0,0,e.canvas.width,e.canvas.height),N.set(0,0,e.canvas.width,e.canvas.height),t.reset(),i.reset(),n.reset()}}}function rt(e,t,i,n){let r=function(e){switch(e){case 1009:case 1010:return{byteLength:1,components:1};case 1012:case 1011:case 1016:return{byteLength:2,components:1};case 1017:case 1018:return{byteLength:2,components:4};case 1014:case 1013:case 1015:return{byteLength:4,components:1};case 35902:return{byteLength:4,components:3}}throw Error(`Unknown texture type ${e}.`)}(n);switch(i){case 1021:case 1024:return e*t;case 1025:return e*t*2;case 1028:case 1029:return e*t/r.components*r.byteLength;case 1030:case 1031:return e*t*2/r.components*r.byteLength;case 1022:return e*t*3/r.components*r.byteLength;case 1023:case 1033:return e*t*4/r.components*r.byteLength;case 33776:case 33777:case 36196:case 37492:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case 33778:case 33779:case 37496:case 37808:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case 35841:case 35843:return Math.max(e,16)*Math.max(t,8)/4;case 35840:case 35842:return Math.max(e,8)*Math.max(t,8)/2;case 37809:return Math.floor((e+4)/5)*Math.floor((t+3)/4)*16;case 37810:return Math.floor((e+4)/5)*Math.floor((t+4)/5)*16;case 37811:return Math.floor((e+5)/6)*Math.floor((t+4)/5)*16;case 37812:return Math.floor((e+5)/6)*Math.floor((t+5)/6)*16;case 37813:return Math.floor((e+7)/8)*Math.floor((t+4)/5)*16;case 37814:return Math.floor((e+7)/8)*Math.floor((t+5)/6)*16;case 37815:return Math.floor((e+7)/8)*Math.floor((t+7)/8)*16;case 37816:return Math.floor((e+9)/10)*Math.floor((t+4)/5)*16;case 37817:return Math.floor((e+9)/10)*Math.floor((t+5)/6)*16;case 37818:return Math.floor((e+9)/10)*Math.floor((t+7)/8)*16;case 37819:return Math.floor((e+9)/10)*Math.floor((t+9)/10)*16;case 37820:return Math.floor((e+11)/12)*Math.floor((t+9)/10)*16;case 37821:return Math.floor((e+11)/12)*Math.floor((t+11)/12)*16;case 36492:case 36494:case 36495:case 36285:case 36286:return Math.ceil(e/4)*Math.ceil(t/4)*16;case 36283:case 36284:return Math.ceil(e/4)*Math.ceil(t/4)*8}throw Error(`Unable to determine texture byte length for ${i} format.`)}function ri(e,t,i,n,r,s,o){let l,c=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,d="u">typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),p=new M,f=new WeakMap,m=new WeakMap,g=!1;try{g="u">typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function v(e,t){return g?new OffscreenCanvas(e,t):T("canvas")}function _(e,t,i){let n=1,r=j(e);if((r.width>i||r.height>i)&&(n=i/Math.max(r.width,r.height)),n<1)if("u">typeof HTMLImageElement&&e instanceof HTMLImageElement||"u">typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"u">typeof ImageBitmap&&e instanceof ImageBitmap||"u">typeof VideoFrame&&e instanceof VideoFrame){let i=Math.floor(n*r.width),s=Math.floor(n*r.height);void 0===l&&(l=v(i,s));let a=t?v(i,s):l;return a.width=i,a.height=s,a.getContext("2d").drawImage(e,0,0,i,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+r.width+"x"+r.height+") to ("+i+"x"+s+")."),a}else"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+r.width+"x"+r.height+").");return e}function x(e){return e.generateMipmaps&&1003!==e.minFilter&&1006!==e.minFilter}function y(t){e.generateMipmap(t)}function S(i,n,r,s,a=!1){if(null!==i){if(void 0!==e[i])return e[i];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+i+"'")}let o=n;if(n===e.RED&&(r===e.FLOAT&&(o=e.R32F),r===e.HALF_FLOAT&&(o=e.R16F),r===e.UNSIGNED_BYTE&&(o=e.R8)),n===e.RED_INTEGER&&(r===e.UNSIGNED_BYTE&&(o=e.R8UI),r===e.UNSIGNED_SHORT&&(o=e.R16UI),r===e.UNSIGNED_INT&&(o=e.R32UI),r===e.BYTE&&(o=e.R8I),r===e.SHORT&&(o=e.R16I),r===e.INT&&(o=e.R32I)),n===e.RG&&(r===e.FLOAT&&(o=e.RG32F),r===e.HALF_FLOAT&&(o=e.RG16F),r===e.UNSIGNED_BYTE&&(o=e.RG8)),n===e.RG_INTEGER&&(r===e.UNSIGNED_BYTE&&(o=e.RG8UI),r===e.UNSIGNED_SHORT&&(o=e.RG16UI),r===e.UNSIGNED_INT&&(o=e.RG32UI),r===e.BYTE&&(o=e.RG8I),r===e.SHORT&&(o=e.RG16I),r===e.INT&&(o=e.RG32I)),n===e.RGB&&r===e.UNSIGNED_INT_5_9_9_9_REV&&(o=e.RGB9_E5),n===e.RGBA){let t=a?h:D.getTransfer(s);r===e.FLOAT&&(o=e.RGBA32F),r===e.HALF_FLOAT&&(o=e.RGBA16F),r===e.UNSIGNED_BYTE&&(o=t===u?e.SRGB8_ALPHA8:e.RGBA8),r===e.UNSIGNED_SHORT_4_4_4_4&&(o=e.RGBA4),r===e.UNSIGNED_SHORT_5_5_5_1&&(o=e.RGB5_A1)}return(o===e.R16F||o===e.R32F||o===e.RG16F||o===e.RG32F||o===e.RGBA16F||o===e.RGBA32F)&&t.get("EXT_color_buffer_float"),o}function b(t,i){let n;return t?null===i||1014===i||1020===i?n=e.DEPTH24_STENCIL8:1015===i?n=e.DEPTH32F_STENCIL8:1012===i&&(n=e.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===i||1014===i||1020===i?n=e.DEPTH_COMPONENT24:1015===i?n=e.DEPTH_COMPONENT32F:1012===i&&(n=e.DEPTH_COMPONENT16),n}function E(e,t){return!0===x(e)||e.isFramebufferTexture&&1003!==e.minFilter&&1006!==e.minFilter?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function w(e){let t=e.target;t.removeEventListener("dispose",w),function(e){let t=n.get(e);if(void 0===t.__webglInit)return;let i=e.source,r=m.get(i);if(r){let n=r[t.__cacheKey];n.usedTimes--,0===n.usedTimes&&C(e),0===Object.keys(r).length&&m.delete(i)}n.remove(e)}(t),t.isVideoTexture&&f.delete(t)}function A(t){let i=t.target;i.removeEventListener("dispose",A),function(t){let i=n.get(t);if(t.depthTexture&&t.depthTexture.dispose(),t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++){if(Array.isArray(i.__webglFramebuffer[t]))for(let n=0;n<i.__webglFramebuffer[t].length;n++)e.deleteFramebuffer(i.__webglFramebuffer[t][n]);else e.deleteFramebuffer(i.__webglFramebuffer[t]);i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[t])}else{if(Array.isArray(i.__webglFramebuffer))for(let t=0;t<i.__webglFramebuffer.length;t++)e.deleteFramebuffer(i.__webglFramebuffer[t]);else e.deleteFramebuffer(i.__webglFramebuffer);if(i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&e.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(let t=0;t<i.__webglColorRenderbuffer.length;t++)i.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(i.__webglColorRenderbuffer[t]);i.__webglDepthRenderbuffer&&e.deleteRenderbuffer(i.__webglDepthRenderbuffer)}let r=t.textures;for(let t=0,i=r.length;t<i;t++){let i=n.get(r[t]);i.__webglTexture&&(e.deleteTexture(i.__webglTexture),o.memory.textures--),n.remove(r[t])}n.remove(t)}(i)}function C(t){let i=n.get(t);e.deleteTexture(i.__webglTexture);let r=t.source,s=m.get(r);delete s[i.__cacheKey],o.memory.textures--}let P=0;function R(t,r){var s;let a,l=n.get(t);if(t.isVideoTexture&&(s=t,a=o.render.frame,f.get(s)!==a&&(f.set(s,a),s.update())),!1===t.isRenderTargetTexture&&t.version>0&&l.__version!==t.version){let e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==e.complete)return void F(l,t,r);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}i.bindTexture(e.TEXTURE_2D,l.__webglTexture,e.TEXTURE0+r)}let L={1e3:e.REPEAT,1001:e.CLAMP_TO_EDGE,1002:e.MIRRORED_REPEAT},I={1003:e.NEAREST,1004:e.NEAREST_MIPMAP_NEAREST,1005:e.NEAREST_MIPMAP_LINEAR,1006:e.LINEAR,1007:e.LINEAR_MIPMAP_NEAREST,1008:e.LINEAR_MIPMAP_LINEAR},U={512:e.NEVER,519:e.ALWAYS,513:e.LESS,515:e.LEQUAL,514:e.EQUAL,518:e.GEQUAL,516:e.GREATER,517:e.NOTEQUAL};function N(i,s){if((1015===s.type&&!1===t.has("OES_texture_float_linear")&&(1006===s.magFilter||1007===s.magFilter||1005===s.magFilter||1008===s.magFilter||1006===s.minFilter||1007===s.minFilter||1005===s.minFilter||1008===s.minFilter)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),e.texParameteri(i,e.TEXTURE_WRAP_S,L[s.wrapS]),e.texParameteri(i,e.TEXTURE_WRAP_T,L[s.wrapT]),(i===e.TEXTURE_3D||i===e.TEXTURE_2D_ARRAY)&&e.texParameteri(i,e.TEXTURE_WRAP_R,L[s.wrapR]),e.texParameteri(i,e.TEXTURE_MAG_FILTER,I[s.magFilter]),e.texParameteri(i,e.TEXTURE_MIN_FILTER,I[s.minFilter]),s.compareFunction&&(e.texParameteri(i,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(i,e.TEXTURE_COMPARE_FUNC,U[s.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic"))&&1003!==s.magFilter&&(1005===s.minFilter||1008===s.minFilter)&&(1015!==s.type||!1!==t.has("OES_texture_float_linear"))&&(s.anisotropy>1||n.get(s).__currentAnisotropy)){let a=t.get("EXT_texture_filter_anisotropic");e.texParameterf(i,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,r.getMaxAnisotropy())),n.get(s).__currentAnisotropy=s.anisotropy}}function O(t,i){let n,r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,i.addEventListener("dispose",w));let s=i.source,a=m.get(s);void 0===a&&(a={},m.set(s,a));let l=((n=[]).push(i.wrapS),n.push(i.wrapT),n.push(i.wrapR||0),n.push(i.magFilter),n.push(i.minFilter),n.push(i.anisotropy),n.push(i.internalFormat),n.push(i.format),n.push(i.type),n.push(i.generateMipmaps),n.push(i.premultiplyAlpha),n.push(i.flipY),n.push(i.unpackAlignment),n.push(i.colorSpace),n.join());if(l!==t.__cacheKey){void 0===a[l]&&(a[l]={texture:e.createTexture(),usedTimes:0},o.memory.textures++,r=!0),a[l].usedTimes++;let n=a[t.__cacheKey];void 0!==n&&(a[t.__cacheKey].usedTimes--,0===n.usedTimes&&C(i)),t.__cacheKey=l,t.__webglTexture=a[l].texture}return r}function F(t,a,o){let l=e.TEXTURE_2D;(a.isDataArrayTexture||a.isCompressedArrayTexture)&&(l=e.TEXTURE_2D_ARRAY),a.isData3DTexture&&(l=e.TEXTURE_3D);let h=O(t,a),u=a.source;i.bindTexture(l,t.__webglTexture,e.TEXTURE0+o);let c=n.get(u);if(u.version!==c.__version||!0===h){let t;i.activeTexture(e.TEXTURE0+o);let n=D.getPrimaries(D.workingColorSpace),d=""===a.colorSpace?null:D.getPrimaries(a.colorSpace),p=""===a.colorSpace||n===d?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,a.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,a.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,p);let f=_(a.image,!1,r.maxTextureSize);f=X(a,f);let m=s.convert(a.format,a.colorSpace),g=s.convert(a.type),v=S(a.internalFormat,m,g,a.colorSpace,a.isVideoTexture);N(l,a);let M=a.mipmaps,T=!0!==a.isVideoTexture,w=void 0===c.__version||!0===h,A=u.dataReady,C=E(a,f);if(a.isDepthTexture)v=b(1027===a.format,a.type),w&&(T?i.texStorage2D(e.TEXTURE_2D,1,v,f.width,f.height):i.texImage2D(e.TEXTURE_2D,0,v,f.width,f.height,0,m,g,null));else if(a.isDataTexture)if(M.length>0){T&&w&&i.texStorage2D(e.TEXTURE_2D,C,v,M[0].width,M[0].height);for(let n=0,r=M.length;n<r;n++)t=M[n],T?A&&i.texSubImage2D(e.TEXTURE_2D,n,0,0,t.width,t.height,m,g,t.data):i.texImage2D(e.TEXTURE_2D,n,v,t.width,t.height,0,m,g,t.data);a.generateMipmaps=!1}else T?(w&&i.texStorage2D(e.TEXTURE_2D,C,v,f.width,f.height),A&&i.texSubImage2D(e.TEXTURE_2D,0,0,0,f.width,f.height,m,g,f.data)):i.texImage2D(e.TEXTURE_2D,0,v,f.width,f.height,0,m,g,f.data);else if(a.isCompressedTexture)if(a.isCompressedArrayTexture){T&&w&&i.texStorage3D(e.TEXTURE_2D_ARRAY,C,v,M[0].width,M[0].height,f.depth);for(let n=0,r=M.length;n<r;n++)if(t=M[n],1023!==a.format)if(null!==m)if(T){if(A)if(a.layerUpdates.size>0){let r=rt(t.width,t.height,a.format,a.type);for(let s of a.layerUpdates){let a=t.data.subarray(s*r/t.data.BYTES_PER_ELEMENT,(s+1)*r/t.data.BYTES_PER_ELEMENT);i.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,n,0,0,s,t.width,t.height,1,m,a,0,0)}a.clearLayerUpdates()}else i.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,n,0,0,0,t.width,t.height,f.depth,m,t.data,0,0)}else i.compressedTexImage3D(e.TEXTURE_2D_ARRAY,n,v,t.width,t.height,f.depth,0,t.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else T?A&&i.texSubImage3D(e.TEXTURE_2D_ARRAY,n,0,0,0,t.width,t.height,f.depth,m,g,t.data):i.texImage3D(e.TEXTURE_2D_ARRAY,n,v,t.width,t.height,f.depth,0,m,g,t.data)}else{T&&w&&i.texStorage2D(e.TEXTURE_2D,C,v,M[0].width,M[0].height);for(let n=0,r=M.length;n<r;n++)t=M[n],1023!==a.format?null!==m?T?A&&i.compressedTexSubImage2D(e.TEXTURE_2D,n,0,0,t.width,t.height,m,t.data):i.compressedTexImage2D(e.TEXTURE_2D,n,v,t.width,t.height,0,t.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):T?A&&i.texSubImage2D(e.TEXTURE_2D,n,0,0,t.width,t.height,m,g,t.data):i.texImage2D(e.TEXTURE_2D,n,v,t.width,t.height,0,m,g,t.data)}else if(a.isDataArrayTexture)if(T){if(w&&i.texStorage3D(e.TEXTURE_2D_ARRAY,C,v,f.width,f.height,f.depth),A)if(a.layerUpdates.size>0){let t=rt(f.width,f.height,a.format,a.type);for(let n of a.layerUpdates){let r=f.data.subarray(n*t/f.data.BYTES_PER_ELEMENT,(n+1)*t/f.data.BYTES_PER_ELEMENT);i.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,n,f.width,f.height,1,m,g,r)}a.clearLayerUpdates()}else i.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,f.width,f.height,f.depth,m,g,f.data)}else i.texImage3D(e.TEXTURE_2D_ARRAY,0,v,f.width,f.height,f.depth,0,m,g,f.data);else if(a.isData3DTexture)T?(w&&i.texStorage3D(e.TEXTURE_3D,C,v,f.width,f.height,f.depth),A&&i.texSubImage3D(e.TEXTURE_3D,0,0,0,0,f.width,f.height,f.depth,m,g,f.data)):i.texImage3D(e.TEXTURE_3D,0,v,f.width,f.height,f.depth,0,m,g,f.data);else if(a.isFramebufferTexture){if(w)if(T)i.texStorage2D(e.TEXTURE_2D,C,v,f.width,f.height);else{let t=f.width,n=f.height;for(let r=0;r<C;r++)i.texImage2D(e.TEXTURE_2D,r,v,t,n,0,m,g,null),t>>=1,n>>=1}}else if(M.length>0){if(T&&w){let t=j(M[0]);i.texStorage2D(e.TEXTURE_2D,C,v,t.width,t.height)}for(let n=0,r=M.length;n<r;n++)t=M[n],T?A&&i.texSubImage2D(e.TEXTURE_2D,n,0,0,m,g,t):i.texImage2D(e.TEXTURE_2D,n,v,m,g,t);a.generateMipmaps=!1}else if(T){if(w){let t=j(f);i.texStorage2D(e.TEXTURE_2D,C,v,t.width,t.height)}A&&i.texSubImage2D(e.TEXTURE_2D,0,0,0,m,g,f)}else i.texImage2D(e.TEXTURE_2D,0,v,m,g,f);x(a)&&y(l),c.__version=u.version,a.onUpdate&&a.onUpdate(a)}t.__version=a.version}function B(t,r,a,o,l,h){let u=s.convert(a.format,a.colorSpace),d=s.convert(a.type),p=S(a.internalFormat,u,d,a.colorSpace);if(!n.get(r).__hasExternalTextures){let t=Math.max(1,r.width>>h),n=Math.max(1,r.height>>h);l===e.TEXTURE_3D||l===e.TEXTURE_2D_ARRAY?i.texImage3D(l,h,p,t,n,r.depth,0,u,d,null):i.texImage2D(l,h,p,t,n,0,u,d,null)}i.bindFramebuffer(e.FRAMEBUFFER,t),W(r)?c.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,o,l,n.get(a).__webglTexture,0,G(r)):(l===e.TEXTURE_2D||l>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&l<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,o,l,n.get(a).__webglTexture,h),i.bindFramebuffer(e.FRAMEBUFFER,null)}function k(t,i,n){if(e.bindRenderbuffer(e.RENDERBUFFER,t),i.depthBuffer){let r=i.depthTexture,s=r&&r.isDepthTexture?r.type:null,a=b(i.stencilBuffer,s),o=i.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,l=G(i);W(i)?c.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,l,a,i.width,i.height):n?e.renderbufferStorageMultisample(e.RENDERBUFFER,l,a,i.width,i.height):e.renderbufferStorage(e.RENDERBUFFER,a,i.width,i.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,o,e.RENDERBUFFER,t)}else{let t=i.textures;for(let r=0;r<t.length;r++){let a=t[r],o=s.convert(a.format,a.colorSpace),l=s.convert(a.type),h=S(a.internalFormat,o,l,a.colorSpace),u=G(i);n&&!1===W(i)?e.renderbufferStorageMultisample(e.RENDERBUFFER,u,h,i.width,i.height):W(i)?c.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,u,h,i.width,i.height):e.renderbufferStorage(e.RENDERBUFFER,h,i.width,i.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function z(t){let r=n.get(t),s=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!r.__autoAllocateDepthBuffer){if(s)throw Error("target.depthTexture not supported in Cube render targets");var a=r.__webglFramebuffer;if(t&&t.isWebGLCubeRenderTarget)throw Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(e.FRAMEBUFFER,a),!(t.depthTexture&&t.depthTexture.isDepthTexture))throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");n.get(t.depthTexture).__webglTexture&&t.depthTexture.image.width===t.width&&t.depthTexture.image.height===t.height||(t.depthTexture.image.width=t.width,t.depthTexture.image.height=t.height,t.depthTexture.needsUpdate=!0),R(t.depthTexture,0);let o=n.get(t.depthTexture).__webglTexture,l=G(t);if(1026===t.depthTexture.format)W(t)?c.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o,0,l):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o,0);else if(1027===t.depthTexture.format)W(t)?c.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,o,0,l):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,o,0);else throw Error("Unknown depthTexture format")}else if(s){r.__webglDepthbuffer=[];for(let n=0;n<6;n++)i.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer[n]),r.__webglDepthbuffer[n]=e.createRenderbuffer(),k(r.__webglDepthbuffer[n],t,!1)}else i.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer),r.__webglDepthbuffer=e.createRenderbuffer(),k(r.__webglDepthbuffer,t,!1);i.bindFramebuffer(e.FRAMEBUFFER,null)}let V=[],H=[];function G(e){return Math.min(r.maxSamples,e.samples)}function W(e){let i=n.get(e);return e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==i.__useRenderToTexture}function X(e,t){let i=e.colorSpace,n=e.format,r=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||i!==a&&""!==i&&(D.getTransfer(i)===u?(1023!==n||1009!==r)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",i)),t}function j(e){return"u">typeof HTMLImageElement&&e instanceof HTMLImageElement?(p.width=e.naturalWidth||e.width,p.height=e.naturalHeight||e.height):"u">typeof VideoFrame&&e instanceof VideoFrame?(p.width=e.displayWidth,p.height=e.displayHeight):(p.width=e.width,p.height=e.height),p}this.allocateTextureUnit=function(){let e=P;return e>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+r.maxTextures),P+=1,e},this.resetTextureUnits=function(){P=0},this.setTexture2D=R,this.setTexture2DArray=function(t,r){let s=n.get(t);t.version>0&&s.__version!==t.version?F(s,t,r):i.bindTexture(e.TEXTURE_2D_ARRAY,s.__webglTexture,e.TEXTURE0+r)},this.setTexture3D=function(t,r){let s=n.get(t);t.version>0&&s.__version!==t.version?F(s,t,r):i.bindTexture(e.TEXTURE_3D,s.__webglTexture,e.TEXTURE0+r)},this.setTextureCube=function(t,a){let o=n.get(t);t.version>0&&o.__version!==t.version?function(t,a,o){if(6!==a.image.length)return;let l=O(t,a),h=a.source;i.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+o);let u=n.get(h);if(h.version!==u.__version||!0===l){let t;i.activeTexture(e.TEXTURE0+o);let n=D.getPrimaries(D.workingColorSpace),c=""===a.colorSpace?null:D.getPrimaries(a.colorSpace),d=""===a.colorSpace||n===c?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,a.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,a.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,d);let p=a.isCompressedTexture||a.image[0].isCompressedTexture,f=a.image[0]&&a.image[0].isDataTexture,m=[];for(let e=0;e<6;e++)p||f?m[e]=f?a.image[e].image:a.image[e]:m[e]=_(a.image[e],!0,r.maxCubemapSize),m[e]=X(a,m[e]);let g=m[0],v=s.convert(a.format,a.colorSpace),M=s.convert(a.type),b=S(a.internalFormat,v,M,a.colorSpace),T=!0!==a.isVideoTexture,w=void 0===u.__version||!0===l,A=h.dataReady,C=E(a,g);if(N(e.TEXTURE_CUBE_MAP,a),p){T&&w&&i.texStorage2D(e.TEXTURE_CUBE_MAP,C,b,g.width,g.height);for(let n=0;n<6;n++){t=m[n].mipmaps;for(let r=0;r<t.length;r++){let s=t[r];1023!==a.format?null!==v?T?A&&i.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+n,r,0,0,s.width,s.height,v,s.data):i.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+n,r,b,s.width,s.height,0,s.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):T?A&&i.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+n,r,0,0,s.width,s.height,v,M,s.data):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+n,r,b,s.width,s.height,0,v,M,s.data)}}}else{if(t=a.mipmaps,T&&w){t.length>0&&C++;let n=j(m[0]);i.texStorage2D(e.TEXTURE_CUBE_MAP,C,b,n.width,n.height)}for(let n=0;n<6;n++)if(f){T?A&&i.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,0,0,m[n].width,m[n].height,v,M,m[n].data):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,b,m[n].width,m[n].height,0,v,M,m[n].data);for(let r=0;r<t.length;r++){let s=t[r].image[n].image;T?A&&i.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+n,r+1,0,0,s.width,s.height,v,M,s.data):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+n,r+1,b,s.width,s.height,0,v,M,s.data)}}else{T?A&&i.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,0,0,v,M,m[n]):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,b,v,M,m[n]);for(let r=0;r<t.length;r++){let s=t[r];T?A&&i.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+n,r+1,0,0,v,M,s.image[n]):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+n,r+1,b,v,M,s.image[n])}}}x(a)&&y(e.TEXTURE_CUBE_MAP),u.__version=h.version,a.onUpdate&&a.onUpdate(a)}t.__version=a.version}(o,t,a):i.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture,e.TEXTURE0+a)},this.rebindTextures=function(t,i,r){let s=n.get(t);void 0!==i&&B(s.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==r&&z(t)},this.setupRenderTarget=function(t){let r=t.texture,a=n.get(t),l=n.get(r);t.addEventListener("dispose",A);let h=t.textures,u=!0===t.isWebGLCubeRenderTarget,c=h.length>1;if(!c&&(void 0===l.__webglTexture&&(l.__webglTexture=e.createTexture()),l.__version=r.version,o.memory.textures++),u){a.__webglFramebuffer=[];for(let t=0;t<6;t++)if(r.mipmaps&&r.mipmaps.length>0){a.__webglFramebuffer[t]=[];for(let i=0;i<r.mipmaps.length;i++)a.__webglFramebuffer[t][i]=e.createFramebuffer()}else a.__webglFramebuffer[t]=e.createFramebuffer()}else{if(r.mipmaps&&r.mipmaps.length>0){a.__webglFramebuffer=[];for(let t=0;t<r.mipmaps.length;t++)a.__webglFramebuffer[t]=e.createFramebuffer()}else a.__webglFramebuffer=e.createFramebuffer();if(c)for(let t=0,i=h.length;t<i;t++){let i=n.get(h[t]);void 0===i.__webglTexture&&(i.__webglTexture=e.createTexture(),o.memory.textures++)}if(t.samples>0&&!1===W(t)){a.__webglMultisampledFramebuffer=e.createFramebuffer(),a.__webglColorRenderbuffer=[],i.bindFramebuffer(e.FRAMEBUFFER,a.__webglMultisampledFramebuffer);for(let i=0;i<h.length;i++){let n=h[i];a.__webglColorRenderbuffer[i]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,a.__webglColorRenderbuffer[i]);let r=s.convert(n.format,n.colorSpace),o=s.convert(n.type),l=S(n.internalFormat,r,o,n.colorSpace,!0===t.isXRRenderTarget),u=G(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,u,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+i,e.RENDERBUFFER,a.__webglColorRenderbuffer[i])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(a.__webglDepthRenderbuffer=e.createRenderbuffer(),k(a.__webglDepthRenderbuffer,t,!0)),i.bindFramebuffer(e.FRAMEBUFFER,null)}}if(u){i.bindTexture(e.TEXTURE_CUBE_MAP,l.__webglTexture),N(e.TEXTURE_CUBE_MAP,r);for(let i=0;i<6;i++)if(r.mipmaps&&r.mipmaps.length>0)for(let n=0;n<r.mipmaps.length;n++)B(a.__webglFramebuffer[i][n],t,r,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+i,n);else B(a.__webglFramebuffer[i],t,r,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0);x(r)&&y(e.TEXTURE_CUBE_MAP),i.unbindTexture()}else if(c){for(let r=0,s=h.length;r<s;r++){let s=h[r],o=n.get(s);i.bindTexture(e.TEXTURE_2D,o.__webglTexture),N(e.TEXTURE_2D,s),B(a.__webglFramebuffer,t,s,e.COLOR_ATTACHMENT0+r,e.TEXTURE_2D,0),x(s)&&y(e.TEXTURE_2D)}i.unbindTexture()}else{let n=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(n=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),i.bindTexture(n,l.__webglTexture),N(n,r),r.mipmaps&&r.mipmaps.length>0)for(let i=0;i<r.mipmaps.length;i++)B(a.__webglFramebuffer[i],t,r,e.COLOR_ATTACHMENT0,n,i);else B(a.__webglFramebuffer,t,r,e.COLOR_ATTACHMENT0,n,0);x(r)&&y(n),i.unbindTexture()}t.depthBuffer&&z(t)},this.updateRenderTargetMipmap=function(t){let r=t.textures;for(let s=0,a=r.length;s<a;s++){let a=r[s];if(x(a)){let r=t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,s=n.get(a).__webglTexture;i.bindTexture(r,s),y(r),i.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.samples>0){if(!1===W(t)){let r=t.textures,s=t.width,a=t.height,o=e.COLOR_BUFFER_BIT,l=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,h=n.get(t),u=r.length>1;if(u)for(let t=0;t<r.length;t++)i.bindFramebuffer(e.FRAMEBUFFER,h.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),i.bindFramebuffer(e.FRAMEBUFFER,h.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);i.bindFramebuffer(e.READ_FRAMEBUFFER,h.__webglMultisampledFramebuffer),i.bindFramebuffer(e.DRAW_FRAMEBUFFER,h.__webglFramebuffer);for(let i=0;i<r.length;i++){if(t.resolveDepthBuffer&&(t.depthBuffer&&(o|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&t.resolveStencilBuffer&&(o|=e.STENCIL_BUFFER_BIT)),u){e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,h.__webglColorRenderbuffer[i]);let t=n.get(r[i]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,s,a,0,0,s,a,o,e.NEAREST),!0===d&&(V.length=0,H.length=0,V.push(e.COLOR_ATTACHMENT0+i),t.depthBuffer&&!1===t.resolveDepthBuffer&&(V.push(l),H.push(l),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,H)),e.invalidateFramebuffer(e.READ_FRAMEBUFFER,V))}if(i.bindFramebuffer(e.READ_FRAMEBUFFER,null),i.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),u)for(let t=0;t<r.length;t++){i.bindFramebuffer(e.FRAMEBUFFER,h.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,h.__webglColorRenderbuffer[t]);let s=n.get(r[t]).__webglTexture;i.bindFramebuffer(e.FRAMEBUFFER,h.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,s,0)}i.bindFramebuffer(e.DRAW_FRAMEBUFFER,h.__webglMultisampledFramebuffer)}else if(t.depthBuffer&&!1===t.resolveDepthBuffer&&d){let i=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT;e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[i])}}},this.setupDepthRenderbuffer=z,this.setupFrameBufferTexture=B,this.useMultisampledRTT=W}function rn(e,t){return{convert:function(i,n=""){let r,s=D.getTransfer(n);if(1009===i)return e.UNSIGNED_BYTE;if(1017===i)return e.UNSIGNED_SHORT_4_4_4_4;if(1018===i)return e.UNSIGNED_SHORT_5_5_5_1;if(35902===i)return e.UNSIGNED_INT_5_9_9_9_REV;if(1010===i)return e.BYTE;if(1011===i)return e.SHORT;if(1012===i)return e.UNSIGNED_SHORT;if(1013===i)return e.INT;if(1014===i)return e.UNSIGNED_INT;if(1015===i)return e.FLOAT;if(1016===i)return e.HALF_FLOAT;if(1021===i)return e.ALPHA;if(1022===i)return e.RGB;if(1023===i)return e.RGBA;if(1024===i)return e.LUMINANCE;if(1025===i)return e.LUMINANCE_ALPHA;if(1026===i)return e.DEPTH_COMPONENT;if(1027===i)return e.DEPTH_STENCIL;if(1028===i)return e.RED;if(1029===i)return e.RED_INTEGER;if(1030===i)return e.RG;if(1031===i)return e.RG_INTEGER;if(1033===i)return e.RGBA_INTEGER;if(33776===i||33777===i||33778===i||33779===i)if(s===u){if(null===(r=t.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(33776===i)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(33777===i)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(33778===i)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(33779===i)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(r=t.get("WEBGL_compressed_texture_s3tc")))return null;if(33776===i)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===i)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===i)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===i)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===i||35841===i||35842===i||35843===i){if(null===(r=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(35840===i)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===i)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===i)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===i)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===i||37492===i||37496===i){if(null===(r=t.get("WEBGL_compressed_texture_etc")))return null;if(36196===i||37492===i)return s===u?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(37496===i)return s===u?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}if(37808===i||37809===i||37810===i||37811===i||37812===i||37813===i||37814===i||37815===i||37816===i||37817===i||37818===i||37819===i||37820===i||37821===i){if(null===(r=t.get("WEBGL_compressed_texture_astc")))return null;if(37808===i)return s===u?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===i)return s===u?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===i)return s===u?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===i)return s===u?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===i)return s===u?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===i)return s===u?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===i)return s===u?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===i)return s===u?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===i)return s===u?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===i)return s===u?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===i)return s===u?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===i)return s===u?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===i)return s===u?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===i)return s===u?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}if(36492===i||36494===i||36495===i){if(null===(r=t.get("EXT_texture_compression_bptc")))return null;if(36492===i)return s===u?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(36494===i)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(36495===i)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(36283===i||36284===i||36285===i||36286===i){if(null===(r=t.get("EXT_texture_compression_rgtc")))return null;if(36492===i)return r.COMPRESSED_RED_RGTC1_EXT;if(36284===i)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===i)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===i)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return 1020===i?e.UNSIGNED_INT_24_8:void 0!==e[i]?e[i]:null}}}class rr extends tY{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class rs extends eq{constructor(){super(),this.isGroup=!0,this.type="Group"}}let ra={type:"move"};class ro{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new rs,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new rs,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new j,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new j),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new rs,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new j,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new j),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,i){let n=null,r=null,s=null,a=this._targetRay,o=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){for(let n of(s=!0,e.hand.values())){let e=t.getJointPose(n,i),r=this._getHandJoint(l,n);null!==e&&(r.matrix.fromArray(e.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.matrixWorldNeedsUpdate=!0,r.jointRadius=e.radius),r.visible=null!==e}let n=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],a=n.position.distanceTo(r.position);l.inputState.pinching&&a>.025?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&a<=.015&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==o&&e.gripSpace&&null!==(r=t.getPose(e.gripSpace,i))&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1);null!==a&&(null===(n=t.getPose(e.targetRaySpace,i))&&null!==r&&(n=r),null!==n&&(a.matrix.fromArray(n.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,n.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(n.linearVelocity)):a.hasLinearVelocity=!1,n.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(n.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(ra)))}return null!==a&&(a.visible=null!==n),null!==o&&(o.visible=null!==r),null!==l&&(l.visible=null!==s),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){let i=new rs;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}let rl=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,rh=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class ru{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(null===this.texture){let n=new z;e.properties.get(n).__webglTexture=t.texture,(t.depthNear!=i.depthNear||t.depthFar!=i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=n}}getMesh(e){if(null!==this.texture&&null===this.mesh){let t=e.cameras[0].viewport,i=new tH({vertexShader:rl,fragmentShader:rh,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new tO(new t6(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class rc extends p{constructor(e,t){super();const i=this;let n=null,r=1,s=null,a="local-floor",o=1,l=null,h=null,u=null,c=null,d=null,p=null;const f=new ru,m=t.getContextAttributes();let v=null,_=null;const x=[],y=[],S=new M;let b=null;const E=new tY;E.layers.enable(1),E.viewport=new V;const T=new tY;T.layers.enable(2),T.viewport=new V;const w=[E,T],A=new rr;A.layers.enable(1),A.layers.enable(2);let C=null,P=null;function R(e){let t=y.indexOf(e.inputSource);if(-1===t)return;let i=x[t];void 0!==i&&(i.update(e.inputSource,e.frame,l||s),i.dispatchEvent({type:e.type,data:e.inputSource}))}function L(){n.removeEventListener("select",R),n.removeEventListener("selectstart",R),n.removeEventListener("selectend",R),n.removeEventListener("squeeze",R),n.removeEventListener("squeezestart",R),n.removeEventListener("squeezeend",R),n.removeEventListener("end",L),n.removeEventListener("inputsourceschange",D);for(let e=0;e<x.length;e++){let t=y[e];null!==t&&(y[e]=null,x[e].disconnect(t))}C=null,P=null,f.reset(),e.setRenderTarget(v),d=null,c=null,u=null,n=null,_=null,F.stop(),i.isPresenting=!1,e.setPixelRatio(b),e.setSize(S.width,S.height,!1),i.dispatchEvent({type:"sessionend"})}function D(e){for(let t=0;t<e.removed.length;t++){let i=e.removed[t],n=y.indexOf(i);n>=0&&(y[n]=null,x[n].disconnect(i))}for(let t=0;t<e.added.length;t++){let i=e.added[t],n=y.indexOf(i);if(-1===n){for(let e=0;e<x.length;e++)if(e>=y.length){y.push(i),n=e;break}else if(null===y[e]){y[e]=i,n=e;break}if(-1===n)break}let r=x[n];r&&r.connect(i)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=x[e];return void 0===t&&(t=new ro,x[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=x[e];return void 0===t&&(t=new ro,x[e]=t),t.getGripSpace()},this.getHand=function(e){let t=x[e];return void 0===t&&(t=new ro,x[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){r=e,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){a=e,!0===i.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||s},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==c?c:d},this.getBinding=function(){return u},this.getFrame=function(){return p},this.getSession=function(){return n},this.setSession=async function(h){if(null!==(n=h)){if(v=e.getRenderTarget(),n.addEventListener("select",R),n.addEventListener("selectstart",R),n.addEventListener("selectend",R),n.addEventListener("squeeze",R),n.addEventListener("squeezestart",R),n.addEventListener("squeezeend",R),n.addEventListener("end",L),n.addEventListener("inputsourceschange",D),!0!==m.xrCompatible&&await t.makeXRCompatible(),b=e.getPixelRatio(),e.getSize(S),void 0===n.renderState.layers){let i={antialias:m.antialias,alpha:!0,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:r};d=new XRWebGLLayer(n,t,i),n.updateRenderState({baseLayer:d}),e.setPixelRatio(1),e.setSize(d.framebufferWidth,d.framebufferHeight,!1),_=new G(d.framebufferWidth,d.framebufferHeight,{format:1023,type:1009,colorSpace:e.outputColorSpace,stencilBuffer:m.stencil})}else{let i=null,s=null,a=null;m.depth&&(a=m.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,i=m.stencil?1027:1026,s=m.stencil?1020:1014);let o={colorFormat:t.RGBA8,depthFormat:a,scaleFactor:r};c=(u=new XRWebGLBinding(n,t)).createProjectionLayer(o),n.updateRenderState({layers:[c]}),e.setPixelRatio(1),e.setSize(c.textureWidth,c.textureHeight,!1),_=new G(c.textureWidth,c.textureHeight,{format:1023,type:1009,depthTexture:new iN(c.textureWidth,c.textureHeight,s,void 0,void 0,void 0,void 0,void 0,void 0,i),stencilBuffer:m.stencil,colorSpace:e.outputColorSpace,samples:4*!!m.antialias,resolveDepthBuffer:!1===c.ignoreDepthValues})}_.isXRRenderTarget=!0,this.setFoveation(o),l=null,s=await n.requestReferenceSpace(a),F.setContext(n),F.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==n)return n.environmentBlendMode},this.getDepthTexture=function(){return f.getDepthTexture()};const I=new j,U=new j;function N(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){var t,i,r;if(null===n)return;null!==f.texture&&(e.near=f.depthNear,e.far=f.depthFar),A.near=T.near=E.near=e.near,A.far=T.far=E.far=e.far,(C!==A.near||P!==A.far)&&(n.updateRenderState({depthNear:A.near,depthFar:A.far}),C=A.near,P=A.far,E.near=C,E.far=P,T.near=C,T.far=P,E.updateProjectionMatrix(),T.updateProjectionMatrix(),e.updateProjectionMatrix());let s=e.parent,a=A.cameras;N(A,s);for(let e=0;e<a.length;e++)N(a[e],s);if(2===a.length){let e,t,i,n,r,s,a,o,l,h,u,c,d;I.setFromMatrixPosition(E.matrixWorld),U.setFromMatrixPosition(T.matrixWorld),e=I.distanceTo(U),t=E.projectionMatrix.elements,i=T.projectionMatrix.elements,n=t[14]/(t[10]-1),r=t[14]/(t[10]+1),s=(t[9]+1)/t[5],a=(t[9]-1)/t[5],o=(t[8]-1)/t[0],u=-((h=e/(-o+(l=(i[8]+1)/i[0])))*o),E.matrixWorld.decompose(A.position,A.quaternion,A.scale),A.translateX(u),A.translateZ(h),A.matrixWorld.compose(A.position,A.quaternion,A.scale),A.matrixWorldInverse.copy(A.matrixWorld).invert(),c=n+h,d=r+h,A.projectionMatrix.makePerspective(n*o-u,n*l+(e-u),s*r/d*c,a*r/d*c,c,d),A.projectionMatrixInverse.copy(A.projectionMatrix).invert()}else A.projectionMatrix.copy(E.projectionMatrix);t=e,i=A,null===(r=s)?t.matrix.copy(i.matrixWorld):(t.matrix.copy(r.matrixWorld),t.matrix.invert(),t.matrix.multiply(i.matrixWorld)),t.matrix.decompose(t.position,t.quaternion,t.scale),t.updateMatrixWorld(!0),t.projectionMatrix.copy(i.projectionMatrix),t.projectionMatrixInverse.copy(i.projectionMatrixInverse),t.isPerspectiveCamera&&(t.fov=2*g*Math.atan(1/t.projectionMatrix.elements[5]),t.zoom=1)},this.getCamera=function(){return A},this.getFoveation=function(){if(null!==c||null!==d)return o},this.setFoveation=function(e){o=e,null!==c&&(c.fixedFoveation=e),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=e)},this.hasDepthSensing=function(){return null!==f.texture},this.getDepthSensingMesh=function(){return f.getMesh(A)};let O=null;const F=new t4;F.setAnimationLoop(function(t,r){if(h=r.getViewerPose(l||s),p=r,null!==h){let t=h.views;null!==d&&(e.setRenderTargetFramebuffer(_,d.framebuffer),e.setRenderTarget(_));let i=!1;t.length!==A.cameras.length&&(A.cameras.length=0,i=!0);for(let n=0;n<t.length;n++){let r=t[n],s=null;if(null!==d)s=d.getViewport(r);else{let t=u.getViewSubImage(c,r);s=t.viewport,0===n&&(e.setRenderTargetTextures(_,t.colorTexture,c.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(_))}let a=w[n];void 0===a&&((a=new tY).layers.enable(n),a.viewport=new V,w[n]=a),a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.quaternion,a.scale),a.projectionMatrix.fromArray(r.projectionMatrix),a.projectionMatrixInverse.copy(a.projectionMatrix).invert(),a.viewport.set(s.x,s.y,s.width,s.height),0===n&&(A.matrix.copy(a.matrix),A.matrix.decompose(A.position,A.quaternion,A.scale)),!0===i&&A.cameras.push(a)}let r=n.enabledFeatures;if(r&&r.includes("depth-sensing")){let i=u.getDepthInformation(t[0]);i&&i.isValid&&i.texture&&f.init(e,i,n.renderState)}}for(let e=0;e<x.length;e++){let t=y[e],i=x[e];null!==t&&void 0!==i&&i.update(t,r,l||s)}O&&O(t,r),r.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:r}),p=null}),this.setAnimationLoop=function(e){O=e},this.dispose=function(){}}}let rd=new eL,rp=new eM;function rf(e,t){function i(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function n(e,n){e.opacity.value=n.opacity,n.color&&e.diffuse.value.copy(n.color),n.emissive&&e.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(e.map.value=n.map,i(n.map,e.mapTransform)),n.alphaMap&&(e.alphaMap.value=n.alphaMap,i(n.alphaMap,e.alphaMapTransform)),n.bumpMap&&(e.bumpMap.value=n.bumpMap,i(n.bumpMap,e.bumpMapTransform),e.bumpScale.value=n.bumpScale,1===n.side&&(e.bumpScale.value*=-1)),n.normalMap&&(e.normalMap.value=n.normalMap,i(n.normalMap,e.normalMapTransform),e.normalScale.value.copy(n.normalScale),1===n.side&&e.normalScale.value.negate()),n.displacementMap&&(e.displacementMap.value=n.displacementMap,i(n.displacementMap,e.displacementMapTransform),e.displacementScale.value=n.displacementScale,e.displacementBias.value=n.displacementBias),n.emissiveMap&&(e.emissiveMap.value=n.emissiveMap,i(n.emissiveMap,e.emissiveMapTransform)),n.specularMap&&(e.specularMap.value=n.specularMap,i(n.specularMap,e.specularMapTransform)),n.alphaTest>0&&(e.alphaTest.value=n.alphaTest);let r=t.get(n),s=r.envMap,a=r.envMapRotation;s&&(e.envMap.value=s,rd.copy(a),rd.x*=-1,rd.y*=-1,rd.z*=-1,s.isCubeTexture&&!1===s.isRenderTargetTexture&&(rd.y*=-1,rd.z*=-1),e.envMapRotation.value.setFromMatrix4(rp.makeRotationFromEuler(rd)),e.flipEnvMap.value=s.isCubeTexture&&!1===s.isRenderTargetTexture?-1:1,e.reflectivity.value=n.reflectivity,e.ior.value=n.ior,e.refractionRatio.value=n.refractionRatio),n.lightMap&&(e.lightMap.value=n.lightMap,e.lightMapIntensity.value=n.lightMapIntensity,i(n.lightMap,e.lightMapTransform)),n.aoMap&&(e.aoMap.value=n.aoMap,e.aoMapIntensity.value=n.aoMapIntensity,i(n.aoMap,e.aoMapTransform))}return{refreshFogUniforms:function(t,i){i.color.getRGB(t.fogColor.value,tV(e)),i.isFog?(t.fogNear.value=i.near,t.fogFar.value=i.far):i.isFogExp2&&(t.fogDensity.value=i.density)},refreshMaterialUniforms:function(e,r,s,a,o){var l,h,u,c,d,p,f,m,g,v,_,x,y,M,S,b,E,T,w,A,C,P,R;let L;r.isMeshBasicMaterial||r.isMeshLambertMaterial?n(e,r):r.isMeshToonMaterial?(n(e,r),l=e,(h=r).gradientMap&&(l.gradientMap.value=h.gradientMap)):r.isMeshPhongMaterial?(n(e,r),u=e,c=r,u.specular.value.copy(c.specular),u.shininess.value=Math.max(c.shininess,1e-4)):r.isMeshStandardMaterial?(n(e,r),d=e,p=r,d.metalness.value=p.metalness,p.metalnessMap&&(d.metalnessMap.value=p.metalnessMap,i(p.metalnessMap,d.metalnessMapTransform)),d.roughness.value=p.roughness,p.roughnessMap&&(d.roughnessMap.value=p.roughnessMap,i(p.roughnessMap,d.roughnessMapTransform)),p.envMap&&(d.envMapIntensity.value=p.envMapIntensity),r.isMeshPhysicalMaterial&&(f=e,m=r,g=o,f.ior.value=m.ior,m.sheen>0&&(f.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),f.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(f.sheenColorMap.value=m.sheenColorMap,i(m.sheenColorMap,f.sheenColorMapTransform)),m.sheenRoughnessMap&&(f.sheenRoughnessMap.value=m.sheenRoughnessMap,i(m.sheenRoughnessMap,f.sheenRoughnessMapTransform))),m.clearcoat>0&&(f.clearcoat.value=m.clearcoat,f.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(f.clearcoatMap.value=m.clearcoatMap,i(m.clearcoatMap,f.clearcoatMapTransform)),m.clearcoatRoughnessMap&&(f.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap,i(m.clearcoatRoughnessMap,f.clearcoatRoughnessMapTransform)),m.clearcoatNormalMap&&(f.clearcoatNormalMap.value=m.clearcoatNormalMap,i(m.clearcoatNormalMap,f.clearcoatNormalMapTransform),f.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),1===m.side&&f.clearcoatNormalScale.value.negate())),m.dispersion>0&&(f.dispersion.value=m.dispersion),m.iridescence>0&&(f.iridescence.value=m.iridescence,f.iridescenceIOR.value=m.iridescenceIOR,f.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],f.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(f.iridescenceMap.value=m.iridescenceMap,i(m.iridescenceMap,f.iridescenceMapTransform)),m.iridescenceThicknessMap&&(f.iridescenceThicknessMap.value=m.iridescenceThicknessMap,i(m.iridescenceThicknessMap,f.iridescenceThicknessMapTransform))),m.transmission>0&&(f.transmission.value=m.transmission,f.transmissionSamplerMap.value=g.texture,f.transmissionSamplerSize.value.set(g.width,g.height),m.transmissionMap&&(f.transmissionMap.value=m.transmissionMap,i(m.transmissionMap,f.transmissionMapTransform)),f.thickness.value=m.thickness,m.thicknessMap&&(f.thicknessMap.value=m.thicknessMap,i(m.thicknessMap,f.thicknessMapTransform)),f.attenuationDistance.value=m.attenuationDistance,f.attenuationColor.value.copy(m.attenuationColor)),m.anisotropy>0&&(f.anisotropyVector.value.set(m.anisotropy*Math.cos(m.anisotropyRotation),m.anisotropy*Math.sin(m.anisotropyRotation)),m.anisotropyMap&&(f.anisotropyMap.value=m.anisotropyMap,i(m.anisotropyMap,f.anisotropyMapTransform))),f.specularIntensity.value=m.specularIntensity,f.specularColor.value.copy(m.specularColor),m.specularColorMap&&(f.specularColorMap.value=m.specularColorMap,i(m.specularColorMap,f.specularColorMapTransform)),m.specularIntensityMap&&(f.specularIntensityMap.value=m.specularIntensityMap,i(m.specularIntensityMap,f.specularIntensityMapTransform)))):r.isMeshMatcapMaterial?(n(e,r),v=e,(_=r).matcap&&(v.matcap.value=_.matcap)):r.isMeshDepthMaterial?n(e,r):r.isMeshDistanceMaterial?(n(e,r),x=e,y=r,L=t.get(y).light,x.referencePosition.value.setFromMatrixPosition(L.matrixWorld),x.nearDistance.value=L.shadow.camera.near,x.farDistance.value=L.shadow.camera.far):r.isMeshNormalMaterial?n(e,r):r.isLineBasicMaterial?(M=e,S=r,M.diffuse.value.copy(S.color),M.opacity.value=S.opacity,S.map&&(M.map.value=S.map,i(S.map,M.mapTransform)),r.isLineDashedMaterial&&(b=e,E=r,b.dashSize.value=E.dashSize,b.totalSize.value=E.dashSize+E.gapSize,b.scale.value=E.scale)):r.isPointsMaterial?(T=e,w=r,A=s,C=a,T.diffuse.value.copy(w.color),T.opacity.value=w.opacity,T.size.value=w.size*A,T.scale.value=.5*C,w.map&&(T.map.value=w.map,i(w.map,T.uvTransform)),w.alphaMap&&(T.alphaMap.value=w.alphaMap,i(w.alphaMap,T.alphaMapTransform)),w.alphaTest>0&&(T.alphaTest.value=w.alphaTest)):r.isSpriteMaterial?(P=e,R=r,P.diffuse.value.copy(R.color),P.opacity.value=R.opacity,P.rotation.value=R.rotation,R.map&&(P.map.value=R.map,i(R.map,P.mapTransform)),R.alphaMap&&(P.alphaMap.value=R.alphaMap,i(R.alphaMap,P.alphaMapTransform)),R.alphaTest>0&&(P.alphaTest.value=R.alphaTest)):r.isShadowMaterial?(e.color.value.copy(r.color),e.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function rm(e,t,i,n){let r={},s={},a=[],o=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS);function l(e){let t={boundary:0,storage:0};return"number"==typeof e||"boolean"==typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function h(t){let i=t.target;i.removeEventListener("dispose",h);let n=a.indexOf(i.__bindingPointIndex);a.splice(n,1),e.deleteBuffer(r[i.id]),delete r[i.id],delete s[i.id]}return{bind:function(e,t){let i=t.program;n.uniformBlockBinding(e,i)},update:function(i,u){var c;let d,p,f,m,g=r[i.id];void 0===g&&(function(e){let t=e.uniforms,i=0;for(let e=0,n=t.length;e<n;e++){let n=Array.isArray(t[e])?t[e]:[t[e]];for(let e=0,t=n.length;e<t;e++){let t=n[e],r=Array.isArray(t.value)?t.value:[t.value];for(let e=0,n=r.length;e<n;e++){let n=l(r[e]),s=i%16,a=s%n.boundary,o=s+a;i+=a,0!==o&&16-o<n.storage&&(i+=16-o),t.__data=new Float32Array(n.storage/Float32Array.BYTES_PER_ELEMENT),t.__offset=i,i+=n.storage}}}let n=i%16;n>0&&(i+=16-n),e.__size=i,e.__cache={}}(i),(c=i).__bindingPointIndex=d=function(){for(let e=0;e<o;e++)if(-1===a.indexOf(e))return a.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}(),p=e.createBuffer(),f=c.__size,m=c.usage,e.bindBuffer(e.UNIFORM_BUFFER,p),e.bufferData(e.UNIFORM_BUFFER,f,m),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,d,p),g=p,r[i.id]=g,i.addEventListener("dispose",h));let v=u.program;n.updateUBOMapping(i,v);let _=t.render.frame;s[i.id]!==_&&(function(t){let i=r[t.id],n=t.uniforms,s=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,i);for(let t=0,i=n.length;t<i;t++){let i=Array.isArray(n[t])?n[t]:[n[t]];for(let n=0,r=i.length;n<r;n++){let r=i[n];if(!0===function(e,t,i,n){let r=e.value,s=t+"_"+i;if(void 0===n[s])return"number"==typeof r||"boolean"==typeof r?n[s]=r:n[s]=r.clone(),!0;{let e=n[s];if("number"==typeof r||"boolean"==typeof r){if(e!==r)return n[s]=r,!0}else if(!1===e.equals(r))return e.copy(r),!0}return!1}(r,t,n,s)){let t=r.__offset,i=Array.isArray(r.value)?r.value:[r.value],n=0;for(let s=0;s<i.length;s++){let a=i[s],o=l(a);"number"==typeof a||"boolean"==typeof a?(r.__data[0]=a,e.bufferSubData(e.UNIFORM_BUFFER,t+n,r.__data)):a.isMatrix3?(r.__data[0]=a.elements[0],r.__data[1]=a.elements[1],r.__data[2]=a.elements[2],r.__data[3]=0,r.__data[4]=a.elements[3],r.__data[5]=a.elements[4],r.__data[6]=a.elements[5],r.__data[7]=0,r.__data[8]=a.elements[6],r.__data[9]=a.elements[7],r.__data[10]=a.elements[8],r.__data[11]=0):(a.toArray(r.__data,n),n+=o.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,r.__data)}}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(i),s[i.id]=_)},dispose:function(){for(let t in r)e.deleteBuffer(r[t]);a=[],r={},s={}}}}class rg{constructor(e={}){let t,i,n,r,o,l,h,u,c,d,p,f,m,g,v,_,x,y,M,S,b,E,w,C,P;const{canvas:R=function(){let e=T("canvas");return e.style.display="block",e}(),context:L=null,depth:I=!0,stencil:U=!1,alpha:N=!1,antialias:O=!1,premultipliedAlpha:F=!0,preserveDrawingBuffer:B=!1,powerPreference:k="default",failIfMajorPerformanceCaveat:z=!1}=e;if(this.isWebGLRenderer=!0,null!==L){if("u">typeof WebGLRenderingContext&&L instanceof WebGLRenderingContext)throw Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");t=L.getContextAttributes().alpha}else t=N;const H=new Uint32Array(4),W=new Int32Array(4);let X=null,Y=null;const q=[],K=[];this.domElement=R,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=s,this.toneMapping=0,this.toneMappingExposure=1;const $=this;let Z=!1,J=0,Q=0,ee=null,et=-1,ei=null;const en=new V,er=new V;let es=null;const ea=new te(0);let eo=0,el=R.width,eh=R.height,eu=1,ec=null,ed=null;const ep=new V(0,0,el,eh),ef=new V(0,0,el,eh);let em=!1;const eg=new t3;let ev=!1,e_=!1;const ex=new eM,ey=new j,eS=new V,eb={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let eE=!1;function eT(){return null===ee?eu:1}let ew=L;function eA(e,t){return R.getContext(e,t)}try{if("setAttribute"in R&&R.setAttribute("data-engine","three.js r167"),R.addEventListener("webglcontextlost",eR,!1),R.addEventListener("webglcontextrestored",eL,!1),R.addEventListener("webglcontextcreationerror",eD,!1),null===ew){const e="webgl2";if(ew=eA(e,{alpha:!0,depth:I,stencil:U,antialias:O,premultipliedAlpha:F,preserveDrawingBuffer:B,powerPreference:k,failIfMajorPerformanceCaveat:z}),null===ew)if(eA(e))throw Error("Error creating WebGL context with your selected attributes.");else throw Error("Error creating WebGL context.")}}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function eC(){(i=new iP(ew)).init(),w=new rn(ew,i),n=new io(ew,i,e,w),r=new re(ew),o=new iD(ew),l=new n$,h=new ri(ew,i,r,l,n,w,o),u=new ih($),c=new iC($),d=new t5(ew),C=new is(ew,d),p=new iR(ew,d,o,C),f=new iU(ew,p,d,o),S=new iI(ew,n,h),x=new il(l),m=new nK($,u,c,i,n,C,x),g=new rf($,l),v=new n0,_=new n6(i),M=new ir($,u,c,r,f,t,F),y=new n7($,f,n),P=new rm(ew,o,n,r),b=new ia(ew,i,o),E=new iL(ew,i,o),o.programs=m.programs,$.capabilities=n,$.extensions=i,$.properties=l,$.renderLists=v,$.shadowMap=y,$.state=r,$.info=o}eC();const eP=new rc($,ew);function eR(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Z=!0}function eL(){console.log("THREE.WebGLRenderer: Context Restored."),Z=!1;let e=o.autoReset,t=y.enabled,i=y.autoUpdate,n=y.needsUpdate,r=y.type;eC(),o.autoReset=e,y.enabled=t,y.autoUpdate=i,y.needsUpdate=n,y.type=r}function eD(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function eI(e){var t,i;let n,r=e.target;r.removeEventListener("dispose",eI),i=t=r,void 0!==(n=l.get(i).programs)&&(n.forEach(function(e){m.releaseProgram(e)}),i.isShaderMaterial&&m.releaseShaderCache(i)),l.remove(t)}function eU(e,t,i){!0===e.transparent&&2===e.side&&!1===e.forceSinglePass?(e.side=1,e.needsUpdate=!0,eW(e,t,i),e.side=0,e.needsUpdate=!0,eW(e,t,i),e.side=2):eW(e,t,i)}this.xr=eP,this.getContext=function(){return ew},this.getContextAttributes=function(){return ew.getContextAttributes()},this.forceContextLoss=function(){let e=i.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){let e=i.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return eu},this.setPixelRatio=function(e){void 0!==e&&(eu=e,this.setSize(el,eh,!1))},this.getSize=function(e){return e.set(el,eh)},this.setSize=function(e,t,i=!0){eP.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(el=e,eh=t,R.width=Math.floor(e*eu),R.height=Math.floor(t*eu),!0===i&&(R.style.width=e+"px",R.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(e){return e.set(el*eu,eh*eu).floor()},this.setDrawingBufferSize=function(e,t,i){el=e,eh=t,eu=i,R.width=Math.floor(e*i),R.height=Math.floor(t*i),this.setViewport(0,0,e,t)},this.getCurrentViewport=function(e){return e.copy(en)},this.getViewport=function(e){return e.copy(ep)},this.setViewport=function(e,t,i,n){e.isVector4?ep.set(e.x,e.y,e.z,e.w):ep.set(e,t,i,n),r.viewport(en.copy(ep).multiplyScalar(eu).round())},this.getScissor=function(e){return e.copy(ef)},this.setScissor=function(e,t,i,n){e.isVector4?ef.set(e.x,e.y,e.z,e.w):ef.set(e,t,i,n),r.scissor(er.copy(ef).multiplyScalar(eu).round())},this.getScissorTest=function(){return em},this.setScissorTest=function(e){r.setScissorTest(em=e)},this.setOpaqueSort=function(e){ec=e},this.setTransparentSort=function(e){ed=e},this.getClearColor=function(e){return e.copy(M.getClearColor())},this.setClearColor=function(){M.setClearColor.apply(M,arguments)},this.getClearAlpha=function(){return M.getClearAlpha()},this.setClearAlpha=function(){M.setClearAlpha.apply(M,arguments)},this.clear=function(e=!0,t=!0,i=!0){let n=0;if(e){let e=!1;if(null!==ee){let t=ee.texture.format;e=1033===t||1031===t||1029===t}if(e){let e=ee.texture.type,t=1009===e||1014===e||1012===e||1020===e||1017===e||1018===e,i=M.getClearColor(),n=M.getClearAlpha(),r=i.r,s=i.g,a=i.b;t?(H[0]=r,H[1]=s,H[2]=a,H[3]=n,ew.clearBufferuiv(ew.COLOR,0,H)):(W[0]=r,W[1]=s,W[2]=a,W[3]=n,ew.clearBufferiv(ew.COLOR,0,W))}else n|=ew.COLOR_BUFFER_BIT}t&&(n|=ew.DEPTH_BUFFER_BIT),i&&(n|=ew.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(0xffffffff)),ew.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){R.removeEventListener("webglcontextlost",eR,!1),R.removeEventListener("webglcontextrestored",eL,!1),R.removeEventListener("webglcontextcreationerror",eD,!1),v.dispose(),_.dispose(),l.dispose(),u.dispose(),c.dispose(),f.dispose(),C.dispose(),P.dispose(),m.dispose(),eP.dispose(),eP.removeEventListener("sessionstart",eO),eP.removeEventListener("sessionend",eF),eB.stop()},this.renderBufferDirect=function(e,t,s,o,f,m){let v;null===t&&(t=eb);let _=f.isMesh&&0>f.matrixWorld.determinant(),y=function(e,t,i,s,o){var d,p;!0!==t.isScene&&(t=eb),h.resetTextureUnits();let f=t.fog,m=s.isMeshStandardMaterial?t.environment:null,v=null===ee?$.outputColorSpace:!0===ee.isXRRenderTarget?ee.texture.colorSpace:a,_=(s.isMeshStandardMaterial?c:u).get(s.envMap||m),y=!0===s.vertexColors&&!!i.attributes.color&&4===i.attributes.color.itemSize,M=!!i.attributes.tangent&&(!!s.normalMap||s.anisotropy>0),b=!!i.morphAttributes.position,E=!!i.morphAttributes.normal,T=!!i.morphAttributes.color,w=0;s.toneMapped&&(null===ee||!0===ee.isXRRenderTarget)&&(w=$.toneMapping);let A=i.morphAttributes.position||i.morphAttributes.normal||i.morphAttributes.color,C=void 0!==A?A.length:0,R=l.get(s),L=Y.state.lights;if(!0===ev&&(!0===e_||e!==ei)){let t=e===ei&&s.id===et;x.setState(s,e,t)}let D=!1;s.version===R.__version?R.needsLights&&R.lightsStateVersion!==L.state.version||R.outputColorSpace!==v||o.isBatchedMesh&&!1===R.batching?D=!0:o.isBatchedMesh||!0!==R.batching?o.isBatchedMesh&&!0===R.batchingColor&&null===o.colorTexture||o.isBatchedMesh&&!1===R.batchingColor&&null!==o.colorTexture||o.isInstancedMesh&&!1===R.instancing?D=!0:o.isInstancedMesh||!0!==R.instancing?o.isSkinnedMesh&&!1===R.skinning?D=!0:o.isSkinnedMesh||!0!==R.skinning?o.isInstancedMesh&&!0===R.instancingColor&&null===o.instanceColor||o.isInstancedMesh&&!1===R.instancingColor&&null!==o.instanceColor||o.isInstancedMesh&&!0===R.instancingMorph&&null===o.morphTexture||o.isInstancedMesh&&!1===R.instancingMorph&&null!==o.morphTexture||R.envMap!==_||!0===s.fog&&R.fog!==f||void 0!==R.numClippingPlanes&&(R.numClippingPlanes!==x.numPlanes||R.numIntersection!==x.numIntersection)||R.vertexAlphas!==y||R.vertexTangents!==M||R.morphTargets!==b||R.morphNormals!==E||R.morphColors!==T||R.toneMapping!==w?D=!0:R.morphTargetsCount!==C&&(D=!0):D=!0:D=!0:D=!0:(D=!0,R.__version=s.version);let I=R.currentProgram;!0===D&&(I=eW(s,t,o));let U=!1,N=!1,O=!1,F=I.getUniforms(),B=R.uniforms;if(r.useProgram(I.program)&&(U=!0,N=!0,O=!0),s.id!==et&&(et=s.id,N=!0),U||ei!==e){F.setValue(ew,"projectionMatrix",e.projectionMatrix),F.setValue(ew,"viewMatrix",e.matrixWorldInverse);let t=F.map.cameraPosition;void 0!==t&&t.setValue(ew,ey.setFromMatrixPosition(e.matrixWorld)),n.logarithmicDepthBuffer&&F.setValue(ew,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(s.isMeshPhongMaterial||s.isMeshToonMaterial||s.isMeshLambertMaterial||s.isMeshBasicMaterial||s.isMeshStandardMaterial||s.isShaderMaterial)&&F.setValue(ew,"isOrthographic",!0===e.isOrthographicCamera),ei!==e&&(ei=e,N=!0,O=!0)}if(o.isSkinnedMesh){F.setOptional(ew,o,"bindMatrix"),F.setOptional(ew,o,"bindMatrixInverse");let e=o.skeleton;e&&(null===e.boneTexture&&e.computeBoneTexture(),F.setValue(ew,"boneTexture",e.boneTexture,h))}o.isBatchedMesh&&(F.setOptional(ew,o,"batchingTexture"),F.setValue(ew,"batchingTexture",o._matricesTexture,h),F.setOptional(ew,o,"batchingIdTexture"),F.setValue(ew,"batchingIdTexture",o._indirectTexture,h),F.setOptional(ew,o,"batchingColorTexture"),null!==o._colorsTexture&&F.setValue(ew,"batchingColorTexture",o._colorsTexture,h));let k=i.morphAttributes;if((void 0!==k.position||void 0!==k.normal||void 0!==k.color)&&S.update(o,i,I),(N||R.receiveShadow!==o.receiveShadow)&&(R.receiveShadow=o.receiveShadow,F.setValue(ew,"receiveShadow",o.receiveShadow)),s.isMeshGouraudMaterial&&null!==s.envMap&&(B.envMap.value=_,B.flipEnvMap.value=_.isCubeTexture&&!1===_.isRenderTargetTexture?-1:1),s.isMeshStandardMaterial&&null===s.envMap&&null!==t.environment&&(B.envMapIntensity.value=t.environmentIntensity),N&&(F.setValue(ew,"toneMappingExposure",$.toneMappingExposure),R.needsLights&&(d=B,p=O,d.ambientLightColor.needsUpdate=p,d.lightProbe.needsUpdate=p,d.directionalLights.needsUpdate=p,d.directionalLightShadows.needsUpdate=p,d.pointLights.needsUpdate=p,d.pointLightShadows.needsUpdate=p,d.spotLights.needsUpdate=p,d.spotLightShadows.needsUpdate=p,d.rectAreaLights.needsUpdate=p,d.hemisphereLights.needsUpdate=p),f&&!0===s.fog&&g.refreshFogUniforms(B,f),g.refreshMaterialUniforms(B,s,eu,eh,Y.state.transmissionRenderTarget[e.id]),nP.upload(ew,eX(R),B,h)),s.isShaderMaterial&&!0===s.uniformsNeedUpdate&&(nP.upload(ew,eX(R),B,h),s.uniformsNeedUpdate=!1),s.isSpriteMaterial&&F.setValue(ew,"center",o.center),F.setValue(ew,"modelViewMatrix",o.modelViewMatrix),F.setValue(ew,"normalMatrix",o.normalMatrix),F.setValue(ew,"modelMatrix",o.matrixWorld),s.isShaderMaterial||s.isRawShaderMaterial){let e=s.uniformsGroups;for(let t=0,i=e.length;t<i;t++){let i=e[t];P.update(i,I),P.bind(i,I)}}return I}(e,t,s,o,f);r.setMaterial(o,_);let M=s.index,T=1;if(!0===o.wireframe){if(void 0===(M=p.getWireframeAttribute(s)))return;T=2}let w=s.drawRange,A=s.attributes.position,R=w.start*T,L=(w.start+w.count)*T;null!==m&&(R=Math.max(R,m.start*T),L=Math.min(L,(m.start+m.count)*T)),null!==M?(R=Math.max(R,0),L=Math.min(L,M.count)):null!=A&&(R=Math.max(R,0),L=Math.min(L,A.count));let D=L-R;if(D<0||D===1/0)return;C.setup(f,o,y,s,M);let I=b;if(null!==M&&(v=d.get(M),(I=E).setIndex(v)),f.isMesh)!0===o.wireframe?(r.setLineWidth(o.wireframeLinewidth*eT()),I.setMode(ew.LINES)):I.setMode(ew.TRIANGLES);else if(f.isLine){let e=o.linewidth;void 0===e&&(e=1),r.setLineWidth(e*eT()),f.isLineSegments?I.setMode(ew.LINES):f.isLineLoop?I.setMode(ew.LINE_LOOP):I.setMode(ew.LINE_STRIP)}else f.isPoints?I.setMode(ew.POINTS):f.isSprite&&I.setMode(ew.TRIANGLES);if(f.isBatchedMesh)if(null!==f._multiDrawInstances)I.renderMultiDrawInstances(f._multiDrawStarts,f._multiDrawCounts,f._multiDrawCount,f._multiDrawInstances);else if(i.get("WEBGL_multi_draw"))I.renderMultiDraw(f._multiDrawStarts,f._multiDrawCounts,f._multiDrawCount);else{let e=f._multiDrawStarts,t=f._multiDrawCounts,i=f._multiDrawCount,n=M?d.get(M).bytesPerElement:1,r=l.get(o).currentProgram.getUniforms();for(let s=0;s<i;s++)r.setValue(ew,"_gl_DrawID",s),I.render(e[s]/n,t[s])}else if(f.isInstancedMesh)I.renderInstances(R,D,f.count);else if(s.isInstancedBufferGeometry){let e=void 0!==s._maxInstanceCount?s._maxInstanceCount:1/0,t=Math.min(s.instanceCount,e);I.renderInstances(R,D,t)}else I.render(R,D)},this.compile=function(e,t,i=null){null===i&&(i=e),(Y=_.get(i)).init(t),K.push(Y),i.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(Y.pushLight(e),e.castShadow&&Y.pushShadow(e))}),e!==i&&e.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(Y.pushLight(e),e.castShadow&&Y.pushShadow(e))}),Y.setupLights();let n=new Set;return e.traverse(function(e){let t=e.material;if(t)if(Array.isArray(t))for(let r=0;r<t.length;r++){let s=t[r];eU(s,i,e),n.add(s)}else eU(t,i,e),n.add(t)}),K.pop(),Y=null,n},this.compileAsync=function(e,t,n=null){let r=this.compile(e,t,n);return new Promise(t=>{function n(){(r.forEach(function(e){l.get(e).currentProgram.isReady()&&r.delete(e)}),0===r.size)?t(e):setTimeout(n,10)}null!==i.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)})};let eN=null;function eO(){eB.stop()}function eF(){eB.start()}const eB=new t4;function ek(e,t,i,n){if(!1===e.visible)return;if(e.layers.test(t.layers)){if(e.isGroup)i=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)Y.pushLight(e),e.castShadow&&Y.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||eg.intersectsSprite(e)){n&&eS.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ex);let t=f.update(e),r=e.material;r.visible&&X.push(e,t,r,i,eS.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||eg.intersectsObject(e))){let t=f.update(e),r=e.material;if(n&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),eS.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),eS.copy(t.boundingSphere.center)),eS.applyMatrix4(e.matrixWorld).applyMatrix4(ex)),Array.isArray(r)){let n=t.groups;for(let s=0,a=n.length;s<a;s++){let a=n[s],o=r[a.materialIndex];o&&o.visible&&X.push(e,t,o,i,eS.z,a)}}else r.visible&&X.push(e,t,r,i,eS.z,null)}}let r=e.children;for(let e=0,s=r.length;e<s;e++)ek(r[e],t,i,n)}function ez(e,t,i,n){let s=e.opaque,a=e.transmissive,o=e.transparent;Y.setupLightsView(i),!0===ev&&x.setGlobalState($.clippingPlanes,i),n&&r.viewport(en.copy(n)),s.length>0&&eH(s,t,i),a.length>0&&eH(a,t,i),o.length>0&&eH(o,t,i),r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),r.setPolygonOffset(!1)}function eV(e,t,n,r){if(null!==(!0===n.isScene?n.overrideMaterial:null))return;void 0===Y.state.transmissionRenderTarget[r.id]&&(Y.state.transmissionRenderTarget[r.id]=new G(1,1,{generateMipmaps:!0,type:i.has("EXT_color_buffer_half_float")||i.has("EXT_color_buffer_float")?1016:1009,minFilter:1008,samples:4,stencilBuffer:U,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:D.workingColorSpace}));let s=Y.state.transmissionRenderTarget[r.id],a=r.viewport||en;s.setSize(a.z,a.w);let o=$.getRenderTarget();$.setRenderTarget(s),$.getClearColor(ea),(eo=$.getClearAlpha())<1&&$.setClearColor(0xffffff,.5),$.clear(),eE&&M.render(n);let l=$.toneMapping;$.toneMapping=0;let u=r.viewport;if(void 0!==r.viewport&&(r.viewport=void 0),Y.setupLightsView(r),!0===ev&&x.setGlobalState($.clippingPlanes,r),eH(e,n,r),h.updateMultisampleRenderTarget(s),h.updateRenderTargetMipmap(s),!1===i.has("WEBGL_multisampled_render_to_texture")){let e=!1;for(let i=0,s=t.length;i<s;i++){let s=t[i],a=s.object,o=s.geometry,l=s.material,h=s.group;if(2===l.side&&a.layers.test(r.layers)){let t=l.side;l.side=1,l.needsUpdate=!0,eG(a,n,r,o,l,h),l.side=t,l.needsUpdate=!0,e=!0}}!0===e&&(h.updateMultisampleRenderTarget(s),h.updateRenderTargetMipmap(s))}$.setRenderTarget(o),$.setClearColor(ea,eo),void 0!==u&&(r.viewport=u),$.toneMapping=l}function eH(e,t,i){let n=!0===t.isScene?t.overrideMaterial:null;for(let r=0,s=e.length;r<s;r++){let s=e[r],a=s.object,o=s.geometry,l=null===n?s.material:n,h=s.group;a.layers.test(i.layers)&&eG(a,t,i,o,l,h)}}function eG(e,t,i,n,r,s){e.onBeforeRender($,t,i,n,r,s),e.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),!0===r.transparent&&2===r.side&&!1===r.forceSinglePass?(r.side=1,r.needsUpdate=!0,$.renderBufferDirect(i,t,n,r,e,s),r.side=0,r.needsUpdate=!0,$.renderBufferDirect(i,t,n,r,e,s),r.side=2):$.renderBufferDirect(i,t,n,r,e,s),e.onAfterRender($,t,i,n,r,s)}function eW(e,t,i){var n;!0!==t.isScene&&(t=eb);let r=l.get(e),s=Y.state.lights,a=Y.state.shadowsArray,o=s.state.version,h=m.getParameters(e,s.state,a,t,i),d=m.getProgramCacheKey(h),p=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?c:u).get(e.envMap||r.environment),r.envMapRotation=null!==r.environment&&null===e.envMap?t.environmentRotation:e.envMapRotation,void 0===p&&(e.addEventListener("dispose",eI),r.programs=p=new Map);let f=p.get(d);if(void 0!==f){if(r.currentProgram===f&&r.lightsStateVersion===o)return ej(e,h),f}else h.uniforms=m.getUniforms(e),e.onBeforeCompile(h,$),f=m.acquireProgram(h,d),p.set(d,f),r.uniforms=h.uniforms;let g=r.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(g.clippingPlanes=x.uniform),ej(e,h),r.needsLights=(n=e).isMeshLambertMaterial||n.isMeshToonMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.isShadowMaterial||n.isShaderMaterial&&!0===n.lights,r.lightsStateVersion=o,r.needsLights&&(g.ambientLightColor.value=s.state.ambient,g.lightProbe.value=s.state.probe,g.directionalLights.value=s.state.directional,g.directionalLightShadows.value=s.state.directionalShadow,g.spotLights.value=s.state.spot,g.spotLightShadows.value=s.state.spotShadow,g.rectAreaLights.value=s.state.rectArea,g.ltc_1.value=s.state.rectAreaLTC1,g.ltc_2.value=s.state.rectAreaLTC2,g.pointLights.value=s.state.point,g.pointLightShadows.value=s.state.pointShadow,g.hemisphereLights.value=s.state.hemi,g.directionalShadowMap.value=s.state.directionalShadowMap,g.directionalShadowMatrix.value=s.state.directionalShadowMatrix,g.spotShadowMap.value=s.state.spotShadowMap,g.spotLightMatrix.value=s.state.spotLightMatrix,g.spotLightMap.value=s.state.spotLightMap,g.pointShadowMap.value=s.state.pointShadowMap,g.pointShadowMatrix.value=s.state.pointShadowMatrix),r.currentProgram=f,r.uniformsList=null,f}function eX(e){if(null===e.uniformsList){let t=e.currentProgram.getUniforms();e.uniformsList=nP.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function ej(e,t){let i=l.get(e);i.outputColorSpace=t.outputColorSpace,i.batching=t.batching,i.batchingColor=t.batchingColor,i.instancing=t.instancing,i.instancingColor=t.instancingColor,i.instancingMorph=t.instancingMorph,i.skinning=t.skinning,i.morphTargets=t.morphTargets,i.morphNormals=t.morphNormals,i.morphColors=t.morphColors,i.morphTargetsCount=t.morphTargetsCount,i.numClippingPlanes=t.numClippingPlanes,i.numIntersection=t.numClipIntersection,i.vertexAlphas=t.vertexAlphas,i.vertexTangents=t.vertexTangents,i.toneMapping=t.toneMapping}eB.setAnimationLoop(function(e){eN&&eN(e)}),"u">typeof self&&eB.setContext(self),this.setAnimationLoop=function(e){eN=e,eP.setAnimationLoop(e),null===e?eB.stop():eB.start()},eP.addEventListener("sessionstart",eO),eP.addEventListener("sessionend",eF),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===Z)return;if(!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===eP.enabled&&!0===eP.isPresenting&&(!0===eP.cameraAutoUpdate&&eP.updateCamera(t),t=eP.getCamera()),!0===e.isScene&&e.onBeforeRender($,e,t,ee),(Y=_.get(e,K.length)).init(t),K.push(Y),ex.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),eg.setFromProjectionMatrix(ex),e_=this.localClippingEnabled,ev=x.init(this.clippingPlanes,e_),(X=v.get(e,q.length)).init(),q.push(X),!0===eP.enabled&&!0===eP.isPresenting){let e=$.xr.getDepthSensingMesh();null!==e&&ek(e,t,-1/0,$.sortObjects)}ek(e,t,0,$.sortObjects),X.finish(),!0===$.sortObjects&&X.sort(ec,ed),(eE=!1===eP.enabled||!1===eP.isPresenting||!1===eP.hasDepthSensing())&&M.addToRenderList(X,e),this.info.render.frame++,!0===ev&&x.beginShadows();let i=Y.state.shadowsArray;y.render(i,e,t),!0===ev&&x.endShadows(),!0===this.info.autoReset&&this.info.reset();let n=X.opaque,r=X.transmissive;if(Y.setupLights(),t.isArrayCamera){let i=t.cameras;if(r.length>0)for(let t=0,s=i.length;t<s;t++)eV(n,r,e,i[t]);eE&&M.render(e);for(let t=0,n=i.length;t<n;t++){let n=i[t];ez(X,e,n,n.viewport)}}else r.length>0&&eV(n,r,e,t),eE&&M.render(e),ez(X,e,t);null!==ee&&(h.updateMultisampleRenderTarget(ee),h.updateRenderTargetMipmap(ee)),!0===e.isScene&&e.onAfterRender($,e,t),C.resetDefaultState(),et=-1,ei=null,K.pop(),K.length>0?(Y=K[K.length-1],!0===ev&&x.setGlobalState($.clippingPlanes,Y.state.camera)):Y=null,q.pop(),X=q.length>0?q[q.length-1]:null},this.getActiveCubeFace=function(){return J},this.getActiveMipmapLevel=function(){return Q},this.getRenderTarget=function(){return ee},this.setRenderTargetTextures=function(e,t,n){l.get(e.texture).__webglTexture=t,l.get(e.depthTexture).__webglTexture=n;let r=l.get(e);r.__hasExternalTextures=!0,r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0!==i.has("WEBGL_multisampled_render_to_texture")||(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(e,t){let i=l.get(e);i.__webglFramebuffer=t,i.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e,t=0,i=0){ee=e,J=t,Q=i;let n=!0,s=null,a=!1,o=!1;if(e){let u=l.get(e);void 0!==u.__useDefaultFramebuffer?(r.bindFramebuffer(ew.FRAMEBUFFER,null),n=!1):void 0===u.__webglFramebuffer?h.setupRenderTarget(e):u.__hasExternalTextures&&h.rebindTextures(e,l.get(e.texture).__webglTexture,l.get(e.depthTexture).__webglTexture);let c=e.texture;(c.isData3DTexture||c.isDataArrayTexture||c.isCompressedArrayTexture)&&(o=!0);let d=l.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(s=Array.isArray(d[t])?d[t][i]:d[t],a=!0):s=e.samples>0&&!1===h.useMultisampledRTT(e)?l.get(e).__webglMultisampledFramebuffer:Array.isArray(d)?d[i]:d,en.copy(e.viewport),er.copy(e.scissor),es=e.scissorTest}else en.copy(ep).multiplyScalar(eu).floor(),er.copy(ef).multiplyScalar(eu).floor(),es=em;if(r.bindFramebuffer(ew.FRAMEBUFFER,s)&&n&&r.drawBuffers(e,s),r.viewport(en),r.scissor(er),r.setScissorTest(es),a){let n=l.get(e.texture);ew.framebufferTexture2D(ew.FRAMEBUFFER,ew.COLOR_ATTACHMENT0,ew.TEXTURE_CUBE_MAP_POSITIVE_X+t,n.__webglTexture,i)}else if(o){let n=l.get(e.texture);ew.framebufferTextureLayer(ew.FRAMEBUFFER,ew.COLOR_ATTACHMENT0,n.__webglTexture,i||0,t||0)}et=-1},this.readRenderTargetPixels=function(e,t,i,s,a,o,h){if(!(e&&e.isWebGLRenderTarget))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let u=l.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==h&&(u=u[h]),u){r.bindFramebuffer(ew.FRAMEBUFFER,u);try{let r=e.texture,l=r.format,h=r.type;if(!n.textureFormatReadable(l))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!n.textureTypeReadable(h))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-s&&i>=0&&i<=e.height-a&&ew.readPixels(t,i,s,a,w.convert(l),w.convert(h),o)}finally{let e=null!==ee?l.get(ee).__webglFramebuffer:null;r.bindFramebuffer(ew.FRAMEBUFFER,e)}}},this.readRenderTargetPixelsAsync=async function(e,t,i,s,a,o,h){if(!(e&&e.isWebGLRenderTarget))throw Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let u=l.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==h&&(u=u[h]),u){r.bindFramebuffer(ew.FRAMEBUFFER,u);try{let r=e.texture,l=r.format,h=r.type;if(!n.textureFormatReadable(l))throw Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!n.textureTypeReadable(h))throw Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(t>=0&&t<=e.width-s&&i>=0&&i<=e.height-a){var c;let e=ew.createBuffer();ew.bindBuffer(ew.PIXEL_PACK_BUFFER,e),ew.bufferData(ew.PIXEL_PACK_BUFFER,o.byteLength,ew.STREAM_READ),ew.readPixels(t,i,s,a,w.convert(l),w.convert(h),0),ew.flush();let n=ew.fenceSync(ew.SYNC_GPU_COMMANDS_COMPLETE,0);await (c=ew,new Promise(function(e,t){setTimeout(function i(){switch(c.clientWaitSync(n,c.SYNC_FLUSH_COMMANDS_BIT,0)){case c.WAIT_FAILED:t();break;case c.TIMEOUT_EXPIRED:setTimeout(i,4);break;default:e()}},4)}));try{ew.bindBuffer(ew.PIXEL_PACK_BUFFER,e),ew.getBufferSubData(ew.PIXEL_PACK_BUFFER,0,o)}finally{ew.deleteBuffer(e),ew.deleteSync(n)}return o}}finally{let e=null!==ee?l.get(ee).__webglFramebuffer:null;r.bindFramebuffer(ew.FRAMEBUFFER,e)}}},this.copyFramebufferToTexture=function(e,t=null,i=0){!0!==e.isTexture&&(A("WebGLRenderer: copyFramebufferToTexture function signature has changed."),t=arguments[0]||null,e=arguments[1]);let n=Math.pow(2,-i),s=Math.floor(e.image.width*n),a=Math.floor(e.image.height*n),o=null!==t?t.x:0,l=null!==t?t.y:0;h.setTexture2D(e,0),ew.copyTexSubImage2D(ew.TEXTURE_2D,i,0,0,o,l,s,a),r.unbindTexture()},this.copyTextureToTexture=function(e,t,i=null,n=null,s=0){let a,o,l,u,c,d;!0!==e.isTexture&&(A("WebGLRenderer: copyTextureToTexture function signature has changed."),n=arguments[0]||null,e=arguments[1],t=arguments[2],s=arguments[3]||0,i=null),null!==i?(a=i.max.x-i.min.x,o=i.max.y-i.min.y,l=i.min.x,u=i.min.y):(a=e.image.width,o=e.image.height,l=0,u=0),null!==n?(c=n.x,d=n.y):(c=0,d=0);let p=w.convert(t.format),f=w.convert(t.type);h.setTexture2D(t,0),ew.pixelStorei(ew.UNPACK_FLIP_Y_WEBGL,t.flipY),ew.pixelStorei(ew.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),ew.pixelStorei(ew.UNPACK_ALIGNMENT,t.unpackAlignment);let m=ew.getParameter(ew.UNPACK_ROW_LENGTH),g=ew.getParameter(ew.UNPACK_IMAGE_HEIGHT),v=ew.getParameter(ew.UNPACK_SKIP_PIXELS),_=ew.getParameter(ew.UNPACK_SKIP_ROWS),x=ew.getParameter(ew.UNPACK_SKIP_IMAGES),y=e.isCompressedTexture?e.mipmaps[s]:e.image;ew.pixelStorei(ew.UNPACK_ROW_LENGTH,y.width),ew.pixelStorei(ew.UNPACK_IMAGE_HEIGHT,y.height),ew.pixelStorei(ew.UNPACK_SKIP_PIXELS,l),ew.pixelStorei(ew.UNPACK_SKIP_ROWS,u),e.isDataTexture?ew.texSubImage2D(ew.TEXTURE_2D,s,c,d,a,o,p,f,y.data):e.isCompressedTexture?ew.compressedTexSubImage2D(ew.TEXTURE_2D,s,c,d,y.width,y.height,p,y.data):ew.texSubImage2D(ew.TEXTURE_2D,s,c,d,a,o,p,f,y),ew.pixelStorei(ew.UNPACK_ROW_LENGTH,m),ew.pixelStorei(ew.UNPACK_IMAGE_HEIGHT,g),ew.pixelStorei(ew.UNPACK_SKIP_PIXELS,v),ew.pixelStorei(ew.UNPACK_SKIP_ROWS,_),ew.pixelStorei(ew.UNPACK_SKIP_IMAGES,x),0===s&&t.generateMipmaps&&ew.generateMipmap(ew.TEXTURE_2D),r.unbindTexture()},this.copyTextureToTexture3D=function(e,t,i=null,n=null,s=0){let a,o,l,u,c,d,p,f,m,g;!0!==e.isTexture&&(A("WebGLRenderer: copyTextureToTexture3D function signature has changed."),i=arguments[0]||null,n=arguments[1]||null,e=arguments[2],t=arguments[3],s=arguments[4]||0);let v=e.isCompressedTexture?e.mipmaps[s]:e.image;null!==i?(a=i.max.x-i.min.x,o=i.max.y-i.min.y,l=i.max.z-i.min.z,u=i.min.x,c=i.min.y,d=i.min.z):(a=v.width,o=v.height,l=v.depth,u=0,c=0,d=0),null!==n?(p=n.x,f=n.y,m=n.z):(p=0,f=0,m=0);let _=w.convert(t.format),x=w.convert(t.type);if(t.isData3DTexture)h.setTexture3D(t,0),g=ew.TEXTURE_3D;else{if(!t.isDataArrayTexture&&!t.isCompressedArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");h.setTexture2DArray(t,0),g=ew.TEXTURE_2D_ARRAY}ew.pixelStorei(ew.UNPACK_FLIP_Y_WEBGL,t.flipY),ew.pixelStorei(ew.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),ew.pixelStorei(ew.UNPACK_ALIGNMENT,t.unpackAlignment);let y=ew.getParameter(ew.UNPACK_ROW_LENGTH),M=ew.getParameter(ew.UNPACK_IMAGE_HEIGHT),S=ew.getParameter(ew.UNPACK_SKIP_PIXELS),b=ew.getParameter(ew.UNPACK_SKIP_ROWS),E=ew.getParameter(ew.UNPACK_SKIP_IMAGES);ew.pixelStorei(ew.UNPACK_ROW_LENGTH,v.width),ew.pixelStorei(ew.UNPACK_IMAGE_HEIGHT,v.height),ew.pixelStorei(ew.UNPACK_SKIP_PIXELS,u),ew.pixelStorei(ew.UNPACK_SKIP_ROWS,c),ew.pixelStorei(ew.UNPACK_SKIP_IMAGES,d),e.isDataTexture||e.isData3DTexture?ew.texSubImage3D(g,s,p,f,m,a,o,l,_,x,v.data):t.isCompressedArrayTexture?ew.compressedTexSubImage3D(g,s,p,f,m,a,o,l,_,v.data):ew.texSubImage3D(g,s,p,f,m,a,o,l,_,x,v),ew.pixelStorei(ew.UNPACK_ROW_LENGTH,y),ew.pixelStorei(ew.UNPACK_IMAGE_HEIGHT,M),ew.pixelStorei(ew.UNPACK_SKIP_PIXELS,S),ew.pixelStorei(ew.UNPACK_SKIP_ROWS,b),ew.pixelStorei(ew.UNPACK_SKIP_IMAGES,E),0===s&&t.generateMipmaps&&ew.generateMipmap(g),r.unbindTexture()},this.initRenderTarget=function(e){void 0===l.get(e).__webglFramebuffer&&h.setupRenderTarget(e)},this.initTexture=function(e){e.isCubeTexture?h.setTextureCube(e,0):e.isData3DTexture?h.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?h.setTexture2DArray(e,0):h.setTexture2D(e,0),r.unbindTexture()},this.resetState=function(){J=0,Q=0,ee=null,r.reset(),C.reset()},"u">typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return 2e3}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;let t=this.getContext();t.drawingBufferColorSpace=e===o?"display-p3":"srgb",t.unpackColorSpace=D.workingColorSpace===l?"display-p3":"srgb"}}class rv extends eq{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new eL,this.environmentIntensity=1,this.environmentRotation=new eL,this.overrideMaterial=null,"u">typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class r_{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){let i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){let t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){let t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){let e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;let t=[],i,n=this.getPoint(0),r=0;t.push(0);for(let s=1;s<=e;s++)t.push(r+=(i=this.getPoint(s/e)).distanceTo(n)),n=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){let i,n=this.getLengths(),r=0,s=n.length;i=t||e*n[s-1];let a=0,o=s-1,l;for(;a<=o;)if((l=n[r=Math.floor(a+(o-a)/2)]-i)<0)a=r+1;else if(l>0)o=r-1;else{o=r;break}if(n[r=o]===i)return r/(s-1);let h=n[r],u=n[r+1];return(r+(i-h)/(u-h))/(s-1)}getTangent(e,t){let i=e-1e-4,n=e+1e-4;i<0&&(i=0),n>1&&(n=1);let r=this.getPoint(i),s=this.getPoint(n),a=t||(r.isVector2?new M:new j);return a.copy(s).sub(r).normalize(),a}getTangentAt(e,t){let i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){let i=new j,n=[],r=[],s=[],a=new j,o=new eM;for(let t=0;t<=e;t++){let i=t/e;n[t]=this.getTangentAt(i,new j)}r[0]=new j,s[0]=new j;let l=Number.MAX_VALUE,h=Math.abs(n[0].x),u=Math.abs(n[0].y),c=Math.abs(n[0].z);h<=l&&(l=h,i.set(1,0,0)),u<=l&&(l=u,i.set(0,1,0)),c<=l&&i.set(0,0,1),a.crossVectors(n[0],i).normalize(),r[0].crossVectors(n[0],a),s[0].crossVectors(n[0],r[0]);for(let t=1;t<=e;t++){if(r[t]=r[t-1].clone(),s[t]=s[t-1].clone(),a.crossVectors(n[t-1],n[t]),a.length()>Number.EPSILON){a.normalize();let e=Math.acos(_(n[t-1].dot(n[t]),-1,1));r[t].applyMatrix4(o.makeRotationAxis(a,e))}s[t].crossVectors(n[t],r[t])}if(!0===t){let t=Math.acos(_(r[0].dot(r[e]),-1,1));t/=e,n[0].dot(a.crossVectors(r[0],r[e]))>0&&(t=-t);for(let i=1;i<=e;i++)r[i].applyMatrix4(o.makeRotationAxis(n[i],t*i)),s[i].crossVectors(n[i],r[i])}return{tangents:n,normals:r,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){let e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class rx extends r_{constructor(e=0,t=0,i=1,n=1,r=0,s=2*Math.PI,a=!1,o=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=n,this.aStartAngle=r,this.aEndAngle=s,this.aClockwise=a,this.aRotation=o}getPoint(e,t=new M){let i=2*Math.PI,n=this.aEndAngle-this.aStartAngle,r=Math.abs(n)<Number.EPSILON;for(;n<0;)n+=i;for(;n>i;)n-=i;n<Number.EPSILON&&(n=r?0:i),!0!==this.aClockwise||r||(n===i?n=-i:n-=i);let s=this.aStartAngle+e*n,a=this.aX+this.xRadius*Math.cos(s),o=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){let e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),i=a-this.aX,n=o-this.aY;a=i*e-n*t+this.aX,o=i*t+n*e+this.aY}return t.set(a,o)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){let e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}function ry(){let e=0,t=0,i=0,n=0;function r(r,s,a,o){e=r,t=a,i=-3*r+3*s-2*a-o,n=2*r-2*s+a+o}return{initCatmullRom:function(e,t,i,n,s){r(t,i,s*(i-e),s*(n-t))},initNonuniformCatmullRom:function(e,t,i,n,s,a,o){let l=(t-e)/s-(i-e)/(s+a)+(i-t)/a,h=(i-t)/a-(n-t)/(a+o)+(n-i)/o;r(t,i,l*=a,h*=a)},calc:function(r){let s=r*r;return e+t*r+i*s+s*r*n}}}let rM=new j,rS=new ry,rb=new ry,rE=new ry;function rT(e,t,i,n,r){let s=(n-t)*.5,a=(r-i)*.5,o=e*e;return e*o*(2*i-2*n+s+a)+(-3*i+3*n-2*s-a)*o+s*e+i}function rw(e,t,i,n){let r;return(r=1-e)*r*t+2*(1-e)*e*i+e*e*n}function rA(e,t,i,n,r){let s,a;return(s=1-e)*s*s*t+3*(a=1-e)*a*e*i+3*(1-e)*e*e*n+e*e*e*r}class rC extends r_{constructor(e=new M,t=new M,i=new M,n=new M){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=n}getPoint(e,t=new M){let i=this.v0,n=this.v1,r=this.v2,s=this.v3;return t.set(rA(e,i.x,n.x,r.x,s.x),rA(e,i.y,n.y,r.y,s.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class rP extends r_{constructor(e=new M,t=new M){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new M){return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new M){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class rR extends r_{constructor(e=new M,t=new M,i=new M){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new M){let i=this.v0,n=this.v1,r=this.v2;return t.set(rw(e,i.x,n.x,r.x),rw(e,i.y,n.y,r.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class rL extends r_{constructor(e=new j,t=new j,i=new j){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new j){let i=this.v0,n=this.v1,r=this.v2;return t.set(rw(e,i.x,n.x,r.x),rw(e,i.y,n.y,r.y),rw(e,i.z,n.z,r.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){let e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class rD extends r_{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new M){let i=this.points,n=(i.length-1)*e,r=Math.floor(n),s=n-r,a=i[0===r?r:r-1],o=i[r],l=i[r>i.length-2?i.length-1:r+1],h=i[r>i.length-3?i.length-1:r+2];return t.set(rT(s,a.x,o.x,l.x,h.x),rT(s,a.y,o.y,l.y,h.y)),t}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let i=e.points[t];this.points.push(i.clone())}return this}toJSON(){let e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){let i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){let i=e.points[t];this.points.push(new M().fromArray(i))}return this}}function rI(e,t,i){return e&&(i||e.constructor!==t)?"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e):e}class rU{constructor(e,t,i,n){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,i=this._cachedIndex,n=t[i],r=t[i-1];e:{t:{let s;i:{n:if(!(e<n)){for(let s=i+2;;){if(void 0===n){if(e<r)break n;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===s)break;if(r=n,e<(n=t[++i]))break t}s=t.length;break i}if(!(e>=r)){let a=t[1];e<a&&(i=2,r=a);for(let s=i-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(i===s)break;if(n=r,e>=(r=t[--i-1]))break t}s=i,i=0;break i}break e}for(;i<s;){let n=i+s>>>1;e<t[n]?s=n:i=n+1}if(n=t[i],void 0===(r=t[i-1]))return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===n)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,r,n)}return this.interpolate_(i,r,e,n)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,i=this.sampleValues,n=this.valueSize,r=e*n;for(let e=0;e!==n;++e)t[e]=i[r+e];return t}interpolate_(){throw Error("call to abstract method")}intervalChanged_(){}}class rN extends rU{constructor(e,t,i,n){super(e,t,i,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(e,t,i){let n=this.parameterPositions,r=e-2,s=e+1,a=n[r],o=n[s];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:r=e,a=2*t-i;break;case 2402:r=n.length-2,a=t+n[r]-n[r+1];break;default:r=e,a=i}if(void 0===o)switch(this.getSettings_().endingEnd){case 2401:s=e,o=2*i-t;break;case 2402:s=1,o=i+n[1]-n[0];break;default:s=e-1,o=t}let l=(i-t)*.5,h=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(o-i),this._offsetPrev=r*h,this._offsetNext=s*h}interpolate_(e,t,i,n){let r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,h=this._offsetPrev,u=this._offsetNext,c=this._weightPrev,d=this._weightNext,p=(i-t)/(n-t),f=p*p,m=f*p,g=-c*m+2*c*f-c*p,v=(1+c)*m+(-1.5-2*c)*f+(-.5+c)*p+1,_=(-1-d)*m+(1.5+d)*f+.5*p,x=d*m-d*f;for(let e=0;e!==a;++e)r[e]=g*s[h+e]+v*s[l+e]+_*s[o+e]+x*s[u+e];return r}}class rO extends rU{constructor(e,t,i,n){super(e,t,i,n)}interpolate_(e,t,i,n){let r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,h=(i-t)/(n-t),u=1-h;for(let e=0;e!==a;++e)r[e]=s[l+e]*u+s[o+e]*h;return r}}class rF extends rU{constructor(e,t,i,n){super(e,t,i,n)}interpolate_(e){return this.copySampleValue_(e-1)}}class rB{constructor(e,t,i,n){if(void 0===e)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=rI(t,this.TimeBufferType),this.values=rI(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}static toJSON(e){let t,i=e.constructor;if(i.toJSON!==this.toJSON)t=i.toJSON(e);else{t={name:e.name,times:rI(e.times,Array),values:rI(e.values,Array)};let i=e.getInterpolation();i!==e.DefaultInterpolation&&(t.interpolation=i)}return t.type=e.ValueTypeName,t}InterpolantFactoryMethodDiscrete(e){return new rF(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new rO(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new rN(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case 2300:t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){let t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw Error(t);return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){let t=this.times;for(let i=0,n=t.length;i!==n;++i)t[i]+=e}return this}scale(e){if(1!==e){let t=this.times;for(let i=0,n=t.length;i!==n;++i)t[i]*=e}return this}trim(e,t){let i=this.times,n=i.length,r=0,s=n-1;for(;r!==n&&i[r]<e;)++r;for(;-1!==s&&i[s]>t;)--s;if(++s,0!==r||s!==n){r>=s&&(r=(s=Math.max(s,1))-1);let e=this.getValueSize();this.times=i.slice(r,s),this.values=this.values.slice(r*e,s*e)}return this}validate(){var e;let t=!0,i=this.getValueSize();i-Math.floor(i)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);let n=this.times,r=this.values,s=n.length;0===s&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let a=null;for(let e=0;e!==s;e++){let i=n[e];if("number"==typeof i&&isNaN(i)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,e,i),t=!1;break}if(null!==a&&a>i){console.error("THREE.KeyframeTrack: Out of order keys.",this,e,i,a),t=!1;break}a=i}if(void 0!==r&&ArrayBuffer.isView(e=r)&&!(e instanceof DataView))for(let e=0,i=r.length;e!==i;++e){let i=r[e];if(isNaN(i)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,e,i),t=!1;break}}return t}optimize(){let e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),n=2302===this.getInterpolation(),r=e.length-1,s=1;for(let a=1;a<r;++a){let r=!1,o=e[a];if(o!==e[a+1]&&(1!==a||o!==e[0]))if(n)r=!0;else{let e=a*i,n=e-i,s=e+i;for(let a=0;a!==i;++a){let i=t[e+a];if(i!==t[n+a]||i!==t[s+a]){r=!0;break}}}if(r){if(a!==s){e[s]=e[a];let n=a*i,r=s*i;for(let e=0;e!==i;++e)t[r+e]=t[n+e]}++s}}if(r>0){e[s]=e[r];for(let e=r*i,n=s*i,a=0;a!==i;++a)t[n+a]=t[e+a];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=t.slice(0,s*i)):(this.times=e,this.values=t),this}clone(){let e=this.times.slice(),t=this.values.slice(),i=new this.constructor(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}rB.prototype.TimeBufferType=Float32Array,rB.prototype.ValueBufferType=Float32Array,rB.prototype.DefaultInterpolation=2301;class rk extends rB{constructor(e,t,i){super(e,t,i)}}rk.prototype.ValueTypeName="bool",rk.prototype.ValueBufferType=Array,rk.prototype.DefaultInterpolation=2300,rk.prototype.InterpolantFactoryMethodLinear=void 0,rk.prototype.InterpolantFactoryMethodSmooth=void 0,(class extends rB{}).prototype.ValueTypeName="color",(class extends rB{}).prototype.ValueTypeName="number";class rz extends rU{constructor(e,t,i,n){super(e,t,i,n)}interpolate_(e,t,i,n){let r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=(i-t)/(n-t),l=e*a;for(let e=l+a;l!==e;l+=4)X.slerpFlat(r,0,s,l-a,s,l,o);return r}}class rV extends rB{InterpolantFactoryMethodLinear(e){return new rz(this.times,this.values,this.getValueSize(),e)}}rV.prototype.ValueTypeName="quaternion",rV.prototype.InterpolantFactoryMethodSmooth=void 0;class rH extends rB{constructor(e,t,i){super(e,t,i)}}rH.prototype.ValueTypeName="string",rH.prototype.ValueBufferType=Array,rH.prototype.DefaultInterpolation=2300,rH.prototype.InterpolantFactoryMethodLinear=void 0,rH.prototype.InterpolantFactoryMethodSmooth=void 0,(class extends rB{}).prototype.ValueTypeName="vector";class rG{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=rW(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){let t=rW();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function rW(){return("u"<typeof performance?Date:performance).now()}let rX="\\[\\]\\.:\\/",rj=RegExp("["+rX+"]","g"),rY="[^"+rX+"]",rq="[^"+rX.replace("\\.","")+"]",rK=RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",rY)+/(WCOD+)?/.source.replace("WCOD",rq)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",rY)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",rY)+"$"),r$=["material","materials","bones","map"];class rZ{constructor(e,t,i){this.path=t,this.parsedPath=i||rZ.parseTrackName(t),this.node=rZ.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new rZ.Composite(e,t,i):new rZ(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(rj,"")}static parseTrackName(e){let t=rK.exec(e);if(null===t)throw Error("PropertyBinding: Cannot parse trackName: "+e);let i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},n=i.nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==n&&-1!==n){let e=i.nodeName.substring(n+1);-1!==r$.indexOf(e)&&(i.nodeName=i.nodeName.substring(0,n),i.objectName=e)}if(null===i.propertyName||0===i.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){let i=e.skeleton.getBoneByName(t);if(void 0!==i)return i}if(e.children){let i=function(e){for(let n=0;n<e.length;n++){let r=e[n];if(r.name===t||r.uuid===t)return r;let s=i(r.children);if(s)return s}return null},n=i(e.children);if(n)return n}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){let i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)e[t++]=i[n]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){let i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)i[n]=e[t++]}_setValue_array_setNeedsUpdate(e,t){let i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)i[n]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){let i=this.resolvedProperty;for(let n=0,r=i.length;n!==r;++n)i[n]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node,t=this.parsedPath,i=t.objectName,n=t.propertyName,r=t.propertyIndex;if(e||(e=rZ.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(i){let n=t.objectIndex;switch(i){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===n){n=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[i]}if(void 0!==n){if(void 0===e[n])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[n]}}let s=e[n];if(void 0===s)return void console.error("THREE.PropertyBinding: Trying to update property for track: "+t.nodeName+"."+n+" but it wasn't found.",e);let a=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===n){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[r]&&(r=e.morphTargetDictionary[r])}o=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(o=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=n;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}rZ.Composite=class{constructor(e,t,i){const n=i||rZ.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,n)}getValue(e,t){this.bind();let i=this._targetGroup.nCachedObjects_,n=this._bindings[i];void 0!==n&&n.getValue(e,t)}setValue(e,t){let i=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=i.length;n!==r;++n)i[n].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}},rZ.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},rZ.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},rZ.prototype.GetterByBindingType=[rZ.prototype._getValue_direct,rZ.prototype._getValue_array,rZ.prototype._getValue_arrayElement,rZ.prototype._getValue_toArray],rZ.prototype.SetterByBindingTypeAndVersioning=[[rZ.prototype._setValue_direct,rZ.prototype._setValue_direct_setNeedsUpdate,rZ.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[rZ.prototype._setValue_array,rZ.prototype._setValue_array_setNeedsUpdate,rZ.prototype._setValue_array_setMatrixWorldNeedsUpdate],[rZ.prototype._setValue_arrayElement,rZ.prototype._setValue_arrayElement_setNeedsUpdate,rZ.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[rZ.prototype._setValue_fromArray,rZ.prototype._setValue_fromArray_setNeedsUpdate,rZ.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1),"u">typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"167"}})),"u">typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__="167");let rJ=`
#define MAX_COLORS 8
uniform vec2 uCanvas;
uniform float uTime;
uniform float uSpeed;
uniform vec2 uRot;
uniform int uColorCount;
uniform vec3 uColors[MAX_COLORS];
uniform int uTransparent;
uniform float uScale;
uniform float uFrequency;
uniform float uWarpStrength;
uniform vec2 uPointer; // in NDC [-1,1]
uniform float uMouseInfluence;
uniform float uParallax;
uniform float uNoise;
varying vec2 vUv;

void main() {
  float t = uTime * uSpeed;
  vec2 p = vUv * 2.0 - 1.0;
  p += uPointer * uParallax * 0.1;
  vec2 rp = vec2(p.x * uRot.x - p.y * uRot.y, p.x * uRot.y + p.y * uRot.x);
  vec2 q = vec2(rp.x * (uCanvas.x / uCanvas.y), rp.y);
  q /= max(uScale, 0.0001);
  q /= 0.5 + 0.2 * dot(q, q);
  q += 0.2 * cos(t) - 7.56;
  vec2 toward = (uPointer - rp);
  q += toward * uMouseInfluence * 0.2;

    vec3 col = vec3(0.0);
    float a = 1.0;

    if (uColorCount > 0) {
      vec2 s = q;
      vec3 sumCol = vec3(0.0);
      float cover = 0.0;
      for (int i = 0; i < MAX_COLORS; ++i) {
            if (i >= uColorCount) break;
            s -= 0.01;
            vec2 r = sin(1.5 * (s.yx * uFrequency) + 2.0 * cos(s * uFrequency));
            float m0 = length(r + sin(5.0 * r.y * uFrequency - 3.0 * t + float(i)) / 4.0);
            float kBelow = clamp(uWarpStrength, 0.0, 1.0);
            float kMix = pow(kBelow, 0.3); // strong response across 0..1
            float gain = 1.0 + max(uWarpStrength - 1.0, 0.0); // allow >1 to amplify displacement
            vec2 disp = (r - s) * kBelow;
            vec2 warped = s + disp * gain;
            float m1 = length(warped + sin(5.0 * warped.y * uFrequency - 3.0 * t + float(i)) / 4.0);
            float m = mix(m0, m1, kMix);
            float w = 1.0 - exp(-6.0 / exp(6.0 * m));
            sumCol += uColors[i] * w;
            cover = max(cover, w);
      }
      col = clamp(sumCol, 0.0, 1.0);
      a = uTransparent > 0 ? cover : 1.0;
    } else {
        vec2 s = q;
        for (int k = 0; k < 3; ++k) {
            s -= 0.01;
            vec2 r = sin(1.5 * (s.yx * uFrequency) + 2.0 * cos(s * uFrequency));
            float m0 = length(r + sin(5.0 * r.y * uFrequency - 3.0 * t + float(k)) / 4.0);
            float kBelow = clamp(uWarpStrength, 0.0, 1.0);
            float kMix = pow(kBelow, 0.3);
            float gain = 1.0 + max(uWarpStrength - 1.0, 0.0);
            vec2 disp = (r - s) * kBelow;
            vec2 warped = s + disp * gain;
            float m1 = length(warped + sin(5.0 * warped.y * uFrequency - 3.0 * t + float(k)) / 4.0);
            float m = mix(m0, m1, kMix);
            col[k] = 1.0 - exp(-6.0 / exp(6.0 * m));
        }
        a = uTransparent > 0 ? max(max(col.r, col.g), col.b) : 1.0;
    }

    if (uNoise > 0.0001) {
      float n = fract(sin(dot(gl_FragCoord.xy + vec2(uTime), vec2(12.9898, 78.233))) * 43758.5453123);
      col += (n - 0.5) * uNoise;
      col = clamp(col, 0.0, 1.0);
    }

    vec3 rgb = (uTransparent > 0) ? col * a : col;
    gl_FragColor = vec4(rgb, a);
}
`,rQ=`
varying vec2 vUv;
void main() {
  vUv = uv;
  gl_Position = vec4(position, 1.0);
}
`;function r0({className:e="",style:t,rotation:n=45,speed:a=.2,colors:o=[],transparent:l=!0,autoRotate:h=0,scale:u=1,frequency:c=1,warpStrength:d=1,mouseInfluence:p=1,parallax:f=.5,noise:m=.1}){let g=["#ff7a18","#E85102"],v=(0,r.useRef)(null),_=(0,r.useRef)(null),x=(0,r.useRef)(null),y=(0,r.useRef)(null),S=(0,r.useRef)(null),b=(0,r.useRef)(n),E=(0,r.useRef)(h),T=(0,r.useRef)(new M(0,0)),w=(0,r.useRef)(new M(0,0)),A=(0,r.useRef)(8);return(0,r.useEffect)(()=>{let e=v.current,t=new rv,i=new iu(-1,1,1,-1,0,1),n=new t6(2,2),r=Array.from({length:8},()=>new j(0,0,0)),o=new tH({vertexShader:rQ,fragmentShader:rJ,uniforms:{uCanvas:{value:new M(1,1)},uTime:{value:0},uSpeed:{value:a},uRot:{value:new M(1,0)},uColorCount:{value:0},uColors:{value:r},uTransparent:{value:+!!l},uScale:{value:u},uFrequency:{value:c},uWarpStrength:{value:d},uPointer:{value:new M(0,0)},uMouseInfluence:{value:p},uParallax:{value:f},uNoise:{value:m}},premultipliedAlpha:!0,transparent:!0});y.current=o;let h=new tO(n,o);t.add(h);let g=new rg({antialias:!1,powerPreference:"high-performance",alpha:!0});_.current=g,g.outputColorSpace=s,g.setPixelRatio(Math.min(window.devicePixelRatio||1,2)),g.setClearColor(0,+!l),g.domElement.style.width="100%",g.domElement.style.height="100%",g.domElement.style.display="block",e.appendChild(g.domElement);let C=new rG,P=()=>{let t=e.clientWidth||1,i=e.clientHeight||1;g.setSize(t,i,!1),o.uniforms.uCanvas.value.set(t,i)};if(P(),"ResizeObserver"in window){let t=new ResizeObserver(P);t.observe(e),S.current=t}else window.addEventListener("resize",P);let R=()=>{let e=C.getDelta(),n=C.elapsedTime;o.uniforms.uTime.value=n;let r=(b.current%360+E.current*n)*Math.PI/180,s=Math.cos(r),a=Math.sin(r);o.uniforms.uRot.value.set(s,a);let l=w.current,h=T.current,u=Math.min(1,e*A.current);l.lerp(h,u),o.uniforms.uPointer.value.copy(l),g.render(t,i),x.current=requestAnimationFrame(R)};return x.current=requestAnimationFrame(R),()=>{null!==x.current&&cancelAnimationFrame(x.current),S.current?S.current.disconnect():window.removeEventListener("resize",P),n.dispose(),o.dispose(),g.dispose(),g.domElement&&g.domElement.parentElement===e&&e.removeChild(g.domElement)}},[c,p,m,f,u,a,l,d]),(0,r.useEffect)(()=>{let e=y.current,t=_.current;if(!e)return;b.current=n,E.current=h,e.uniforms.uSpeed.value=a,e.uniforms.uScale.value=u,e.uniforms.uFrequency.value=c,e.uniforms.uWarpStrength.value=d,e.uniforms.uMouseInfluence.value=p,e.uniforms.uParallax.value=f,e.uniforms.uNoise.value=m;let i=g.filter(Boolean).slice(0,8).map(e=>{let t=e.replace("#","").trim(),i=3===t.length?[parseInt(t[0]+t[0],16),parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16)]:[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)];return new j(i[0]/255,i[1]/255,i[2]/255)});for(let t=0;t<8;t++){let n=e.uniforms.uColors.value[t];t<i.length?n.copy(i[t]):n.set(0,0,0)}e.uniforms.uColorCount.value=i.length,e.uniforms.uTransparent.value=+!!l,t&&t.setClearColor(0,+!l)},[n,h,a,u,c,d,p,f,m,o,l]),(0,r.useEffect)(()=>{let e=y.current,t=v.current;if(!e||!t)return;let i=e=>{let i=t.getBoundingClientRect(),n=(e.clientX-i.left)/(i.width||1)*2-1,r=-((e.clientY-i.top)/(i.height||1)*2-1);T.current.set(n,r)};return t.addEventListener("pointermove",i),()=>{t.removeEventListener("pointermove",i)}},[]),(0,i.jsx)("div",{ref:v,className:`color-bends-container ${e}`,style:t})}var r1=e.i(89970),r2,r3,r4,r5,r6,r8,r9,r7,se,st,si,sn,sr,ss=function(){return r2||"u">typeof window&&(r2=window.gsap)&&r2.registerPlugin&&r2},sa=1,so=[],sl=[],sh=[],su=Date.now,sc=function(e,t){return t},sd=function(){var e=se.core,t=e.bridge||{},i=e._scrollers,n=e._proxies;i.push.apply(i,sl),n.push.apply(n,sh),sl=i,sh=n,sc=function(e,i){return t[e](i)}},sp=function(e,t){return~sh.indexOf(e)&&sh[sh.indexOf(e)+1][t]},sf=function(e){return!!~st.indexOf(e)},sm=function(e,t,i,n,r){return e.addEventListener(t,i,{passive:!1!==n,capture:!!r})},sg=function(e,t,i,n){return e.removeEventListener(t,i,!!n)},sv="scrollLeft",s_="scrollTop",sx=function(){return si&&si.isPressed||sl.cache++},sy=function(e,t){var i=function i(n){if(n||0===n){sa&&(r4.history.scrollRestoration="manual");var r=si&&si.isPressed;e(n=i.v=Math.round(n)||(si&&si.iOS?1:0)),i.cacheID=sl.cache,r&&sc("ss",n)}else(t||sl.cache!==i.cacheID||sc("ref"))&&(i.cacheID=sl.cache,i.v=e());return i.v+i.offset};return i.offset=0,e&&i},sM={s:sv,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:sy(function(e){return arguments.length?r4.scrollTo(e,sS.sc()):r4.pageXOffset||r5[sv]||r6[sv]||r8[sv]||0})},sS={s:s_,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:sM,sc:sy(function(e){return arguments.length?r4.scrollTo(sM.sc(),e):r4.pageYOffset||r5[s_]||r6[s_]||r8[s_]||0})},sb=function(e,t){return(t&&t._ctx&&t._ctx.selector||r2.utils.toArray)(e)[0]||("string"==typeof e&&!1!==r2.config().nullTargetWarn?console.warn("Element not found:",e):null)},sE=function(e,t){for(var i=t.length;i--;)if(t[i]===e||t[i].contains(e))return!0;return!1},sT=function(e,t){var i=t.s,n=t.sc;sf(e)&&(e=r5.scrollingElement||r6);var r=sl.indexOf(e),s=n===sS.sc?1:2;~r||(r=sl.push(e)-1),sl[r+s]||sm(e,"scroll",sx);var a=sl[r+s],o=a||(sl[r+s]=sy(sp(e,i),!0)||(sf(e)?n:sy(function(t){return arguments.length?e[i]=t:e[i]})));return o.target=e,a||(o.smooth="smooth"===r2.getProperty(e,"scrollBehavior")),o},sw=function(e,t,i){var n=e,r=e,s=su(),a=s,o=t||50,l=Math.max(500,3*o),h=function(e,t){var l=su();t||l-s>o?(r=n,n=e,a=s,s=l):i?n+=e:n=r+(e-r)/(l-a)*(s-a)};return{update:h,reset:function(){r=n=i?0:n,a=s=0},getVelocity:function(e){var t=a,o=r,u=su();return(e||0===e)&&e!==n&&h(e),s===a||u-a>l?0:(n+(i?o:-o))/((i?u:s)-t)*1e3}}},sA=function(e,t){return t&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},sC=function(e){var t=Math.max.apply(Math,e),i=Math.min.apply(Math,e);return Math.abs(t)>=Math.abs(i)?t:i},sP=function(){(se=r2.core.globals().ScrollTrigger)&&se.core&&sd()},sR=function(e){return r2=e||ss(),!r3&&r2&&"u">typeof document&&document.body&&(r4=window,r6=(r5=document).documentElement,r8=r5.body,st=[r4,r5,r6,r8],r2.utils.clamp,sr=r2.core.context||function(){},r7="onpointerenter"in r8?"pointer":"mouse",r9=sL.isTouch=r4.matchMedia&&r4.matchMedia("(hover: none), (pointer: coarse)").matches?1:2*("ontouchstart"in r4||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0),sn=sL.eventTypes=("ontouchstart"in r6?"touchstart,touchmove,touchcancel,touchend":!("onpointerdown"in r6)?"mousedown,mousemove,mouseup,mouseup":"pointerdown,pointermove,pointercancel,pointerup").split(","),setTimeout(function(){return sa=0},500),sP(),r3=1),r3};sM.op=sS,sl.cache=0;var sL=function(){var e;function t(e){this.init(e)}return t.prototype.init=function(e){r3||sR(r2)||console.warn("Please gsap.registerPlugin(Observer)"),se||sP();var t=e.tolerance,i=e.dragMinimum,n=e.type,r=e.target,s=e.lineHeight,a=e.debounce,o=e.preventDefault,l=e.onStop,h=e.onStopDelay,u=e.ignore,c=e.wheelSpeed,d=e.event,p=e.onDragStart,f=e.onDragEnd,m=e.onDrag,g=e.onPress,v=e.onRelease,_=e.onRight,x=e.onLeft,y=e.onUp,M=e.onDown,S=e.onChangeX,b=e.onChangeY,E=e.onChange,T=e.onToggleX,w=e.onToggleY,A=e.onHover,C=e.onHoverEnd,P=e.onMove,R=e.ignoreCheck,L=e.isNormalizer,D=e.onGestureStart,I=e.onGestureEnd,U=e.onWheel,N=e.onEnable,O=e.onDisable,F=e.onClick,B=e.scrollSpeed,k=e.capture,z=e.allowClicks,V=e.lockAxis,H=e.onLockAxis;this.target=r=sb(r)||r6,this.vars=e,u&&(u=r2.utils.toArray(u)),t=t||1e-9,i=i||0,c=c||1,B=B||1,n=n||"wheel,touch,pointer",a=!1!==a,s||(s=parseFloat(r4.getComputedStyle(r8).lineHeight)||22);var G,W,X,j,Y,q,K,$=this,Z=0,J=0,Q=e.passive||!o&&!1!==e.passive,ee=sT(r,sM),et=sT(r,sS),ei=ee(),en=et(),er=~n.indexOf("touch")&&!~n.indexOf("pointer")&&"pointerdown"===sn[0],es=sf(r),ea=r.ownerDocument||r5,eo=[0,0,0],el=[0,0,0],eh=0,eu=function(){return eh=su()},ec=function(e,t){return($.event=e)&&u&&sE(e.target,u)||t&&er&&"touch"!==e.pointerType||R&&R(e,t)},ed=function(){var e=$.deltaX=sC(eo),i=$.deltaY=sC(el),n=Math.abs(e)>=t,r=Math.abs(i)>=t;E&&(n||r)&&E($,e,i,eo,el),n&&(_&&$.deltaX>0&&_($),x&&$.deltaX<0&&x($),S&&S($),T&&$.deltaX<0!=Z<0&&T($),Z=$.deltaX,eo[0]=eo[1]=eo[2]=0),r&&(M&&$.deltaY>0&&M($),y&&$.deltaY<0&&y($),b&&b($),w&&$.deltaY<0!=J<0&&w($),J=$.deltaY,el[0]=el[1]=el[2]=0),(j||X)&&(P&&P($),X&&(p&&1===X&&p($),m&&m($),X=0),j=!1),q&&(q=!1,1)&&H&&H($),Y&&(U($),Y=!1),G=0},ep=function(e,t,i){eo[i]+=e,el[i]+=t,$._vx.update(e),$._vy.update(t),a?G||(G=requestAnimationFrame(ed)):ed()},ef=function(e,t){V&&!K&&($.axis=K=Math.abs(e)>Math.abs(t)?"x":"y",q=!0),"y"!==K&&(eo[2]+=e,$._vx.update(e,!0)),"x"!==K&&(el[2]+=t,$._vy.update(t,!0)),a?G||(G=requestAnimationFrame(ed)):ed()},em=function(e){if(!ec(e,1)){var t=(e=sA(e,o)).clientX,n=e.clientY,r=t-$.x,s=n-$.y,a=$.isDragging;$.x=t,$.y=n,(a||(r||s)&&(Math.abs($.startX-t)>=i||Math.abs($.startY-n)>=i))&&(X||(X=a?2:1),a||($.isDragging=!0),ef(r,s))}},eg=$.onPress=function(e){ec(e,1)||e&&e.button||($.axis=K=null,W.pause(),$.isPressed=!0,e=sA(e),Z=J=0,$.startX=$.x=e.clientX,$.startY=$.y=e.clientY,$._vx.reset(),$._vy.reset(),sm(L?r:ea,sn[1],em,Q,!0),$.deltaX=$.deltaY=0,g&&g($))},ev=$.onRelease=function(e){if(!ec(e,1)){sg(L?r:ea,sn[1],em,!0);var t=!isNaN($.y-$.startY),i=$.isDragging,n=i&&(Math.abs($.x-$.startX)>3||Math.abs($.y-$.startY)>3),s=sA(e);!n&&t&&($._vx.reset(),$._vy.reset(),o&&z&&r2.delayedCall(.08,function(){if(su()-eh>300&&!e.defaultPrevented){if(e.target.click)e.target.click();else if(ea.createEvent){var t=ea.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,r4,1,s.screenX,s.screenY,s.clientX,s.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(t)}}})),$.isDragging=$.isGesturing=$.isPressed=!1,l&&i&&!L&&W.restart(!0),X&&ed(),f&&i&&f($),v&&v($,n)}},e_=function(e){return e.touches&&e.touches.length>1&&($.isGesturing=!0)&&D(e,$.isDragging)},ex=function(){return $.isGesturing=!1,I($)},ey=function(e){if(!ec(e)){var t=ee(),i=et();ep((t-ei)*B,(i-en)*B,1),ei=t,en=i,l&&W.restart(!0)}},eM=function(e){if(!ec(e)){e=sA(e,o),U&&(Y=!0);var t=(1===e.deltaMode?s:2===e.deltaMode?r4.innerHeight:1)*c;ep(e.deltaX*t,e.deltaY*t,0),l&&!L&&W.restart(!0)}},eS=function(e){if(!ec(e)){var t=e.clientX,i=e.clientY,n=t-$.x,r=i-$.y;$.x=t,$.y=i,j=!0,l&&W.restart(!0),(n||r)&&ef(n,r)}},eb=function(e){$.event=e,A($)},eE=function(e){$.event=e,C($)},eT=function(e){return ec(e)||sA(e,o)&&F($)};W=$._dc=r2.delayedCall(h||.25,function(){$._vx.reset(),$._vy.reset(),W.pause(),l&&l($)}).pause(),$.deltaX=$.deltaY=0,$._vx=sw(0,50,!0),$._vy=sw(0,50,!0),$.scrollX=ee,$.scrollY=et,$.isDragging=$.isGesturing=$.isPressed=!1,sr(this),$.enable=function(e){return!$.isEnabled&&(sm(es?ea:r,"scroll",sx),n.indexOf("scroll")>=0&&sm(es?ea:r,"scroll",ey,Q,k),n.indexOf("wheel")>=0&&sm(r,"wheel",eM,Q,k),(n.indexOf("touch")>=0&&r9||n.indexOf("pointer")>=0)&&(sm(r,sn[0],eg,Q,k),sm(ea,sn[2],ev),sm(ea,sn[3],ev),z&&sm(r,"click",eu,!0,!0),F&&sm(r,"click",eT),D&&sm(ea,"gesturestart",e_),I&&sm(ea,"gestureend",ex),A&&sm(r,r7+"enter",eb),C&&sm(r,r7+"leave",eE),P&&sm(r,r7+"move",eS)),$.isEnabled=!0,$.isDragging=$.isGesturing=$.isPressed=j=X=!1,$._vx.reset(),$._vy.reset(),ei=ee(),en=et(),e&&e.type&&eg(e),N&&N($)),$},$.disable=function(){$.isEnabled&&(so.filter(function(e){return e!==$&&sf(e.target)}).length||sg(es?ea:r,"scroll",sx),$.isPressed&&($._vx.reset(),$._vy.reset(),sg(L?r:ea,sn[1],em,!0)),sg(es?ea:r,"scroll",ey,k),sg(r,"wheel",eM,k),sg(r,sn[0],eg,k),sg(ea,sn[2],ev),sg(ea,sn[3],ev),sg(r,"click",eu,!0),sg(r,"click",eT),sg(ea,"gesturestart",e_),sg(ea,"gestureend",ex),sg(r,r7+"enter",eb),sg(r,r7+"leave",eE),sg(r,r7+"move",eS),$.isEnabled=$.isPressed=$.isDragging=!1,O&&O($))},$.kill=$.revert=function(){$.disable();var e=so.indexOf($);e>=0&&so.splice(e,1),si===$&&(si=0)},so.push($),L&&sf(r)&&(si=$),$.enable(d)},e=[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}],function(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(t.prototype,e),t}();sL.version="3.14.2",sL.create=function(e){return new sL(e)},sL.register=sR,sL.getAll=function(){return so.slice()},sL.getById=function(e){return so.filter(function(t){return t.vars.id===e})[0]},ss()&&r2.registerPlugin(sL);var sD,sI,sU,sN,sO,sF,sB,sk,sz,sV,sH,sG,sW,sX,sj,sY,sq,sK,s$,sZ,sJ,sQ,s0,s1,s2,s3,s4,s5,s6,s8,s9,s7,ae,at,ai,an,ar,as,aa=1,ao=Date.now,al=ao(),ah=0,au=0,ac=function(e,t,i){var n=aT(e)&&("clamp("===e.substr(0,6)||e.indexOf("max")>-1);return i["_"+t+"Clamp"]=n,n?e.substr(6,e.length-7):e},ad=function(e,t){return t&&(!aT(e)||"clamp("!==e.substr(0,6))?"clamp("+e+")":e},ap=function(){return sX=1},af=function(){return sX=0},am=function(e){return e},ag=function(e){return Math.round(1e5*e)/1e5||0},av=function(){return"u">typeof window},a_=function(){return sD||av()&&(sD=window.gsap)&&sD.registerPlugin&&sD},ax=function(e){return!!~sB.indexOf(e)},ay=function(e){return("Height"===e?s9:sU["inner"+e])||sO["client"+e]||sF["client"+e]},aM=function(e){return sp(e,"getBoundingClientRect")||(ax(e)?function(){return oC.width=sU.innerWidth,oC.height=s9,oC}:function(){return aY(e)})},aS=function(e,t,i){var n=i.d,r=i.d2,s=i.a;return(s=sp(e,"getBoundingClientRect"))?function(){return s()[n]}:function(){return(t?ay(r):e["client"+r])||0}},ab=function(e,t){var i=t.s,n=t.d2,r=t.d,s=t.a;return Math.max(0,(s=sp(e,i="scroll"+n))?s()-aM(e)()[r]:ax(e)?(sO[i]||sF[i])-ay(n):e[i]-e["offset"+n])},aE=function(e,t){for(var i=0;i<s$.length;i+=3)(!t||~t.indexOf(s$[i+1]))&&e(s$[i],s$[i+1],s$[i+2])},aT=function(e){return"string"==typeof e},aw=function(e){return"function"==typeof e},aA=function(e){return"number"==typeof e},aC=function(e){return"object"==typeof e},aP=function(e,t,i){return e&&e.progress(+!t)&&i&&e.pause()},aR=function(e,t){if(e.enabled){var i=e._ctx?e._ctx.add(function(){return t(e)}):t(e);i&&i.totalTime&&(e.callbackAnimation=i)}},aL=Math.abs,aD="left",aI="right",aU="bottom",aN="width",aO="height",aF="Right",aB="Left",ak="Bottom",az="padding",aV="margin",aH="Width",aG="Height",aW=function(e){return sU.getComputedStyle(e)},aX=function(e){var t=aW(e).position;e.style.position="absolute"===t||"fixed"===t?t:"relative"},aj=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},aY=function(e,t){var i=t&&"matrix(1, 0, 0, 1, 0, 0)"!==aW(e)[sj]&&sD.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),n=e.getBoundingClientRect();return i&&i.progress(0).kill(),n},aq=function(e,t){var i=t.d2;return e["offset"+i]||e["client"+i]||0},aK=function(e){var t,i=[],n=e.labels,r=e.duration();for(t in n)i.push(n[t]/r);return i},a$=function(e){var t=sD.utils.snap(e),i=Array.isArray(e)&&e.slice(0).sort(function(e,t){return e-t});return i?function(e,n,r){var s;if(void 0===r&&(r=.001),!n)return t(e);if(n>0){for(e-=r,s=0;s<i.length;s++)if(i[s]>=e)return i[s];return i[s-1]}for(s=i.length,e+=r;s--;)if(i[s]<=e)return i[s];return i[0]}:function(i,n,r){void 0===r&&(r=.001);var s=t(i);return!n||Math.abs(s-i)<r||s-i<0==n<0?s:t(n<0?i-e:i+e)}},aZ=function(e,t,i,n){return i.split(",").forEach(function(i){return e(t,i,n)})},aJ=function(e,t,i,n,r){return e.addEventListener(t,i,{passive:!n,capture:!!r})},aQ=function(e,t,i,n){return e.removeEventListener(t,i,!!n)},a0=function(e,t,i){(i=i&&i.wheelHandler)&&(e(t,"wheel",i),e(t,"touchmove",i))},a1={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},a2={toggleActions:"play",anticipatePin:0},a3={top:0,left:0,center:.5,bottom:1,right:1},a4=function(e,t){if(aT(e)){var i=e.indexOf("="),n=~i?(e.charAt(i-1)+1)*parseFloat(e.substr(i+1)):0;~i&&(e.indexOf("%")>i&&(n*=t/100),e=e.substr(0,i-1)),e=n+(e in a3?a3[e]*t:~e.indexOf("%")?parseFloat(e)*t/100:parseFloat(e)||0)}return e},a5=function(e,t,i,n,r,s,a,o){var l=r.startColor,h=r.endColor,u=r.fontSize,c=r.indent,d=r.fontWeight,p=sN.createElement("div"),f=ax(i)||"fixed"===sp(i,"pinType"),m=-1!==e.indexOf("scroller"),g=f?sF:i,v=-1!==e.indexOf("start"),_=v?l:h,x="border-color:"+_+";font-size:"+u+";color:"+_+";font-weight:"+d+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return x+="position:"+((m||o)&&f?"fixed;":"absolute;"),(m||o||!f)&&(x+=(n===sS?aI:aU)+":"+(s+parseFloat(c))+"px;"),a&&(x+="box-sizing:border-box;text-align:left;width:"+a.offsetWidth+"px;"),p._isStart=v,p.setAttribute("class","gsap-marker-"+e+(t?" marker-"+t:"")),p.style.cssText=x,p.innerText=t||0===t?e+"-"+t:e,g.children[0]?g.insertBefore(p,g.children[0]):g.appendChild(p),p._offset=p["offset"+n.op.d2],a6(p,0,n,v),p},a6=function(e,t,i,n){var r={display:"block"},s=i[n?"os2":"p2"],a=i[n?"p2":"os2"];e._isFlipped=n,r[i.a+"Percent"]=n?-100:0,r[i.a]=n?"1px":0,r["border"+s+aH]=1,r["border"+a+aH]=0,r[i.p]=t+"px",sD.set(e,r)},a8=[],a9={},a7=function(){return ao()-ah>34&&(ai||(ai=requestAnimationFrame(ox)))},oe=function(){s0&&s0.isPressed&&!(s0.startX>sF.clientWidth)||(sl.cache++,s0?ai||(ai=requestAnimationFrame(ox)):ox(),ah||oa("scrollStart"),ah=ao())},ot=function(){s3=sU.innerWidth,s2=sU.innerHeight},oi=function(e){sl.cache++,(!0===e||!sW&&!sQ&&!sN.fullscreenElement&&!sN.webkitFullscreenElement&&(!s1||s3!==sU.innerWidth||Math.abs(sU.innerHeight-s2)>.25*sU.innerHeight))&&sk.restart(!0)},on={},or=[],os=function e(){return aQ(oN,"scrollEnd",e)||og(!0)},oa=function(e){return on[e]&&on[e].map(function(e){return e()})||or},oo=[],ol=function(e){for(var t=0;t<oo.length;t+=5)(!e||oo[t+4]&&oo[t+4].query===e)&&(oo[t].style.cssText=oo[t+1],oo[t].getBBox&&oo[t].setAttribute("transform",oo[t+2]||""),oo[t+3].uncache=1)},oh=function(){return sl.forEach(function(e){return aw(e)&&++e.cacheID&&(e.rec=e())})},ou=function(e,t){var i;for(sY=0;sY<a8.length;sY++)(i=a8[sY])&&(!t||i._ctx===t)&&(e?i.kill(1):i.revert(!0,!0));s7=!0,t&&ol(t),t||oa("revert")},oc=function(e,t){sl.cache++,(t||!an)&&sl.forEach(function(e){return aw(e)&&e.cacheID++&&(e.rec=0)}),aT(e)&&(sU.history.scrollRestoration=s6=e)},od=0,op=function(){if(ar!==od){var e=ar=od;requestAnimationFrame(function(){return e===od&&og(!0)})}},of=function(){sF.appendChild(s8),s9=!s0&&s8.offsetHeight||sU.innerHeight,sF.removeChild(s8)},om=function(e){return sz(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(t){return t.style.display=e?"none":"block"})},og=function(e,t){if(sO=sN.documentElement,sF=sN.body,sB=[sU,sN,sO,sF],ah&&!e&&!s7)return void aJ(oN,"scrollEnd",os);of(),an=oN.isRefreshing=!0,s7||oh();var i=oa("refreshInit");sZ&&oN.sort(),t||ou(),sl.forEach(function(e){aw(e)&&(e.smooth&&(e.target.style.scrollBehavior="auto"),e(0))}),a8.slice(0).forEach(function(e){return e.refresh()}),s7=!1,a8.forEach(function(e){if(e._subPinOffset&&e.pin){var t=e.vars.horizontal?"offsetWidth":"offsetHeight",i=e.pin[t];e.revert(!0,1),e.adjustPinSpacing(e.pin[t]-i),e.refresh()}}),ae=1,om(!0),a8.forEach(function(e){var t=ab(e.scroller,e._dir),i="max"===e.vars.end||e._endClamp&&e.end>t,n=e._startClamp&&e.start>=t;(i||n)&&e.setPositions(n?t-1:e.start,i?Math.max(n?t:e.start+1,t):e.end,!0)}),om(!1),ae=0,i.forEach(function(e){return e&&e.render&&e.render(-1)}),sl.forEach(function(e){aw(e)&&(e.smooth&&requestAnimationFrame(function(){return e.target.style.scrollBehavior="smooth"}),e.rec&&e(e.rec))}),oc(s6,1),sk.pause(),od++,an=2,ox(2),a8.forEach(function(e){return aw(e.vars.onRefresh)&&e.vars.onRefresh(e)}),an=oN.isRefreshing=!1,oa("refresh")},ov=0,o_=1,ox=function(e){if(2===e||!an&&!s7){oN.isUpdating=!0,as&&as.update(0);var t=a8.length,i=ao(),n=i-al>=50,r=t&&a8[0].scroll();if(o_=ov>r?-1:1,an||(ov=r),n&&(ah&&!sX&&i-ah>200&&(ah=0,oa("scrollEnd")),sH=al,al=i),o_<0){for(sY=t;sY-- >0;)a8[sY]&&a8[sY].update(0,n);o_=1}else for(sY=0;sY<t;sY++)a8[sY]&&a8[sY].update(0,n);oN.isUpdating=!1}ai=0},oy=[aD,"top",aU,aI,aV+ak,aV+aF,aV+"Top",aV+aB,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],oM=oy.concat([aN,aO,"boxSizing","max"+aH,"max"+aG,"position",aV,az,az+"Top",az+aF,az+ak,az+aB]),oS=function(e,t,i){oT(i);var n=e._gsap;if(n.spacerIsNative)oT(n.spacerState);else if(e._gsap.swappedIn){var r=t.parentNode;r&&(r.insertBefore(e,t),r.removeChild(t))}e._gsap.swappedIn=!1},ob=function(e,t,i,n){if(!e._gsap.swappedIn){for(var r,s=oy.length,a=t.style,o=e.style;s--;)a[r=oy[s]]=i[r];a.position="absolute"===i.position?"absolute":"relative","inline"===i.display&&(a.display="inline-block"),o[aU]=o[aI]="auto",a.flexBasis=i.flexBasis||"auto",a.overflow="visible",a.boxSizing="border-box",a[aN]=aq(e,sM)+"px",a[aO]=aq(e,sS)+"px",a[az]=o[aV]=o.top=o[aD]="0",oT(n),o[aN]=o["max"+aH]=i[aN],o[aO]=o["max"+aG]=i[aO],o[az]=i[az],e.parentNode!==t&&(e.parentNode.insertBefore(t,e),t.appendChild(e)),e._gsap.swappedIn=!0}},oE=/([A-Z])/g,oT=function(e){if(e){var t,i,n=e.t.style,r=e.length,s=0;for((e.t._gsap||sD.core.getCache(e.t)).uncache=1;s<r;s+=2)i=e[s+1],t=e[s],i?n[t]=i:n[t]&&n.removeProperty(t.replace(oE,"-$1").toLowerCase())}},ow=function(e){for(var t=oM.length,i=e.style,n=[],r=0;r<t;r++)n.push(oM[r],i[oM[r]]);return n.t=e,n},oA=function(e,t,i){for(var n,r=[],s=e.length,a=8*!!i;a<s;a+=2)n=e[a],r.push(n,n in t?t[n]:e[a+1]);return r.t=e.t,r},oC={left:0,top:0},oP=function(e,t,i,n,r,s,a,o,l,h,u,c,d,p){aw(e)&&(e=e(o)),aT(e)&&"max"===e.substr(0,3)&&(e=c+("="===e.charAt(4)?a4("0"+e.substr(3),i):0));var f,m,g,v=d?d.time():0;if(d&&d.seek(0),isNaN(e)||(e*=1),aA(e))d&&(e=sD.utils.mapRange(d.scrollTrigger.start,d.scrollTrigger.end,0,c,e)),a&&a6(a,i,n,!0);else{aw(t)&&(t=t(o));var _,x,y,M,S=(e||"0").split(" ");(_=aY(g=sb(t,o)||sF)||{}).left||_.top||"none"!==aW(g).display||(M=g.style.display,g.style.display="block",_=aY(g),M?g.style.display=M:g.style.removeProperty("display")),x=a4(S[0],_[n.d]),y=a4(S[1]||"0",i),e=_[n.p]-l[n.p]-h+x+r-y,a&&a6(a,y,n,i-y<20||a._isStart&&y>20),i-=i-y}if(p&&(o[p]=e||-.001,e<0&&(e=0)),s){var b=e+i,E=s._isStart;f="scroll"+n.d2,a6(s,b,n,E&&b>20||!E&&(u?Math.max(sF[f],sO[f]):s.parentNode[f])<=b+1),u&&(l=aY(a),u&&(s.style[n.op.p]=l[n.op.p]-n.op.m-s._offset+"px"))}return d&&g&&(f=aY(g),d.seek(c),m=aY(g),d._caScrollDist=f[n.p]-m[n.p],e=e/d._caScrollDist*c),d&&d.seek(v),d?e:Math.round(e)},oR=/(webkit|moz|length|cssText|inset)/i,oL=function(e,t,i,n){if(e.parentNode!==t){var r,s,a=e.style;if(t===sF){for(r in e._stOrig=a.cssText,s=aW(e))+r||oR.test(r)||!s[r]||"string"!=typeof a[r]||"0"===r||(a[r]=s[r]);a.top=i,a.left=n}else a.cssText=e._stOrig;sD.core.getCache(e).uncache=1,t.appendChild(e)}},oD=function(e,t,i){var n=t,r=n;return function(t){var s=Math.round(e());return s!==n&&s!==r&&Math.abs(s-n)>3&&Math.abs(s-r)>3&&(t=s,i&&i()),r=n,n=Math.round(t)}},oI=function(e,t,i){var n={};n[t.p]="+="+i,sD.set(e,n)},oU=function(e,t){var i=sT(e,t),n="_scroll"+t.p2,r=function t(r,s,a,o,l){var h=t.tween,u=s.onComplete,c={};a=a||i();var d=oD(i,a,function(){h.kill(),t.tween=0});return l=o&&l||0,o=o||r-a,h&&h.kill(),s[n]=r,s.inherit=!1,s.modifiers=c,c[n]=function(){return d(a+o*h.ratio+l*h.ratio*h.ratio)},s.onUpdate=function(){sl.cache++,t.tween&&ox()},s.onComplete=function(){t.tween=0,u&&u.call(h)},h=t.tween=sD.to(e,s)};return e[n]=i,i.wheelHandler=function(){return r.tween&&r.tween.kill()&&(r.tween=0)},aJ(e,"wheel",i.wheelHandler),oN.isTouch&&aJ(e,"touchmove",i.wheelHandler),r},oN=function(){function e(t,i){sI||e.register(sD)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),s5(this),this.init(t,i)}return e.prototype.init=function(t,i){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!au){this.update=this.refresh=this.kill=am;return}var n,r,s,a,o,l,h,u,c,d,p,f,m,g,v,_,x,y,M,S,b,E,T,w,A,C,P,R,L,D,I,U,N,O,F,B,k,z,V,H,G,W=t=aj(aT(t)||aA(t)||t.nodeType?{trigger:t}:t,a2),X=W.onUpdate,j=W.toggleClass,Y=W.id,q=W.onToggle,K=W.onRefresh,$=W.scrub,Z=W.trigger,J=W.pin,Q=W.pinSpacing,ee=W.invalidateOnRefresh,et=W.anticipatePin,ei=W.onScrubComplete,en=W.onSnapComplete,er=W.once,es=W.snap,ea=W.pinReparent,eo=W.pinSpacer,el=W.containerAnimation,eh=W.fastScrollEnd,eu=W.preventOverlaps,ec=t.horizontal||t.containerAnimation&&!1!==t.horizontal?sM:sS,ed=!$&&0!==$,ep=sb(t.scroller||sU),ef=sD.core.getCache(ep),em=ax(ep),eg=("pinType"in t?t.pinType:sp(ep,"pinType")||em&&"fixed")==="fixed",ev=[t.onEnter,t.onLeave,t.onEnterBack,t.onLeaveBack],e_=ed&&t.toggleActions.split(" "),ex="markers"in t?t.markers:a2.markers,ey=em?0:parseFloat(aW(ep)["border"+ec.p2+aH])||0,eM=this,eS=t.onRefreshInit&&function(){return t.onRefreshInit(eM)},eb=aS(ep,em,ec),eE=!em||~sh.indexOf(ep)?aM(ep):function(){return oC},eT=0,ew=0,eA=0,eC=sT(ep,ec);if(eM._startClamp=eM._endClamp=!1,eM._dir=ec,et*=45,eM.scroller=ep,eM.scroll=el?el.time.bind(el):eC,l=eC(),eM.vars=t,i=i||t.animation,"refreshPriority"in t&&(sZ=1,-9999===t.refreshPriority&&(as=eM)),ef.tweenScroll=ef.tweenScroll||{top:oU(ep,sS),left:oU(ep,sM)},eM.tweenTo=s=ef.tweenScroll[ec.p],eM.scrubDuration=function(e){(F=aA(e)&&e)?O?O.duration(e):O=sD.to(i,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:F,paused:!0,onComplete:function(){return ei&&ei(eM)}}):(O&&O.progress(1).kill(),O=0)},i&&(i.vars.lazy=!1,i._initted&&!eM.isReverted||!1!==i.vars.immediateRender&&!1!==t.immediateRender&&i.duration()&&i.render(0,!0,!0),eM.animation=i.pause(),i.scrollTrigger=eM,eM.scrubDuration($),U=0,Y||(Y=i.vars.id)),es&&((!aC(es)||es.push)&&(es={snapTo:es}),"scrollBehavior"in sF.style&&sD.set(em?[sF,sO]:ep,{scrollBehavior:"auto"}),sl.forEach(function(e){return aw(e)&&e.target===(em?sN.scrollingElement||sO:ep)&&(e.smooth=!1)}),o=aw(es.snapTo)?es.snapTo:"labels"===es.snapTo?(n=i,function(e){return sD.utils.snap(aK(n),e)}):"labelsDirectional"===es.snapTo?(r=i,function(e,t){return a$(aK(r))(e,t.direction)}):!1!==es.directional?function(e,t){return a$(es.snapTo)(e,ao()-ew<500?0:t.direction)}:sD.utils.snap(es.snapTo),B=aC(B=es.duration||{min:.1,max:2})?sV(B.min,B.max):sV(B,B),k=sD.delayedCall(es.delay||F/2||.1,function(){var e=eC(),t=ao()-ew<500,n=s.tween;if((t||10>Math.abs(eM.getVelocity()))&&!n&&!sX&&eT!==e){var r,a,l=(e-u)/_,h=i&&!ed?i.totalProgress():l,d=t?0:(h-N)/(ao()-sH)*1e3||0,p=sD.utils.clamp(-l,1-l,aL(d/2)*d/.185),f=l+(!1===es.inertia?0:p),m=es,g=m.onStart,v=m.onInterrupt,x=m.onComplete;if(aA(r=o(f,eM))||(r=f),a=Math.max(0,Math.round(u+r*_)),e<=c&&e>=u&&a!==e){if(n&&!n._initted&&n.data<=aL(a-e))return;!1===es.inertia&&(p=r-l),s(a,{duration:B(aL(.185*Math.max(aL(f-h),aL(r-h))/d/.05||0)),ease:es.ease||"power3",data:aL(a-e),onInterrupt:function(){return k.restart(!0)&&v&&v(eM)},onComplete:function(){eM.update(),eT=eC(),i&&!ed&&(O?O.resetTo("totalProgress",r,i._tTime/i._tDur):i.progress(r)),U=N=i&&!ed?i.totalProgress():eM.progress,en&&en(eM),x&&x(eM)}},e,p*_,a-e-p*_),g&&g(eM,s.tween)}}else eM.isActive&&eT!==e&&k.restart(!0)}).pause()),Y&&(a9[Y]=eM),(G=(Z=eM.trigger=sb(Z||!0!==J&&J))&&Z._gsap&&Z._gsap.stRevert)&&(G=G(eM)),J=!0===J?Z:sb(J),aT(j)&&(j={targets:Z,className:j}),J&&(!1===Q||Q===aV||(Q=(!!Q||!J.parentNode||!J.parentNode.style||"flex"!==aW(J.parentNode).display)&&az),eM.pin=J,(a=sD.core.getCache(J)).spacer?x=a.pinState:(eo&&((eo=sb(eo))&&!eo.nodeType&&(eo=eo.current||eo.nativeElement),a.spacerIsNative=!!eo,eo&&(a.spacerState=ow(eo))),a.spacer=S=eo||sN.createElement("div"),S.classList.add("pin-spacer"),Y&&S.classList.add("pin-spacer-"+Y),a.pinState=x=ow(J)),!1!==t.force3D&&sD.set(J,{force3D:!0}),eM.spacer=S=a.spacer,C=(I=aW(J))[Q+ec.os2],E=sD.getProperty(J),T=sD.quickSetter(J,ec.a,"px"),ob(J,S,I),M=ow(J)),ex){g=aC(ex)?aj(ex,a1):a1,f=a5("scroller-start",Y,ep,ec,g,0),m=a5("scroller-end",Y,ep,ec,g,0,f),b=f["offset"+ec.op.d2];var eP=sb(sp(ep,"content")||ep);d=this.markerStart=a5("start",Y,eP,ec,g,b,0,el),p=this.markerEnd=a5("end",Y,eP,ec,g,b,0,el),el&&(H=sD.quickSetter([d,p],ec.a,"px")),eg||sh.length&&!0===sp(ep,"fixedMarkers")||(aX(em?sF:ep),sD.set([f,m],{force3D:!0}),R=sD.quickSetter(f,ec.a,"px"),D=sD.quickSetter(m,ec.a,"px"))}if(el){var eR=el.vars.onUpdate,eL=el.vars.onUpdateParams;el.eventCallback("onUpdate",function(){eM.update(0,0,1),eR&&eR.apply(el,eL||[])})}if(eM.previous=function(){return a8[a8.indexOf(eM)-1]},eM.next=function(){return a8[a8.indexOf(eM)+1]},eM.revert=function(e,t){if(!t)return eM.kill(!0);var n=!1!==e||!eM.enabled,r=sW;n!==eM.isReverted&&(n&&(z=Math.max(eC(),eM.scroll.rec||0),eA=eM.progress,V=i&&i.progress()),d&&[d,p,f,m].forEach(function(e){return e.style.display=n?"none":"block"}),n&&(sW=eM,eM.update(n)),!J||ea&&eM.isActive||(n?oS(J,S,x):ob(J,S,aW(J),P)),n||eM.update(n),sW=r,eM.isReverted=n)},eM.refresh=function(n,r,a,o){if(!sW&&eM.enabled||r){if(J&&n&&ah)return void aJ(e,"scrollEnd",os);!an&&eS&&eS(eM),sW=eM,s.tween&&!a&&(s.tween.kill(),s.tween=0),O&&O.pause(),ee&&i&&(i.revert({kill:!1}).invalidate(),i.getChildren?i.getChildren(!0,!0,!1).forEach(function(e){return e.vars.immediateRender&&e.render(0,!0,!0)}):i.vars.immediateRender&&i.render(0,!0,!0)),eM.isReverted||eM.revert(!0,!0),eM._subPinOffset=!1;var g,b,T,C,R,D,I,U,N,F,B,H,G,W=eb(),X=eE(),j=el?el.duration():ab(ep,ec),Y=_<=.01||!_,q=0,$=o||0,et=aC(a)?a.end:t.end,ei=t.endTrigger||Z,en=aC(a)?a.start:t.start||(0!==t.start&&Z?J?"0 0":"0 100%":0),er=eM.pinnedContainer=t.pinnedContainer&&sb(t.pinnedContainer,eM),es=Z&&Math.max(0,a8.indexOf(eM))||0,eo=es;for(ex&&aC(a)&&(H=sD.getProperty(f,ec.p),G=sD.getProperty(m,ec.p));eo-- >0;)(D=a8[eo]).end||D.refresh(0,1)||(sW=eM),(I=D.pin)&&(I===Z||I===J||I===er)&&!D.isReverted&&(F||(F=[]),F.unshift(D),D.revert(!0,!0)),D!==a8[eo]&&(es--,eo--);for(aw(en)&&(en=en(eM)),u=oP(en=ac(en,"start",eM),Z,W,ec,eC(),d,f,eM,X,ey,eg,j,el,eM._startClamp&&"_startClamp")||(J?-.001:0),aw(et)&&(et=et(eM)),aT(et)&&!et.indexOf("+=")&&(~et.indexOf(" ")?et=(aT(en)?en.split(" ")[0]:"")+et:(q=a4(et.substr(2),W),et=aT(en)?en:(el?sD.utils.mapRange(0,el.duration(),el.scrollTrigger.start,el.scrollTrigger.end,u):u)+q,ei=Z)),et=ac(et,"end",eM),c=Math.max(u,oP(et||(ei?"100% 0":j),ei,W,ec,eC()+q,p,m,eM,X,ey,eg,j,el,eM._endClamp&&"_endClamp"))||-.001,q=0,eo=es;eo--;)(I=(D=a8[eo]||{}).pin)&&D.start-D._pinPush<=u&&!el&&D.end>0&&(g=D.end-(eM._startClamp?Math.max(0,D.start):D.start),(I===Z&&D.start-D._pinPush<u||I===er)&&isNaN(en)&&(q+=g*(1-D.progress)),I===J&&($+=g));if(u+=q,c+=q,eM._startClamp&&(eM._startClamp+=q),eM._endClamp&&!an&&(eM._endClamp=c||-.001,c=Math.min(c,ab(ep,ec))),_=c-u||(u-=.01)&&.001,Y&&(eA=sD.utils.clamp(0,1,sD.utils.normalize(u,c,z))),eM._pinPush=$,d&&q&&((g={})[ec.a]="+="+q,er&&(g[ec.p]="-="+eC()),sD.set([d,p],g)),J&&!(ae&&eM.end>=ab(ep,ec)))g=aW(J),C=ec===sS,T=eC(),w=parseFloat(E(ec.a))+$,!j&&c>1&&(B={style:B=(em?sN.scrollingElement||sO:ep).style,value:B["overflow"+ec.a.toUpperCase()]},em&&"scroll"!==aW(sF)["overflow"+ec.a.toUpperCase()]&&(B.style["overflow"+ec.a.toUpperCase()]="scroll")),ob(J,S,g),M=ow(J),b=aY(J,!0),U=eg&&sT(ep,C?sM:sS)(),Q?((P=[Q+ec.os2,_+$+"px"]).t=S,(eo=Q===az?aq(J,ec)+_+$:0)&&(P.push(ec.d,eo+"px"),"auto"!==S.style.flexBasis&&(S.style.flexBasis=eo+"px")),oT(P),er&&a8.forEach(function(e){e.pin===er&&!1!==e.vars.pinSpacing&&(e._subPinOffset=!0)}),eg&&eC(z)):(eo=aq(J,ec))&&"auto"!==S.style.flexBasis&&(S.style.flexBasis=eo+"px"),eg&&((R={top:b.top+(C?T-u:U)+"px",left:b.left+(C?U:T-u)+"px",boxSizing:"border-box",position:"fixed"})[aN]=R["max"+aH]=Math.ceil(b.width)+"px",R[aO]=R["max"+aG]=Math.ceil(b.height)+"px",R[aV]=R[aV+"Top"]=R[aV+aF]=R[aV+ak]=R[aV+aB]="0",R[az]=g[az],R[az+"Top"]=g[az+"Top"],R[az+aF]=g[az+aF],R[az+ak]=g[az+ak],R[az+aB]=g[az+aB],y=oA(x,R,ea),an&&eC(0)),i?(N=i._initted,sJ(1),i.render(i.duration(),!0,!0),A=E(ec.a)-w+_+$,L=Math.abs(_-A)>1,eg&&L&&y.splice(y.length-2,2),i.render(0,!0,!0),N||i.invalidate(!0),i.parent||i.totalTime(i.totalTime()),sJ(0)):A=_,B&&(B.value?B.style["overflow"+ec.a.toUpperCase()]=B.value:B.style.removeProperty("overflow-"+ec.a));else if(Z&&eC()&&!el)for(b=Z.parentNode;b&&b!==sF;)b._pinOffset&&(u-=b._pinOffset,c-=b._pinOffset),b=b.parentNode;F&&F.forEach(function(e){return e.revert(!1,!0)}),eM.start=u,eM.end=c,l=h=an?z:eC(),el||an||(l<z&&eC(z),eM.scroll.rec=0),eM.revert(!1,!0),ew=ao(),k&&(eT=-1,k.restart(!0)),sW=0,i&&ed&&(i._initted||V)&&i.progress()!==V&&i.progress(V||0,!0).render(i.time(),!0,!0),(Y||eA!==eM.progress||el||ee||i&&!i._initted)&&(i&&!ed&&(i._initted||eA||!1!==i.vars.immediateRender)&&i.totalProgress(el&&u<-.001&&!eA?sD.utils.normalize(u,c,0):eA,!0),eM.progress=Y||(l-u)/_===eA?0:eA),J&&Q&&(S._pinOffset=Math.round(eM.progress*A)),O&&O.invalidate(),isNaN(H)||(H-=sD.getProperty(f,ec.p),G-=sD.getProperty(m,ec.p),oI(f,ec,H),oI(d,ec,H-(o||0)),oI(m,ec,G),oI(p,ec,G-(o||0))),Y&&!an&&eM.update(),!K||an||v||(v=!0,K(eM),v=!1)}},eM.getVelocity=function(){return(eC()-h)/(ao()-sH)*1e3||0},eM.endAnimation=function(){aP(eM.callbackAnimation),i&&(O?O.progress(1):i.paused()?ed||aP(i,eM.direction<0,1):aP(i,i.reversed()))},eM.labelToScroll=function(e){return i&&i.labels&&(u||eM.refresh()||u)+i.labels[e]/i.duration()*_||0},eM.getTrailing=function(e){var t=a8.indexOf(eM),i=eM.direction>0?a8.slice(0,t).reverse():a8.slice(t+1);return(aT(e)?i.filter(function(t){return t.vars.preventOverlaps===e}):i).filter(function(e){return eM.direction>0?e.end<=u:e.start>=c})},eM.update=function(e,t,n){if(!el||n||e){var r,a,o,d,p,m,g,v=!0===an?z:eM.scroll(),x=e?0:(v-u)/_,b=x<0?0:x>1?1:x||0,E=eM.progress;if(t&&(h=l,l=el?eC():v,es&&(N=U,U=i&&!ed?i.totalProgress():b)),et&&J&&!sW&&!aa&&ah&&(!b&&u<v+(v-h)/(ao()-sH)*et?b=1e-4:1===b&&c>v+(v-h)/(ao()-sH)*et&&(b=.9999)),b!==E&&eM.enabled){if(d=(p=(r=eM.isActive=!!b&&b<1)!=(!!E&&E<1))||!!b!=!!E,eM.direction=b>E?1:-1,eM.progress=b,d&&!sW&&(a=b&&!E?0:1===b?1:1===E?2:3,ed&&(o=!p&&"none"!==e_[a+1]&&e_[a+1]||e_[a],g=i&&("complete"===o||"reset"===o||o in i))),eu&&(p||g)&&(g||$||!i)&&(aw(eu)?eu(eM):eM.getTrailing(eu).forEach(function(e){return e.endAnimation()})),!ed&&(!O||sW||aa?i&&i.totalProgress(b,!!(sW&&(ew||e))):(O._dp._time-O._start!==O._time&&O.render(O._dp._time-O._start),O.resetTo?O.resetTo("totalProgress",b,i._tTime/i._tDur):(O.vars.totalProgress=b,O.invalidate().restart()))),J)if(e&&Q&&(S.style[Q+ec.os2]=C),eg){if(d){if(m=!e&&b>E&&c+1>v&&v+1>=ab(ep,ec),ea)if(!e&&(r||m)){var P=aY(J,!0),I=v-u;oL(J,sF,P.top+(ec===sS?I:0)+"px",P.left+(ec===sS?0:I)+"px")}else oL(J,S);oT(r||m?y:M),L&&b<1&&r||T(w+(1!==b||m?0:A))}}else T(ag(w+A*b));!es||s.tween||sW||aa||k.restart(!0),j&&(p||er&&b&&(b<1||!at))&&sz(j.targets).forEach(function(e){return e.classList[r||er?"add":"remove"](j.className)}),!X||ed||e||X(eM),d&&!sW?(ed&&(g&&("complete"===o?i.pause().totalProgress(1):"reset"===o?i.restart(!0).pause():"restart"===o?i.restart(!0):i[o]()),X&&X(eM)),(p||!at)&&(q&&p&&aR(eM,q),ev[a]&&aR(eM,ev[a]),er&&(1===b?eM.kill(!1,1):ev[a]=0),!p&&ev[a=1===b?1:3]&&aR(eM,ev[a])),eh&&!r&&Math.abs(eM.getVelocity())>(aA(eh)?eh:2500)&&(aP(eM.callbackAnimation),O?O.progress(1):aP(i,"reverse"===o?1:!b,1))):ed&&X&&!sW&&X(eM)}if(D){var F=el?v/el.duration()*(el._caScrollDist||0):v;R(F+ +!!f._isFlipped),D(F)}H&&H(-v/el.duration()*(el._caScrollDist||0))}},eM.enable=function(t,i){eM.enabled||(eM.enabled=!0,aJ(ep,"resize",oi),em||aJ(ep,"scroll",oe),eS&&aJ(e,"refreshInit",eS),!1!==t&&(eM.progress=eA=0,l=h=eT=eC()),!1!==i&&eM.refresh())},eM.getTween=function(e){return e&&s?s.tween:O},eM.setPositions=function(e,t,i,n){if(el){var r=el.scrollTrigger,s=el.duration(),a=r.end-r.start;e=r.start+a*e/s,t=r.start+a*t/s}eM.refresh(!1,!1,{start:ad(e,i&&!!eM._startClamp),end:ad(t,i&&!!eM._endClamp)},n),eM.update()},eM.adjustPinSpacing=function(e){if(P&&e){var t=P.indexOf(ec.d)+1;P[t]=parseFloat(P[t])+e+"px",P[1]=parseFloat(P[1])+e+"px",oT(P)}},eM.disable=function(t,i){if(!1!==t&&eM.revert(!0,!0),eM.enabled&&(eM.enabled=eM.isActive=!1,i||O&&O.pause(),z=0,a&&(a.uncache=1),eS&&aQ(e,"refreshInit",eS),k&&(k.pause(),s.tween&&s.tween.kill()&&(s.tween=0)),!em)){for(var n=a8.length;n--;)if(a8[n].scroller===ep&&a8[n]!==eM)return;aQ(ep,"resize",oi),em||aQ(ep,"scroll",oe)}},eM.kill=function(e,n){eM.disable(e,n),O&&!n&&O.kill(),Y&&delete a9[Y];var r=a8.indexOf(eM);r>=0&&a8.splice(r,1),r===sY&&o_>0&&sY--,r=0,a8.forEach(function(e){return e.scroller===eM.scroller&&(r=1)}),r||an||(eM.scroll.rec=0),i&&(i.scrollTrigger=null,e&&i.revert({kill:!1}),n||i.kill()),d&&[d,p,f,m].forEach(function(e){return e.parentNode&&e.parentNode.removeChild(e)}),as===eM&&(as=0),J&&(a&&(a.uncache=1),r=0,a8.forEach(function(e){return e.pin===J&&r++}),r||(a.spacer=0)),t.onKill&&t.onKill(eM)},a8.push(eM),eM.enable(!1,!1),G&&G(eM),i&&i.add&&!_){var eD=eM.update;eM.update=function(){eM.update=eD,sl.cache++,u||c||eM.refresh()},sD.delayedCall(.01,eM.update),_=.01,u=c=0}else eM.refresh();J&&op()},e.register=function(t){return sI||(sD=t||a_(),av()&&window.document&&e.enable(),sI=au),sI},e.defaults=function(e){if(e)for(var t in e)a2[t]=e[t];return a2},e.disable=function(e,t){au=0,a8.forEach(function(i){return i[t?"kill":"disable"](e)}),aQ(sU,"wheel",oe),aQ(sN,"scroll",oe),clearInterval(sG),aQ(sN,"touchcancel",am),aQ(sF,"touchstart",am),aZ(aQ,sN,"pointerdown,touchstart,mousedown",ap),aZ(aQ,sN,"pointerup,touchend,mouseup",af),sk.kill(),aE(aQ);for(var i=0;i<sl.length;i+=3)a0(aQ,sl[i],sl[i+1]),a0(aQ,sl[i],sl[i+2])},e.enable=function(){if(sU=window,sO=(sN=document).documentElement,sF=sN.body,sD&&(sz=sD.utils.toArray,sV=sD.utils.clamp,s5=sD.core.context||am,sJ=sD.core.suppressOverwrites||am,s6=sU.history.scrollRestoration||"auto",ov=sU.pageYOffset||0,sD.core.globals("ScrollTrigger",e),sF)){au=1,(s8=document.createElement("div")).style.height="100vh",s8.style.position="absolute",of(),function e(){return au&&requestAnimationFrame(e)}(),sL.register(sD),e.isTouch=sL.isTouch,s4=sL.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),s1=1===sL.isTouch,aJ(sU,"wheel",oe),sB=[sU,sN,sO,sF],sD.matchMedia?(e.matchMedia=function(e){var t,i=sD.matchMedia();for(t in e)i.add(t,e[t]);return i},sD.addEventListener("matchMediaInit",function(){oh(),ou()}),sD.addEventListener("matchMediaRevert",function(){return ol()}),sD.addEventListener("matchMedia",function(){og(0,1),oa("matchMedia")}),sD.matchMedia().add("(orientation: portrait)",function(){return ot(),ot})):console.warn("Requires GSAP 3.11.0 or later"),ot(),aJ(sN,"scroll",oe);var t,i,n=sF.hasAttribute("style"),r=sF.style,s=r.borderTopStyle,a=sD.core.Animation.prototype;for(a.revert||Object.defineProperty(a,"revert",{value:function(){return this.time(-.01,!0)}}),r.borderTopStyle="solid",sS.m=Math.round((t=aY(sF)).top+sS.sc())||0,sM.m=Math.round(t.left+sM.sc())||0,s?r.borderTopStyle=s:r.removeProperty("border-top-style"),n||(sF.setAttribute("style",""),sF.removeAttribute("style")),sG=setInterval(a7,250),sD.delayedCall(.5,function(){return aa=0}),aJ(sN,"touchcancel",am),aJ(sF,"touchstart",am),aZ(aJ,sN,"pointerdown,touchstart,mousedown",ap),aZ(aJ,sN,"pointerup,touchend,mouseup",af),sj=sD.utils.checkPrefix("transform"),oM.push(sj),sI=ao(),sk=sD.delayedCall(.2,og).pause(),s$=[sN,"visibilitychange",function(){var e=sU.innerWidth,t=sU.innerHeight;sN.hidden?(sq=e,sK=t):(sq!==e||sK!==t)&&oi()},sN,"DOMContentLoaded",og,sU,"load",og,sU,"resize",oi],aE(aJ),a8.forEach(function(e){return e.enable(0,1)}),i=0;i<sl.length;i+=3)a0(aQ,sl[i],sl[i+1]),a0(aQ,sl[i],sl[i+2])}},e.config=function(t){"limitCallbacks"in t&&(at=!!t.limitCallbacks);var i=t.syncInterval;i&&clearInterval(sG)||(sG=i)&&setInterval(a7,i),"ignoreMobileResize"in t&&(s1=1===e.isTouch&&t.ignoreMobileResize),"autoRefreshEvents"in t&&(aE(aQ)||aE(aJ,t.autoRefreshEvents||"none"),sQ=-1===(t.autoRefreshEvents+"").indexOf("resize"))},e.scrollerProxy=function(e,t){var i=sb(e),n=sl.indexOf(i),r=ax(i);~n&&sl.splice(n,r?6:2),t&&(r?sh.unshift(sU,t,sF,t,sO,t):sh.unshift(i,t))},e.clearMatchMedia=function(e){a8.forEach(function(t){return t._ctx&&t._ctx.query===e&&t._ctx.kill(!0,!0)})},e.isInViewport=function(e,t,i){var n=(aT(e)?sb(e):e).getBoundingClientRect(),r=n[i?aN:aO]*t||0;return i?n.right-r>0&&n.left+r<sU.innerWidth:n.bottom-r>0&&n.top+r<sU.innerHeight},e.positionInViewport=function(e,t,i){aT(e)&&(e=sb(e));var n=e.getBoundingClientRect(),r=n[i?aN:aO],s=null==t?r/2:t in a3?a3[t]*r:~t.indexOf("%")?parseFloat(t)*r/100:parseFloat(t)||0;return i?(n.left+s)/sU.innerWidth:(n.top+s)/sU.innerHeight},e.killAll=function(e){if(a8.slice(0).forEach(function(e){return"ScrollSmoother"!==e.vars.id&&e.kill()}),!0!==e){var t=on.killAll||[];on={},t.forEach(function(e){return e()})}},e}();oN.version="3.14.2",oN.saveStyles=function(e){return e?sz(e).forEach(function(e){if(e&&e.style){var t=oo.indexOf(e);t>=0&&oo.splice(t,5),oo.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),sD.core.getCache(e),s5())}}):oo},oN.revert=function(e,t){return ou(!e,t)},oN.create=function(e,t){return new oN(e,t)},oN.refresh=function(e){return e?oi(!0):(sI||oN.register())&&og(!0)},oN.update=function(e){return++sl.cache&&ox(2*(!0===e))},oN.clearScrollMemory=oc,oN.maxScroll=function(e,t){return ab(e,t?sM:sS)},oN.getScrollFunc=function(e,t){return sT(sb(e),t?sM:sS)},oN.getById=function(e){return a9[e]},oN.getAll=function(){return a8.filter(function(e){return"ScrollSmoother"!==e.vars.id})},oN.isScrolling=function(){return!!ah},oN.snapDirectional=a$,oN.addEventListener=function(e,t){var i=on[e]||(on[e]=[]);~i.indexOf(t)||i.push(t)},oN.removeEventListener=function(e,t){var i=on[e],n=i&&i.indexOf(t);n>=0&&i.splice(n,1)},oN.batch=function(e,t){var i,n=[],r={},s=t.interval||.016,a=t.batchMax||1e9,o=function(e,t){var i=[],n=[],r=sD.delayedCall(s,function(){t(i,n),i=[],n=[]}).pause();return function(e){i.length||r.restart(!0),i.push(e.trigger),n.push(e),a<=i.length&&r.progress(1)}};for(i in t)r[i]="on"===i.substr(0,2)&&aw(t[i])&&"onRefreshInit"!==i?o(i,t[i]):t[i];return aw(a)&&(a=a(),aJ(oN,"refresh",function(){return a=t.batchMax()})),sz(e).forEach(function(e){var t={};for(i in r)t[i]=r[i];t.trigger=e,n.push(oN.create(t))}),n};var oO,oF=function(e,t,i,n){return t>n?e(n):t<0&&e(0),i>n?(n-t)/(i-t):i<0?t/(t-i):1},oB=function e(t,i){!0===i?t.style.removeProperty("touch-action"):t.style.touchAction=!0===i?"auto":i?"pan-"+i+(sL.isTouch?" pinch-zoom":""):"none",t===sO&&e(sF,i)},ok={auto:1,scroll:1},oz=function(e){var t,i=e.event,n=e.target,r=e.axis,s=(i.changedTouches?i.changedTouches[0]:i).target,a=s._gsap||sD.core.getCache(s),o=ao();if(!a._isScrollT||o-a._isScrollT>2e3){for(;s&&s!==sF&&(s.scrollHeight<=s.clientHeight&&s.scrollWidth<=s.clientWidth||!(ok[(t=aW(s)).overflowY]||ok[t.overflowX]));)s=s.parentNode;a._isScroll=s&&s!==n&&!ax(s)&&(ok[(t=aW(s)).overflowY]||ok[t.overflowX]),a._isScrollT=o}(a._isScroll||"x"===r)&&(i.stopPropagation(),i._gsapAllow=!0)},oV=function(e,t,i,n){return sL.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:t,onWheel:n=n&&oz,onPress:n,onDrag:n,onScroll:n,onEnable:function(){return i&&aJ(sN,sL.eventTypes[0],oG,!1,!0)},onDisable:function(){return aQ(sN,sL.eventTypes[0],oG,!0)}})},oH=/(input|label|select|textarea)/i,oG=function(e){var t=oH.test(e.target.tagName);(t||oO)&&(e._gsapAllow=!0,oO=t)},oW=function(e){aC(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var t,i,n,r,s,a,o,l,h=e,u=h.normalizeScrollX,c=h.momentum,d=h.allowNestedScroll,p=h.onRelease,f=sb(e.target)||sO,m=sD.core.globals().ScrollSmoother,g=m&&m.get(),v=s4&&(e.content&&sb(e.content)||g&&!1!==e.content&&!g.smooth()&&g.content()),_=sT(f,sS),x=sT(f,sM),y=1,M=(sL.isTouch&&sU.visualViewport?sU.visualViewport.scale*sU.visualViewport.width:sU.outerWidth)/sU.innerWidth,S=0,b=aw(c)?function(){return c(t)}:function(){return c||2.8},E=oV(f,e.type,!0,d),T=function(){return r=!1},w=am,A=am,C=function(){i=ab(f,sS),A=sV(+!!s4,i),u&&(w=sV(0,ab(f,sM))),n=od},P=function(){v._gsap.y=ag(parseFloat(v._gsap.y)+_.offset)+"px",v.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(v._gsap.y)+", 0, 1)",_.offset=_.cacheID=0},R=function(){if(r){requestAnimationFrame(T);var e=ag(t.deltaY/2),i=A(_.v-e);if(v&&i!==_.v+_.offset){_.offset=i-_.v;var n=ag((parseFloat(v&&v._gsap.y)||0)-_.offset);v.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+n+", 0, 1)",v._gsap.y=n+"px",_.cacheID=sl.cache,ox()}return!0}_.offset&&P(),r=!0},L=function(){C(),s.isActive()&&s.vars.scrollY>i&&(_()>i?s.progress(1)&&_(i):s.resetTo("scrollY",i))};return v&&sD.set(v,{y:"+=0"}),e.ignoreCheck=function(e){return s4&&"touchmove"===e.type&&R(e)||y>1.05&&"touchstart"!==e.type||t.isGesturing||e.touches&&e.touches.length>1},e.onPress=function(){r=!1;var e=y;y=ag((sU.visualViewport&&sU.visualViewport.scale||1)/M),s.pause(),e!==y&&oB(f,y>1.01||!u&&"x"),a=x(),o=_(),C(),n=od},e.onRelease=e.onGestureStart=function(e,t){if(_.offset&&P(),t){sl.cache++;var n,r,a=b();u&&(r=(n=x())+-(.05*a*e.velocityX)/.227,a*=oF(x,n,r,ab(f,sM)),s.vars.scrollX=w(r)),r=(n=_())+-(.05*a*e.velocityY)/.227,a*=oF(_,n,r,ab(f,sS)),s.vars.scrollY=A(r),s.invalidate().duration(a).play(.01),(s4&&s.vars.scrollY>=i||n>=i-1)&&sD.to({},{onUpdate:L,duration:a})}else l.restart(!0);p&&p(e)},e.onWheel=function(){s._ts&&s.pause(),ao()-S>1e3&&(n=0,S=ao())},e.onChange=function(e,t,i,r,s){if(od!==n&&C(),t&&u&&x(w(r[2]===t?a+(e.startX-e.x):x()+t-r[1])),i){_.offset&&P();var l=s[2]===i,h=l?o+e.startY-e.y:_()+i-s[1],c=A(h);l&&h!==c&&(o+=c-h),_(c)}(i||t)&&ox()},e.onEnable=function(){oB(f,!u&&"x"),oN.addEventListener("refresh",L),aJ(sU,"resize",L),_.smooth&&(_.target.style.scrollBehavior="auto",_.smooth=x.smooth=!1),E.enable()},e.onDisable=function(){oB(f,!0),aQ(sU,"resize",L),oN.removeEventListener("refresh",L),E.kill()},e.lockAxis=!1!==e.lockAxis,(t=new sL(e)).iOS=s4,s4&&!_()&&_(1),s4&&sD.ticker.add(am),l=t._dc,s=sD.to(t,{ease:"power4",paused:!0,inherit:!1,scrollX:u?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:oD(_,_(),function(){return s.pause()})},onUpdate:ox,onComplete:l.vars.onComplete}),t};oN.sort=function(e){if(aw(e))return a8.sort(e);var t=sU.pageYOffset||0;return oN.getAll().forEach(function(e){return e._sortY=e.trigger?t+e.trigger.getBoundingClientRect().top:e.start+sU.innerHeight}),a8.sort(e||function(e,t){return -1e6*(e.vars.refreshPriority||0)+(e.vars.containerAnimation?1e6:e._sortY)-((t.vars.containerAnimation?1e6:t._sortY)+-1e6*(t.vars.refreshPriority||0))})},oN.observe=function(e){return new sL(e)},oN.normalizeScroll=function(e){if(void 0===e)return s0;if(!0===e&&s0)return s0.enable();if(!1===e){s0&&s0.kill(),s0=e;return}var t=e instanceof sL?e:oW(e);return s0&&s0.target===t.target&&s0.kill(),ax(t.target)&&(s0=t),t},oN.core={_getVelocityProp:sw,_inputObserver:oV,_scrollers:sl,_proxies:sh,bridge:{ss:function(){ah||oa("scrollStart"),ah=ao()},ref:function(){return sW}}},a_()&&sD.registerPlugin(oN);let oX,oj,oY="function"==typeof Symbol?Symbol():"_split",oq,oK="u">typeof Intl&&"Segmenter"in Intl?new Intl.Segmenter:0,o$=e=>"string"==typeof e?o$(document.querySelectorAll(e)):"length"in e?Array.from(e).reduce((e,t)=>("string"==typeof t?e.push(...o$(t)):e.push(t),e),[]):[e],oZ=e=>o$(e).filter(e=>e instanceof HTMLElement),oJ=[],oQ=function(){},o0={add:e=>e()},o1=/\s+/g,o2=RegExp("\\p{RI}\\p{RI}|\\p{Emoji}(\\p{EMod}|\\u{FE0F}\\u{20E3}?|[\\u{E0020}-\\u{E007E}]+\\u{E007F})?(\\u{200D}\\p{Emoji}(\\p{EMod}|\\u{FE0F}\\u{20E3}?|[\\u{E0020}-\\u{E007E}]+\\u{E007F})?)*|.","gu"),o3={left:0,top:0,width:0,height:0},o4=(e,t)=>{for(;++t<e.length&&e[t]===o3;);return e[t]||o3},o5=({element:e,html:t,ariaL:i,ariaH:n})=>{e.innerHTML=t,i?e.setAttribute("aria-label",i):e.removeAttribute("aria-label"),n?e.setAttribute("aria-hidden",n):e.removeAttribute("aria-hidden")},o6=(e,t)=>{if(t){let i=new Set(e.join("").match(t)||oJ),n=e.length,r,s,a,o;if(i.size){for(;--n>-1;)for(a of(s=e[n],i))if(a.startsWith(s)&&a.length>s.length){for(r=0,o=s;a.startsWith(o+=e[n+ ++r])&&o.length<a.length;);if(r&&o.length===a.length){e[n]=a,e.splice(n+1,r);break}}}}return e},o8=e=>"inline"===window.getComputedStyle(e).display&&(e.style.display="inline-block"),o9=(e,t,i)=>t.insertBefore("string"==typeof e?document.createTextNode(e):e,i),o7=(e,t,i)=>{let n=t[e+"sClass"]||"",{tag:r="div",aria:s="auto",propIndex:a=!1}=t,o="line"===e?"block":"inline-block",l=n.indexOf("++")>-1,h=t=>{let h=document.createElement(r),u=i.length+1;return n&&(h.className=n+(l?" "+n+u:"")),a&&h.style.setProperty("--"+e,u+""),"none"!==s&&h.setAttribute("aria-hidden","true"),"span"!==r&&(h.style.position="relative",h.style.display=o),h.textContent=t,i.push(h),h};return l&&(n=n.replace("++","")),h.collection=i,h},le=(e,t,i,n,r,s,a,o,l,h)=>{var u;let c=Array.from(e.childNodes),d=0,{wordDelimiter:p,reduceWhiteSpace:f=!0,prepareText:m}=t,g=e.getBoundingClientRect(),v=g,_=!f&&"pre"===window.getComputedStyle(e).whiteSpace.substring(0,3),x=0,y=i.collection,M,S,b,E,T,w,A,C,P,R,L,D,I,U,N,O,F,B;for("object"==typeof p?(b=p.delimiter||p,S=p.replaceWith||""):S=""===p?"":p||" ",M=" "!==S;d<c.length;d++)if(3===(E=c[d]).nodeType){for(N=E.textContent||"",f?N=N.replace(o1," "):_&&(N=N.replace(/\n/g,S+"\n")),m&&(N=m(N,e)),E.textContent=N,F=(T=S||b?N.split(b||S):N.match(o)||oJ)[T.length-1],C=M?" "===F.slice(-1):!F,F||T.pop(),v=g,(A=M?" "===T[0].charAt(0):!T[0])&&o9(" ",e,E),T[0]||T.shift(),o6(T,l),s&&h||(E.textContent=""),P=1;P<=T.length;P++)if(O=T[P-1],!f&&_&&"\n"===O.charAt(0)&&(null==(u=E.previousSibling)||u.remove(),o9(document.createElement("br"),e,E),O=O.slice(1)),f||""!==O)if(" "===O)e.insertBefore(document.createTextNode(" "),E);else{if(M&&" "===O.charAt(0)&&o9(" ",e,E),x&&1===P&&!A&&y.indexOf(x.parentNode)>-1?(w=y[y.length-1]).appendChild(document.createTextNode(n?"":O)):(o9(w=i(n?"":O),e,E),x&&1===P&&!A&&w.insertBefore(x,w.firstChild)),n)for(B=0,L=oK?o6([...oK.segment(O)].map(e=>e.segment),l):O.match(o)||oJ;B<L.length;B++)w.appendChild(" "===L[B]?document.createTextNode(" "):n(L[B]));if(s&&h){if(N=E.textContent=N.substring(O.length+1,N.length),(R=w.getBoundingClientRect()).top>v.top&&R.left<=v.left){for(D=e.cloneNode(),I=e.childNodes[0];I&&I!==w;)U=I,I=I.nextSibling,D.appendChild(U);e.parentNode.insertBefore(D,e),r&&o8(D)}v=R}(P<T.length||C)&&o9(P>=T.length?" ":M&&" "===O.slice(-1)?" "+S:S,e,E)}else o9(S,e,E);e.removeChild(E),x=0}else 1===E.nodeType&&(a&&a.indexOf(E)>-1?(y.indexOf(E.previousSibling)>-1&&y[y.length-1].appendChild(E),x=E):(le(E,t,i,n,r,s,a,o,l,!0),x=0),r&&o8(E))},lt=class e{constructor(e,t){this.isSplit=!1,oq||li.register(window.gsap),this.elements=oZ(e),this.chars=[],this.words=[],this.lines=[],this.masks=[],this.vars=t,this.elements.forEach(e=>{var i;!1!==t.overwrite&&(null==(i=e[oY])||i._data.orig.filter(({element:t})=>t===e).forEach(o5)),e[oY]=this}),this._split=()=>this.isSplit&&this.split(this.vars);let i=[],n,r=()=>{let e=i.length,t;for(;e--;){let n=(t=i[e]).element.offsetWidth;if(n!==t.width){t.width=n,this._split();return}}};this._data={orig:i,obs:"u">typeof ResizeObserver&&new ResizeObserver(()=>{clearTimeout(n),n=setTimeout(r,200)})},oQ(this),this.split(t)}split(e){return(this._ctx||o0).add(()=>{this.isSplit&&this.revert(),this.vars=e=e||this.vars||{};let{type:t="chars,words,lines",aria:i="auto",deepSlice:n=!0,smartWrap:r,onSplit:s,autoSplit:a=!1,specialChars:o,mask:l}=this.vars,h=t.indexOf("lines")>-1,u=t.indexOf("chars")>-1,c=t.indexOf("words")>-1,d=u&&!c&&!h,p=o&&("push"in o?RegExp("(?:"+o.join("|")+")","gu"):o),f=p?RegExp(p.source+"|"+o2.source,"gu"):o2,m=!!e.ignore&&oZ(e.ignore),{orig:g,animTime:v,obs:_}=this._data,x;(u||c||h)&&(this.elements.forEach((t,s)=>{g[s]={element:t,html:t.innerHTML,ariaL:t.getAttribute("aria-label"),ariaH:t.getAttribute("aria-hidden")},"auto"===i?t.setAttribute("aria-label",(t.textContent||"").trim()):"hidden"===i&&t.setAttribute("aria-hidden","true");let a=[],o=[],l=[],v=u?o7("char",e,a):null,_=o7("word",e,o),x,y,M,S;if(le(t,e,_,v,d,n&&(h||d),m,f,p,!1),h){let i,n,r=o$(t.childNodes),s=(i=o7("line",e,l),n=window.getComputedStyle(t).textAlign||"left",(e,s)=>{let a=i("");for(a.style.textAlign=n,t.insertBefore(a,r[e]);e<s;e++)a.appendChild(r[e]);a.normalize()}),a,o=[],h=0,u=r.map(e=>1===e.nodeType?e.getBoundingClientRect():o3),c=o3,d;for(x=0;x<r.length;x++)1===(a=r[x]).nodeType&&("BR"===a.nodeName?(x&&"BR"===r[x-1].nodeName||(o.push(a),s(h,x+1)),h=x+1,c=o4(u,x)):(d=u[x],x&&d.top>c.top&&d.left<c.left+c.width-1&&(s(h,x),h=x),c=d));h<x&&s(h,x),o.forEach(e=>{var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)})}if(!c){for(x=0;x<o.length;x++)if(y=o[x],u||!y.nextSibling||3!==y.nextSibling.nodeType)if(r&&!h){for((M=document.createElement("span")).style.whiteSpace="nowrap";y.firstChild;)M.appendChild(y.firstChild);y.replaceWith(M)}else y.replaceWith(...y.childNodes);else(S=y.nextSibling)&&3===S.nodeType&&(S.textContent=(y.textContent||"")+(S.textContent||""),y.remove());o.length=0,t.normalize()}this.lines.push(...l),this.words.push(...o),this.chars.push(...a)}),l&&this[l]&&this.masks.push(...this[l].map(e=>{let t=e.cloneNode();return e.replaceWith(t),t.appendChild(e),e.className&&(t.className=e.className.trim()+"-mask"),t.style.overflow="clip",t}))),this.isSplit=!0,oj&&h&&(a?oj.addEventListener("loadingdone",this._split):"loading"===oj.status&&console.warn("SplitText called before fonts loaded")),(x=s&&s(this))&&x.totalTime&&(this._data.anim=v?x.totalTime(v):x),h&&a&&this.elements.forEach((e,t)=>{g[t].width=e.offsetWidth,_&&_.observe(e)})}),this}kill(){let{obs:e}=this._data;e&&e.disconnect(),null==oj||oj.removeEventListener("loadingdone",this._split)}revert(){var e,t;if(this.isSplit){let{orig:i,anim:n}=this._data;this.kill(),i.forEach(o5),this.chars.length=this.words.length=this.lines.length=i.length=this.masks.length=0,this.isSplit=!1,n&&(this._data.animTime=n.totalTime(),n.revert()),null==(t=(e=this.vars).onRevert)||t.call(e,this)}return this}static create(t,i){return new e(t,i)}static register(e){(oX=oX||e||window.gsap)&&(o$=oX.utils.toArray,oQ=oX.core.context||oQ),!oq&&window.innerWidth>0&&(oj=document.fonts,oq=!0)}};lt.version="3.14.2";let li=lt,ln="u">typeof document?r.useLayoutEffect:r.useEffect,lr=e=>e&&!Array.isArray(e)&&"object"==typeof e,ls=[],la={},lo=r1.default,ll=(e,t=ls)=>{let i=la;lr(e)?(i=e,e=null,t="dependencies"in i?i.dependencies:ls):lr(t)&&(t="dependencies"in(i=t)?i.dependencies:ls),e&&"function"!=typeof e&&console.warn("First parameter must be a function or config object");let{scope:n,revertOnUpdate:s}=i,a=(0,r.useRef)(!1),o=(0,r.useRef)(lo.context(()=>{},n)),l=(0,r.useRef)(e=>o.current.add(null,e)),h=t&&t.length&&!s;return h&&ln(()=>(a.current=!0,()=>o.current.revert()),ls),ln(()=>{if(e&&o.current.add(e,n),!h||!a.current)return()=>o.current.revert()},t),{context:o.current,contextSafe:l.current}};ll.register=e=>{lo=e},ll.headless=!0,r1.gsap.registerPlugin(oN,li,ll);let lh=({text:e,className:t="",delay:n=50,duration:s=1.25,ease:a="power3.out",splitType:o="chars",from:l={opacity:0,y:40},to:h={opacity:1,y:0},threshold:u=.1,rootMargin:c="-100px",textAlign:d="center",tag:p="p",onLetterAnimationComplete:f,showCallback:m=!0})=>{let g=(0,r.useRef)(null),v=(0,r.useRef)(!1),_=(0,r.useRef)(f),[x,y]=(0,r.useState)(!1);(0,r.useEffect)(()=>{_.current=f},[f]),(0,r.useEffect)(()=>{"loaded"===document.fonts.status?y(!0):document.fonts.ready.then(()=>{y(!0)})},[]),ll(()=>{let t;if(!g.current||!e||!x||v.current)return;let i=g.current;if(i._rbsplitInstance){try{i._rbsplitInstance.revert()}catch(e){}i._rbsplitInstance=null}let r=(1-u)*100,d=/^(-?\d+(?:\.\d+)?)(px|em|rem|%)?$/.exec(c),p=d?parseFloat(d[1]):0,f=d&&d[2]||"px",m=0===p?"":p<0?`-=${Math.abs(p)}${f}`:`+=${p}${f}`,y=`top ${r}%${m}`,M=new li(i,{type:o,smartWrap:!0,autoSplit:"lines"===o,linesClass:"split-line",wordsClass:"split-word",charsClass:"split-char",reduceWhiteSpace:!1,onSplit:e=>(o.includes("chars")&&e.chars.length&&(t=e.chars),!t&&o.includes("words")&&e.words.length&&(t=e.words),!t&&o.includes("lines")&&e.lines.length&&(t=e.lines),t||(t=e.chars||e.words||e.lines),r1.gsap.fromTo(t,{...l},{...h,duration:s,ease:a,stagger:n/1e3,scrollTrigger:{trigger:i,start:y,once:!0,fastScrollEnd:!0,anticipatePin:.4},onComplete:()=>{v.current=!0,_.current?.()},willChange:"transform, opacity",force3D:!0}))});return i._rbsplitInstance=M,()=>{oN.getAll().forEach(e=>{e.trigger===i&&e.kill()});try{M.revert()}catch(e){}i._rbsplitInstance=null}},{dependencies:[e,n,s,a,o,JSON.stringify(l),JSON.stringify(h),u,c,x],scope:g});let M={textAlign:d,overflow:"hidden",display:"inline-block",whiteSpace:"normal",wordWrap:"break-word",willChange:"transform, opacity"},S=`split-parent ${t}`;switch(p){case"h1":return(0,i.jsx)("h1",{ref:g,style:M,className:S,children:e});case"h2":return(0,i.jsx)("h2",{ref:g,style:M,className:S,children:e});case"h3":return(0,i.jsx)("h3",{ref:g,style:M,className:S,children:e});case"h4":return(0,i.jsx)("h4",{ref:g,style:M,className:S,children:e});case"h5":return(0,i.jsx)("h5",{ref:g,style:M,className:S,children:e});case"h6":return(0,i.jsx)("h6",{ref:g,style:M,className:S,children:e});default:return(0,i.jsx)("p",{ref:g,style:M,className:S,children:e})}};var lu=e.i(64761);function lc(){return(0,i.jsxs)(n.default,{id:"hero",className:"relative min-h-[300px] h-[750px] max-h-screen overflow-hidden ",children:[(0,i.jsx)("div",{className:"absolute inset-0 z-0 pointer-events-none",children:(0,i.jsx)(r0,{rotation:70,autoRotate:5,speed:.3,scale:1.1,frequency:1,warpStrength:1,mouseInfluence:.8,parallax:.6,noise:.1,transparent:!0})}),(0,i.jsx)("div",{className:"absolute inset-0 bg-black/30 z-10"}),(0,i.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-40 z-20 pointer-events-none",style:{background:"linear-gradient(to top, #0a0a0a 0%, transparent 100%)"}}),(0,i.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center z-30 px-4 sm:px-6 space-y-6 mt-16",children:[(0,i.jsx)(lu.default,{text:"Hi There Im Tengku Hanafi",speed:1.4,delay:.8,color:"#ffffff",shineColor:"#fca311",spread:90,direction:"left",yoyo:!1,pauseOnHover:!1,disabled:!1}),(0,i.jsx)(lh,{text:"Build Clean, Scalable Web Experiences",className:"text-4xl sm:text-5xl font-bold text-white drop-shadow-[0_4px_20px_rgba(0,0,0,0.6)] text-center",delay:50,duration:1.25,ease:"power3.out",splitType:"chars",from:{opacity:0,y:40},to:{opacity:1,y:0},threshold:.1,rootMargin:"-100px",textAlign:"center",onLetterAnimationComplete:()=>{console.log("All letters have animated!")},showCallback:!0}),(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mt-4",children:[(0,i.jsx)("button",{className:"px-6 py-3 bg-white text-orange-600 font-semibold rounded-lg   shadow-lg transition-all duration-300   hover:bg-orange-500 hover:text-white   hover:shadow-orange-500/40 hover:-translate-y-0.5",children:"View My Project"}),(0,i.jsx)("button",{className:"px-6 py-3 bg-white/10 text-white rounded-lg   backdrop-blur-md border border-white/30   transition-all duration-300   hover:bg-white/20 hover:-translate-y-0.5",children:"Contact Me"})]})]})]})}e.s(["default",()=>lc],74701)},28252,e=>{"use strict";var t=e.i(43476),i=e.i(73172),n=e.i(67170),r=e.i(71645),s=e.i(89970);let a=12,o=300,l="132, 0, 255",h=[{color:"#060010",title:"Logo Design",description:"Unique brand logos for your business",label:"Branding",image:"/assets/Photos/s1.png"},{color:"#060010",title:"Shirt Design",description:"Creative T-shirt graphics and prints",label:"Apparel",image:"/assets/Photos/s2.png"},{color:"#060010",title:"Web Development",description:"Build functional websites and applications",label:"Development",image:"/assets/Photos/s3.png"},{color:"#060010",title:"Web Design",description:"Craft modern and responsive websites",label:"Design",image:"/assets/Photos/s4.png"},{color:"#060010",title:"Poster Design",description:"Eye-catching posters for events or campaigns",label:"Marketing",image:"/assets/Photos/s5.png"},{color:"#060010",title:"Automation Python",description:"Automate tasks and workflows using Python",label:"Automation",image:"/assets/Photos/s6.png"}],u=({children:e,className:i="",disableAnimations:n=!1,style:o,particleCount:h=a,glowColor:u=l,enableTilt:c=!0,clickEffect:d=!1,enableMagnetism:p=!1})=>{let f=(0,r.useRef)(null),m=(0,r.useRef)([]),g=(0,r.useRef)([]),v=(0,r.useRef)(!1),_=(0,r.useRef)([]),x=(0,r.useRef)(!1),y=(0,r.useRef)(null),M=(0,r.useCallback)(()=>{if(x.current||!f.current)return;let{width:e,height:t}=f.current.getBoundingClientRect();_.current=Array.from({length:h},()=>((e,t,i=l)=>{let n=document.createElement("div");return n.className="particle",n.style.cssText=`
    position: absolute;
    width: 4px;
    height: 4px;
    border-radius: 50%;
    background: rgba(${i}, 1);
    box-shadow: 0 0 6px rgba(${i}, 0.6);
    pointer-events: none;
    z-index: 100;
    left: ${e}px;
    top: ${t}px;
  `,n})(Math.random()*e,Math.random()*t,u)),x.current=!0},[h,u]),S=(0,r.useCallback)(()=>{g.current.forEach(clearTimeout),g.current=[],y.current?.kill(),m.current.forEach(e=>{s.gsap.to(e,{scale:0,opacity:0,duration:.3,ease:"back.in(1.7)",onComplete:()=>{e.parentNode?.removeChild(e)}})}),m.current=[]},[]),b=(0,r.useCallback)(()=>{f.current&&v.current&&(x.current||M(),_.current.forEach((e,t)=>{let i=setTimeout(()=>{if(!v.current||!f.current)return;let t=e.cloneNode(!0);f.current.appendChild(t),m.current.push(t),s.gsap.fromTo(t,{scale:0,opacity:0},{scale:1,opacity:1,duration:.3,ease:"back.out(1.7)"}),s.gsap.to(t,{x:(Math.random()-.5)*100,y:(Math.random()-.5)*100,rotation:360*Math.random(),duration:2+2*Math.random(),ease:"none",repeat:-1,yoyo:!0}),s.gsap.to(t,{opacity:.3,duration:1.5,ease:"power2.inOut",repeat:-1,yoyo:!0})},100*t);g.current.push(i)}))},[M]);return(0,r.useEffect)(()=>{if(n||!f.current)return;let e=f.current,t=()=>{v.current=!0,b(),c&&s.gsap.to(e,{rotateX:5,rotateY:5,duration:.3,ease:"power2.out",transformPerspective:1e3})},i=()=>{v.current=!1,S(),c&&s.gsap.to(e,{rotateX:0,rotateY:0,duration:.3,ease:"power2.out"}),p&&s.gsap.to(e,{x:0,y:0,duration:.3,ease:"power2.out"})},r=t=>{if(!c&&!p)return;let i=e.getBoundingClientRect(),n=t.clientX-i.left,r=t.clientY-i.top,a=i.width/2,o=i.height/2;c&&s.gsap.to(e,{rotateX:-((r-o)/o*10),rotateY:(n-a)/a*10,duration:.1,ease:"power2.out",transformPerspective:1e3}),p&&(y.current=s.gsap.to(e,{x:(n-a)*.05,y:(r-o)*.05,duration:.3,ease:"power2.out"}))},a=t=>{if(!d)return;let i=e.getBoundingClientRect(),n=t.clientX-i.left,r=t.clientY-i.top,a=Math.max(Math.hypot(n,r),Math.hypot(n-i.width,r),Math.hypot(n,r-i.height),Math.hypot(n-i.width,r-i.height)),o=document.createElement("div");o.style.cssText=`
        position: absolute;
        width: ${2*a}px;
        height: ${2*a}px;
        border-radius: 50%;
        background: radial-gradient(circle, rgba(${u}, 0.4) 0%, rgba(${u}, 0.2) 30%, transparent 70%);
        left: ${n-a}px;
        top: ${r-a}px;
        pointer-events: none;
        z-index: 1000;
      `,e.appendChild(o),s.gsap.fromTo(o,{scale:0,opacity:1},{scale:1,opacity:0,duration:.8,ease:"power2.out",onComplete:()=>o.remove()})};return e.addEventListener("mouseenter",t),e.addEventListener("mouseleave",i),e.addEventListener("mousemove",r),e.addEventListener("click",a),()=>{v.current=!1,e.removeEventListener("mouseenter",t),e.removeEventListener("mouseleave",i),e.removeEventListener("mousemove",r),e.removeEventListener("click",a),S()}},[b,S,n,c,p,d,u]),(0,t.jsx)("div",{ref:f,className:`${i} particle-container`,style:{...o,position:"relative",overflow:"hidden"},children:e})},c=({gridRef:e,disableAnimations:t=!1,enabled:i=!0,spotlightRadius:n=o,glowColor:a=l})=>{let h=(0,r.useRef)(null),u=(0,r.useRef)(!1);return(0,r.useEffect)(()=>{if(t||!e?.current||!i)return;let r=document.createElement("div");r.className="global-spotlight",r.style.cssText=`
      position: fixed;
      width: 800px;
      height: 800px;
      border-radius: 50%;
      pointer-events: none;
      background: radial-gradient(circle,
        rgba(${a}, 0.15) 0%,
        rgba(${a}, 0.08) 15%,
        rgba(${a}, 0.04) 25%,
        rgba(${a}, 0.02) 40%,
        rgba(${a}, 0.01) 65%,
        transparent 70%
      );
      z-index: 200;
      opacity: 0;
      transform: translate(-50%, -50%);
      mix-blend-mode: screen;
    `,document.body.appendChild(r),h.current=r;let o=t=>{if(!h.current||!e.current)return;let i=e.current.closest(".bento-section"),r=i?.getBoundingClientRect(),a=r&&t.clientX>=r.left&&t.clientX<=r.right&&t.clientY>=r.top&&t.clientY<=r.bottom;u.current=a||!1;let o=e.current.querySelectorAll(".magic-bento-card");if(!a){s.gsap.to(h.current,{opacity:0,duration:.3,ease:"power2.out"}),o.forEach(e=>{e.style.setProperty("--glow-intensity","0")});return}let{proximity:l,fadeDistance:c}={proximity:.5*n,fadeDistance:.75*n},d=1/0;o.forEach(e=>{var i,r,s;let a,o,h,u=e.getBoundingClientRect(),p=u.left+u.width/2,f=u.top+u.height/2,m=Math.max(0,Math.hypot(t.clientX-p,t.clientY-f)-Math.max(u.width,u.height)/2);d=Math.min(d,m);let g=0;m<=l?g=1:m<=c&&(g=(c-m)/(c-l)),i=t.clientX,r=t.clientY,s=g,o=(i-(a=e.getBoundingClientRect()).left)/a.width*100,h=(r-a.top)/a.height*100,e.style.setProperty("--glow-x",`${o}%`),e.style.setProperty("--glow-y",`${h}%`),e.style.setProperty("--glow-intensity",s.toString()),e.style.setProperty("--glow-radius",`${n}px`)}),s.gsap.to(h.current,{left:t.clientX,top:t.clientY,duration:.1,ease:"power2.out"});let p=d<=l?.8:d<=c?(c-d)/(c-l)*.8:0;s.gsap.to(h.current,{opacity:p,duration:p>0?.2:.5,ease:"power2.out"})},l=()=>{u.current=!1,e.current?.querySelectorAll(".magic-bento-card").forEach(e=>{e.style.setProperty("--glow-intensity","0")}),h.current&&s.gsap.to(h.current,{opacity:0,duration:.3,ease:"power2.out"})};return document.addEventListener("mousemove",o),document.addEventListener("mouseleave",l),()=>{document.removeEventListener("mousemove",o),document.removeEventListener("mouseleave",l),h.current?.parentNode?.removeChild(h.current)}},[e,t,i,n,a]),null},d=({children:e,gridRef:i})=>(0,t.jsx)("div",{className:"card-grid bento-section",ref:i,children:e}),p=({textAutoHide:e=!0,enableStars:i=!0,enableSpotlight:n=!0,enableBorderGlow:p=!0,disableAnimations:f=!1,spotlightRadius:m=o,particleCount:g=a,enableTilt:v=!1,glowColor:_=l,clickEffect:x=!0,enableMagnetism:y=!0})=>{let M=(0,r.useRef)(null),S=(()=>{let[e,t]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{let e=()=>t(window.innerWidth<=768);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e})(),b=f||S;return(0,t.jsxs)(t.Fragment,{children:[n&&(0,t.jsx)(c,{gridRef:M,disableAnimations:b,enabled:n,spotlightRadius:m,glowColor:_}),(0,t.jsx)(d,{gridRef:M,children:h.map((n,r)=>{let a={className:`magic-bento-card ${e?"magic-bento-card--text-autohide":""} ${p?"magic-bento-card--border-glow":""}`,style:{backgroundColor:n.color,backgroundImage:n.image?`linear-gradient(to bottom, 
                    rgba(0, 0, 0, 0.95) 0%, 
                    rgba(0, 0, 0, 0) 35%, 
                    rgba(0, 0, 0, 0) 65%, 
                    rgba(0, 0, 0, 0.95) 100%), 
                  url(${n.image})`:void 0,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat","--glow-color":_,position:"relative"}};return i?(0,t.jsxs)(u,{...a,disableAnimations:b,particleCount:g,glowColor:_,enableTilt:v,clickEffect:x,enableMagnetism:y,children:[(0,t.jsx)("div",{className:"magic-bento-card__header",children:(0,t.jsx)("div",{className:"magic-bento-card__label",children:n.label})}),(0,t.jsxs)("div",{className:"magic-bento-card__content",children:[(0,t.jsx)("h2",{className:"magic-bento-card__title",children:n.title}),(0,t.jsx)("p",{className:"magic-bento-card__description",children:n.description})]})]},r):(0,t.jsxs)("div",{...a,ref:e=>{e&&(e.addEventListener("mousemove",t=>{if(b)return;let i=e.getBoundingClientRect(),n=t.clientX-i.left,r=t.clientY-i.top,a=i.width/2,o=i.height/2;v&&s.gsap.to(e,{rotateX:-((r-o)/o*10),rotateY:(n-a)/a*10,duration:.1,ease:"power2.out",transformPerspective:1e3}),y&&s.gsap.to(e,{x:(n-a)*.05,y:(r-o)*.05,duration:.3,ease:"power2.out"})}),e.addEventListener("mouseleave",()=>{!b&&(v&&s.gsap.to(e,{rotateX:0,rotateY:0,duration:.3,ease:"power2.out"}),y&&s.gsap.to(e,{x:0,y:0,duration:.3,ease:"power2.out"}))}),e.addEventListener("click",t=>{if(!x||b)return;let i=e.getBoundingClientRect(),n=t.clientX-i.left,r=t.clientY-i.top,a=Math.max(Math.hypot(n,r),Math.hypot(n-i.width,r),Math.hypot(n,r-i.height),Math.hypot(n-i.width,r-i.height)),o=document.createElement("div");o.style.cssText=`
                    position: absolute;
                    width: ${2*a}px;
                    height: ${2*a}px;
                    border-radius: 50%;
                    background: radial-gradient(circle, rgba(${_}, 0.4) 0%, rgba(${_}, 0.2) 30%, transparent 70%);
                    left: ${n-a}px;
                    top: ${r-a}px;
                    pointer-events: none;
                    z-index: 1000;
                  `,e.appendChild(o),s.gsap.fromTo(o,{scale:0,opacity:1},{scale:1,opacity:0,duration:.8,ease:"power2.out",onComplete:()=>o.remove()})}))},children:[(0,t.jsx)("div",{className:"magic-bento-card__header",children:(0,t.jsx)("div",{className:"magic-bento-card__label",children:n.label})}),(0,t.jsxs)("div",{className:"magic-bento-card__content",children:[(0,t.jsx)("h2",{className:"magic-bento-card__title",children:n.title}),(0,t.jsx)("p",{className:"magic-bento-card__description",children:n.description})]})]},r)})})]})};var f=e.i(64761);function m(){return(0,t.jsxs)(i.default,{children:[(0,t.jsxs)(n.default,{children:[(0,t.jsx)(n.default,{className:"flex justify-center pb-8",children:(0,t.jsx)(f.default,{text:"~ What I Can Do ~",speed:1.8,delay:.8,color:"#ffffff",shineColor:"#FCA311",spread:90,direction:"left",yoyo:!1,pauseOnHover:!1,disabled:!1,className:"text-center text-xl sm:text-4xl font-bold"})}),(0,t.jsx)(p,{textAutoHide:!0,enableStars:!0,enableSpotlight:!0,enableBorderGlow:!0,enableTilt:!0,enableMagnetism:!1,clickEffect:!1,spotlightRadius:400,particleCount:12,glowColor:"233, 82, 3",disableAnimations:!1})]}),(0,t.jsx)("div",{className:"w-full h-px bg-white/20 mt-16 "})]})}e.s(["default",()=>m],28252)},78136,e=>{"use strict";let t,i,n;var r=e.i(43476),s=e.i(73172),a=e.i(67170);function o(e){let t=e[0],i=e[1],n=e[2];return Math.sqrt(t*t+i*i+n*n)}function l(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function h(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e}function u(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e}function c(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function d(e){let t=e[0],i=e[1],n=e[2];return t*t+i*i+n*n}function p(e,t){let i=t[0],n=t[1],r=t[2],s=i*i+n*n+r*r;return s>0&&(s=1/Math.sqrt(s)),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e}function f(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function m(e,t,i){let n=t[0],r=t[1],s=t[2],a=i[0],o=i[1],l=i[2];return e[0]=r*l-s*o,e[1]=s*a-n*l,e[2]=n*o-r*a,e}let g=(t=[0,0,0],i=[0,0,0],function(e,n){l(t,e),l(i,n),p(t,t),p(i,i);let r=f(t,i);return r>1?0:r<-1?Math.PI:Math.acos(r)});class v extends Array{constructor(e=0,t=e,i=e){return super(e,t,i),this}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this[0]=e}set y(e){this[1]=e}set z(e){this[2]=e}set(e,t=e,i=e){return e.length?this.copy(e):(this[0]=e,this[1]=t,this[2]=i,this)}copy(e){return l(this,e),this}add(e,t){return t?h(this,e,t):h(this,this,e),this}sub(e,t){return t?u(this,e,t):u(this,this,e),this}multiply(e){if(e.length)this[0]=this[0]*e[0],this[1]=this[1]*e[1],this[2]=this[2]*e[2];else c(this,this,e);return this}divide(e){if(e.length)this[0]=this[0]/e[0],this[1]=this[1]/e[1],this[2]=this[2]/e[2];else c(this,this,1/e);return this}inverse(e=this){return this[0]=1/e[0],this[1]=1/e[1],this[2]=1/e[2],this}len(){return o(this)}distance(e){let t,i,n;if(!e)return o(this);return t=e[0]-this[0],Math.sqrt(t*t+(i=e[1]-this[1])*i+(n=e[2]-this[2])*n)}squaredLen(){return d(this)}squaredDistance(e){let t,i,n;if(!e)return d(this);return t=e[0]-this[0],t*t+(i=e[1]-this[1])*i+(n=e[2]-this[2])*n}negate(e=this){return this[0]=-e[0],this[1]=-e[1],this[2]=-e[2],this}cross(e,t){return t?m(this,e,t):m(this,this,e),this}scale(e){return c(this,this,e),this}normalize(){return p(this,this),this}dot(e){return f(this,e)}equals(e){return this[0]===e[0]&&this[1]===e[1]&&this[2]===e[2]}applyMatrix3(e){let t,i,n;return t=this[0],i=this[1],n=this[2],this[0]=t*e[0]+i*e[3]+n*e[6],this[1]=t*e[1]+i*e[4]+n*e[7],this[2]=t*e[2]+i*e[5]+n*e[8],this}applyMatrix4(e){let t,i,n,r;return t=this[0],i=this[1],n=this[2],r=(r=e[3]*t+e[7]*i+e[11]*n+e[15])||1,this[0]=(e[0]*t+e[4]*i+e[8]*n+e[12])/r,this[1]=(e[1]*t+e[5]*i+e[9]*n+e[13])/r,this[2]=(e[2]*t+e[6]*i+e[10]*n+e[14])/r,this}scaleRotateMatrix4(e){let t,i,n,r;return t=this[0],i=this[1],n=this[2],r=(r=e[3]*t+e[7]*i+e[11]*n+e[15])||1,this[0]=(e[0]*t+e[4]*i+e[8]*n)/r,this[1]=(e[1]*t+e[5]*i+e[9]*n)/r,this[2]=(e[2]*t+e[6]*i+e[10]*n)/r,this}applyQuaternion(e){let t,i,n,r,s,a,o,l,h,u,c,d,p,f;return t=this[0],i=this[1],n=this[2],r=e[0],s=e[1],a=e[2],o=e[3],l=s*n-a*i,h=a*t-r*n,u=r*i-s*t,c=s*u-a*h,d=a*l-r*u,p=r*h-s*l,l*=f=2*o,h*=f,u*=f,c*=2,d*=2,p*=2,this[0]=t+l+c,this[1]=i+h+d,this[2]=n+u+p,this}angle(e){return g(this,e)}lerp(e,t){let i,n,r;return i=this[0],n=this[1],r=this[2],this[0]=i+t*(e[0]-i),this[1]=n+t*(e[1]-n),this[2]=r+t*(e[2]-r),this}smoothLerp(e,t,i){let n,r,s,a;return n=Math.exp(-t*i),r=this[0],s=this[1],a=this[2],this[0]=e[0]+(r-e[0])*n,this[1]=e[1]+(s-e[1])*n,this[2]=e[2]+(a-e[2])*n,this}clone(){return new v(this[0],this[1],this[2])}fromArray(e,t=0){return this[0]=e[t],this[1]=e[t+1],this[2]=e[t+2],this}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e}transformDirection(e){let t=this[0],i=this[1],n=this[2];return this[0]=e[0]*t+e[4]*i+e[8]*n,this[1]=e[1]*t+e[5]*i+e[9]*n,this[2]=e[2]*t+e[6]*i+e[10]*n,this.normalize()}}function _(e,t,i){let n=t[0],r=t[1],s=t[2],a=t[3],o=i[0],l=i[1],h=i[2],u=i[3];return e[0]=n*u+a*o+r*h-s*l,e[1]=r*u+a*l+s*o-n*h,e[2]=s*u+a*h+n*l-r*o,e[3]=a*u-n*o-r*l-s*h,e}let x=function(e,t){let i=t[0],n=t[1],r=t[2],s=t[3],a=i*i+n*n+r*r+s*s;return a>0&&(a=1/Math.sqrt(a)),e[0]=i*a,e[1]=n*a,e[2]=r*a,e[3]=s*a,e};class y extends Array{constructor(e=0,t=0,i=0,n=1){super(e,t,i,n),this.onChange=()=>{},this._target=this;const r=["0","1","2","3"];return new Proxy(this,{set(e,t){let i=Reflect.set(...arguments);return i&&r.includes(t)&&e.onChange(),i}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}get w(){return this[3]}set x(e){this._target[0]=e,this.onChange()}set y(e){this._target[1]=e,this.onChange()}set z(e){this._target[2]=e,this.onChange()}set w(e){this._target[3]=e,this.onChange()}identity(){var e;return(e=this._target)[0]=0,e[1]=0,e[2]=0,e[3]=1,this.onChange(),this}set(e,t,i,n){var r;return e.length?this.copy(e):(r=this._target,r[0]=e,r[1]=t,r[2]=i,r[3]=n,this.onChange(),this)}rotateX(e){var t,i,n;let r,s,a,o,l,h;return t=this._target,i=this._target,n=.5*e,r=i[0],s=i[1],a=i[2],o=i[3],l=Math.sin(n),h=Math.cos(n),t[0]=r*h+o*l,t[1]=s*h+a*l,t[2]=a*h-s*l,t[3]=o*h-r*l,this.onChange(),this}rotateY(e){var t,i,n;let r,s,a,o,l,h;return t=this._target,i=this._target,n=.5*e,r=i[0],s=i[1],a=i[2],o=i[3],l=Math.sin(n),h=Math.cos(n),t[0]=r*h-a*l,t[1]=s*h+o*l,t[2]=a*h+r*l,t[3]=o*h-s*l,this.onChange(),this}rotateZ(e){var t,i,n;let r,s,a,o,l,h;return t=this._target,i=this._target,n=.5*e,r=i[0],s=i[1],a=i[2],o=i[3],l=Math.sin(n),h=Math.cos(n),t[0]=r*h+s*l,t[1]=s*h-r*l,t[2]=a*h+o*l,t[3]=o*h-a*l,this.onChange(),this}inverse(e=this._target){var t;let i,n,r,s,a,o;return t=this._target,i=e[0],n=e[1],o=(a=i*i+n*n+(r=e[2])*r+(s=e[3])*s)?1/a:0,t[0]=-i*o,t[1]=-n*o,t[2]=-r*o,t[3]=s*o,this.onChange(),this}conjugate(e=this._target){var t;return t=this._target,t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],this.onChange(),this}copy(e){var t;return t=this._target,t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],this.onChange(),this}normalize(e=this._target){return x(this._target,e),this.onChange(),this}multiply(e,t){return t?_(this._target,e,t):_(this._target,this._target,e),this.onChange(),this}dot(e){var t;return t=this._target,t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}fromMatrix3(e){return!function(e,t){let i,n=t[0]+t[4]+t[8];if(n>0)i=Math.sqrt(n+1),e[3]=.5*i,i=.5/i,e[0]=(t[5]-t[7])*i,e[1]=(t[6]-t[2])*i,e[2]=(t[1]-t[3])*i;else{let n=0;t[4]>t[0]&&(n=1),t[8]>t[3*n+n]&&(n=2);let r=(n+1)%3,s=(n+2)%3;i=Math.sqrt(t[3*n+n]-t[3*r+r]-t[3*s+s]+1),e[n]=.5*i,i=.5/i,e[3]=(t[3*r+s]-t[3*s+r])*i,e[r]=(t[3*r+n]+t[3*n+r])*i,e[s]=(t[3*s+n]+t[3*n+s])*i}}(this._target,e),this.onChange(),this}fromEuler(e,t){return!function(e,t,i="YXZ"){let n=Math.sin(.5*t[0]),r=Math.cos(.5*t[0]),s=Math.sin(.5*t[1]),a=Math.cos(.5*t[1]),o=Math.sin(.5*t[2]),l=Math.cos(.5*t[2]);"XYZ"===i?(e[0]=n*a*l+r*s*o,e[1]=r*s*l-n*a*o,e[2]=r*a*o+n*s*l,e[3]=r*a*l-n*s*o):"YXZ"===i?(e[0]=n*a*l+r*s*o,e[1]=r*s*l-n*a*o,e[2]=r*a*o-n*s*l,e[3]=r*a*l+n*s*o):"ZXY"===i?(e[0]=n*a*l-r*s*o,e[1]=r*s*l+n*a*o,e[2]=r*a*o+n*s*l,e[3]=r*a*l-n*s*o):"ZYX"===i?(e[0]=n*a*l-r*s*o,e[1]=r*s*l+n*a*o,e[2]=r*a*o-n*s*l,e[3]=r*a*l+n*s*o):"YZX"===i?(e[0]=n*a*l+r*s*o,e[1]=r*s*l+n*a*o,e[2]=r*a*o-n*s*l,e[3]=r*a*l-n*s*o):"XZY"===i&&(e[0]=n*a*l-r*s*o,e[1]=r*s*l-n*a*o,e[2]=r*a*o+n*s*l,e[3]=r*a*l+n*s*o)}(this._target,e,e.order),t||this.onChange(),this}fromAxisAngle(e,t){var i,n;let r;return i=this._target,r=Math.sin(n=.5*t),i[0]=r*e[0],i[1]=r*e[1],i[2]=r*e[2],i[3]=Math.cos(n),this.onChange(),this}slerp(e,t){var i,n;let r,s,a,o,l,h,u,c,d,p,f,m,g;return i=this._target,n=this._target,h=n[0],u=n[1],c=n[2],d=n[3],p=e[0],f=e[1],(s=h*p+u*f+c*(m=e[2])+d*(g=e[3]))<0&&(s=-s,p=-p,f=-f,m=-m,g=-g),1-s>1e-6?(a=Math.sin(r=Math.acos(s)),o=Math.sin((1-t)*r)/a,l=Math.sin(t*r)/a):(o=1-t,l=t),i[0]=o*h+l*p,i[1]=o*u+l*f,i[2]=o*c+l*m,i[3]=o*d+l*g,this.onChange(),this}fromArray(e,t=0){return this._target[0]=e[t],this._target[1]=e[t+1],this._target[2]=e[t+2],this._target[3]=e[t+3],this.onChange(),this}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e[t+3]=this[3],e}}function M(e){let t=e[0],i=e[1],n=e[2],r=e[3],s=e[4],a=e[5],o=e[6],l=e[7],h=e[8],u=e[9],c=e[10],d=e[11],p=e[12],f=e[13],m=e[14],g=e[15];return(t*a-i*s)*(c*g-d*m)-(t*o-n*s)*(u*g-d*f)+(t*l-r*s)*(u*m-c*f)+(i*o-n*a)*(h*g-d*p)-(i*l-r*a)*(h*m-c*p)+(n*l-r*o)*(h*f-u*p)}function S(e,t,i){let n=t[0],r=t[1],s=t[2],a=t[3],o=t[4],l=t[5],h=t[6],u=t[7],c=t[8],d=t[9],p=t[10],f=t[11],m=t[12],g=t[13],v=t[14],_=t[15],x=i[0],y=i[1],M=i[2],S=i[3];return e[0]=x*n+y*o+M*c+S*m,e[1]=x*r+y*l+M*d+S*g,e[2]=x*s+y*h+M*p+S*v,e[3]=x*a+y*u+M*f+S*_,x=i[4],y=i[5],M=i[6],S=i[7],e[4]=x*n+y*o+M*c+S*m,e[5]=x*r+y*l+M*d+S*g,e[6]=x*s+y*h+M*p+S*v,e[7]=x*a+y*u+M*f+S*_,x=i[8],y=i[9],M=i[10],S=i[11],e[8]=x*n+y*o+M*c+S*m,e[9]=x*r+y*l+M*d+S*g,e[10]=x*s+y*h+M*p+S*v,e[11]=x*a+y*u+M*f+S*_,x=i[12],y=i[13],M=i[14],S=i[15],e[12]=x*n+y*o+M*c+S*m,e[13]=x*r+y*l+M*d+S*g,e[14]=x*s+y*h+M*p+S*v,e[15]=x*a+y*u+M*f+S*_,e}function b(e,t){let i=t[0],n=t[1],r=t[2],s=t[4],a=t[5],o=t[6],l=t[8],h=t[9],u=t[10];return e[0]=Math.hypot(i,n,r),e[1]=Math.hypot(s,a,o),e[2]=Math.hypot(l,h,u),e}let E=(n=[1,1,1],function(e,t){b(n,t);let i=1/n[0],r=1/n[1],s=1/n[2],a=t[0]*i,o=t[1]*r,l=t[2]*s,h=t[4]*i,u=t[5]*r,c=t[6]*s,d=t[8]*i,p=t[9]*r,f=t[10]*s,m=a+u+f,g=0;return m>0?(g=2*Math.sqrt(m+1),e[3]=.25*g,e[0]=(c-p)/g,e[1]=(d-l)/g,e[2]=(o-h)/g):a>u&&a>f?(g=2*Math.sqrt(1+a-u-f),e[3]=(c-p)/g,e[0]=.25*g,e[1]=(o+h)/g,e[2]=(d+l)/g):u>f?(g=2*Math.sqrt(1+u-a-f),e[3]=(d-l)/g,e[0]=(o+h)/g,e[1]=.25*g,e[2]=(c+p)/g):(g=2*Math.sqrt(1+f-a-u),e[3]=(o-h)/g,e[0]=(d+l)/g,e[1]=(c+p)/g,e[2]=.25*g),e});function T(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e[3]=t[3]+i[3],e[4]=t[4]+i[4],e[5]=t[5]+i[5],e[6]=t[6]+i[6],e[7]=t[7]+i[7],e[8]=t[8]+i[8],e[9]=t[9]+i[9],e[10]=t[10]+i[10],e[11]=t[11]+i[11],e[12]=t[12]+i[12],e[13]=t[13]+i[13],e[14]=t[14]+i[14],e[15]=t[15]+i[15],e}function w(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e[3]=t[3]-i[3],e[4]=t[4]-i[4],e[5]=t[5]-i[5],e[6]=t[6]-i[6],e[7]=t[7]-i[7],e[8]=t[8]-i[8],e[9]=t[9]-i[9],e[10]=t[10]-i[10],e[11]=t[11]-i[11],e[12]=t[12]-i[12],e[13]=t[13]-i[13],e[14]=t[14]-i[14],e[15]=t[15]-i[15],e}class A extends Array{constructor(e=1,t=0,i=0,n=0,r=0,s=1,a=0,o=0,l=0,h=0,u=1,c=0,d=0,p=0,f=0,m=1){return super(e,t,i,n,r,s,a,o,l,h,u,c,d,p,f,m),this}get x(){return this[12]}get y(){return this[13]}get z(){return this[14]}get w(){return this[15]}set x(e){this[12]=e}set y(e){this[13]=e}set z(e){this[14]=e}set w(e){this[15]=e}set(e,t,i,n,r,s,a,o,l,h,u,c,d,p,f,m){return e.length?this.copy(e):(this[0]=e,this[1]=t,this[2]=i,this[3]=n,this[4]=r,this[5]=s,this[6]=a,this[7]=o,this[8]=l,this[9]=h,this[10]=u,this[11]=c,this[12]=d,this[13]=p,this[14]=f,this[15]=m,this)}translate(e,t=this){let i,n,r,s,a,o,l,h,u,c,d,p,f,m,g;return f=e[0],m=e[1],g=e[2],t===this?(this[12]=t[0]*f+t[4]*m+t[8]*g+t[12],this[13]=t[1]*f+t[5]*m+t[9]*g+t[13],this[14]=t[2]*f+t[6]*m+t[10]*g+t[14],this[15]=t[3]*f+t[7]*m+t[11]*g+t[15]):(i=t[0],n=t[1],r=t[2],s=t[3],a=t[4],o=t[5],l=t[6],h=t[7],u=t[8],c=t[9],d=t[10],p=t[11],this[0]=i,this[1]=n,this[2]=r,this[3]=s,this[4]=a,this[5]=o,this[6]=l,this[7]=h,this[8]=u,this[9]=c,this[10]=d,this[11]=p,this[12]=i*f+a*m+u*g+t[12],this[13]=n*f+o*m+c*g+t[13],this[14]=r*f+l*m+d*g+t[14],this[15]=s*f+h*m+p*g+t[15]),this}rotate(e,t,i=this){let n,r,s,a,o,l,h,u,c,d,p,f,m,g,v,_,x,y,M,S,b,E,T,w,A,C,P,R;return A=t[0],1e-6>Math.abs(R=Math.hypot(A,C=t[1],P=t[2]))||(A*=R=1/R,C*=R,P*=R,n=Math.sin(e),s=1-(r=Math.cos(e)),a=i[0],o=i[1],l=i[2],h=i[3],u=i[4],c=i[5],d=i[6],p=i[7],f=i[8],m=i[9],g=i[10],v=i[11],_=A*A*s+r,x=C*A*s+P*n,y=P*A*s-C*n,M=A*C*s-P*n,S=C*C*s+r,b=P*C*s+A*n,E=A*P*s+C*n,T=C*P*s-A*n,w=P*P*s+r,this[0]=a*_+u*x+f*y,this[1]=o*_+c*x+m*y,this[2]=l*_+d*x+g*y,this[3]=h*_+p*x+v*y,this[4]=a*M+u*S+f*b,this[5]=o*M+c*S+m*b,this[6]=l*M+d*S+g*b,this[7]=h*M+p*S+v*b,this[8]=a*E+u*T+f*w,this[9]=o*E+c*T+m*w,this[10]=l*E+d*T+g*w,this[11]=h*E+p*T+v*w,i!==this&&(this[12]=i[12],this[13]=i[13],this[14]=i[14],this[15]=i[15])),this}scale(e,t=this){var i;let n,r,s;return n=(i="number"==typeof e?[e,e,e]:e)[0],r=i[1],s=i[2],this[0]=t[0]*n,this[1]=t[1]*n,this[2]=t[2]*n,this[3]=t[3]*n,this[4]=t[4]*r,this[5]=t[5]*r,this[6]=t[6]*r,this[7]=t[7]*r,this[8]=t[8]*s,this[9]=t[9]*s,this[10]=t[10]*s,this[11]=t[11]*s,this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this}add(e,t){return t?T(this,e,t):T(this,this,e),this}sub(e,t){return t?w(this,e,t):w(this,this,e),this}multiply(e,t){if(e.length)t?S(this,e,t):S(this,this,e);else this[0]=this[0]*e,this[1]=this[1]*e,this[2]=this[2]*e,this[3]=this[3]*e,this[4]=this[4]*e,this[5]=this[5]*e,this[6]=this[6]*e,this[7]=this[7]*e,this[8]=this[8]*e,this[9]=this[9]*e,this[10]=this[10]*e,this[11]=this[11]*e,this[12]=this[12]*e,this[13]=this[13]*e,this[14]=this[14]*e,this[15]=this[15]*e;return this}identity(){return this[0]=1,this[1]=0,this[2]=0,this[3]=0,this[4]=0,this[5]=1,this[6]=0,this[7]=0,this[8]=0,this[9]=0,this[10]=1,this[11]=0,this[12]=0,this[13]=0,this[14]=0,this[15]=1,this}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this}fromPerspective({fov:e,aspect:t,near:i,far:n}={}){let r,s;return r=1/Math.tan(e/2),s=1/(i-n),this[0]=r/t,this[1]=0,this[2]=0,this[3]=0,this[4]=0,this[5]=r,this[6]=0,this[7]=0,this[8]=0,this[9]=0,this[10]=(n+i)*s,this[11]=-1,this[12]=0,this[13]=0,this[14]=2*n*i*s,this[15]=0,this}fromOrthogonal({left:e,right:t,bottom:i,top:n,near:r,far:s}){let a,o,l;return a=1/(e-t),o=1/(i-n),l=1/(r-s),this[0]=-2*a,this[1]=0,this[2]=0,this[3]=0,this[4]=0,this[5]=-2*o,this[6]=0,this[7]=0,this[8]=0,this[9]=0,this[10]=2*l,this[11]=0,this[12]=(e+t)*a,this[13]=(n+i)*o,this[14]=(s+r)*l,this[15]=1,this}fromQuaternion(e){let t,i,n,r,s,a,o,l,h,u,c,d,p,f,m,g;return t=e[0],i=e[1],n=e[2],r=e[3],s=t+t,a=i+i,o=n+n,l=t*s,h=i*s,u=i*a,c=n*s,d=n*a,p=n*o,f=r*s,m=r*a,g=r*o,this[0]=1-u-p,this[1]=h+g,this[2]=c-m,this[3]=0,this[4]=h-g,this[5]=1-l-p,this[6]=d+f,this[7]=0,this[8]=c+m,this[9]=d-f,this[10]=1-l-u,this[11]=0,this[12]=0,this[13]=0,this[14]=0,this[15]=1,this}setPosition(e){return this.x=e[0],this.y=e[1],this.z=e[2],this}inverse(e=this){let t,i,n,r,s,a,o,l,h,u,c,d,p,f,m,g,v,_,x,y,M,S,b,E,T,w,A,C,P;return t=e[0],i=e[1],n=e[2],r=e[3],s=e[4],a=e[5],o=e[6],l=e[7],h=e[8],u=e[9],c=e[10],d=e[11],p=e[12],f=e[13],m=e[14],g=e[15],v=t*a-i*s,_=t*o-n*s,x=t*l-r*s,y=i*o-n*a,M=i*l-r*a,S=n*l-r*o,b=h*f-u*p,E=h*m-c*p,T=h*g-d*p,w=u*m-c*f,A=u*g-d*f,(P=v*(C=c*g-d*m)-_*A+x*w+y*T-M*E+S*b)&&(P=1/P,this[0]=(a*C-o*A+l*w)*P,this[1]=(n*A-i*C-r*w)*P,this[2]=(f*S-m*M+g*y)*P,this[3]=(c*M-u*S-d*y)*P,this[4]=(o*T-s*C-l*E)*P,this[5]=(t*C-n*T+r*E)*P,this[6]=(m*x-p*S-g*_)*P,this[7]=(h*S-c*x+d*_)*P,this[8]=(s*A-a*T+l*b)*P,this[9]=(i*T-t*A-r*b)*P,this[10]=(p*M-f*x+g*v)*P,this[11]=(u*x-h*M-d*v)*P,this[12]=(a*E-s*w-o*b)*P,this[13]=(t*w-i*E+n*b)*P,this[14]=(f*_-p*y-m*v)*P,this[15]=(h*y-u*_+c*v)*P),this}compose(e,t,i){let n,r,s,a,o,l,h,u,c,d,p,f,m,g,v,_,x,y,M;return n=e[0],r=e[1],s=e[2],a=e[3],o=n+n,l=r+r,h=s+s,u=n*o,c=n*l,d=n*h,p=r*l,f=r*h,m=s*h,g=a*o,v=a*l,_=a*h,x=i[0],y=i[1],M=i[2],this[0]=(1-(p+m))*x,this[1]=(c+_)*x,this[2]=(d-v)*x,this[3]=0,this[4]=(c-_)*y,this[5]=(1-(u+m))*y,this[6]=(f+g)*y,this[7]=0,this[8]=(d+v)*M,this[9]=(f-g)*M,this[10]=(1-(u+p))*M,this[11]=0,this[12]=t[0],this[13]=t[1],this[14]=t[2],this[15]=1,this}decompose(e,t,i){let n,r,s,a,l,h,u;return n=o([this[0],this[1],this[2]]),r=o([this[4],this[5],this[6]]),s=o([this[8],this[9],this[10]]),0>M(this)&&(n=-n),t[0]=this[12],t[1]=this[13],t[2]=this[14],a=this.slice(),l=1/n,h=1/r,u=1/s,a[0]*=l,a[1]*=l,a[2]*=l,a[4]*=h,a[5]*=h,a[6]*=h,a[8]*=u,a[9]*=u,a[10]*=u,E(e,a),i[0]=n,i[1]=r,i[2]=s,this}getRotation(e){return E(e,this),this}getTranslation(e){return e[0]=this[12],e[1]=this[13],e[2]=this[14],this}getScaling(e){return b(e,this),this}getMaxScaleOnAxis(){let e,t,i,n,r,s,a,o,l;return e=this[0],t=this[1],i=this[2],n=this[4],r=this[5],s=this[6],a=this[8],Math.sqrt(Math.max(e*e+t*t+i*i,n*n+r*r+s*s,a*a+(o=this[9])*o+(l=this[10])*l))}lookAt(e,t,i){let n,r,s,a,o,l,h,u,c,d,p,f,m;return n=e[0],r=e[1],s=e[2],a=i[0],o=i[1],l=i[2],h=n-t[0],0==(d=h*h+(u=r-t[1])*u+(c=s-t[2])*c)?c=1:(h*=d=1/Math.sqrt(d),u*=d,c*=d),0==(d=(p=o*c-l*u)*p+(f=l*h-a*c)*f+(m=a*u-o*h)*m)&&(l?a+=1e-6:o?l+=1e-6:o+=1e-6,d=(p=o*c-l*u)*p+(f=l*h-a*c)*f+(m=a*u-o*h)*m),p*=d=1/Math.sqrt(d),f*=d,m*=d,this[0]=p,this[1]=f,this[2]=m,this[3]=0,this[4]=u*m-c*f,this[5]=c*p-h*m,this[6]=h*f-u*p,this[7]=0,this[8]=h,this[9]=u,this[10]=c,this[11]=0,this[12]=n,this[13]=r,this[14]=s,this[15]=1,this}determinant(){return M(this)}fromArray(e,t=0){return this[0]=e[t],this[1]=e[t+1],this[2]=e[t+2],this[3]=e[t+3],this[4]=e[t+4],this[5]=e[t+5],this[6]=e[t+6],this[7]=e[t+7],this[8]=e[t+8],this[9]=e[t+9],this[10]=e[t+10],this[11]=e[t+11],this[12]=e[t+12],this[13]=e[t+13],this[14]=e[t+14],this[15]=e[t+15],this}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e[t+3]=this[3],e[t+4]=this[4],e[t+5]=this[5],e[t+6]=this[6],e[t+7]=this[7],e[t+8]=this[8],e[t+9]=this[9],e[t+10]=this[10],e[t+11]=this[11],e[t+12]=this[12],e[t+13]=this[13],e[t+14]=this[14],e[t+15]=this[15],e}}let C=new A;class P extends Array{constructor(e=0,t=e,i=e,n="YXZ"){super(e,t,i),this.order=n,this.onChange=()=>{},this._target=this;const r=["0","1","2"];return new Proxy(this,{set(e,t){let i=Reflect.set(...arguments);return i&&r.includes(t)&&e.onChange(),i}})}get x(){return this[0]}get y(){return this[1]}get z(){return this[2]}set x(e){this._target[0]=e,this.onChange()}set y(e){this._target[1]=e,this.onChange()}set z(e){this._target[2]=e,this.onChange()}set(e,t=e,i=e){return e.length?this.copy(e):(this._target[0]=e,this._target[1]=t,this._target[2]=i,this.onChange(),this)}copy(e){return this._target[0]=e[0],this._target[1]=e[1],this._target[2]=e[2],this.onChange(),this}reorder(e){return this._target.order=e,this.onChange(),this}fromRotationMatrix(e,t=this.order){return!function(e,t,i="YXZ"){"XYZ"===i?(e[1]=Math.asin(Math.min(Math.max(t[8],-1),1)),.99999>Math.abs(t[8])?(e[0]=Math.atan2(-t[9],t[10]),e[2]=Math.atan2(-t[4],t[0])):(e[0]=Math.atan2(t[6],t[5]),e[2]=0)):"YXZ"===i?(e[0]=Math.asin(-Math.min(Math.max(t[9],-1),1)),.99999>Math.abs(t[9])?(e[1]=Math.atan2(t[8],t[10]),e[2]=Math.atan2(t[1],t[5])):(e[1]=Math.atan2(-t[2],t[0]),e[2]=0)):"ZXY"===i?(e[0]=Math.asin(Math.min(Math.max(t[6],-1),1)),.99999>Math.abs(t[6])?(e[1]=Math.atan2(-t[2],t[10]),e[2]=Math.atan2(-t[4],t[5])):(e[1]=0,e[2]=Math.atan2(t[1],t[0]))):"ZYX"===i?(e[1]=Math.asin(-Math.min(Math.max(t[2],-1),1)),.99999>Math.abs(t[2])?(e[0]=Math.atan2(t[6],t[10]),e[2]=Math.atan2(t[1],t[0])):(e[0]=0,e[2]=Math.atan2(-t[4],t[5]))):"YZX"===i?(e[2]=Math.asin(Math.min(Math.max(t[1],-1),1)),.99999>Math.abs(t[1])?(e[0]=Math.atan2(-t[9],t[5]),e[1]=Math.atan2(-t[2],t[0])):(e[0]=0,e[1]=Math.atan2(t[8],t[10]))):"XZY"===i&&(e[2]=Math.asin(-Math.min(Math.max(t[4],-1),1)),.99999>Math.abs(t[4])?(e[0]=Math.atan2(t[6],t[5]),e[1]=Math.atan2(t[8],t[0])):(e[0]=Math.atan2(-t[9],t[10]),e[1]=0))}(this._target,e,t),this.onChange(),this}fromQuaternion(e,t=this.order,i){return C.fromQuaternion(e),this._target.fromRotationMatrix(C,t),i||this.onChange(),this}fromArray(e,t=0){return this._target[0]=e[t],this._target[1]=e[t+1],this._target[2]=e[t+2],this}toArray(e=[],t=0){return e[t]=this[0],e[t+1]=this[1],e[t+2]=this[2],e}}class R{constructor(){this.parent=null,this.children=[],this.visible=!0,this.matrix=new A,this.worldMatrix=new A,this.matrixAutoUpdate=!0,this.worldMatrixNeedsUpdate=!1,this.position=new v,this.quaternion=new y,this.scale=new v(1),this.rotation=new P,this.up=new v(0,1,0),this.rotation._target.onChange=()=>this.quaternion.fromEuler(this.rotation,!0),this.quaternion._target.onChange=()=>this.rotation.fromQuaternion(this.quaternion,void 0,!0)}setParent(e,t=!0){this.parent&&e!==this.parent&&this.parent.removeChild(this,!1),this.parent=e,t&&e&&e.addChild(this,!1)}addChild(e,t=!0){~this.children.indexOf(e)||this.children.push(e),t&&e.setParent(this,!1)}removeChild(e,t=!0){~this.children.indexOf(e)&&this.children.splice(this.children.indexOf(e),1),t&&e.setParent(null,!1)}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.worldMatrixNeedsUpdate||e)&&(null===this.parent?this.worldMatrix.copy(this.matrix):this.worldMatrix.multiply(this.parent.worldMatrix,this.matrix),this.worldMatrixNeedsUpdate=!1,e=!0);for(let t=0,i=this.children.length;t<i;t++)this.children[t].updateMatrixWorld(e)}updateMatrix(){this.matrix.compose(this.quaternion,this.position,this.scale),this.worldMatrixNeedsUpdate=!0}traverse(e){if(!e(this))for(let t=0,i=this.children.length;t<i;t++)this.children[t].traverse(e)}decompose(){this.matrix.decompose(this.quaternion._target,this.position,this.scale),this.rotation.fromQuaternion(this.quaternion)}lookAt(e,t=!1){t?this.matrix.lookAt(this.position,e,this.up):this.matrix.lookAt(e,this.position,this.up),this.matrix.getRotation(this.quaternion._target),this.rotation.fromQuaternion(this.quaternion)}}let L=new A,D=new v,I=new v;class U extends R{constructor(e,{near:t=.1,far:i=100,fov:n=45,aspect:r=1,left:s,right:a,bottom:o,top:l,zoom:h=1}={}){super(),Object.assign(this,{near:t,far:i,fov:n,aspect:r,left:s,right:a,bottom:o,top:l,zoom:h}),this.projectionMatrix=new A,this.viewMatrix=new A,this.projectionViewMatrix=new A,this.worldPosition=new v,this.type=s||a?"orthographic":"perspective","orthographic"===this.type?this.orthographic():this.perspective()}perspective({near:e=this.near,far:t=this.far,fov:i=this.fov,aspect:n=this.aspect}={}){return Object.assign(this,{near:e,far:t,fov:i,aspect:n}),this.projectionMatrix.fromPerspective({fov:Math.PI/180*i,aspect:n,near:e,far:t}),this.type="perspective",this}orthographic({near:e=this.near,far:t=this.far,left:i=this.left||-1,right:n=this.right||1,bottom:r=this.bottom||-1,top:s=this.top||1,zoom:a=this.zoom}={}){return Object.assign(this,{near:e,far:t,left:i,right:n,bottom:r,top:s,zoom:a}),i/=a,n/=a,r/=a,s/=a,this.projectionMatrix.fromOrthogonal({left:i,right:n,bottom:r,top:s,near:e,far:t}),this.type="orthographic",this}updateMatrixWorld(){return super.updateMatrixWorld(),this.viewMatrix.inverse(this.worldMatrix),this.worldMatrix.getTranslation(this.worldPosition),this.projectionViewMatrix.multiply(this.projectionMatrix,this.viewMatrix),this}updateProjectionMatrix(){return"perspective"===this.type?this.perspective():this.orthographic()}lookAt(e){return super.lookAt(e,!0),this}project(e){return e.applyMatrix4(this.viewMatrix),e.applyMatrix4(this.projectionMatrix),this}unproject(e){return e.applyMatrix4(L.inverse(this.projectionMatrix)),e.applyMatrix4(this.worldMatrix),this}updateFrustum(){this.frustum||(this.frustum=[new v,new v,new v,new v,new v,new v]);let e=this.projectionViewMatrix;this.frustum[0].set(e[3]-e[0],e[7]-e[4],e[11]-e[8]).constant=e[15]-e[12],this.frustum[1].set(e[3]+e[0],e[7]+e[4],e[11]+e[8]).constant=e[15]+e[12],this.frustum[2].set(e[3]+e[1],e[7]+e[5],e[11]+e[9]).constant=e[15]+e[13],this.frustum[3].set(e[3]-e[1],e[7]-e[5],e[11]-e[9]).constant=e[15]-e[13],this.frustum[4].set(e[3]-e[2],e[7]-e[6],e[11]-e[10]).constant=e[15]-e[14],this.frustum[5].set(e[3]+e[2],e[7]+e[6],e[11]+e[10]).constant=e[15]+e[14];for(let e=0;e<6;e++){let t=1/this.frustum[e].distance();this.frustum[e].multiply(t),this.frustum[e].constant*=t}}frustumIntersectsMesh(e,t=e.worldMatrix){if(!e.geometry.attributes.position||(e.geometry.bounds&&e.geometry.bounds.radius!==1/0||e.geometry.computeBoundingSphere(),!e.geometry.bounds))return!0;D.copy(e.geometry.bounds.center),D.applyMatrix4(t);let i=e.geometry.bounds.radius*t.getMaxScaleOnAxis();return this.frustumIntersectsSphere(D,i)}frustumIntersectsSphere(e,t){for(let i=0;i<6;i++){let n=this.frustum[i];if(I.copy(n).dot(e)+n.constant<-t)return!1}return!0}}function N(e,t,i){let n=t[0],r=t[1],s=t[2],a=t[3],o=t[4],l=t[5],h=t[6],u=t[7],c=t[8],d=i[0],p=i[1],f=i[2],m=i[3],g=i[4],v=i[5],_=i[6],x=i[7],y=i[8];return e[0]=d*n+p*a+f*h,e[1]=d*r+p*o+f*u,e[2]=d*s+p*l+f*c,e[3]=m*n+g*a+v*h,e[4]=m*r+g*o+v*u,e[5]=m*s+g*l+v*c,e[6]=_*n+x*a+y*h,e[7]=_*r+x*o+y*u,e[8]=_*s+x*l+y*c,e}class O extends Array{constructor(e=1,t=0,i=0,n=0,r=1,s=0,a=0,o=0,l=1){return super(e,t,i,n,r,s,a,o,l),this}set(e,t,i,n,r,s,a,o,l){return e.length?this.copy(e):(this[0]=e,this[1]=t,this[2]=i,this[3]=n,this[4]=r,this[5]=s,this[6]=a,this[7]=o,this[8]=l,this)}translate(e,t=this){let i,n,r,s,a,o,l,h,u,c,d;return i=t[0],n=t[1],r=t[2],s=t[3],a=t[4],o=t[5],l=t[6],h=t[7],u=t[8],c=e[0],d=e[1],this[0]=i,this[1]=n,this[2]=r,this[3]=s,this[4]=a,this[5]=o,this[6]=c*i+d*s+l,this[7]=c*n+d*a+h,this[8]=c*r+d*o+u,this}rotate(e,t=this){let i,n,r,s,a,o,l,h,u,c,d;return i=t[0],n=t[1],r=t[2],s=t[3],a=t[4],o=t[5],l=t[6],h=t[7],u=t[8],c=Math.sin(e),d=Math.cos(e),this[0]=d*i+c*s,this[1]=d*n+c*a,this[2]=d*r+c*o,this[3]=d*s-c*i,this[4]=d*a-c*n,this[5]=d*o-c*r,this[6]=l,this[7]=h,this[8]=u,this}scale(e,t=this){let i,n;return i=e[0],n=e[1],this[0]=i*t[0],this[1]=i*t[1],this[2]=i*t[2],this[3]=n*t[3],this[4]=n*t[4],this[5]=n*t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this}multiply(e,t){return t?N(this,e,t):N(this,this,e),this}identity(){return this[0]=1,this[1]=0,this[2]=0,this[3]=0,this[4]=1,this[5]=0,this[6]=0,this[7]=0,this[8]=1,this}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this}fromMatrix4(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[4],this[4]=e[5],this[5]=e[6],this[6]=e[8],this[7]=e[9],this[8]=e[10],this}fromQuaternion(e){let t,i,n,r,s,a,o,l,h,u,c,d,p,f,m,g;return t=e[0],i=e[1],n=e[2],r=e[3],s=t+t,a=i+i,o=n+n,l=t*s,h=i*s,u=i*a,c=n*s,d=n*a,p=n*o,f=r*s,m=r*a,g=r*o,this[0]=1-u-p,this[3]=h-g,this[6]=c+m,this[1]=h+g,this[4]=1-l-p,this[7]=d-f,this[2]=c-m,this[5]=d+f,this[8]=1-l-u,this}fromBasis(e,t,i){return this.set(e[0],e[1],e[2],t[0],t[1],t[2],i[0],i[1],i[2]),this}inverse(e=this){let t,i,n,r,s,a,o,l,h,u,c,d,p;return t=e[0],i=e[1],n=e[2],r=e[3],s=e[4],a=e[5],o=e[6],l=e[7],(p=t*(u=(h=e[8])*s-a*l)+i*(c=-h*r+a*o)+n*(d=l*r-s*o))&&(p=1/p,this[0]=u*p,this[1]=(-h*i+n*l)*p,this[2]=(a*i-n*s)*p,this[3]=c*p,this[4]=(h*t-n*o)*p,this[5]=(-a*t+n*r)*p,this[6]=d*p,this[7]=(-l*t+i*o)*p,this[8]=(s*t-i*r)*p),this}getNormalMatrix(e){let t,i,n,r,s,a,o,l,h,u,c,d,p,f,m,g,v,_,x,y,M,S,b,E,T,w,A,C,P;return t=e[0],i=e[1],n=e[2],r=e[3],s=e[4],a=e[5],o=e[6],l=e[7],h=e[8],u=e[9],c=e[10],d=e[11],p=e[12],f=e[13],m=e[14],g=e[15],v=t*a-i*s,_=t*o-n*s,x=t*l-r*s,y=i*o-n*a,M=i*l-r*a,S=n*l-r*o,b=h*f-u*p,E=h*m-c*p,T=h*g-d*p,w=u*m-c*f,A=u*g-d*f,(P=v*(C=c*g-d*m)-_*A+x*w+y*T-M*E+S*b)&&(P=1/P,this[0]=(a*C-o*A+l*w)*P,this[1]=(o*T-s*C-l*E)*P,this[2]=(s*A-a*T+l*b)*P,this[3]=(n*A-i*C-r*w)*P,this[4]=(t*C-n*T+r*E)*P,this[5]=(i*T-t*A-r*b)*P,this[6]=(f*S-m*M+g*y)*P,this[7]=(m*x-p*S-g*_)*P,this[8]=(p*M-f*x+g*v)*P),this}}let F=0;class B extends R{constructor(e,{geometry:t,program:i,mode:n=e.TRIANGLES,frustumCulled:r=!0,renderOrder:s=0}={}){super(),e.canvas||console.error("gl not passed as first argument to Mesh"),this.gl=e,this.id=F++,this.geometry=t,this.program=i,this.mode=n,this.frustumCulled=r,this.renderOrder=s,this.modelViewMatrix=new A,this.normalMatrix=new O,this.beforeRenderCallbacks=[],this.afterRenderCallbacks=[]}onBeforeRender(e){return this.beforeRenderCallbacks.push(e),this}onAfterRender(e){return this.afterRenderCallbacks.push(e),this}draw({camera:e}={}){e&&(this.program.uniforms.modelMatrix||Object.assign(this.program.uniforms,{modelMatrix:{value:null},viewMatrix:{value:null},modelViewMatrix:{value:null},normalMatrix:{value:null},projectionMatrix:{value:null},cameraPosition:{value:null}}),this.program.uniforms.projectionMatrix.value=e.projectionMatrix,this.program.uniforms.cameraPosition.value=e.worldPosition,this.program.uniforms.viewMatrix.value=e.viewMatrix,this.modelViewMatrix.multiply(e.viewMatrix,this.worldMatrix),this.normalMatrix.getNormalMatrix(this.modelViewMatrix),this.program.uniforms.modelMatrix.value=this.worldMatrix,this.program.uniforms.modelViewMatrix.value=this.modelViewMatrix,this.program.uniforms.normalMatrix.value=this.normalMatrix),this.beforeRenderCallbacks.forEach(t=>t&&t({mesh:this,camera:e}));let t=this.program.cullFace&&0>this.worldMatrix.determinant();this.program.use({flipFaces:t}),this.geometry.draw({mode:this.mode,program:this.program}),this.afterRenderCallbacks.forEach(t=>t&&t({mesh:this,camera:e}))}}let k=new v,z=1,V=1,H=!1;class G{constructor(e,t={}){for(let i in e.canvas||console.error("gl not passed as first argument to Geometry"),this.gl=e,this.attributes=t,this.id=z++,this.VAOs={},this.drawRange={start:0,count:0},this.instancedCount=0,this.gl.renderer.bindVertexArray(null),this.gl.renderer.currentGeometry=null,this.glState=this.gl.renderer.state,t)this.addAttribute(i,t[i])}addAttribute(e,t){if(this.attributes[e]=t,t.id=V++,t.size=t.size||1,t.type=t.type||(t.data.constructor===Float32Array?this.gl.FLOAT:t.data.constructor===Uint16Array?this.gl.UNSIGNED_SHORT:this.gl.UNSIGNED_INT),t.target="index"===e?this.gl.ELEMENT_ARRAY_BUFFER:this.gl.ARRAY_BUFFER,t.normalized=t.normalized||!1,t.stride=t.stride||0,t.offset=t.offset||0,t.count=t.count||(t.stride?t.data.byteLength/t.stride:t.data.length/t.size),t.divisor=t.instanced||0,t.needsUpdate=!1,t.usage=t.usage||this.gl.STATIC_DRAW,t.buffer||this.updateAttribute(t),t.divisor){if(this.isInstanced=!0,this.instancedCount&&this.instancedCount!==t.count*t.divisor)return console.warn("geometry has multiple instanced buffers of different length"),this.instancedCount=Math.min(this.instancedCount,t.count*t.divisor);this.instancedCount=t.count*t.divisor}else"index"===e?this.drawRange.count=t.count:this.attributes.index||(this.drawRange.count=Math.max(this.drawRange.count,t.count))}updateAttribute(e){let t=!e.buffer;t&&(e.buffer=this.gl.createBuffer()),this.glState.boundBuffer!==e.buffer&&(this.gl.bindBuffer(e.target,e.buffer),this.glState.boundBuffer=e.buffer),t?this.gl.bufferData(e.target,e.data,e.usage):this.gl.bufferSubData(e.target,0,e.data),e.needsUpdate=!1}setIndex(e){this.addAttribute("index",e)}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}setInstancedCount(e){this.instancedCount=e}createVAO(e){this.VAOs[e.attributeOrder]=this.gl.renderer.createVertexArray(),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.bindAttributes(e)}bindAttributes(e){e.attributeLocations.forEach((e,{name:t,type:i})=>{if(!this.attributes[t])return void console.warn(`active attribute ${t} not being supplied`);let n=this.attributes[t];this.gl.bindBuffer(n.target,n.buffer),this.glState.boundBuffer=n.buffer;let r=1;35674===i&&(r=2),35675===i&&(r=3),35676===i&&(r=4);let s=n.size/r,a=1===r?0:r*r*4,o=1===r?0:4*r;for(let t=0;t<r;t++)this.gl.vertexAttribPointer(e+t,s,n.type,n.normalized,n.stride+a,n.offset+t*o),this.gl.enableVertexAttribArray(e+t),this.gl.renderer.vertexAttribDivisor(e+t,n.divisor)}),this.attributes.index&&this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.attributes.index.buffer)}draw({program:e,mode:t=this.gl.TRIANGLES}){this.gl.renderer.currentGeometry!==`${this.id}_${e.attributeOrder}`&&(this.VAOs[e.attributeOrder]||this.createVAO(e),this.gl.renderer.bindVertexArray(this.VAOs[e.attributeOrder]),this.gl.renderer.currentGeometry=`${this.id}_${e.attributeOrder}`),e.attributeLocations.forEach((e,{name:t})=>{let i=this.attributes[t];i.needsUpdate&&this.updateAttribute(i)});let i=2;this.attributes.index?.type===this.gl.UNSIGNED_INT&&(i=4),this.isInstanced?this.attributes.index?this.gl.renderer.drawElementsInstanced(t,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*i,this.instancedCount):this.gl.renderer.drawArraysInstanced(t,this.drawRange.start,this.drawRange.count,this.instancedCount):this.attributes.index?this.gl.drawElements(t,this.drawRange.count,this.attributes.index.type,this.attributes.index.offset+this.drawRange.start*i):this.gl.drawArrays(t,this.drawRange.start,this.drawRange.count)}getPosition(){let e=this.attributes.position;return e.data?e:H?void 0:(console.warn("No position buffer data found to compute bounds"),H=!0)}computeBoundingBox(e){e||(e=this.getPosition());let t=e.data,i=e.size;this.bounds||(this.bounds={min:new v,max:new v,center:new v,scale:new v,radius:1/0});let n=this.bounds.min,r=this.bounds.max,s=this.bounds.center,a=this.bounds.scale;n.set(Infinity),r.set(-1/0);for(let e=0,s=t.length;e<s;e+=i){let i=t[e],s=t[e+1],a=t[e+2];n.x=Math.min(i,n.x),n.y=Math.min(s,n.y),n.z=Math.min(a,n.z),r.x=Math.max(i,r.x),r.y=Math.max(s,r.y),r.z=Math.max(a,r.z)}a.sub(r,n),s.add(n,r).divide(2)}computeBoundingSphere(e){e||(e=this.getPosition());let t=e.data,i=e.size;this.bounds||this.computeBoundingBox(e);let n=0;for(let e=0,r=t.length;e<r;e+=i)k.fromArray(t,e),n=Math.max(n,this.bounds.center.squaredDistance(k));this.bounds.radius=Math.sqrt(n)}remove(){for(let e in this.VAOs)this.gl.renderer.deleteVertexArray(this.VAOs[e]),delete this.VAOs[e];for(let e in this.attributes)this.gl.deleteBuffer(this.attributes[e].buffer),delete this.attributes[e]}}class W extends G{constructor(e,{width:t=1,height:i=1,widthSegments:n=1,heightSegments:r=1,attributes:s={}}={}){const a=(n+1)*(r+1),o=n*r*6,l=new Float32Array(3*a),h=new Float32Array(3*a),u=new Float32Array(2*a),c=o>65536?new Uint32Array(o):new Uint16Array(o);W.buildPlane(l,h,u,c,t,i,0,n,r),Object.assign(s,{position:{size:3,data:l},normal:{size:3,data:h},uv:{size:2,data:u},index:{data:c}}),super(e,s)}static buildPlane(e,t,i,n,r,s,a,o,l,h=0,u=1,c=2,d=1,p=-1,f=0,m=0){let g=f,v=r/o,_=s/l;for(let x=0;x<=l;x++){let y=x*_-s/2;for(let s=0;s<=o;s++,f++){let _=s*v-r/2;if(e[3*f+h]=_*d,e[3*f+u]=y*p,e[3*f+c]=a/2,t[3*f+h]=0,t[3*f+u]=0,t[3*f+c]=a>=0?1:-1,i[2*f]=s/o,i[2*f+1]=1-x/l,x===l||s===o)continue;let M=g+s+x*(o+1),S=g+s+(x+1)*(o+1),b=g+s+(x+1)*(o+1)+1,E=g+s+x*(o+1)+1;n[6*m]=M,n[6*m+1]=S,n[6*m+2]=E,n[6*m+3]=S,n[6*m+4]=b,n[6*m+5]=E,m++}}}}let X=1,j={};class Y{constructor(e,{vertex:t,fragment:i,uniforms:n={},transparent:r=!1,cullFace:s=e.BACK,frontFace:a=e.CCW,depthTest:o=!0,depthWrite:l=!0,depthFunc:h=e.LEQUAL}={}){e.canvas||console.error("gl not passed as first argument to Program"),this.gl=e,this.uniforms=n,this.id=X++,t||console.warn("vertex shader not supplied"),i||console.warn("fragment shader not supplied"),this.transparent=r,this.cullFace=s,this.frontFace=a,this.depthTest=o,this.depthWrite=l,this.depthFunc=h,this.blendFunc={},this.blendEquation={},this.stencilFunc={},this.stencilOp={},this.transparent&&!this.blendFunc.src&&(this.gl.renderer.premultipliedAlpha?this.setBlendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.setBlendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA)),this.vertexShader=e.createShader(e.VERTEX_SHADER),this.fragmentShader=e.createShader(e.FRAGMENT_SHADER),this.program=e.createProgram(),e.attachShader(this.program,this.vertexShader),e.attachShader(this.program,this.fragmentShader),this.setShaders({vertex:t,fragment:i})}setShaders({vertex:e,fragment:t}){if(e&&(this.gl.shaderSource(this.vertexShader,e),this.gl.compileShader(this.vertexShader),""!==this.gl.getShaderInfoLog(this.vertexShader)&&console.warn(`${this.gl.getShaderInfoLog(this.vertexShader)}
Vertex Shader
${K(e)}`)),t&&(this.gl.shaderSource(this.fragmentShader,t),this.gl.compileShader(this.fragmentShader),""!==this.gl.getShaderInfoLog(this.fragmentShader)&&console.warn(`${this.gl.getShaderInfoLog(this.fragmentShader)}
Fragment Shader
${K(t)}`)),this.gl.linkProgram(this.program),!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS))return console.warn(this.gl.getProgramInfoLog(this.program));this.uniformLocations=new Map;let i=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_UNIFORMS);for(let e=0;e<i;e++){let t=this.gl.getActiveUniform(this.program,e);this.uniformLocations.set(t,this.gl.getUniformLocation(this.program,t.name));let i=t.name.match(/(\w+)/g);t.uniformName=i[0],t.nameComponents=i.slice(1)}this.attributeLocations=new Map;let n=[],r=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES);for(let e=0;e<r;e++){let t=this.gl.getActiveAttrib(this.program,e),i=this.gl.getAttribLocation(this.program,t.name);-1!==i&&(n[i]=t.name,this.attributeLocations.set(t,i))}this.attributeOrder=n.join("")}setBlendFunc(e,t,i,n){this.blendFunc.src=e,this.blendFunc.dst=t,this.blendFunc.srcAlpha=i,this.blendFunc.dstAlpha=n,e&&(this.transparent=!0)}setBlendEquation(e,t){this.blendEquation.modeRGB=e,this.blendEquation.modeAlpha=t}setStencilFunc(e,t,i){this.stencilRef=t,this.stencilFunc.func=e,this.stencilFunc.ref=t,this.stencilFunc.mask=i}setStencilOp(e,t,i){this.stencilOp.stencilFail=e,this.stencilOp.depthFail=t,this.stencilOp.depthPass=i}applyState(){this.depthTest?this.gl.renderer.enable(this.gl.DEPTH_TEST):this.gl.renderer.disable(this.gl.DEPTH_TEST),this.cullFace?this.gl.renderer.enable(this.gl.CULL_FACE):this.gl.renderer.disable(this.gl.CULL_FACE),this.blendFunc.src?this.gl.renderer.enable(this.gl.BLEND):this.gl.renderer.disable(this.gl.BLEND),this.cullFace&&this.gl.renderer.setCullFace(this.cullFace),this.gl.renderer.setFrontFace(this.frontFace),this.gl.renderer.setDepthMask(this.depthWrite),this.gl.renderer.setDepthFunc(this.depthFunc),this.blendFunc.src&&this.gl.renderer.setBlendFunc(this.blendFunc.src,this.blendFunc.dst,this.blendFunc.srcAlpha,this.blendFunc.dstAlpha),this.gl.renderer.setBlendEquation(this.blendEquation.modeRGB,this.blendEquation.modeAlpha),this.stencilFunc.func||this.stencilOp.stencilFail?this.gl.renderer.enable(this.gl.STENCIL_TEST):this.gl.renderer.disable(this.gl.STENCIL_TEST),this.gl.renderer.setStencilFunc(this.stencilFunc.func,this.stencilFunc.ref,this.stencilFunc.mask),this.gl.renderer.setStencilOp(this.stencilOp.stencilFail,this.stencilOp.depthFail,this.stencilOp.depthPass)}use({flipFaces:e=!1}={}){let t=-1;this.gl.renderer.state.currentProgram!==this.id&&(this.gl.useProgram(this.program),this.gl.renderer.state.currentProgram=this.id),this.uniformLocations.forEach((e,i)=>{let n=this.uniforms[i.uniformName];for(let e of i.nameComponents){if(!n)break;if(e in n)n=n[e];else if(Array.isArray(n.value))break;else{n=void 0;break}}if(!n)return Z(`Active uniform ${i.name} has not been supplied`);if(n&&void 0===n.value)return Z(`${i.name} uniform is missing a value parameter`);if(n.value.texture)return t+=1,n.value.update(t),q(this.gl,i.type,e,t);if(n.value.length&&n.value[0].texture){let r=[];return n.value.forEach(e=>{t+=1,e.update(t),r.push(t)}),q(this.gl,i.type,e,r)}q(this.gl,i.type,e,n.value)}),this.applyState(),e&&this.gl.renderer.setFrontFace(this.frontFace===this.gl.CCW?this.gl.CW:this.gl.CCW)}remove(){this.gl.deleteProgram(this.program)}}function q(e,t,i,n){n=n.length?function(e){let t=e.length,i=e[0].length;if(void 0===i)return e;let n=t*i,r=j[n];r||(j[n]=r=new Float32Array(n));for(let n=0;n<t;n++)r.set(e[n],n*i);return r}(n):n;let r=e.renderer.state.uniformLocations.get(i);if(n.length)if(void 0===r||r.length!==n.length)e.renderer.state.uniformLocations.set(i,n.slice(0));else{if(function(e,t){if(e.length!==t.length)return!1;for(let i=0,n=e.length;i<n;i++)if(e[i]!==t[i])return!1;return!0}(r,n))return;r.set?r.set(n):function(e,t){for(let i=0,n=e.length;i<n;i++)e[i]=t[i]}(r,n),e.renderer.state.uniformLocations.set(i,r)}else{if(r===n)return;e.renderer.state.uniformLocations.set(i,n)}switch(t){case 5126:return n.length?e.uniform1fv(i,n):e.uniform1f(i,n);case 35664:return e.uniform2fv(i,n);case 35665:return e.uniform3fv(i,n);case 35666:return e.uniform4fv(i,n);case 35670:case 5124:case 35678:case 36306:case 35680:case 36289:return n.length?e.uniform1iv(i,n):e.uniform1i(i,n);case 35671:case 35667:return e.uniform2iv(i,n);case 35672:case 35668:return e.uniform3iv(i,n);case 35673:case 35669:return e.uniform4iv(i,n);case 35674:return e.uniformMatrix2fv(i,!1,n);case 35675:return e.uniformMatrix3fv(i,!1,n);case 35676:return e.uniformMatrix4fv(i,!1,n)}}function K(e){let t=e.split("\n");for(let e=0;e<t.length;e++)t[e]=e+1+": "+t[e];return t.join("\n")}let $=0;function Z(e){!($>100)&&(console.warn(e),++$>100&&console.warn("More than 100 program warnings - stopping logs."))}let J=new v,Q=1;class ee{constructor({canvas:e=document.createElement("canvas"),width:t=300,height:i=150,dpr:n=1,alpha:r=!1,depth:s=!0,stencil:a=!1,antialias:o=!1,premultipliedAlpha:l=!1,preserveDrawingBuffer:h=!1,powerPreference:u="default",autoClear:c=!0,webgl:d=2}={}){const p={alpha:r,depth:s,stencil:a,antialias:o,premultipliedAlpha:l,preserveDrawingBuffer:h,powerPreference:u};this.dpr=n,this.alpha=r,this.color=!0,this.depth=s,this.stencil=a,this.premultipliedAlpha=l,this.autoClear=c,this.id=Q++,2===d&&(this.gl=e.getContext("webgl2",p)),this.isWebgl2=!!this.gl,this.gl||(this.gl=e.getContext("webgl",p)),this.gl||console.error("unable to create webgl context"),this.gl.renderer=this,this.setSize(t,i),this.state={},this.state.blendFunc={src:this.gl.ONE,dst:this.gl.ZERO},this.state.blendEquation={modeRGB:this.gl.FUNC_ADD},this.state.cullFace=!1,this.state.frontFace=this.gl.CCW,this.state.depthMask=!0,this.state.depthFunc=this.gl.LEQUAL,this.state.premultiplyAlpha=!1,this.state.flipY=!1,this.state.unpackAlignment=4,this.state.framebuffer=null,this.state.viewport={x:0,y:0,width:null,height:null},this.state.textureUnits=[],this.state.activeTextureUnit=0,this.state.boundBuffer=null,this.state.uniformLocations=new Map,this.state.currentProgram=null,this.extensions={},this.isWebgl2?(this.getExtension("EXT_color_buffer_float"),this.getExtension("OES_texture_float_linear")):(this.getExtension("OES_texture_float"),this.getExtension("OES_texture_float_linear"),this.getExtension("OES_texture_half_float"),this.getExtension("OES_texture_half_float_linear"),this.getExtension("OES_element_index_uint"),this.getExtension("OES_standard_derivatives"),this.getExtension("EXT_sRGB"),this.getExtension("WEBGL_depth_texture"),this.getExtension("WEBGL_draw_buffers")),this.getExtension("WEBGL_compressed_texture_astc"),this.getExtension("EXT_texture_compression_bptc"),this.getExtension("WEBGL_compressed_texture_s3tc"),this.getExtension("WEBGL_compressed_texture_etc1"),this.getExtension("WEBGL_compressed_texture_pvrtc"),this.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),this.vertexAttribDivisor=this.getExtension("ANGLE_instanced_arrays","vertexAttribDivisor","vertexAttribDivisorANGLE"),this.drawArraysInstanced=this.getExtension("ANGLE_instanced_arrays","drawArraysInstanced","drawArraysInstancedANGLE"),this.drawElementsInstanced=this.getExtension("ANGLE_instanced_arrays","drawElementsInstanced","drawElementsInstancedANGLE"),this.createVertexArray=this.getExtension("OES_vertex_array_object","createVertexArray","createVertexArrayOES"),this.bindVertexArray=this.getExtension("OES_vertex_array_object","bindVertexArray","bindVertexArrayOES"),this.deleteVertexArray=this.getExtension("OES_vertex_array_object","deleteVertexArray","deleteVertexArrayOES"),this.drawBuffers=this.getExtension("WEBGL_draw_buffers","drawBuffers","drawBuffersWEBGL"),this.parameters={},this.parameters.maxTextureUnits=this.gl.getParameter(this.gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS),this.parameters.maxAnisotropy=this.getExtension("EXT_texture_filter_anisotropic")?this.gl.getParameter(this.getExtension("EXT_texture_filter_anisotropic").MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}setSize(e,t){this.width=e,this.height=t,this.gl.canvas.width=e*this.dpr,this.gl.canvas.height=t*this.dpr,this.gl.canvas.style&&Object.assign(this.gl.canvas.style,{width:e+"px",height:t+"px"})}setViewport(e,t,i=0,n=0){(this.state.viewport.width!==e||this.state.viewport.height!==t)&&(this.state.viewport.width=e,this.state.viewport.height=t,this.state.viewport.x=i,this.state.viewport.y=n,this.gl.viewport(i,n,e,t))}setScissor(e,t,i=0,n=0){this.gl.scissor(i,n,e,t)}enable(e){!0!==this.state[e]&&(this.gl.enable(e),this.state[e]=!0)}disable(e){!1!==this.state[e]&&(this.gl.disable(e),this.state[e]=!1)}setBlendFunc(e,t,i,n){(this.state.blendFunc.src!==e||this.state.blendFunc.dst!==t||this.state.blendFunc.srcAlpha!==i||this.state.blendFunc.dstAlpha!==n)&&(this.state.blendFunc.src=e,this.state.blendFunc.dst=t,this.state.blendFunc.srcAlpha=i,this.state.blendFunc.dstAlpha=n,void 0!==i?this.gl.blendFuncSeparate(e,t,i,n):this.gl.blendFunc(e,t))}setBlendEquation(e,t){e=e||this.gl.FUNC_ADD,(this.state.blendEquation.modeRGB!==e||this.state.blendEquation.modeAlpha!==t)&&(this.state.blendEquation.modeRGB=e,this.state.blendEquation.modeAlpha=t,void 0!==t?this.gl.blendEquationSeparate(e,t):this.gl.blendEquation(e))}setCullFace(e){this.state.cullFace!==e&&(this.state.cullFace=e,this.gl.cullFace(e))}setFrontFace(e){this.state.frontFace!==e&&(this.state.frontFace=e,this.gl.frontFace(e))}setDepthMask(e){this.state.depthMask!==e&&(this.state.depthMask=e,this.gl.depthMask(e))}setDepthFunc(e){this.state.depthFunc!==e&&(this.state.depthFunc=e,this.gl.depthFunc(e))}setStencilMask(e){this.state.stencilMask!==e&&(this.state.stencilMask=e,this.gl.stencilMask(e))}setStencilFunc(e,t,i){(this.state.stencilFunc!==e||this.state.stencilRef!==t||this.state.stencilFuncMask!==i)&&(this.state.stencilFunc=e||this.gl.ALWAYS,this.state.stencilRef=t||0,this.state.stencilFuncMask=i||0,this.gl.stencilFunc(e||this.gl.ALWAYS,t||0,i||0))}setStencilOp(e,t,i){(this.state.stencilFail!==e||this.state.stencilDepthFail!==t||this.state.stencilDepthPass!==i)&&(this.state.stencilFail=e,this.state.stencilDepthFail=t,this.state.stencilDepthPass=i,this.gl.stencilOp(e,t,i))}activeTexture(e){this.state.activeTextureUnit!==e&&(this.state.activeTextureUnit=e,this.gl.activeTexture(this.gl.TEXTURE0+e))}bindFramebuffer({target:e=this.gl.FRAMEBUFFER,buffer:t=null}={}){this.state.framebuffer!==t&&(this.state.framebuffer=t,this.gl.bindFramebuffer(e,t))}getExtension(e,t,i){return t&&this.gl[t]?this.gl[t].bind(this.gl):(this.extensions[e]||(this.extensions[e]=this.gl.getExtension(e)),t)?this.extensions[e]?this.extensions[e][i].bind(this.extensions[e]):null:this.extensions[e]}sortOpaque(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program.id!==t.program.id?e.program.id-t.program.id:e.zDepth!==t.zDepth?e.zDepth-t.zDepth:t.id-e.id}sortTransparent(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.zDepth!==t.zDepth?t.zDepth-e.zDepth:t.id-e.id}sortUI(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program.id!==t.program.id?e.program.id-t.program.id:t.id-e.id}getRenderList({scene:e,camera:t,frustumCull:i,sort:n}){let r=[];if(t&&i&&t.updateFrustum(),e.traverse(e=>!e.visible||(e.draw?void((!i||!e.frustumCulled||!t||t.frustumIntersectsMesh(e))&&r.push(e)):void 0)),n){let e=[],i=[],n=[];r.forEach(r=>{r.program.transparent?r.program.depthTest?i.push(r):n.push(r):e.push(r),r.zDepth=0,0===r.renderOrder&&r.program.depthTest&&t&&(r.worldMatrix.getTranslation(J),J.applyMatrix4(t.projectionViewMatrix),r.zDepth=J.z)}),e.sort(this.sortOpaque),i.sort(this.sortTransparent),n.sort(this.sortUI),r=e.concat(i,n)}return r}render({scene:e,camera:t,target:i=null,update:n=!0,sort:r=!0,frustumCull:s=!0,clear:a}){null===i?(this.bindFramebuffer(),this.setViewport(this.width*this.dpr,this.height*this.dpr)):(this.bindFramebuffer(i),this.setViewport(i.width,i.height)),(a||this.autoClear&&!1!==a)&&(this.depth&&(!i||i.depth)&&(this.enable(this.gl.DEPTH_TEST),this.setDepthMask(!0)),(this.stencil||!i||i.stencil)&&(this.enable(this.gl.STENCIL_TEST),this.setStencilMask(255)),this.gl.clear((this.color?this.gl.COLOR_BUFFER_BIT:0)|(this.depth?this.gl.DEPTH_BUFFER_BIT:0)|(this.stencil?this.gl.STENCIL_BUFFER_BIT:0))),n&&e.updateMatrixWorld(),t&&t.updateMatrixWorld(),this.getRenderList({scene:e,camera:t,frustumCull:s,sort:r}).forEach(e=>{e.draw({camera:t})})}}let et=new Uint8Array(4),ei=1;class en{constructor(e,{image:t,target:i=e.TEXTURE_2D,type:n=e.UNSIGNED_BYTE,format:r=e.RGBA,internalFormat:s=r,wrapS:a=e.CLAMP_TO_EDGE,wrapT:o=e.CLAMP_TO_EDGE,wrapR:l=e.CLAMP_TO_EDGE,generateMipmaps:h=i===(e.TEXTURE_2D||e.TEXTURE_CUBE_MAP),minFilter:u=h?e.NEAREST_MIPMAP_LINEAR:e.LINEAR,magFilter:c=e.LINEAR,premultiplyAlpha:d=!1,unpackAlignment:p=4,flipY:f=i==(e.TEXTURE_2D||e.TEXTURE_3D),anisotropy:m=0,level:g=0,width:v,height:_=v,length:x=1}={}){this.gl=e,this.id=ei++,this.image=t,this.target=i,this.type=n,this.format=r,this.internalFormat=s,this.minFilter=u,this.magFilter=c,this.wrapS=a,this.wrapT=o,this.wrapR=l,this.generateMipmaps=h,this.premultiplyAlpha=d,this.unpackAlignment=p,this.flipY=f,this.anisotropy=Math.min(m,this.gl.renderer.parameters.maxAnisotropy),this.level=g,this.width=v,this.height=_,this.length=x,this.texture=this.gl.createTexture(),this.store={image:null},this.glState=this.gl.renderer.state,this.state={},this.state.minFilter=this.gl.NEAREST_MIPMAP_LINEAR,this.state.magFilter=this.gl.LINEAR,this.state.wrapS=this.gl.REPEAT,this.state.wrapT=this.gl.REPEAT,this.state.anisotropy=0}bind(){this.glState.textureUnits[this.glState.activeTextureUnit]!==this.id&&(this.gl.bindTexture(this.target,this.texture),this.glState.textureUnits[this.glState.activeTextureUnit]=this.id)}update(e=0){let t=!(this.image===this.store.image&&!this.needsUpdate);if((t||this.glState.textureUnits[e]!==this.id)&&(this.gl.renderer.activeTexture(e),this.bind()),t){if(this.needsUpdate=!1,this.flipY!==this.glState.flipY&&(this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,this.flipY),this.glState.flipY=this.flipY),this.premultiplyAlpha!==this.glState.premultiplyAlpha&&(this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),this.glState.premultiplyAlpha=this.premultiplyAlpha),this.unpackAlignment!==this.glState.unpackAlignment&&(this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,this.unpackAlignment),this.glState.unpackAlignment=this.unpackAlignment),this.minFilter!==this.state.minFilter&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_MIN_FILTER,this.minFilter),this.state.minFilter=this.minFilter),this.magFilter!==this.state.magFilter&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_MAG_FILTER,this.magFilter),this.state.magFilter=this.magFilter),this.wrapS!==this.state.wrapS&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_S,this.wrapS),this.state.wrapS=this.wrapS),this.wrapT!==this.state.wrapT&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_T,this.wrapT),this.state.wrapT=this.wrapT),this.wrapR!==this.state.wrapR&&(this.gl.texParameteri(this.target,this.gl.TEXTURE_WRAP_R,this.wrapR),this.state.wrapR=this.wrapR),this.anisotropy&&this.anisotropy!==this.state.anisotropy&&(this.gl.texParameterf(this.target,this.gl.renderer.getExtension("EXT_texture_filter_anisotropic").TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropy),this.state.anisotropy=this.anisotropy),this.image){if(this.image.width&&(this.width=this.image.width,this.height=this.image.height),this.target===this.gl.TEXTURE_CUBE_MAP)for(let e=0;e<6;e++)this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+e,this.level,this.internalFormat,this.format,this.type,this.image[e]);else if(ArrayBuffer.isView(this.image))this.target===this.gl.TEXTURE_2D?this.gl.texImage2D(this.target,this.level,this.internalFormat,this.width,this.height,0,this.format,this.type,this.image):(this.target===this.gl.TEXTURE_2D_ARRAY||this.target===this.gl.TEXTURE_3D)&&this.gl.texImage3D(this.target,this.level,this.internalFormat,this.width,this.height,this.length,0,this.format,this.type,this.image);else if(this.image.isCompressedTexture)for(let e=0;e<this.image.length;e++)this.gl.compressedTexImage2D(this.target,e,this.internalFormat,this.image[e].width,this.image[e].height,0,this.image[e].data);else this.target===this.gl.TEXTURE_2D?this.gl.texImage2D(this.target,this.level,this.internalFormat,this.format,this.type,this.image):this.gl.texImage3D(this.target,this.level,this.internalFormat,this.width,this.height,this.length,0,this.format,this.type,this.image);if(this.generateMipmaps){var i,n;this.gl.renderer.isWebgl2||((i=this.image.width)&i-1)==0&&((n=this.image.height)&n-1)==0?this.gl.generateMipmap(this.target):(this.generateMipmaps=!1,this.wrapS=this.wrapT=this.gl.CLAMP_TO_EDGE,this.minFilter=this.gl.LINEAR)}this.onUpdate&&this.onUpdate()}else if(this.target===this.gl.TEXTURE_CUBE_MAP)for(let e=0;e<6;e++)this.gl.texImage2D(this.gl.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,et);else this.width?this.target===this.gl.TEXTURE_2D?this.gl.texImage2D(this.target,this.level,this.internalFormat,this.width,this.height,0,this.format,this.type,null):this.gl.texImage3D(this.target,this.level,this.internalFormat,this.width,this.height,this.length,0,this.format,this.type,null):this.gl.texImage2D(this.target,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,et);this.store.image=this.image}}}var er=e.i(71645);class es{constructor({gl:e,plane:t,renderer:i,text:n,textColor:r="#545050",font:s="30px Sora"}){!function(e){Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(t=>{"constructor"!==t&&"function"==typeof e[t]&&(e[t]=e[t].bind(e))})}(this),this.gl=e,this.plane=t,this.renderer=i,this.text=n,this.textColor=r,this.font=s,this.createMesh()}createMesh(){let{texture:e,width:t,height:i}=function(e,t,i="bold 30px Sora",n="black"){let r=document.createElement("canvas"),s=r.getContext("2d");s.font=i;let a=Math.ceil(s.measureText(t).width),o=Math.ceil(1.2*parseInt(i,10));r.width=a+20,r.height=o+20,s.font=i,s.fillStyle=n,s.textBaseline="middle",s.textAlign="center",s.clearRect(0,0,r.width,r.height),s.fillText(t,r.width/2,r.height/2);let l=new en(e,{generateMipmaps:!1});return l.image=r,{texture:l,width:r.width,height:r.height}}(this.gl,this.text,this.font,this.textColor),n=new W(this.gl),r=new Y(this.gl,{vertex:`
        attribute vec3 position;
        attribute vec2 uv;
        uniform mat4 modelViewMatrix;
        uniform mat4 projectionMatrix;
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
        }
      `,fragment:`
        precision highp float;
        uniform sampler2D tMap;
        varying vec2 vUv;
        void main() {
          vec4 color = texture2D(tMap, vUv);
          if (color.a < 0.1) discard;
          gl_FragColor = color;
        }
      `,uniforms:{tMap:{value:e}},transparent:!0});this.mesh=new B(this.gl,{geometry:n,program:r});let s=.15*this.plane.scale.y;this.mesh.scale.set(t/i*s,s,1),this.mesh.position.y=-(.5*this.plane.scale.y)-.5*s-.05,this.mesh.setParent(this.plane)}}class ea{constructor({geometry:e,gl:t,image:i,index:n,length:r,renderer:s,scene:a,screen:o,text:l,viewport:h,bend:u,textColor:c,borderRadius:d=0,font:p}){this.extra=0,this.geometry=e,this.gl=t,this.image=i,this.index=n,this.length=r,this.renderer=s,this.scene=a,this.screen=o,this.text=l,this.viewport=h,this.bend=u,this.textColor=c,this.borderRadius=d,this.font=p,this.createShader(),this.createMesh(),this.createTitle(),this.onResize()}createShader(){let e=new en(this.gl,{generateMipmaps:!0});this.program=new Y(this.gl,{depthTest:!1,depthWrite:!1,vertex:`
        precision highp float;
        attribute vec3 position;
        attribute vec2 uv;
        uniform mat4 modelViewMatrix;
        uniform mat4 projectionMatrix;
        uniform float uTime;
        uniform float uSpeed;
        varying vec2 vUv;
        void main() {
          vUv = uv;
          vec3 p = position;
          p.z = (sin(p.x * 4.0 + uTime) * 1.5 + cos(p.y * 2.0 + uTime) * 1.5) * (0.1 + uSpeed * 0.5);
          gl_Position = projectionMatrix * modelViewMatrix * vec4(p, 1.0);
        }
      `,fragment:`
        precision highp float;
        uniform vec2 uImageSizes;
        uniform vec2 uPlaneSizes;
        uniform sampler2D tMap;
        uniform float uBorderRadius;
        varying vec2 vUv;
        
        float roundedBoxSDF(vec2 p, vec2 b, float r) {
          vec2 d = abs(p) - b;
          return length(max(d, vec2(0.0))) + min(max(d.x, d.y), 0.0) - r;
        }
        
        void main() {
          vec2 ratio = vec2(
            min((uPlaneSizes.x / uPlaneSizes.y) / (uImageSizes.x / uImageSizes.y), 1.0),
            min((uPlaneSizes.y / uPlaneSizes.x) / (uImageSizes.y / uImageSizes.x), 1.0)
          );
          vec2 uv = vec2(
            vUv.x * ratio.x + (1.0 - ratio.x) * 0.5,
            vUv.y * ratio.y + (1.0 - ratio.y) * 0.5
          );
          vec4 color = texture2D(tMap, uv);
          
          float d = roundedBoxSDF(vUv - 0.5, vec2(0.5 - uBorderRadius), uBorderRadius);
          
          // Smooth antialiasing for edges
          float edgeSmooth = 0.002;
          float alpha = 1.0 - smoothstep(-edgeSmooth, edgeSmooth, d);
          
          gl_FragColor = vec4(color.rgb, alpha);
        }
      `,uniforms:{tMap:{value:e},uPlaneSizes:{value:[0,0]},uImageSizes:{value:[0,0]},uSpeed:{value:0},uTime:{value:100*Math.random()},uBorderRadius:{value:this.borderRadius}},transparent:!0});let t=new Image;t.crossOrigin="anonymous",t.src=this.image,t.onload=()=>{e.image=t,this.program.uniforms.uImageSizes.value=[t.naturalWidth,t.naturalHeight]}}createMesh(){this.plane=new B(this.gl,{geometry:this.geometry,program:this.program}),this.plane.setParent(this.scene)}createTitle(){this.title=new es({gl:this.gl,plane:this.plane,renderer:this.renderer,text:this.text,textColor:this.textColor,fontFamily:this.font})}update(e,t){this.plane.position.x=this.x-e.current-this.extra;let i=this.plane.position.x,n=this.viewport.width/2;if(0===this.bend)this.plane.position.y=0,this.plane.rotation.z=0;else{let e=Math.abs(this.bend),t=(n*n+e*e)/(2*e),r=Math.min(Math.abs(i),n),s=t-Math.sqrt(t*t-r*r);this.bend>0?(this.plane.position.y=-s,this.plane.rotation.z=-Math.sign(i)*Math.asin(r/t)):(this.plane.position.y=s,this.plane.rotation.z=Math.sign(i)*Math.asin(r/t))}this.speed=e.current-e.last,this.program.uniforms.uTime.value+=.04,this.program.uniforms.uSpeed.value=this.speed;let r=this.plane.scale.x/2,s=this.viewport.width/2;this.isBefore=this.plane.position.x+r<-s,this.isAfter=this.plane.position.x-r>s,"right"===t&&this.isBefore&&(this.extra-=this.widthTotal,this.isBefore=this.isAfter=!1),"left"===t&&this.isAfter&&(this.extra+=this.widthTotal,this.isBefore=this.isAfter=!1)}onResize({screen:e,viewport:t}={}){e&&(this.screen=e),t&&(this.viewport=t,this.plane.program.uniforms.uViewportSizes&&(this.plane.program.uniforms.uViewportSizes.value=[this.viewport.width,this.viewport.height])),this.scale=this.screen.height/1500,this.plane.scale.y=this.viewport.height*(900*this.scale)/this.screen.height,this.plane.scale.x=this.viewport.width*(700*this.scale)/this.screen.width,this.plane.program.uniforms.uPlaneSizes.value=[this.plane.scale.x,this.plane.scale.y],this.padding=2,this.width=this.plane.scale.x+this.padding,this.widthTotal=this.width*this.length,this.x=this.width*this.index}}class eo{constructor(e,{items:t,bend:i,textColor:n="#ffffff",borderRadius:r=0,font:s="bold 30px Sora",scrollSpeed:a=2,scrollEase:o=.05}={}){document.documentElement.classList.remove("no-js"),this.container=e,this.scrollSpeed=a,this.scroll={ease:o,current:0,target:0,last:0},this.onCheckDebounce=function(e,t){let i;return function(...t){clearTimeout(i),i=setTimeout(()=>e.apply(this,t),200)}}(this.onCheck,0),this.createRenderer(),this.createCamera(),this.createScene(),this.onResize(),this.createGeometry(),this.createMedias(t,i,n,r,s),this.update(),this.addEventListeners()}createRenderer(){this.renderer=new ee({alpha:!0,antialias:!0,dpr:Math.min(window.devicePixelRatio||1,2)}),this.gl=this.renderer.gl,this.gl.clearColor(0,0,0,0),this.container.appendChild(this.gl.canvas)}createCamera(){this.camera=new U(this.gl),this.camera.fov=45,this.camera.position.z=20}createScene(){this.scene=new R}createGeometry(){this.planeGeometry=new W(this.gl,{heightSegments:50,widthSegments:100})}createMedias(e,t=1,i,n,r){let s=e&&e.length?e:[];this.mediasImages=s.concat(s),this.medias=this.mediasImages.map((e,s)=>new ea({geometry:this.planeGeometry,gl:this.gl,image:e.image,index:s,length:this.mediasImages.length,renderer:this.renderer,scene:this.scene,screen:this.screen,text:e.text,viewport:this.viewport,bend:t,textColor:i,borderRadius:n,font:r}))}onTouchDown(e){this.isDown=!0,this.scroll.position=this.scroll.current,this.start=e.touches?e.touches[0].clientX:e.clientX}onTouchMove(e){if(!this.isDown)return;let t=e.touches?e.touches[0].clientX:e.clientX,i=(this.start-t)*(.025*this.scrollSpeed);this.scroll.target=this.scroll.position+i}onTouchUp(){this.isDown=!1,this.onCheck()}onWheel(e){let t=e.deltaY||e.wheelDelta||e.detail;this.scroll.target+=(t>0?this.scrollSpeed:-this.scrollSpeed)*.2,this.onCheckDebounce()}onCheck(){if(!this.medias||!this.medias[0])return;let e=this.medias[0].width,t=Math.round(Math.abs(this.scroll.target)/e),i=e*t;this.scroll.target=this.scroll.target<0?-i:i}onResize(){this.screen={width:this.container.clientWidth,height:this.container.clientHeight},this.renderer.setSize(this.screen.width,this.screen.height),this.camera.perspective({aspect:this.screen.width/this.screen.height});let e=2*Math.tan(this.camera.fov*Math.PI/180/2)*this.camera.position.z,t=e*this.camera.aspect;this.viewport={width:t,height:e},this.medias&&this.medias.forEach(e=>e.onResize({screen:this.screen,viewport:this.viewport}))}update(){var e;this.scroll.current=(e=this.scroll.current,e+(this.scroll.target-e)*this.scroll.ease);let t=this.scroll.current>this.scroll.last?"right":"left";this.medias&&this.medias.forEach(e=>e.update(this.scroll,t)),this.renderer.render({scene:this.scene,camera:this.camera}),this.scroll.last=this.scroll.current,this.raf=window.requestAnimationFrame(this.update.bind(this))}addEventListeners(){this.boundOnResize=this.onResize.bind(this),this.boundOnWheel=this.onWheel.bind(this),this.boundOnTouchDown=this.onTouchDown.bind(this),this.boundOnTouchMove=this.onTouchMove.bind(this),this.boundOnTouchUp=this.onTouchUp.bind(this),window.addEventListener("resize",this.boundOnResize),window.addEventListener("mousewheel",this.boundOnWheel),window.addEventListener("wheel",this.boundOnWheel),window.addEventListener("mousedown",this.boundOnTouchDown),window.addEventListener("mousemove",this.boundOnTouchMove),window.addEventListener("mouseup",this.boundOnTouchUp),window.addEventListener("touchstart",this.boundOnTouchDown),window.addEventListener("touchmove",this.boundOnTouchMove),window.addEventListener("touchend",this.boundOnTouchUp)}destroy(){window.cancelAnimationFrame(this.raf),window.removeEventListener("resize",this.boundOnResize),window.removeEventListener("mousewheel",this.boundOnWheel),window.removeEventListener("wheel",this.boundOnWheel),window.removeEventListener("mousedown",this.boundOnTouchDown),window.removeEventListener("mousemove",this.boundOnTouchMove),window.removeEventListener("mouseup",this.boundOnTouchUp),window.removeEventListener("touchstart",this.boundOnTouchDown),window.removeEventListener("touchmove",this.boundOnTouchMove),window.removeEventListener("touchend",this.boundOnTouchUp),this.renderer&&this.renderer.gl&&this.renderer.gl.canvas.parentNode&&this.renderer.gl.canvas.parentNode.removeChild(this.renderer.gl.canvas)}}function el({items:e,bend:t=3,textColor:i="#ffffff",borderRadius:n=.05,font:s="bold 30px Sora",scrollSpeed:a=2,scrollEase:o=.05}){let l=(0,er.useRef)(null);return(0,er.useEffect)(()=>{let r=new eo(l.current,{items:e,bend:t,textColor:i,borderRadius:n,font:s,scrollSpeed:a,scrollEase:o});return()=>{r.destroy()}},[e,t,i,n,s,a,o]),(0,r.jsx)("div",{className:"circular-gallery",ref:l})}let eh=[{image:"/assets/Photos/g1.png",text:"Power Cool"},{image:"/assets/Photos/g2.png",text:"5RS"},{image:"/assets/Photos/g3.png",text:"Multico"},{image:"/assets/Photos/g4.png",text:"Recca Holdings"},{image:"/assets/Photos/g5.png",text:"Markerry Manufacturing"},{image:"/assets/Photos/g6.png",text:"Complete Delight"},{image:"/assets/Photos/g7.png",text:"Traderpreneur Xcellence"},{image:"/assets/Photos/g8.png",text:"Brief Academy"},{image:"/assets/Photos/g9.png",text:"Solaroo System"},{image:"/assets/Photos/g10.png",text:"Double Class"},{image:"/assets/Photos/g11.png",text:"Easyspad"},{image:"/assets/Photos/g12.png",text:"GSE M Technology"},{image:"/assets/Photos/g13.png",text:"Home IHC"},{image:"/assets/Photos/g14.png",text:"IG Premium"},{image:"/assets/Photos/g15.png",text:"Institute Darul Uloom"},{image:"/assets/Photos/g16.png",text:"K3V Real Estate"},{image:"/assets/Photos/g17.png",text:"KL Bar Committee"},{image:"/assets/Photos/g18.png",text:"Language Solutions"},{image:"/assets/Photos/g19.png",text:"Leader Autopart"},{image:"/assets/Photos/g20.png",text:"Magister"},{image:"/assets/Photos/g21.png",text:"Mattex"},{image:"/assets/Photos/g22.png",text:"Medik-Link"},{image:"/assets/Photos/g23.png",text:"Muaz Force"},{image:"/assets/Photos/g24.png",text:"Prestar Marketing"},{image:"/assets/Photos/g25.png",text:"Dr Cermin"},{image:"/assets/Photos/g26.png",text:"St John"},{image:"/assets/Photos/g27.png",text:"Trio Sales"},{image:"/assets/Photos/g28.png",text:"Wasser Works"},{image:"/assets/Photos/g29.png",text:"WWM Travel"},{image:"/assets/Photos/g30.png",text:"Xpel"}];function eu(){return(0,r.jsxs)(s.default,{id:"projects",className:"relative bg-[#0a0a0a]",children:[(0,r.jsxs)(a.default,{className:"text-center space-y-4",children:[(0,r.jsx)("h2",{className:"text-3xl sm:text-4xl font-bold text-white",children:"Explore My Work"}),(0,r.jsx)("p",{className:"text-white/70 max-w-xl mx-auto",children:"Here are some of my projects, showcasing my skills in front-end development and design."}),(0,r.jsx)("button",{className:"px-6 py-3 bg-[#E95203] text-white rounded-lg   hover:bg-[#ff7033] transition-all duration-300",children:"View All Projects"})]}),(0,r.jsx)(a.default,{className:"",children:(0,r.jsx)("div",{className:"relative w-full h-[600px]",children:(0,r.jsx)(el,{items:eh,bend:0,textColor:"#ffffff",borderRadius:.05,scrollSpeed:2,scrollEase:.05})})}),(0,r.jsx)("div",{className:"w-full h-px bg-[#252525]  "})]})}e.s(["default",()=>eu],78136)},33809,(e,t,i)=>{e.e,function(e){"use strict";var t,i,n,r,s,a,o,l,h,u,c,d,p,f=function(){return t||"u">typeof window&&(t=window.gsap)&&t.registerPlugin&&t},m=1,g=[],v=[],_=[],x=Date.now,y=function(e,t){return t},M=function(){var e=h.core,t=e.bridge||{},i=e._scrollers,n=e._proxies;i.push.apply(i,v),n.push.apply(n,_),v=i,_=n,y=function(e,i){return t[e](i)}},S=function(e,t){return~_.indexOf(e)&&_[_.indexOf(e)+1][t]},b=function(e){return!!~u.indexOf(e)},E=function(e,t,i,n,r){return e.addEventListener(t,i,{passive:!1!==n,capture:!!r})},T=function(e,t,i,n){return e.removeEventListener(t,i,!!n)},w="scrollLeft",A="scrollTop",C=function(){return c&&c.isPressed||v.cache++},P=function(e,t){var i=function i(r){if(r||0===r){m&&(n.history.scrollRestoration="manual");var s=c&&c.isPressed;e(r=i.v=Math.round(r)||(c&&c.iOS?1:0)),i.cacheID=v.cache,s&&y("ss",r)}else(t||v.cache!==i.cacheID||y("ref"))&&(i.cacheID=v.cache,i.v=e());return i.v+i.offset};return i.offset=0,e&&i},R={s:w,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:P(function(e){return arguments.length?n.scrollTo(e,L.sc()):n.pageXOffset||r[w]||s[w]||a[w]||0})},L={s:A,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:R,sc:P(function(e){return arguments.length?n.scrollTo(R.sc(),e):n.pageYOffset||r[A]||s[A]||a[A]||0})},D=function(e,i){return(i&&i._ctx&&i._ctx.selector||t.utils.toArray)(e)[0]||("string"==typeof e&&!1!==t.config().nullTargetWarn?console.warn("Element not found:",e):null)},I=function(e,t){for(var i=t.length;i--;)if(t[i]===e||t[i].contains(e))return!0;return!1},U=function(e,i){var n=i.s,a=i.sc;b(e)&&(e=r.scrollingElement||s);var o=v.indexOf(e),l=a===L.sc?1:2;~o||(o=v.push(e)-1),v[o+l]||E(e,"scroll",C);var h=v[o+l],u=h||(v[o+l]=P(S(e,n),!0)||(b(e)?a:P(function(t){return arguments.length?e[n]=t:e[n]})));return u.target=e,h||(u.smooth="smooth"===t.getProperty(e,"scrollBehavior")),u},N=function(e,t,i){var n=e,r=e,s=x(),a=s,o=t||50,l=Math.max(500,3*o),h=function(e,t){var l=x();t||l-s>o?(r=n,n=e,a=s,s=l):i?n+=e:n=r+(e-r)/(l-a)*(s-a)};return{update:h,reset:function(){r=n=i?0:n,a=s=0},getVelocity:function(e){var t=a,o=r,u=x();return(e||0===e)&&e!==n&&h(e),s===a||u-a>l?0:(n+(i?o:-o))/((i?u:s)-t)*1e3}}},O=function(e,t){return t&&!e._gsapAllow&&e.preventDefault(),e.changedTouches?e.changedTouches[0]:e},F=function(e){var t=Math.max.apply(Math,e),i=Math.min.apply(Math,e);return Math.abs(t)>=Math.abs(i)?t:i},B=function(){(h=t.core.globals().ScrollTrigger)&&h.core&&M()},k=function(e){return t=e||f(),!i&&t&&"u">typeof document&&document.body&&(n=window,s=(r=document).documentElement,a=r.body,u=[n,r,s,a],t.utils.clamp,p=t.core.context||function(){},l="onpointerenter"in a?"pointer":"mouse",o=z.isTouch=n.matchMedia&&n.matchMedia("(hover: none), (pointer: coarse)").matches?1:2*("ontouchstart"in n||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0),d=z.eventTypes=("ontouchstart"in s?"touchstart,touchmove,touchcancel,touchend":!("onpointerdown"in s)?"mousedown,mousemove,mouseup,mouseup":"pointerdown,pointermove,pointercancel,pointerup").split(","),setTimeout(function(){return m=0},500),B(),i=1),i};R.op=L,v.cache=0;var z=function(){var e;function u(e){this.init(e)}return u.prototype.init=function(e){i||k(t)||console.warn("Please gsap.registerPlugin(Observer)"),h||B();var u=e.tolerance,f=e.dragMinimum,m=e.type,v=e.target,_=e.lineHeight,y=e.debounce,M=e.preventDefault,S=e.onStop,w=e.onStopDelay,A=e.ignore,P=e.wheelSpeed,z=e.event,V=e.onDragStart,H=e.onDragEnd,G=e.onDrag,W=e.onPress,X=e.onRelease,j=e.onRight,Y=e.onLeft,q=e.onUp,K=e.onDown,$=e.onChangeX,Z=e.onChangeY,J=e.onChange,Q=e.onToggleX,ee=e.onToggleY,et=e.onHover,ei=e.onHoverEnd,en=e.onMove,er=e.ignoreCheck,es=e.isNormalizer,ea=e.onGestureStart,eo=e.onGestureEnd,el=e.onWheel,eh=e.onEnable,eu=e.onDisable,ec=e.onClick,ed=e.scrollSpeed,ep=e.capture,ef=e.allowClicks,em=e.lockAxis,eg=e.onLockAxis;this.target=v=D(v)||s,this.vars=e,A&&(A=t.utils.toArray(A)),u=u||1e-9,f=f||0,P=P||1,ed=ed||1,m=m||"wheel,touch,pointer",y=!1!==y,_||(_=parseFloat(n.getComputedStyle(a).lineHeight)||22);var ev,e_,ex,ey,eM,eS,eb,eE=this,eT=0,ew=0,eA=e.passive||!M&&!1!==e.passive,eC=U(v,R),eP=U(v,L),eR=eC(),eL=eP(),eD=~m.indexOf("touch")&&!~m.indexOf("pointer")&&"pointerdown"===d[0],eI=b(v),eU=v.ownerDocument||r,eN=[0,0,0],eO=[0,0,0],eF=0,eB=function(){return eF=x()},ek=function(e,t){return(eE.event=e)&&A&&I(e.target,A)||t&&eD&&"touch"!==e.pointerType||er&&er(e,t)},ez=function(){var e=eE.deltaX=F(eN),t=eE.deltaY=F(eO),i=Math.abs(e)>=u,n=Math.abs(t)>=u;J&&(i||n)&&J(eE,e,t,eN,eO),i&&(j&&eE.deltaX>0&&j(eE),Y&&eE.deltaX<0&&Y(eE),$&&$(eE),Q&&eE.deltaX<0!=eT<0&&Q(eE),eT=eE.deltaX,eN[0]=eN[1]=eN[2]=0),n&&(K&&eE.deltaY>0&&K(eE),q&&eE.deltaY<0&&q(eE),Z&&Z(eE),ee&&eE.deltaY<0!=ew<0&&ee(eE),ew=eE.deltaY,eO[0]=eO[1]=eO[2]=0),(ey||ex)&&(en&&en(eE),ex&&(V&&1===ex&&V(eE),G&&G(eE),ex=0),ey=!1),eS&&(eS=!1,1)&&eg&&eg(eE),eM&&(el(eE),eM=!1),ev=0},eV=function(e,t,i){eN[i]+=e,eO[i]+=t,eE._vx.update(e),eE._vy.update(t),y?ev||(ev=requestAnimationFrame(ez)):ez()},eH=function(e,t){em&&!eb&&(eE.axis=eb=Math.abs(e)>Math.abs(t)?"x":"y",eS=!0),"y"!==eb&&(eN[2]+=e,eE._vx.update(e,!0)),"x"!==eb&&(eO[2]+=t,eE._vy.update(t,!0)),y?ev||(ev=requestAnimationFrame(ez)):ez()},eG=function(e){if(!ek(e,1)){var t=(e=O(e,M)).clientX,i=e.clientY,n=t-eE.x,r=i-eE.y,s=eE.isDragging;eE.x=t,eE.y=i,(s||(n||r)&&(Math.abs(eE.startX-t)>=f||Math.abs(eE.startY-i)>=f))&&(ex||(ex=s?2:1),s||(eE.isDragging=!0),eH(n,r))}},eW=eE.onPress=function(e){ek(e,1)||e&&e.button||(eE.axis=eb=null,e_.pause(),eE.isPressed=!0,e=O(e),eT=ew=0,eE.startX=eE.x=e.clientX,eE.startY=eE.y=e.clientY,eE._vx.reset(),eE._vy.reset(),E(es?v:eU,d[1],eG,eA,!0),eE.deltaX=eE.deltaY=0,W&&W(eE))},eX=eE.onRelease=function(e){if(!ek(e,1)){T(es?v:eU,d[1],eG,!0);var i=!isNaN(eE.y-eE.startY),r=eE.isDragging,s=r&&(Math.abs(eE.x-eE.startX)>3||Math.abs(eE.y-eE.startY)>3),a=O(e);!s&&i&&(eE._vx.reset(),eE._vy.reset(),M&&ef&&t.delayedCall(.08,function(){if(x()-eF>300&&!e.defaultPrevented){if(e.target.click)e.target.click();else if(eU.createEvent){var t=eU.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,n,1,a.screenX,a.screenY,a.clientX,a.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(t)}}})),eE.isDragging=eE.isGesturing=eE.isPressed=!1,S&&r&&!es&&e_.restart(!0),ex&&ez(),H&&r&&H(eE),X&&X(eE,s)}},ej=function(e){return e.touches&&e.touches.length>1&&(eE.isGesturing=!0)&&ea(e,eE.isDragging)},eY=function(){return eE.isGesturing=!1,eo(eE)},eq=function(e){if(!ek(e)){var t=eC(),i=eP();eV((t-eR)*ed,(i-eL)*ed,1),eR=t,eL=i,S&&e_.restart(!0)}},eK=function(e){if(!ek(e)){e=O(e,M),el&&(eM=!0);var t=(1===e.deltaMode?_:2===e.deltaMode?n.innerHeight:1)*P;eV(e.deltaX*t,e.deltaY*t,0),S&&!es&&e_.restart(!0)}},e$=function(e){if(!ek(e)){var t=e.clientX,i=e.clientY,n=t-eE.x,r=i-eE.y;eE.x=t,eE.y=i,ey=!0,S&&e_.restart(!0),(n||r)&&eH(n,r)}},eZ=function(e){eE.event=e,et(eE)},eJ=function(e){eE.event=e,ei(eE)},eQ=function(e){return ek(e)||O(e,M)&&ec(eE)};e_=eE._dc=t.delayedCall(w||.25,function(){eE._vx.reset(),eE._vy.reset(),e_.pause(),S&&S(eE)}).pause(),eE.deltaX=eE.deltaY=0,eE._vx=N(0,50,!0),eE._vy=N(0,50,!0),eE.scrollX=eC,eE.scrollY=eP,eE.isDragging=eE.isGesturing=eE.isPressed=!1,p(this),eE.enable=function(e){return!eE.isEnabled&&(E(eI?eU:v,"scroll",C),m.indexOf("scroll")>=0&&E(eI?eU:v,"scroll",eq,eA,ep),m.indexOf("wheel")>=0&&E(v,"wheel",eK,eA,ep),(m.indexOf("touch")>=0&&o||m.indexOf("pointer")>=0)&&(E(v,d[0],eW,eA,ep),E(eU,d[2],eX),E(eU,d[3],eX),ef&&E(v,"click",eB,!0,!0),ec&&E(v,"click",eQ),ea&&E(eU,"gesturestart",ej),eo&&E(eU,"gestureend",eY),et&&E(v,l+"enter",eZ),ei&&E(v,l+"leave",eJ),en&&E(v,l+"move",e$)),eE.isEnabled=!0,eE.isDragging=eE.isGesturing=eE.isPressed=ey=ex=!1,eE._vx.reset(),eE._vy.reset(),eR=eC(),eL=eP(),e&&e.type&&eW(e),eh&&eh(eE)),eE},eE.disable=function(){eE.isEnabled&&(g.filter(function(e){return e!==eE&&b(e.target)}).length||T(eI?eU:v,"scroll",C),eE.isPressed&&(eE._vx.reset(),eE._vy.reset(),T(es?v:eU,d[1],eG,!0)),T(eI?eU:v,"scroll",eq,ep),T(v,"wheel",eK,ep),T(v,d[0],eW,ep),T(eU,d[2],eX),T(eU,d[3],eX),T(v,"click",eB,!0),T(v,"click",eQ),T(eU,"gesturestart",ej),T(eU,"gestureend",eY),T(v,l+"enter",eZ),T(v,l+"leave",eJ),T(v,l+"move",e$),eE.isEnabled=eE.isPressed=eE.isDragging=!1,eu&&eu(eE))},eE.kill=eE.revert=function(){eE.disable();var e=g.indexOf(eE);e>=0&&g.splice(e,1),c===eE&&(c=0)},g.push(eE),es&&b(v)&&(c=eE),eE.enable(z)},e=[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}],function(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(u.prototype,e),u}();z.version="3.14.2",z.create=function(e){return new z(e)},z.register=k,z.getAll=function(){return g.slice()},z.getById=function(e){return g.filter(function(t){return t.vars.id===e})[0]},f()&&t.registerPlugin(z);var V,H,G,W,X,j,Y,q,K,$,Z,J,Q,ee,et,ei,en,er,es,ea,eo,el,eh,eu,ec,ed,ep,ef,em,eg,ev,e_,ex,ey,eM,eS,eb,eE,eT=1,ew=Date.now,eA=ew(),eC=0,eP=0,eR=function(e,t,i){var n=eW(e)&&("clamp("===e.substr(0,6)||e.indexOf("max")>-1);return i["_"+t+"Clamp"]=n,n?e.substr(6,e.length-7):e},eL=function(e,t){return t&&(!eW(e)||"clamp("!==e.substr(0,6))?"clamp("+e+")":e},eD=function(){return ee=1},eI=function(){return ee=0},eU=function(e){return e},eN=function(e){return Math.round(1e5*e)/1e5||0},eO=function(){return"u">typeof window},eF=function(){return V||eO()&&(V=window.gsap)&&V.registerPlugin&&V},eB=function(e){return!!~Y.indexOf(e)},ek=function(e){return("Height"===e?ev:G["inner"+e])||X["client"+e]||j["client"+e]},ez=function(e){return S(e,"getBoundingClientRect")||(eB(e)?function(){return tY.width=G.innerWidth,tY.height=ev,tY}:function(){return ti(e)})},eV=function(e,t,i){var n=i.d,r=i.d2,s=i.a;return(s=S(e,"getBoundingClientRect"))?function(){return s()[n]}:function(){return(t?ek(r):e["client"+r])||0}},eH=function(e,t){var i=t.s,n=t.d2,r=t.d,s=t.a;return Math.max(0,(s=S(e,i="scroll"+n))?s()-ez(e)()[r]:eB(e)?(X[i]||j[i])-ek(n):e[i]-e["offset"+n])},eG=function(e,t){for(var i=0;i<es.length;i+=3)(!t||~t.indexOf(es[i+1]))&&e(es[i],es[i+1],es[i+2])},eW=function(e){return"string"==typeof e},eX=function(e){return"function"==typeof e},ej=function(e){return"number"==typeof e},eY=function(e){return"object"==typeof e},eq=function(e,t,i){return e&&e.progress(+!t)&&i&&e.pause()},eK=function(e,t){if(e.enabled){var i=e._ctx?e._ctx.add(function(){return t(e)}):t(e);i&&i.totalTime&&(e.callbackAnimation=i)}},e$=Math.abs,eZ="left",eJ="right",eQ="bottom",e0="width",e1="height",e2="Right",e3="Left",e4="Bottom",e5="padding",e6="margin",e8="Width",e9="Height",e7=function(e){return G.getComputedStyle(e)},te=function(e){var t=e7(e).position;e.style.position="absolute"===t||"fixed"===t?t:"relative"},tt=function(e,t){for(var i in t)i in e||(e[i]=t[i]);return e},ti=function(e,t){var i=t&&"matrix(1, 0, 0, 1, 0, 0)"!==e7(e)[et]&&V.to(e,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),n=e.getBoundingClientRect();return i&&i.progress(0).kill(),n},tn=function(e,t){var i=t.d2;return e["offset"+i]||e["client"+i]||0},tr=function(e){var t,i=[],n=e.labels,r=e.duration();for(t in n)i.push(n[t]/r);return i},ts=function(e){var t=V.utils.snap(e),i=Array.isArray(e)&&e.slice(0).sort(function(e,t){return e-t});return i?function(e,n,r){var s;if(void 0===r&&(r=.001),!n)return t(e);if(n>0){for(e-=r,s=0;s<i.length;s++)if(i[s]>=e)return i[s];return i[s-1]}for(s=i.length,e+=r;s--;)if(i[s]<=e)return i[s];return i[0]}:function(i,n,r){void 0===r&&(r=.001);var s=t(i);return!n||Math.abs(s-i)<r||s-i<0==n<0?s:t(n<0?i-e:i+e)}},ta=function(e,t,i,n){return i.split(",").forEach(function(i){return e(t,i,n)})},to=function(e,t,i,n,r){return e.addEventListener(t,i,{passive:!n,capture:!!r})},tl=function(e,t,i,n){return e.removeEventListener(t,i,!!n)},th=function(e,t,i){(i=i&&i.wheelHandler)&&(e(t,"wheel",i),e(t,"touchmove",i))},tu={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},tc={toggleActions:"play",anticipatePin:0},td={top:0,left:0,center:.5,bottom:1,right:1},tp=function(e,t){if(eW(e)){var i=e.indexOf("="),n=~i?(e.charAt(i-1)+1)*parseFloat(e.substr(i+1)):0;~i&&(e.indexOf("%")>i&&(n*=t/100),e=e.substr(0,i-1)),e=n+(e in td?td[e]*t:~e.indexOf("%")?parseFloat(e)*t/100:parseFloat(e)||0)}return e},tf=function(e,t,i,n,r,s,a,o){var l=r.startColor,h=r.endColor,u=r.fontSize,c=r.indent,d=r.fontWeight,p=W.createElement("div"),f=eB(i)||"fixed"===S(i,"pinType"),m=-1!==e.indexOf("scroller"),g=f?j:i,v=-1!==e.indexOf("start"),_=v?l:h,x="border-color:"+_+";font-size:"+u+";color:"+_+";font-weight:"+d+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return x+="position:"+((m||o)&&f?"fixed;":"absolute;"),(m||o||!f)&&(x+=(n===L?eJ:eQ)+":"+(s+parseFloat(c))+"px;"),a&&(x+="box-sizing:border-box;text-align:left;width:"+a.offsetWidth+"px;"),p._isStart=v,p.setAttribute("class","gsap-marker-"+e+(t?" marker-"+t:"")),p.style.cssText=x,p.innerText=t||0===t?e+"-"+t:e,g.children[0]?g.insertBefore(p,g.children[0]):g.appendChild(p),p._offset=p["offset"+n.op.d2],tm(p,0,n,v),p},tm=function(e,t,i,n){var r={display:"block"},s=i[n?"os2":"p2"],a=i[n?"p2":"os2"];e._isFlipped=n,r[i.a+"Percent"]=n?-100:0,r[i.a]=n?"1px":0,r["border"+s+e8]=1,r["border"+a+e8]=0,r[i.p]=t+"px",V.set(e,r)},tg=[],tv={},t_=function(){return ew()-eC>34&&(eM||(eM=requestAnimationFrame(tB)))},tx=function(){eh&&eh.isPressed&&!(eh.startX>j.clientWidth)||(v.cache++,eh?eM||(eM=requestAnimationFrame(tB)):tB(),eC||tT("scrollStart"),eC=ew())},ty=function(){ed=G.innerWidth,ec=G.innerHeight},tM=function(e){v.cache++,(!0===e||!Q&&!el&&!W.fullscreenElement&&!W.webkitFullscreenElement&&(!eu||ed!==G.innerWidth||Math.abs(G.innerHeight-ec)>.25*G.innerHeight))&&q.restart(!0)},tS={},tb=[],tE=function e(){return tl(t0,"scrollEnd",e)||tN(!0)},tT=function(e){return tS[e]&&tS[e].map(function(e){return e()})||tb},tw=[],tA=function(e){for(var t=0;t<tw.length;t+=5)(!e||tw[t+4]&&tw[t+4].query===e)&&(tw[t].style.cssText=tw[t+1],tw[t].getBBox&&tw[t].setAttribute("transform",tw[t+2]||""),tw[t+3].uncache=1)},tC=function(){return v.forEach(function(e){return eX(e)&&++e.cacheID&&(e.rec=e())})},tP=function(e,t){var i;for(ei=0;ei<tg.length;ei++)(i=tg[ei])&&(!t||i._ctx===t)&&(e?i.kill(1):i.revert(!0,!0));e_=!0,t&&tA(t),t||tT("revert")},tR=function(e,t){v.cache++,(t||!eS)&&v.forEach(function(e){return eX(e)&&e.cacheID++&&(e.rec=0)}),eW(e)&&(G.history.scrollRestoration=em=e)},tL=0,tD=function(){if(eb!==tL){var e=eb=tL;requestAnimationFrame(function(){return e===tL&&tN(!0)})}},tI=function(){j.appendChild(eg),ev=!eh&&eg.offsetHeight||G.innerHeight,j.removeChild(eg)},tU=function(e){return K(".gsap-marker-start, .gsap-marker-end, .gsap-marker-scroller-start, .gsap-marker-scroller-end").forEach(function(t){return t.style.display=e?"none":"block"})},tN=function(e,t){if(X=W.documentElement,j=W.body,Y=[G,W,X,j],eC&&!e&&!e_)return void to(t0,"scrollEnd",tE);tI(),eS=t0.isRefreshing=!0,e_||tC();var i=tT("refreshInit");ea&&t0.sort(),t||tP(),v.forEach(function(e){eX(e)&&(e.smooth&&(e.target.style.scrollBehavior="auto"),e(0))}),tg.slice(0).forEach(function(e){return e.refresh()}),e_=!1,tg.forEach(function(e){if(e._subPinOffset&&e.pin){var t=e.vars.horizontal?"offsetWidth":"offsetHeight",i=e.pin[t];e.revert(!0,1),e.adjustPinSpacing(e.pin[t]-i),e.refresh()}}),ex=1,tU(!0),tg.forEach(function(e){var t=eH(e.scroller,e._dir),i="max"===e.vars.end||e._endClamp&&e.end>t,n=e._startClamp&&e.start>=t;(i||n)&&e.setPositions(n?t-1:e.start,i?Math.max(n?t:e.start+1,t):e.end,!0)}),tU(!1),ex=0,i.forEach(function(e){return e&&e.render&&e.render(-1)}),v.forEach(function(e){eX(e)&&(e.smooth&&requestAnimationFrame(function(){return e.target.style.scrollBehavior="smooth"}),e.rec&&e(e.rec))}),tR(em,1),q.pause(),tL++,eS=2,tB(2),tg.forEach(function(e){return eX(e.vars.onRefresh)&&e.vars.onRefresh(e)}),eS=t0.isRefreshing=!1,tT("refresh")},tO=0,tF=1,tB=function(e){if(2===e||!eS&&!e_){t0.isUpdating=!0,eE&&eE.update(0);var t=tg.length,i=ew(),n=i-eA>=50,r=t&&tg[0].scroll();if(tF=tO>r?-1:1,eS||(tO=r),n&&(eC&&!ee&&i-eC>200&&(eC=0,tT("scrollEnd")),Z=eA,eA=i),tF<0){for(ei=t;ei-- >0;)tg[ei]&&tg[ei].update(0,n);tF=1}else for(ei=0;ei<t;ei++)tg[ei]&&tg[ei].update(0,n);t0.isUpdating=!1}eM=0},tk=[eZ,"top",eQ,eJ,e6+e4,e6+e2,e6+"Top",e6+e3,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],tz=tk.concat([e0,e1,"boxSizing","max"+e8,"max"+e9,"position",e6,e5,e5+"Top",e5+e2,e5+e4,e5+e3]),tV=function(e,t,i){tW(i);var n=e._gsap;if(n.spacerIsNative)tW(n.spacerState);else if(e._gsap.swappedIn){var r=t.parentNode;r&&(r.insertBefore(e,t),r.removeChild(t))}e._gsap.swappedIn=!1},tH=function(e,t,i,n){if(!e._gsap.swappedIn){for(var r,s=tk.length,a=t.style,o=e.style;s--;)a[r=tk[s]]=i[r];a.position="absolute"===i.position?"absolute":"relative","inline"===i.display&&(a.display="inline-block"),o[eQ]=o[eJ]="auto",a.flexBasis=i.flexBasis||"auto",a.overflow="visible",a.boxSizing="border-box",a[e0]=tn(e,R)+"px",a[e1]=tn(e,L)+"px",a[e5]=o[e6]=o.top=o[eZ]="0",tW(n),o[e0]=o["max"+e8]=i[e0],o[e1]=o["max"+e9]=i[e1],o[e5]=i[e5],e.parentNode!==t&&(e.parentNode.insertBefore(t,e),t.appendChild(e)),e._gsap.swappedIn=!0}},tG=/([A-Z])/g,tW=function(e){if(e){var t,i,n=e.t.style,r=e.length,s=0;for((e.t._gsap||V.core.getCache(e.t)).uncache=1;s<r;s+=2)i=e[s+1],t=e[s],i?n[t]=i:n[t]&&n.removeProperty(t.replace(tG,"-$1").toLowerCase())}},tX=function(e){for(var t=tz.length,i=e.style,n=[],r=0;r<t;r++)n.push(tz[r],i[tz[r]]);return n.t=e,n},tj=function(e,t,i){for(var n,r=[],s=e.length,a=8*!!i;a<s;a+=2)n=e[a],r.push(n,n in t?t[n]:e[a+1]);return r.t=e.t,r},tY={left:0,top:0},tq=function(e,t,i,n,r,s,a,o,l,h,u,c,d,p){eX(e)&&(e=e(o)),eW(e)&&"max"===e.substr(0,3)&&(e=c+("="===e.charAt(4)?tp("0"+e.substr(3),i):0));var f,m,g,v=d?d.time():0;if(d&&d.seek(0),isNaN(e)||(e*=1),ej(e))d&&(e=V.utils.mapRange(d.scrollTrigger.start,d.scrollTrigger.end,0,c,e)),a&&tm(a,i,n,!0);else{eX(t)&&(t=t(o));var _,x,y,M,S=(e||"0").split(" ");(_=ti(g=D(t,o)||j)||{}).left||_.top||"none"!==e7(g).display||(M=g.style.display,g.style.display="block",_=ti(g),M?g.style.display=M:g.style.removeProperty("display")),x=tp(S[0],_[n.d]),y=tp(S[1]||"0",i),e=_[n.p]-l[n.p]-h+x+r-y,a&&tm(a,y,n,i-y<20||a._isStart&&y>20),i-=i-y}if(p&&(o[p]=e||-.001,e<0&&(e=0)),s){var b=e+i,E=s._isStart;f="scroll"+n.d2,tm(s,b,n,E&&b>20||!E&&(u?Math.max(j[f],X[f]):s.parentNode[f])<=b+1),u&&(l=ti(a),u&&(s.style[n.op.p]=l[n.op.p]-n.op.m-s._offset+"px"))}return d&&g&&(f=ti(g),d.seek(c),m=ti(g),d._caScrollDist=f[n.p]-m[n.p],e=e/d._caScrollDist*c),d&&d.seek(v),d?e:Math.round(e)},tK=/(webkit|moz|length|cssText|inset)/i,t$=function(e,t,i,n){if(e.parentNode!==t){var r,s,a=e.style;if(t===j){for(r in e._stOrig=a.cssText,s=e7(e))+r||tK.test(r)||!s[r]||"string"!=typeof a[r]||"0"===r||(a[r]=s[r]);a.top=i,a.left=n}else a.cssText=e._stOrig;V.core.getCache(e).uncache=1,t.appendChild(e)}},tZ=function(e,t,i){var n=t,r=n;return function(t){var s=Math.round(e());return s!==n&&s!==r&&Math.abs(s-n)>3&&Math.abs(s-r)>3&&(t=s,i&&i()),r=n,n=Math.round(t)}},tJ=function(e,t,i){var n={};n[t.p]="+="+i,V.set(e,n)},tQ=function(e,t){var i=U(e,t),n="_scroll"+t.p2,r=function t(r,s,a,o,l){var h=t.tween,u=s.onComplete,c={};a=a||i();var d=tZ(i,a,function(){h.kill(),t.tween=0});return l=o&&l||0,o=o||r-a,h&&h.kill(),s[n]=r,s.inherit=!1,s.modifiers=c,c[n]=function(){return d(a+o*h.ratio+l*h.ratio*h.ratio)},s.onUpdate=function(){v.cache++,t.tween&&tB()},s.onComplete=function(){t.tween=0,u&&u.call(h)},h=t.tween=V.to(e,s)};return e[n]=i,i.wheelHandler=function(){return r.tween&&r.tween.kill()&&(r.tween=0)},to(e,"wheel",i.wheelHandler),t0.isTouch&&to(e,"touchmove",i.wheelHandler),r},t0=function(){function e(t,i){H||e.register(V)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),ef(this),this.init(t,i)}return e.prototype.init=function(t,i){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!eP){this.update=this.refresh=this.kill=eU;return}var n,r,s,a,o,l,h,u,c,d,p,f,m,g,x,y,M,b,E,T,w,A,C,P,I,N,O,F,B,k,z,H,Y,q,J,et,en,er,es,el,eh,eu=t=tt(eW(t)||ej(t)||t.nodeType?{trigger:t}:t,tc),ec=eu.onUpdate,ed=eu.toggleClass,ep=eu.id,ef=eu.onToggle,em=eu.onRefresh,eg=eu.scrub,ev=eu.trigger,e_=eu.pin,eM=eu.pinSpacing,eb=eu.invalidateOnRefresh,eA=eu.anticipatePin,eD=eu.onScrubComplete,eI=eu.onSnapComplete,eO=eu.once,eF=eu.snap,ek=eu.pinReparent,eG=eu.pinSpacer,eZ=eu.containerAnimation,eJ=eu.fastScrollEnd,eQ=eu.preventOverlaps,ta=t.horizontal||t.containerAnimation&&!1!==t.horizontal?R:L,th=!eg&&0!==eg,td=D(t.scroller||G),tm=V.core.getCache(td),t_=eB(td),ty=("pinType"in t?t.pinType:S(td,"pinType")||t_&&"fixed")==="fixed",tS=[t.onEnter,t.onLeave,t.onEnterBack,t.onLeaveBack],tb=th&&t.toggleActions.split(" "),tT="markers"in t?t.markers:tc.markers,tw=t_?0:parseFloat(e7(td)["border"+ta.p2+e8])||0,tA=this,tC=t.onRefreshInit&&function(){return t.onRefreshInit(tA)},tP=eV(td,t_,ta),tR=!t_||~_.indexOf(td)?ez(td):function(){return tY},tL=0,tI=0,tU=0,tN=U(td,ta);if(tA._startClamp=tA._endClamp=!1,tA._dir=ta,eA*=45,tA.scroller=td,tA.scroll=eZ?eZ.time.bind(eZ):tN,l=tN(),tA.vars=t,i=i||t.animation,"refreshPriority"in t&&(ea=1,-9999===t.refreshPriority&&(eE=tA)),tm.tweenScroll=tm.tweenScroll||{top:tQ(td,L),left:tQ(td,R)},tA.tweenTo=s=tm.tweenScroll[ta.p],tA.scrubDuration=function(e){(J=ej(e)&&e)?q?q.duration(e):q=V.to(i,{ease:"expo",totalProgress:"+=0",inherit:!1,duration:J,paused:!0,onComplete:function(){return eD&&eD(tA)}}):(q&&q.progress(1).kill(),q=0)},i&&(i.vars.lazy=!1,i._initted&&!tA.isReverted||!1!==i.vars.immediateRender&&!1!==t.immediateRender&&i.duration()&&i.render(0,!0,!0),tA.animation=i.pause(),i.scrollTrigger=tA,tA.scrubDuration(eg),H=0,ep||(ep=i.vars.id)),eF&&((!eY(eF)||eF.push)&&(eF={snapTo:eF}),"scrollBehavior"in j.style&&V.set(t_?[j,X]:td,{scrollBehavior:"auto"}),v.forEach(function(e){return eX(e)&&e.target===(t_?W.scrollingElement||X:td)&&(e.smooth=!1)}),o=eX(eF.snapTo)?eF.snapTo:"labels"===eF.snapTo?(n=i,function(e){return V.utils.snap(tr(n),e)}):"labelsDirectional"===eF.snapTo?(r=i,function(e,t){return ts(tr(r))(e,t.direction)}):!1!==eF.directional?function(e,t){return ts(eF.snapTo)(e,ew()-tI<500?0:t.direction)}:V.utils.snap(eF.snapTo),et=eY(et=eF.duration||{min:.1,max:2})?$(et.min,et.max):$(et,et),en=V.delayedCall(eF.delay||J/2||.1,function(){var e=tN(),t=ew()-tI<500,n=s.tween;if((t||10>Math.abs(tA.getVelocity()))&&!n&&!ee&&tL!==e){var r,a,l=(e-u)/y,h=i&&!th?i.totalProgress():l,d=t?0:(h-Y)/(ew()-Z)*1e3||0,p=V.utils.clamp(-l,1-l,e$(d/2)*d/.185),f=l+(!1===eF.inertia?0:p),m=eF,g=m.onStart,v=m.onInterrupt,_=m.onComplete;if(ej(r=o(f,tA))||(r=f),a=Math.max(0,Math.round(u+r*y)),e<=c&&e>=u&&a!==e){if(n&&!n._initted&&n.data<=e$(a-e))return;!1===eF.inertia&&(p=r-l),s(a,{duration:et(e$(.185*Math.max(e$(f-h),e$(r-h))/d/.05||0)),ease:eF.ease||"power3",data:e$(a-e),onInterrupt:function(){return en.restart(!0)&&v&&v(tA)},onComplete:function(){tA.update(),tL=tN(),i&&!th&&(q?q.resetTo("totalProgress",r,i._tTime/i._tDur):i.progress(r)),H=Y=i&&!th?i.totalProgress():tA.progress,eI&&eI(tA),_&&_(tA)}},e,p*y,a-e-p*y),g&&g(tA,s.tween)}}else tA.isActive&&tL!==e&&en.restart(!0)}).pause()),ep&&(tv[ep]=tA),(eh=(ev=tA.trigger=D(ev||!0!==e_&&e_))&&ev._gsap&&ev._gsap.stRevert)&&(eh=eh(tA)),e_=!0===e_?ev:D(e_),eW(ed)&&(ed={targets:ev,className:ed}),e_&&(!1===eM||eM===e6||(eM=(!!eM||!e_.parentNode||!e_.parentNode.style||"flex"!==e7(e_.parentNode).display)&&e5),tA.pin=e_,(a=V.core.getCache(e_)).spacer?M=a.pinState:(eG&&((eG=D(eG))&&!eG.nodeType&&(eG=eG.current||eG.nativeElement),a.spacerIsNative=!!eG,eG&&(a.spacerState=tX(eG))),a.spacer=T=eG||W.createElement("div"),T.classList.add("pin-spacer"),ep&&T.classList.add("pin-spacer-"+ep),a.pinState=M=tX(e_)),!1!==t.force3D&&V.set(e_,{force3D:!0}),tA.spacer=T=a.spacer,N=(z=e7(e_))[eM+ta.os2],A=V.getProperty(e_),C=V.quickSetter(e_,ta.a,"px"),tH(e_,T,z),E=tX(e_)),tT){g=eY(tT)?tt(tT,tu):tu,f=tf("scroller-start",ep,td,ta,g,0),m=tf("scroller-end",ep,td,ta,g,0,f),w=f["offset"+ta.op.d2];var tO=D(S(td,"content")||td);d=this.markerStart=tf("start",ep,tO,ta,g,w,0,eZ),p=this.markerEnd=tf("end",ep,tO,ta,g,w,0,eZ),eZ&&(el=V.quickSetter([d,p],ta.a,"px")),ty||_.length&&!0===S(td,"fixedMarkers")||(te(t_?j:td),V.set([f,m],{force3D:!0}),F=V.quickSetter(f,ta.a,"px"),k=V.quickSetter(m,ta.a,"px"))}if(eZ){var tB=eZ.vars.onUpdate,tk=eZ.vars.onUpdateParams;eZ.eventCallback("onUpdate",function(){tA.update(0,0,1),tB&&tB.apply(eZ,tk||[])})}if(tA.previous=function(){return tg[tg.indexOf(tA)-1]},tA.next=function(){return tg[tg.indexOf(tA)+1]},tA.revert=function(e,t){if(!t)return tA.kill(!0);var n=!1!==e||!tA.enabled,r=Q;n!==tA.isReverted&&(n&&(er=Math.max(tN(),tA.scroll.rec||0),tU=tA.progress,es=i&&i.progress()),d&&[d,p,f,m].forEach(function(e){return e.style.display=n?"none":"block"}),n&&(Q=tA,tA.update(n)),!e_||ek&&tA.isActive||(n?tV(e_,T,M):tH(e_,T,e7(e_),O)),n||tA.update(n),Q=r,tA.isReverted=n)},tA.refresh=function(n,r,a,o){if(!Q&&tA.enabled||r){if(e_&&n&&eC)return void to(e,"scrollEnd",tE);!eS&&tC&&tC(tA),Q=tA,s.tween&&!a&&(s.tween.kill(),s.tween=0),q&&q.pause(),eb&&i&&(i.revert({kill:!1}).invalidate(),i.getChildren?i.getChildren(!0,!0,!1).forEach(function(e){return e.vars.immediateRender&&e.render(0,!0,!0)}):i.vars.immediateRender&&i.render(0,!0,!0)),tA.isReverted||tA.revert(!0,!0),tA._subPinOffset=!1;var g,v,_,S,w,C,N,F,k,z,H,G,Y,K=tP(),$=tR(),Z=eZ?eZ.duration():eH(td,ta),J=y<=.01||!y,ee=0,et=o||0,ei=eY(a)?a.end:t.end,ea=t.endTrigger||ev,el=eY(a)?a.start:t.start||(0!==t.start&&ev?e_?"0 0":"0 100%":0),eh=tA.pinnedContainer=t.pinnedContainer&&D(t.pinnedContainer,tA),eu=ev&&Math.max(0,tg.indexOf(tA))||0,ec=eu;for(tT&&eY(a)&&(G=V.getProperty(f,ta.p),Y=V.getProperty(m,ta.p));ec-- >0;)(C=tg[ec]).end||C.refresh(0,1)||(Q=tA),(N=C.pin)&&(N===ev||N===e_||N===eh)&&!C.isReverted&&(z||(z=[]),z.unshift(C),C.revert(!0,!0)),C!==tg[ec]&&(eu--,ec--);for(eX(el)&&(el=el(tA)),u=tq(el=eR(el,"start",tA),ev,K,ta,tN(),d,f,tA,$,tw,ty,Z,eZ,tA._startClamp&&"_startClamp")||(e_?-.001:0),eX(ei)&&(ei=ei(tA)),eW(ei)&&!ei.indexOf("+=")&&(~ei.indexOf(" ")?ei=(eW(el)?el.split(" ")[0]:"")+ei:(ee=tp(ei.substr(2),K),ei=eW(el)?el:(eZ?V.utils.mapRange(0,eZ.duration(),eZ.scrollTrigger.start,eZ.scrollTrigger.end,u):u)+ee,ea=ev)),ei=eR(ei,"end",tA),c=Math.max(u,tq(ei||(ea?"100% 0":Z),ea,K,ta,tN()+ee,p,m,tA,$,tw,ty,Z,eZ,tA._endClamp&&"_endClamp"))||-.001,ee=0,ec=eu;ec--;)(N=(C=tg[ec]||{}).pin)&&C.start-C._pinPush<=u&&!eZ&&C.end>0&&(g=C.end-(tA._startClamp?Math.max(0,C.start):C.start),(N===ev&&C.start-C._pinPush<u||N===eh)&&isNaN(el)&&(ee+=g*(1-C.progress)),N===e_&&(et+=g));if(u+=ee,c+=ee,tA._startClamp&&(tA._startClamp+=ee),tA._endClamp&&!eS&&(tA._endClamp=c||-.001,c=Math.min(c,eH(td,ta))),y=c-u||(u-=.01)&&.001,J&&(tU=V.utils.clamp(0,1,V.utils.normalize(u,c,er))),tA._pinPush=et,d&&ee&&((g={})[ta.a]="+="+ee,eh&&(g[ta.p]="-="+tN()),V.set([d,p],g)),e_&&!(ex&&tA.end>=eH(td,ta)))g=e7(e_),S=ta===L,_=tN(),P=parseFloat(A(ta.a))+et,!Z&&c>1&&(H={style:H=(t_?W.scrollingElement||X:td).style,value:H["overflow"+ta.a.toUpperCase()]},t_&&"scroll"!==e7(j)["overflow"+ta.a.toUpperCase()]&&(H.style["overflow"+ta.a.toUpperCase()]="scroll")),tH(e_,T,g),E=tX(e_),v=ti(e_,!0),F=ty&&U(td,S?R:L)(),eM?((O=[eM+ta.os2,y+et+"px"]).t=T,(ec=eM===e5?tn(e_,ta)+y+et:0)&&(O.push(ta.d,ec+"px"),"auto"!==T.style.flexBasis&&(T.style.flexBasis=ec+"px")),tW(O),eh&&tg.forEach(function(e){e.pin===eh&&!1!==e.vars.pinSpacing&&(e._subPinOffset=!0)}),ty&&tN(er)):(ec=tn(e_,ta))&&"auto"!==T.style.flexBasis&&(T.style.flexBasis=ec+"px"),ty&&((w={top:v.top+(S?_-u:F)+"px",left:v.left+(S?F:_-u)+"px",boxSizing:"border-box",position:"fixed"})[e0]=w["max"+e8]=Math.ceil(v.width)+"px",w[e1]=w["max"+e9]=Math.ceil(v.height)+"px",w[e6]=w[e6+"Top"]=w[e6+e2]=w[e6+e4]=w[e6+e3]="0",w[e5]=g[e5],w[e5+"Top"]=g[e5+"Top"],w[e5+e2]=g[e5+e2],w[e5+e4]=g[e5+e4],w[e5+e3]=g[e5+e3],b=tj(M,w,ek),eS&&tN(0)),i?(k=i._initted,eo(1),i.render(i.duration(),!0,!0),I=A(ta.a)-P+y+et,B=Math.abs(y-I)>1,ty&&B&&b.splice(b.length-2,2),i.render(0,!0,!0),k||i.invalidate(!0),i.parent||i.totalTime(i.totalTime()),eo(0)):I=y,H&&(H.value?H.style["overflow"+ta.a.toUpperCase()]=H.value:H.style.removeProperty("overflow-"+ta.a));else if(ev&&tN()&&!eZ)for(v=ev.parentNode;v&&v!==j;)v._pinOffset&&(u-=v._pinOffset,c-=v._pinOffset),v=v.parentNode;z&&z.forEach(function(e){return e.revert(!1,!0)}),tA.start=u,tA.end=c,l=h=eS?er:tN(),eZ||eS||(l<er&&tN(er),tA.scroll.rec=0),tA.revert(!1,!0),tI=ew(),en&&(tL=-1,en.restart(!0)),Q=0,i&&th&&(i._initted||es)&&i.progress()!==es&&i.progress(es||0,!0).render(i.time(),!0,!0),(J||tU!==tA.progress||eZ||eb||i&&!i._initted)&&(i&&!th&&(i._initted||tU||!1!==i.vars.immediateRender)&&i.totalProgress(eZ&&u<-.001&&!tU?V.utils.normalize(u,c,0):tU,!0),tA.progress=J||(l-u)/y===tU?0:tU),e_&&eM&&(T._pinOffset=Math.round(tA.progress*I)),q&&q.invalidate(),isNaN(G)||(G-=V.getProperty(f,ta.p),Y-=V.getProperty(m,ta.p),tJ(f,ta,G),tJ(d,ta,G-(o||0)),tJ(m,ta,Y),tJ(p,ta,Y-(o||0))),J&&!eS&&tA.update(),!em||eS||x||(x=!0,em(tA),x=!1)}},tA.getVelocity=function(){return(tN()-h)/(ew()-Z)*1e3||0},tA.endAnimation=function(){eq(tA.callbackAnimation),i&&(q?q.progress(1):i.paused()?th||eq(i,tA.direction<0,1):eq(i,i.reversed()))},tA.labelToScroll=function(e){return i&&i.labels&&(u||tA.refresh()||u)+i.labels[e]/i.duration()*y||0},tA.getTrailing=function(e){var t=tg.indexOf(tA),i=tA.direction>0?tg.slice(0,t).reverse():tg.slice(t+1);return(eW(e)?i.filter(function(t){return t.vars.preventOverlaps===e}):i).filter(function(e){return tA.direction>0?e.end<=u:e.start>=c})},tA.update=function(e,t,n){if(!eZ||n||e){var r,a,o,d,p,m,g,v=!0===eS?er:tA.scroll(),_=e?0:(v-u)/y,x=_<0?0:_>1?1:_||0,M=tA.progress;if(t&&(h=l,l=eZ?tN():v,eF&&(Y=H,H=i&&!th?i.totalProgress():x)),eA&&e_&&!Q&&!eT&&eC&&(!x&&u<v+(v-h)/(ew()-Z)*eA?x=1e-4:1===x&&c>v+(v-h)/(ew()-Z)*eA&&(x=.9999)),x!==M&&tA.enabled){if(d=(p=(r=tA.isActive=!!x&&x<1)!=(!!M&&M<1))||!!x!=!!M,tA.direction=x>M?1:-1,tA.progress=x,d&&!Q&&(a=x&&!M?0:1===x?1:1===M?2:3,th&&(o=!p&&"none"!==tb[a+1]&&tb[a+1]||tb[a],g=i&&("complete"===o||"reset"===o||o in i))),eQ&&(p||g)&&(g||eg||!i)&&(eX(eQ)?eQ(tA):tA.getTrailing(eQ).forEach(function(e){return e.endAnimation()})),!th&&(!q||Q||eT?i&&i.totalProgress(x,!!(Q&&(tI||e))):(q._dp._time-q._start!==q._time&&q.render(q._dp._time-q._start),q.resetTo?q.resetTo("totalProgress",x,i._tTime/i._tDur):(q.vars.totalProgress=x,q.invalidate().restart()))),e_)if(e&&eM&&(T.style[eM+ta.os2]=N),ty){if(d){if(m=!e&&x>M&&c+1>v&&v+1>=eH(td,ta),ek)if(!e&&(r||m)){var S=ti(e_,!0),w=v-u;t$(e_,j,S.top+(ta===L?w:0)+"px",S.left+(ta===L?0:w)+"px")}else t$(e_,T);tW(r||m?b:E),B&&x<1&&r||C(P+(1!==x||m?0:I))}}else C(eN(P+I*x));!eF||s.tween||Q||eT||en.restart(!0),ed&&(p||eO&&x&&(x<1||!ey))&&K(ed.targets).forEach(function(e){return e.classList[r||eO?"add":"remove"](ed.className)}),!ec||th||e||ec(tA),d&&!Q?(th&&(g&&("complete"===o?i.pause().totalProgress(1):"reset"===o?i.restart(!0).pause():"restart"===o?i.restart(!0):i[o]()),ec&&ec(tA)),(p||!ey)&&(ef&&p&&eK(tA,ef),tS[a]&&eK(tA,tS[a]),eO&&(1===x?tA.kill(!1,1):tS[a]=0),!p&&tS[a=1===x?1:3]&&eK(tA,tS[a])),eJ&&!r&&Math.abs(tA.getVelocity())>(ej(eJ)?eJ:2500)&&(eq(tA.callbackAnimation),q?q.progress(1):eq(i,"reverse"===o?1:!x,1))):th&&ec&&!Q&&ec(tA)}if(k){var A=eZ?v/eZ.duration()*(eZ._caScrollDist||0):v;F(A+ +!!f._isFlipped),k(A)}el&&el(-v/eZ.duration()*(eZ._caScrollDist||0))}},tA.enable=function(t,i){tA.enabled||(tA.enabled=!0,to(td,"resize",tM),t_||to(td,"scroll",tx),tC&&to(e,"refreshInit",tC),!1!==t&&(tA.progress=tU=0,l=h=tL=tN()),!1!==i&&tA.refresh())},tA.getTween=function(e){return e&&s?s.tween:q},tA.setPositions=function(e,t,i,n){if(eZ){var r=eZ.scrollTrigger,s=eZ.duration(),a=r.end-r.start;e=r.start+a*e/s,t=r.start+a*t/s}tA.refresh(!1,!1,{start:eL(e,i&&!!tA._startClamp),end:eL(t,i&&!!tA._endClamp)},n),tA.update()},tA.adjustPinSpacing=function(e){if(O&&e){var t=O.indexOf(ta.d)+1;O[t]=parseFloat(O[t])+e+"px",O[1]=parseFloat(O[1])+e+"px",tW(O)}},tA.disable=function(t,i){if(!1!==t&&tA.revert(!0,!0),tA.enabled&&(tA.enabled=tA.isActive=!1,i||q&&q.pause(),er=0,a&&(a.uncache=1),tC&&tl(e,"refreshInit",tC),en&&(en.pause(),s.tween&&s.tween.kill()&&(s.tween=0)),!t_)){for(var n=tg.length;n--;)if(tg[n].scroller===td&&tg[n]!==tA)return;tl(td,"resize",tM),t_||tl(td,"scroll",tx)}},tA.kill=function(e,n){tA.disable(e,n),q&&!n&&q.kill(),ep&&delete tv[ep];var r=tg.indexOf(tA);r>=0&&tg.splice(r,1),r===ei&&tF>0&&ei--,r=0,tg.forEach(function(e){return e.scroller===tA.scroller&&(r=1)}),r||eS||(tA.scroll.rec=0),i&&(i.scrollTrigger=null,e&&i.revert({kill:!1}),n||i.kill()),d&&[d,p,f,m].forEach(function(e){return e.parentNode&&e.parentNode.removeChild(e)}),eE===tA&&(eE=0),e_&&(a&&(a.uncache=1),r=0,tg.forEach(function(e){return e.pin===e_&&r++}),r||(a.spacer=0)),t.onKill&&t.onKill(tA)},tg.push(tA),tA.enable(!1,!1),eh&&eh(tA),i&&i.add&&!y){var tz=tA.update;tA.update=function(){tA.update=tz,v.cache++,u||c||tA.refresh()},V.delayedCall(.01,tA.update),y=.01,u=c=0}else tA.refresh();e_&&tD()},e.register=function(t){return H||(V=t||eF(),eO()&&window.document&&e.enable(),H=eP),H},e.defaults=function(e){if(e)for(var t in e)tc[t]=e[t];return tc},e.disable=function(e,t){eP=0,tg.forEach(function(i){return i[t?"kill":"disable"](e)}),tl(G,"wheel",tx),tl(W,"scroll",tx),clearInterval(J),tl(W,"touchcancel",eU),tl(j,"touchstart",eU),ta(tl,W,"pointerdown,touchstart,mousedown",eD),ta(tl,W,"pointerup,touchend,mouseup",eI),q.kill(),eG(tl);for(var i=0;i<v.length;i+=3)th(tl,v[i],v[i+1]),th(tl,v[i],v[i+2])},e.enable=function(){if(G=window,X=(W=document).documentElement,j=W.body,V&&(K=V.utils.toArray,$=V.utils.clamp,ef=V.core.context||eU,eo=V.core.suppressOverwrites||eU,em=G.history.scrollRestoration||"auto",tO=G.pageYOffset||0,V.core.globals("ScrollTrigger",e),j)){eP=1,(eg=document.createElement("div")).style.height="100vh",eg.style.position="absolute",tI(),function e(){return eP&&requestAnimationFrame(e)}(),z.register(V),e.isTouch=z.isTouch,ep=z.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),eu=1===z.isTouch,to(G,"wheel",tx),Y=[G,W,X,j],V.matchMedia?(e.matchMedia=function(e){var t,i=V.matchMedia();for(t in e)i.add(t,e[t]);return i},V.addEventListener("matchMediaInit",function(){tC(),tP()}),V.addEventListener("matchMediaRevert",function(){return tA()}),V.addEventListener("matchMedia",function(){tN(0,1),tT("matchMedia")}),V.matchMedia().add("(orientation: portrait)",function(){return ty(),ty})):console.warn("Requires GSAP 3.11.0 or later"),ty(),to(W,"scroll",tx);var t,i,n=j.hasAttribute("style"),r=j.style,s=r.borderTopStyle,a=V.core.Animation.prototype;for(a.revert||Object.defineProperty(a,"revert",{value:function(){return this.time(-.01,!0)}}),r.borderTopStyle="solid",L.m=Math.round((t=ti(j)).top+L.sc())||0,R.m=Math.round(t.left+R.sc())||0,s?r.borderTopStyle=s:r.removeProperty("border-top-style"),n||(j.setAttribute("style",""),j.removeAttribute("style")),J=setInterval(t_,250),V.delayedCall(.5,function(){return eT=0}),to(W,"touchcancel",eU),to(j,"touchstart",eU),ta(to,W,"pointerdown,touchstart,mousedown",eD),ta(to,W,"pointerup,touchend,mouseup",eI),et=V.utils.checkPrefix("transform"),tz.push(et),H=ew(),q=V.delayedCall(.2,tN).pause(),es=[W,"visibilitychange",function(){var e=G.innerWidth,t=G.innerHeight;W.hidden?(en=e,er=t):(en!==e||er!==t)&&tM()},W,"DOMContentLoaded",tN,G,"load",tN,G,"resize",tM],eG(to),tg.forEach(function(e){return e.enable(0,1)}),i=0;i<v.length;i+=3)th(tl,v[i],v[i+1]),th(tl,v[i],v[i+2])}},e.config=function(t){"limitCallbacks"in t&&(ey=!!t.limitCallbacks);var i=t.syncInterval;i&&clearInterval(J)||(J=i)&&setInterval(t_,i),"ignoreMobileResize"in t&&(eu=1===e.isTouch&&t.ignoreMobileResize),"autoRefreshEvents"in t&&(eG(tl)||eG(to,t.autoRefreshEvents||"none"),el=-1===(t.autoRefreshEvents+"").indexOf("resize"))},e.scrollerProxy=function(e,t){var i=D(e),n=v.indexOf(i),r=eB(i);~n&&v.splice(n,r?6:2),t&&(r?_.unshift(G,t,j,t,X,t):_.unshift(i,t))},e.clearMatchMedia=function(e){tg.forEach(function(t){return t._ctx&&t._ctx.query===e&&t._ctx.kill(!0,!0)})},e.isInViewport=function(e,t,i){var n=(eW(e)?D(e):e).getBoundingClientRect(),r=n[i?e0:e1]*t||0;return i?n.right-r>0&&n.left+r<G.innerWidth:n.bottom-r>0&&n.top+r<G.innerHeight},e.positionInViewport=function(e,t,i){eW(e)&&(e=D(e));var n=e.getBoundingClientRect(),r=n[i?e0:e1],s=null==t?r/2:t in td?td[t]*r:~t.indexOf("%")?parseFloat(t)*r/100:parseFloat(t)||0;return i?(n.left+s)/G.innerWidth:(n.top+s)/G.innerHeight},e.killAll=function(e){if(tg.slice(0).forEach(function(e){return"ScrollSmoother"!==e.vars.id&&e.kill()}),!0!==e){var t=tS.killAll||[];tS={},t.forEach(function(e){return e()})}},e}();t0.version="3.14.2",t0.saveStyles=function(e){return e?K(e).forEach(function(e){if(e&&e.style){var t=tw.indexOf(e);t>=0&&tw.splice(t,5),tw.push(e,e.style.cssText,e.getBBox&&e.getAttribute("transform"),V.core.getCache(e),ef())}}):tw},t0.revert=function(e,t){return tP(!e,t)},t0.create=function(e,t){return new t0(e,t)},t0.refresh=function(e){return e?tM(!0):(H||t0.register())&&tN(!0)},t0.update=function(e){return++v.cache&&tB(2*(!0===e))},t0.clearScrollMemory=tR,t0.maxScroll=function(e,t){return eH(e,t?R:L)},t0.getScrollFunc=function(e,t){return U(D(e),t?R:L)},t0.getById=function(e){return tv[e]},t0.getAll=function(){return tg.filter(function(e){return"ScrollSmoother"!==e.vars.id})},t0.isScrolling=function(){return!!eC},t0.snapDirectional=ts,t0.addEventListener=function(e,t){var i=tS[e]||(tS[e]=[]);~i.indexOf(t)||i.push(t)},t0.removeEventListener=function(e,t){var i=tS[e],n=i&&i.indexOf(t);n>=0&&i.splice(n,1)},t0.batch=function(e,t){var i,n=[],r={},s=t.interval||.016,a=t.batchMax||1e9,o=function(e,t){var i=[],n=[],r=V.delayedCall(s,function(){t(i,n),i=[],n=[]}).pause();return function(e){i.length||r.restart(!0),i.push(e.trigger),n.push(e),a<=i.length&&r.progress(1)}};for(i in t)r[i]="on"===i.substr(0,2)&&eX(t[i])&&"onRefreshInit"!==i?o(i,t[i]):t[i];return eX(a)&&(a=a(),to(t0,"refresh",function(){return a=t.batchMax()})),K(e).forEach(function(e){var t={};for(i in r)t[i]=r[i];t.trigger=e,n.push(t0.create(t))}),n};var t1,t2=function(e,t,i,n){return t>n?e(n):t<0&&e(0),i>n?(n-t)/(i-t):i<0?t/(t-i):1},t3=function e(t,i){!0===i?t.style.removeProperty("touch-action"):t.style.touchAction=!0===i?"auto":i?"pan-"+i+(z.isTouch?" pinch-zoom":""):"none",t===X&&e(j,i)},t4={auto:1,scroll:1},t5=function(e){var t,i=e.event,n=e.target,r=e.axis,s=(i.changedTouches?i.changedTouches[0]:i).target,a=s._gsap||V.core.getCache(s),o=ew();if(!a._isScrollT||o-a._isScrollT>2e3){for(;s&&s!==j&&(s.scrollHeight<=s.clientHeight&&s.scrollWidth<=s.clientWidth||!(t4[(t=e7(s)).overflowY]||t4[t.overflowX]));)s=s.parentNode;a._isScroll=s&&s!==n&&!eB(s)&&(t4[(t=e7(s)).overflowY]||t4[t.overflowX]),a._isScrollT=o}(a._isScroll||"x"===r)&&(i.stopPropagation(),i._gsapAllow=!0)},t6=function(e,t,i,n){return z.create({target:e,capture:!0,debounce:!1,lockAxis:!0,type:t,onWheel:n=n&&t5,onPress:n,onDrag:n,onScroll:n,onEnable:function(){return i&&to(W,z.eventTypes[0],t9,!1,!0)},onDisable:function(){return tl(W,z.eventTypes[0],t9,!0)}})},t8=/(input|label|select|textarea)/i,t9=function(e){var t=t8.test(e.target.tagName);(t||t1)&&(e._gsapAllow=!0,t1=t)},t7=function(e){eY(e)||(e={}),e.preventDefault=e.isNormalizer=e.allowClicks=!0,e.type||(e.type="wheel,touch"),e.debounce=!!e.debounce,e.id=e.id||"normalizer";var t,i,n,r,s,a,o,l,h=e,u=h.normalizeScrollX,c=h.momentum,d=h.allowNestedScroll,p=h.onRelease,f=D(e.target)||X,m=V.core.globals().ScrollSmoother,g=m&&m.get(),_=ep&&(e.content&&D(e.content)||g&&!1!==e.content&&!g.smooth()&&g.content()),x=U(f,L),y=U(f,R),M=1,S=(z.isTouch&&G.visualViewport?G.visualViewport.scale*G.visualViewport.width:G.outerWidth)/G.innerWidth,b=0,E=eX(c)?function(){return c(t)}:function(){return c||2.8},T=t6(f,e.type,!0,d),w=function(){return r=!1},A=eU,C=eU,P=function(){i=eH(f,L),C=$(+!!ep,i),u&&(A=$(0,eH(f,R))),n=tL},I=function(){_._gsap.y=eN(parseFloat(_._gsap.y)+x.offset)+"px",_.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(_._gsap.y)+", 0, 1)",x.offset=x.cacheID=0},N=function(){if(r){requestAnimationFrame(w);var e=eN(t.deltaY/2),i=C(x.v-e);if(_&&i!==x.v+x.offset){x.offset=i-x.v;var n=eN((parseFloat(_&&_._gsap.y)||0)-x.offset);_.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+n+", 0, 1)",_._gsap.y=n+"px",x.cacheID=v.cache,tB()}return!0}x.offset&&I(),r=!0},O=function(){P(),s.isActive()&&s.vars.scrollY>i&&(x()>i?s.progress(1)&&x(i):s.resetTo("scrollY",i))};return _&&V.set(_,{y:"+=0"}),e.ignoreCheck=function(e){return ep&&"touchmove"===e.type&&N()||M>1.05&&"touchstart"!==e.type||t.isGesturing||e.touches&&e.touches.length>1},e.onPress=function(){r=!1;var e=M;M=eN((G.visualViewport&&G.visualViewport.scale||1)/S),s.pause(),e!==M&&t3(f,M>1.01||!u&&"x"),a=y(),o=x(),P(),n=tL},e.onRelease=e.onGestureStart=function(e,t){if(x.offset&&I(),t){v.cache++;var n,r,a=E();u&&(r=(n=y())+-(.05*a*e.velocityX)/.227,a*=t2(y,n,r,eH(f,R)),s.vars.scrollX=A(r)),r=(n=x())+-(.05*a*e.velocityY)/.227,a*=t2(x,n,r,eH(f,L)),s.vars.scrollY=C(r),s.invalidate().duration(a).play(.01),(ep&&s.vars.scrollY>=i||n>=i-1)&&V.to({},{onUpdate:O,duration:a})}else l.restart(!0);p&&p(e)},e.onWheel=function(){s._ts&&s.pause(),ew()-b>1e3&&(n=0,b=ew())},e.onChange=function(e,t,i,r,s){if(tL!==n&&P(),t&&u&&y(A(r[2]===t?a+(e.startX-e.x):y()+t-r[1])),i){x.offset&&I();var l=s[2]===i,h=l?o+e.startY-e.y:x()+i-s[1],c=C(h);l&&h!==c&&(o+=c-h),x(c)}(i||t)&&tB()},e.onEnable=function(){t3(f,!u&&"x"),t0.addEventListener("refresh",O),to(G,"resize",O),x.smooth&&(x.target.style.scrollBehavior="auto",x.smooth=y.smooth=!1),T.enable()},e.onDisable=function(){t3(f,!0),tl(G,"resize",O),t0.removeEventListener("refresh",O),T.kill()},e.lockAxis=!1!==e.lockAxis,(t=new z(e)).iOS=ep,ep&&!x()&&x(1),ep&&V.ticker.add(eU),l=t._dc,s=V.to(t,{ease:"power4",paused:!0,inherit:!1,scrollX:u?"+=0.1":"+=0",scrollY:"+=0.1",modifiers:{scrollY:tZ(x,x(),function(){return s.pause()})},onUpdate:tB,onComplete:l.vars.onComplete}),t};t0.sort=function(e){if(eX(e))return tg.sort(e);var t=G.pageYOffset||0;return t0.getAll().forEach(function(e){return e._sortY=e.trigger?t+e.trigger.getBoundingClientRect().top:e.start+G.innerHeight}),tg.sort(e||function(e,t){return -1e6*(e.vars.refreshPriority||0)+(e.vars.containerAnimation?1e6:e._sortY)-((t.vars.containerAnimation?1e6:t._sortY)+-1e6*(t.vars.refreshPriority||0))})},t0.observe=function(e){return new z(e)},t0.normalizeScroll=function(e){if(void 0===e)return eh;if(!0===e&&eh)return eh.enable();if(!1===e){eh&&eh.kill(),eh=e;return}var t=e instanceof z?e:t7(e);return eh&&eh.target===t.target&&eh.kill(),eB(t.target)&&(eh=t),t},t0.core={_getVelocityProp:N,_inputObserver:t6,_scrollers:v,_proxies:_,bridge:{ss:function(){eC||tT("scrollStart"),eC=ew()},ref:function(){return Q}}},eF()&&V.registerPlugin(t0),e.ScrollTrigger=t0,e.default=t0,"u"<typeof window||window!==e?Object.defineProperty(e,"__esModule",{value:!0}):delete window.default}(i)},32189,(e,t,i)=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},65156,(e,t,i)=>{"use strict";var n=e.r(32189);function r(){}function s(){}s.resetWarningCache=r,t.exports=function(){function e(e,t,i,r,s,a){if(a!==n){var o=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:r};return i.PropTypes=i,i}},45009,(e,t,i)=>{t.exports=e.r(65156)()},80288,e=>{"use strict";var t=e.i(43476),i=e.i(73172),n=e.i(67170),r=e.i(71645),s=e.i(89970),a=e.i(33809);s.default.registerPlugin(a.ScrollTrigger);let o=({text:e})=>{let i=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=i.current;if(!e)return;let t=e.querySelectorAll(".word");s.default.to(t,{scrollTrigger:{trigger:e,start:"top 80%",end:"top 20%",scrub:!0},color:"#FFFFFF",stagger:.1})},[]);let n=e.split(" ");return(0,t.jsx)("div",{ref:i,className:"scroll-text text-center text-white text-4xl sm:text-5xl leading-snug sm:leading-relaxed max-w-4xl mx-auto mt-10",children:n.map((e,i)=>(0,t.jsxs)("span",{className:"word",children:[e," "]},i))})},l=e=>"number"==typeof e?`${e}px`:e??void 0,h=(0,r.memo)(({logos:e=[],speed:i=120,direction:n="left",width:s="100%",logoHeight:a=28,gap:o=32,pauseOnHover:h,hoverSpeed:u,fadeOut:c=!1,fadeOutColor:d,scaleOnHover:p=!1,renderItem:f,ariaLabel:m="Partner logos",className:g="",style:v})=>{var _,x,y;let M,S,b,E,T=(0,r.useRef)(null),w=(0,r.useRef)(null),A=(0,r.useRef)(null),[C,P]=(0,r.useState)(0),[R,L]=(0,r.useState)(0),[D,I]=(0,r.useState)(2),[U,N]=(0,r.useState)(!1),O=(0,r.useMemo)(()=>void 0!==u?u:!0===h||!1!==h?0:void 0,[u,h]),F="up"===n||"down"===n,B=(0,r.useMemo)(()=>Math.abs(i)*(F?"up"===n?1:-1:"left"===n?1:-1)*(i<0?-1:1),[i,n,F]),k=(0,r.useCallback)(()=>{let e=T.current?.clientWidth??0,t=A.current?.getBoundingClientRect?.(),i=t?.width??0,n=t?.height??0;if(F){let e=T.current?.parentElement?.clientHeight??0;if(T.current&&e>0){let t=Math.ceil(e);T.current.style.height!==`${t}px`&&(T.current.style.height=`${t}px`)}n>0&&(L(Math.ceil(n)),I(Math.max(2,Math.ceil((T.current?.clientHeight??e??n)/n)+2)))}else i>0&&(P(Math.ceil(i)),I(Math.max(2,Math.ceil(e/i)+2)))},[F]);_=[T,A],x=[e,o,a,F],(0,r.useEffect)(()=>{if(!window.ResizeObserver){let e=()=>k();return window.addEventListener("resize",e),k(),()=>window.removeEventListener("resize",e)}let e=_.map(e=>{if(!e.current)return null;let t=new ResizeObserver(k);return t.observe(e.current),t});return k(),()=>{e.forEach(e=>e?.disconnect())}},[k,_,x]),y=[e,o,a,F],(0,r.useEffect)(()=>{let e=A.current?.querySelectorAll?.("img")??[];if(0===e.length)return void k();let t=e.length,i=()=>{0==(t-=1)&&k()};return e.forEach(e=>{e.complete?i():(e.addEventListener("load",i,{once:!0}),e.addEventListener("error",i,{once:!0}))}),()=>{e.forEach(e=>{e.removeEventListener("load",i),e.removeEventListener("error",i)})}},[k,A,y]),M=(0,r.useRef)(null),S=(0,r.useRef)(null),b=(0,r.useRef)(0),E=(0,r.useRef)(0),(0,r.useEffect)(()=>{let e=w.current;if(!e)return;let t=F?R:C;t>0&&(b.current=(b.current%t+t)%t,e.style.transform=F?`translate3d(0, ${-b.current}px, 0)`:`translate3d(${-b.current}px, 0, 0)`);let i=n=>{null===S.current&&(S.current=n);let r=Math.max(0,n-S.current)/1e3;S.current=n;let s=U&&void 0!==O?O:B,a=1-Math.exp(-r/.25);if(E.current+=(s-E.current)*a,t>0){let i=b.current+E.current*r;b.current=i=(i%t+t)%t,e.style.transform=F?`translate3d(0, ${-b.current}px, 0)`:`translate3d(${-b.current}px, 0, 0)`}M.current=requestAnimationFrame(i)};return M.current=requestAnimationFrame(i),()=>{null!==M.current&&(cancelAnimationFrame(M.current),M.current=null),S.current=null}},[B,C,R,U,O,F,w]);let z=(0,r.useMemo)(()=>({"--logoloop-gap":`${o}px`,"--logoloop-logoHeight":`${a}px`,...d?{"--logoloop-fadeColor":d}:{}}),[o,a,d]),V=(0,r.useMemo)(()=>["logoloop",F?"logoloop--vertical":"logoloop--horizontal",c&&"logoloop--fade",p&&"logoloop--scale-hover",g].filter(Boolean).join(" "),[F,c,p,g]),H=(0,r.useCallback)(()=>{void 0!==O&&N(!0)},[O]),G=(0,r.useCallback)(()=>{void 0!==O&&N(!1)},[O]),W=(0,r.useCallback)((e,i)=>{if(f)return(0,t.jsx)("li",{className:"logoloop__item",role:"listitem",children:f(e,i)},i);let n=e&&Object.prototype.hasOwnProperty.call(e,"node"),r=n?(0,t.jsx)("span",{className:"logoloop__node","aria-hidden":!!e.href&&!e.ariaLabel,children:e.node}):(0,t.jsx)("img",{src:e.src,srcSet:e.srcSet,sizes:e.sizes,width:e.width,height:e.height,alt:e.alt??"",title:e.title,loading:"lazy",decoding:"async",draggable:!1}),s=n?e.ariaLabel??e.title:e.alt??e.title,a=e.href?(0,t.jsx)("a",{className:"logoloop__link",href:e.href,"aria-label":s||"logo link",target:"_blank",rel:"noreferrer noopener",children:r}):r;return(0,t.jsx)("li",{className:"logoloop__item",role:"listitem",children:a},i)},[f]),X=(0,r.useMemo)(()=>Array.from({length:D},(i,n)=>(0,t.jsx)("ul",{className:"logoloop__list",role:"list","aria-hidden":n>0,ref:0===n?A:void 0,children:e.map((e,t)=>W(e,`${n}-${t}`))},`copy-${n}`)),[D,e,W]),j=(0,r.useMemo)(()=>({width:F?"100%"===l(s)?void 0:l(s):l(s)??"100%",...z,...v}),[s,z,v,F]);return(0,t.jsx)("div",{ref:T,className:V,style:j,role:"region","aria-label":m,children:(0,t.jsx)("div",{className:"logoloop__track",ref:w,onMouseEnter:H,onMouseLeave:G,children:X})})});h.displayName="LogoLoop";var u=e.i(64761),c=e.i(45009);function d(e,t,i){return(1-i)*e+i*t}function p(e,t){let i=0,n=0;return e.touches&&e.touches.length>0?(i=e.touches[0].clientX,n=e.touches[0].clientY):(i=e.clientX,n=e.clientY),{x:i-t.left,y:n-t.top}}function f(e,t){return Math.hypot(e.x-t.x,e.y-t.y)}class m{DOM={el:null,inner:null};defaultStyle={scale:1,x:0,y:0,opacity:0};rect=null;constructor(e){this.DOM.el=e,this.DOM.inner=this.DOM.el.querySelector(".content__img-inner"),this.getRect(),this.initEvents()}initEvents(){this.resize=()=>{s.gsap.set(this.DOM.el,this.defaultStyle),this.getRect()},window.addEventListener("resize",this.resize)}getRect(){this.rect=this.DOM.el.getBoundingClientRect()}}let g={1:class{constructor(e){this.container=e,this.DOM={el:e},this.images=[...this.DOM.el.querySelectorAll(".content__img")].map(e=>new m(e)),this.imagesTotal=this.images.length,this.imgPosition=0,this.zIndexVal=1,this.activeImagesCount=0,this.isIdle=!0,this.threshold=80,this.mousePos={x:0,y:0},this.lastMousePos={x:0,y:0},this.cacheMousePos={x:0,y:0};const t=e=>{let t=this.container.getBoundingClientRect();this.mousePos=p(e,t)};e.addEventListener("mousemove",t),e.addEventListener("touchmove",t);const i=t=>{let n=this.container.getBoundingClientRect();this.mousePos=p(t,n),this.cacheMousePos={...this.mousePos},requestAnimationFrame(()=>this.render()),e.removeEventListener("mousemove",i),e.removeEventListener("touchmove",i)};e.addEventListener("mousemove",i),e.addEventListener("touchmove",i)}render(){let e=f(this.mousePos,this.lastMousePos);this.cacheMousePos.x=d(this.cacheMousePos.x,this.mousePos.x,.1),this.cacheMousePos.y=d(this.cacheMousePos.y,this.mousePos.y,.1),e>this.threshold&&(this.showNextImage(),this.lastMousePos={...this.mousePos}),this.isIdle&&1!==this.zIndexVal&&(this.zIndexVal=1),requestAnimationFrame(()=>this.render())}showNextImage(){++this.zIndexVal,this.imgPosition=this.imgPosition<this.imagesTotal-1?this.imgPosition+1:0;let e=this.images[this.imgPosition];s.gsap.killTweensOf(e.DOM.el),s.gsap.timeline({onStart:()=>this.onImageActivated(),onComplete:()=>this.onImageDeactivated()}).fromTo(e.DOM.el,{opacity:1,scale:1,zIndex:this.zIndexVal,x:this.cacheMousePos.x-e.rect.width/2,y:this.cacheMousePos.y-e.rect.height/2},{duration:.4,ease:"power1",x:this.mousePos.x-e.rect.width/2,y:this.mousePos.y-e.rect.height/2},0).to(e.DOM.el,{duration:.4,ease:"power3",opacity:0,scale:.2},.4)}onImageActivated(){this.activeImagesCount++,this.isIdle=!1}onImageDeactivated(){this.activeImagesCount--,0===this.activeImagesCount&&(this.isIdle=!0)}},2:class{constructor(e){this.container=e,this.DOM={el:e},this.images=[...e.querySelectorAll(".content__img")].map(e=>new m(e)),this.imagesTotal=this.images.length,this.imgPosition=0,this.zIndexVal=1,this.activeImagesCount=0,this.isIdle=!0,this.threshold=80,this.mousePos={x:0,y:0},this.lastMousePos={x:0,y:0},this.cacheMousePos={x:0,y:0};const t=t=>{let i=e.getBoundingClientRect();this.mousePos=p(t,i)};e.addEventListener("mousemove",t),e.addEventListener("touchmove",t);const i=t=>{let n=e.getBoundingClientRect();this.mousePos=p(t,n),this.cacheMousePos={...this.mousePos},requestAnimationFrame(()=>this.render()),e.removeEventListener("mousemove",i),e.removeEventListener("touchmove",i)};e.addEventListener("mousemove",i),e.addEventListener("touchmove",i)}render(){let e=f(this.mousePos,this.lastMousePos);this.cacheMousePos.x=d(this.cacheMousePos.x,this.mousePos.x,.1),this.cacheMousePos.y=d(this.cacheMousePos.y,this.mousePos.y,.1),e>this.threshold&&(this.showNextImage(),this.lastMousePos={...this.mousePos}),this.isIdle&&1!==this.zIndexVal&&(this.zIndexVal=1),requestAnimationFrame(()=>this.render())}showNextImage(){++this.zIndexVal,this.imgPosition=this.imgPosition<this.imagesTotal-1?this.imgPosition+1:0;let e=this.images[this.imgPosition];s.gsap.killTweensOf(e.DOM.el),s.gsap.timeline({onStart:()=>this.onImageActivated(),onComplete:()=>this.onImageDeactivated()}).fromTo(e.DOM.el,{opacity:1,scale:0,zIndex:this.zIndexVal,x:this.cacheMousePos.x-e.rect.width/2,y:this.cacheMousePos.y-e.rect.height/2},{duration:.4,ease:"power1",scale:1,x:this.mousePos.x-e.rect.width/2,y:this.mousePos.y-e.rect.height/2},0).fromTo(e.DOM.inner,{scale:2.8,filter:"brightness(250%)"},{duration:.4,ease:"power1",scale:1,filter:"brightness(100%)"},0).to(e.DOM.el,{duration:.4,ease:"power2",opacity:0,scale:.2},.45)}onImageActivated(){this.activeImagesCount++,this.isIdle=!1}onImageDeactivated(){this.activeImagesCount--,0===this.activeImagesCount&&(this.isIdle=!0)}},3:class{constructor(e){this.container=e,this.DOM={el:e},this.images=[...e.querySelectorAll(".content__img")].map(e=>new m(e)),this.imagesTotal=this.images.length,this.imgPosition=0,this.zIndexVal=1,this.activeImagesCount=0,this.isIdle=!0,this.threshold=80,this.mousePos={x:0,y:0},this.lastMousePos={x:0,y:0},this.cacheMousePos={x:0,y:0};const t=t=>{let i=e.getBoundingClientRect();this.mousePos=p(t,i)};e.addEventListener("mousemove",t),e.addEventListener("touchmove",t);const i=t=>{let n=e.getBoundingClientRect();this.mousePos=p(t,n),this.cacheMousePos={...this.mousePos},requestAnimationFrame(()=>this.render()),e.removeEventListener("mousemove",i),e.removeEventListener("touchmove",i)};e.addEventListener("mousemove",i),e.addEventListener("touchmove",i)}render(){let e=f(this.mousePos,this.lastMousePos);this.cacheMousePos.x=d(this.cacheMousePos.x,this.mousePos.x,.1),this.cacheMousePos.y=d(this.cacheMousePos.y,this.mousePos.y,.1),e>this.threshold&&(this.showNextImage(),this.lastMousePos={...this.mousePos}),this.isIdle&&1!==this.zIndexVal&&(this.zIndexVal=1),requestAnimationFrame(()=>this.render())}showNextImage(){++this.zIndexVal,this.imgPosition=this.imgPosition<this.imagesTotal-1?this.imgPosition+1:0;let e=this.images[this.imgPosition];s.gsap.killTweensOf(e.DOM.el),s.gsap.timeline({onStart:()=>this.onImageActivated(),onComplete:()=>this.onImageDeactivated()}).fromTo(e.DOM.el,{opacity:1,scale:0,zIndex:this.zIndexVal,xPercent:0,yPercent:0,x:this.cacheMousePos.x-e.rect.width/2,y:this.cacheMousePos.y-e.rect.height/2},{duration:.4,ease:"power1",scale:1,x:this.mousePos.x-e.rect.width/2,y:this.mousePos.y-e.rect.height/2},0).fromTo(e.DOM.inner,{scale:1.2},{duration:.4,ease:"power1",scale:1},0).to(e.DOM.el,{duration:.6,ease:"power2",opacity:0,scale:.2,xPercent:()=>s.gsap.utils.random(-30,30),yPercent:-200},.6)}onImageActivated(){this.activeImagesCount++,this.isIdle=!1}onImageDeactivated(){this.activeImagesCount--,0===this.activeImagesCount&&(this.isIdle=!0)}},4:class{constructor(e){this.container=e,this.DOM={el:e},this.images=[...e.querySelectorAll(".content__img")].map(e=>new m(e)),this.imagesTotal=this.images.length,this.imgPosition=0,this.zIndexVal=1,this.activeImagesCount=0,this.isIdle=!0,this.threshold=80,this.mousePos={x:0,y:0},this.lastMousePos={x:0,y:0},this.cacheMousePos={x:0,y:0};const t=t=>{let i=e.getBoundingClientRect();this.mousePos=p(t,i)};e.addEventListener("mousemove",t),e.addEventListener("touchmove",t);const i=t=>{let n=e.getBoundingClientRect();this.mousePos=p(t,n),this.cacheMousePos={...this.mousePos},requestAnimationFrame(()=>this.render()),e.removeEventListener("mousemove",i),e.removeEventListener("touchmove",i)};e.addEventListener("mousemove",i),e.addEventListener("touchmove",i)}render(){f(this.mousePos,this.lastMousePos)>this.threshold&&(this.showNextImage(),this.lastMousePos={...this.mousePos}),this.cacheMousePos.x=d(this.cacheMousePos.x,this.mousePos.x,.1),this.cacheMousePos.y=d(this.cacheMousePos.y,this.mousePos.y,.1),this.isIdle&&1!==this.zIndexVal&&(this.zIndexVal=1),requestAnimationFrame(()=>this.render())}showNextImage(){++this.zIndexVal,this.imgPosition=this.imgPosition<this.imagesTotal-1?this.imgPosition+1:0;let e=this.images[this.imgPosition];s.gsap.killTweensOf(e.DOM.el);let t=this.mousePos.x-this.cacheMousePos.x,i=this.mousePos.y-this.cacheMousePos.y,n=Math.sqrt(t*t+i*i);0!==n&&(t/=n,i/=n),t*=n/100,i*=n/100,s.gsap.timeline({onStart:()=>this.onImageActivated(),onComplete:()=>this.onImageDeactivated()}).fromTo(e.DOM.el,{opacity:1,scale:0,zIndex:this.zIndexVal,x:this.cacheMousePos.x-e.rect.width/2,y:this.cacheMousePos.y-e.rect.height/2},{duration:.4,ease:"power1",scale:1,x:this.mousePos.x-e.rect.width/2,y:this.mousePos.y-e.rect.height/2},0).fromTo(e.DOM.inner,{scale:2,filter:`brightness(${Math.max(400*n/100,100)}%) contrast(${Math.max(400*n/100,100)}%)`},{duration:.4,ease:"power1",scale:1,filter:"brightness(100%) contrast(100%)"},0).to(e.DOM.el,{duration:.4,ease:"power3",opacity:0},.4).to(e.DOM.el,{duration:1.5,ease:"power4",x:`+=${110*t}`,y:`+=${110*i}`},.05)}onImageActivated(){this.activeImagesCount++,this.isIdle=!1}onImageDeactivated(){this.activeImagesCount--,0===this.activeImagesCount&&(this.isIdle=!0)}},5:class{constructor(e){this.container=e,this.DOM={el:e},this.images=[...e.querySelectorAll(".content__img")].map(e=>new m(e)),this.imagesTotal=this.images.length,this.imgPosition=0,this.zIndexVal=1,this.activeImagesCount=0,this.isIdle=!0,this.threshold=80,this.mousePos={x:0,y:0},this.lastMousePos={x:0,y:0},this.cacheMousePos={x:0,y:0},this.lastAngle=0;const t=t=>{let i=e.getBoundingClientRect();this.mousePos=p(t,i)};e.addEventListener("mousemove",t),e.addEventListener("touchmove",t);const i=t=>{let n=e.getBoundingClientRect();this.mousePos=p(t,n),this.cacheMousePos={...this.mousePos},requestAnimationFrame(()=>this.render()),e.removeEventListener("mousemove",i),e.removeEventListener("touchmove",i)};e.addEventListener("mousemove",i),e.addEventListener("touchmove",i)}render(){f(this.mousePos,this.lastMousePos)>this.threshold&&(this.showNextImage(),this.lastMousePos={...this.mousePos}),this.cacheMousePos.x=d(this.cacheMousePos.x,this.mousePos.x,.1),this.cacheMousePos.y=d(this.cacheMousePos.y,this.mousePos.y,.1),this.isIdle&&1!==this.zIndexVal&&(this.zIndexVal=1),requestAnimationFrame(()=>this.render())}showNextImage(){let e=this.mousePos.x-this.cacheMousePos.x,t=this.mousePos.y-this.cacheMousePos.y,i=180/Math.PI*Math.atan2(t,e);i<0&&(i+=360),i>90&&i<=270&&(i+=180);let n=i>=this.lastAngle;this.lastAngle=i;let r=n?i-10:i+10,a=Math.sqrt(e*e+t*t);0!==a&&(e/=a,t/=a),e*=a/150,t*=a/150,++this.zIndexVal,this.imgPosition=this.imgPosition<this.imagesTotal-1?this.imgPosition+1:0;let o=this.images[this.imgPosition];s.gsap.killTweensOf(o.DOM.el),s.gsap.timeline({onStart:()=>this.onImageActivated(),onComplete:()=>this.onImageDeactivated()}).fromTo(o.DOM.el,{opacity:1,filter:"brightness(80%)",scale:.1,zIndex:this.zIndexVal,x:this.cacheMousePos.x-o.rect.width/2,y:this.cacheMousePos.y-o.rect.height/2,rotation:r},{duration:1,ease:"power2",scale:1,filter:"brightness(100%)",x:this.mousePos.x-o.rect.width/2+70*e,y:this.mousePos.y-o.rect.height/2+70*t,rotation:this.lastAngle},0).to(o.DOM.el,{duration:.4,ease:"expo",opacity:0},.5).to(o.DOM.el,{duration:1.5,ease:"power4",x:`+=${120*e}`,y:`+=${120*t}`},.05)}onImageActivated(){this.activeImagesCount++,this.isIdle=!1}onImageDeactivated(){this.activeImagesCount--,0===this.activeImagesCount&&(this.isIdle=!0)}},6:class{constructor(e){this.container=e,this.DOM={el:e},this.images=[...e.querySelectorAll(".content__img")].map(e=>new m(e)),this.imagesTotal=this.images.length,this.imgPosition=0,this.zIndexVal=1,this.activeImagesCount=0,this.isIdle=!0,this.threshold=80,this.mousePos={x:0,y:0},this.lastMousePos={x:0,y:0},this.cacheMousePos={x:0,y:0};const t=t=>{let i=e.getBoundingClientRect();this.mousePos=p(t,i)};e.addEventListener("mousemove",t),e.addEventListener("touchmove",t);const i=t=>{let n=e.getBoundingClientRect();this.mousePos=p(t,n),this.cacheMousePos={...this.mousePos},requestAnimationFrame(()=>this.render()),e.removeEventListener("mousemove",i),e.removeEventListener("touchmove",i)};e.addEventListener("mousemove",i),e.addEventListener("touchmove",i)}render(){let e=f(this.mousePos,this.lastMousePos);this.cacheMousePos.x=d(this.cacheMousePos.x,this.mousePos.x,.3),this.cacheMousePos.y=d(this.cacheMousePos.y,this.mousePos.y,.3),e>this.threshold&&(this.showNextImage(),this.lastMousePos={...this.mousePos}),this.isIdle&&1!==this.zIndexVal&&(this.zIndexVal=1),requestAnimationFrame(()=>this.render())}mapSpeedToSize(e,t,i){return t+(i-t)*Math.min(e/200,1)}mapSpeedToBrightness(e,t,i){return t+(i-t)*Math.min(e/70,1)}mapSpeedToBlur(e,t,i){return t+(i-t)*Math.min(e/90,1)}mapSpeedToGrayscale(e,t,i){return t+(i-t)*Math.min(e/90,1)}showNextImage(){let e=this.mousePos.x-this.cacheMousePos.x,t=this.mousePos.y-this.cacheMousePos.y,i=Math.sqrt(e*e+t*t);++this.zIndexVal,this.imgPosition=this.imgPosition<this.imagesTotal-1?this.imgPosition+1:0;let n=this.images[this.imgPosition],r=this.mapSpeedToSize(i,.3,2),a=this.mapSpeedToBrightness(i,0,1.3),o=this.mapSpeedToBlur(i,20,0),l=this.mapSpeedToGrayscale(i,600,0);s.gsap.killTweensOf(n.DOM.el),s.gsap.timeline({onStart:()=>this.onImageActivated(),onComplete:()=>this.onImageDeactivated()}).fromTo(n.DOM.el,{opacity:1,scale:0,zIndex:this.zIndexVal,x:this.cacheMousePos.x-n.rect.width/2,y:this.cacheMousePos.y-n.rect.height/2},{duration:.8,ease:"power3",scale:r,filter:`grayscale(${100*l}%) brightness(${100*a}%) blur(${o}px)`,x:this.mousePos.x-n.rect.width/2,y:this.mousePos.y-n.rect.height/2},0).fromTo(n.DOM.inner,{scale:2},{duration:.8,ease:"power3",scale:1},0).to(n.DOM.el,{duration:.4,ease:"power3.in",opacity:0,scale:.2},.45)}onImageActivated(){this.activeImagesCount++,this.isIdle=!1}onImageDeactivated(){this.activeImagesCount--,0===this.activeImagesCount&&(this.isIdle=!0)}},7:class{constructor(e){this.container=e,this.DOM={el:e},this.images=[...e.querySelectorAll(".content__img")].map(e=>new m(e)),this.imagesTotal=this.images.length,this.imgPosition=0,this.zIndexVal=1,this.activeImagesCount=0,this.isIdle=!0,this.threshold=80,this.mousePos={x:0,y:0},this.lastMousePos={x:0,y:0},this.cacheMousePos={x:0,y:0},this.visibleImagesCount=0,this.visibleImagesTotal=9,this.visibleImagesTotal=Math.min(this.visibleImagesTotal,this.imagesTotal-1);const t=t=>{let i=e.getBoundingClientRect();this.mousePos=p(t,i)};e.addEventListener("mousemove",t),e.addEventListener("touchmove",t);const i=t=>{let n=e.getBoundingClientRect();this.mousePos=p(t,n),this.cacheMousePos={...this.mousePos},requestAnimationFrame(()=>this.render()),e.removeEventListener("mousemove",i),e.removeEventListener("touchmove",i)};e.addEventListener("mousemove",i),e.addEventListener("touchmove",i)}render(){let e=f(this.mousePos,this.lastMousePos);this.cacheMousePos.x=d(this.cacheMousePos.x,this.mousePos.x,.3),this.cacheMousePos.y=d(this.cacheMousePos.y,this.mousePos.y,.3),e>this.threshold&&(this.showNextImage(),this.lastMousePos={...this.mousePos}),this.isIdle&&1!==this.zIndexVal&&(this.zIndexVal=1),requestAnimationFrame(()=>this.render())}showNextImage(){++this.zIndexVal,this.imgPosition=this.imgPosition<this.imagesTotal-1?this.imgPosition+1:0;let e=this.images[this.imgPosition];++this.visibleImagesCount,s.gsap.killTweensOf(e.DOM.el);let t=s.gsap.utils.random(.5,1.6);if(s.gsap.timeline({onStart:()=>this.onImageActivated(),onComplete:()=>this.onImageDeactivated()}).fromTo(e.DOM.el,{scale:t-Math.max(s.gsap.utils.random(.2,.6),0),rotationZ:0,opacity:1,zIndex:this.zIndexVal,x:this.cacheMousePos.x-e.rect.width/2,y:this.cacheMousePos.y-e.rect.height/2},{duration:.4,ease:"power3",scale:t,rotationZ:s.gsap.utils.random(-3,3),x:this.mousePos.x-e.rect.width/2,y:this.mousePos.y-e.rect.height/2},0),this.visibleImagesCount>=this.visibleImagesTotal){var i,n;let e,t=(i=this.imgPosition,i-(e=Math.abs(this.visibleImagesTotal)%(n=this.images).length)>=0?i-e:n.length-(e-i)),r=this.images[t];s.gsap.to(r.DOM.el,{duration:.4,ease:"power4",opacity:0,scale:1.3,onComplete:()=>{0===this.activeImagesCount&&(this.isIdle=!0)}})}}onImageActivated(){this.activeImagesCount++,this.isIdle=!1}onImageDeactivated(){this.activeImagesCount--}},8:class{constructor(e){this.container=e,this.DOM={el:e},this.images=[...e.querySelectorAll(".content__img")].map(e=>new m(e)),this.imagesTotal=this.images.length,this.imgPosition=0,this.zIndexVal=1,this.activeImagesCount=0,this.isIdle=!0,this.threshold=80,this.mousePos={x:0,y:0},this.lastMousePos={x:0,y:0},this.cacheMousePos={x:0,y:0},this.rotation={x:0,y:0},this.cachedRotation={x:0,y:0},this.zValue=0,this.cachedZValue=0;const t=t=>{let i=e.getBoundingClientRect();this.mousePos=p(t,i)};e.addEventListener("mousemove",t),e.addEventListener("touchmove",t);const i=t=>{let n=e.getBoundingClientRect();this.mousePos=p(t,n),this.cacheMousePos={...this.mousePos},requestAnimationFrame(()=>this.render()),e.removeEventListener("mousemove",i),e.removeEventListener("touchmove",i)};e.addEventListener("mousemove",i),e.addEventListener("touchmove",i)}render(){let e=f(this.mousePos,this.lastMousePos);this.cacheMousePos.x=d(this.cacheMousePos.x,this.mousePos.x,.1),this.cacheMousePos.y=d(this.cacheMousePos.y,this.mousePos.y,.1),e>this.threshold&&(this.showNextImage(),this.lastMousePos={...this.mousePos}),this.isIdle&&1!==this.zIndexVal&&(this.zIndexVal=1),requestAnimationFrame(()=>this.render())}showNextImage(){let e=this.container.getBoundingClientRect(),t=e.width/2,i=e.height/2,n=this.mousePos.x-t,r=this.mousePos.y-i;this.rotation.x=-(r/i*30),this.rotation.y=n/t*30,this.cachedRotation={...this.rotation};let a=Math.sqrt(n*n+r*r),o=Math.sqrt(t*t+i*i);this.zValue=a/o*1200-600,this.cachedZValue=this.zValue;let l=(this.zValue+600)/1200;++this.zIndexVal,this.imgPosition=this.imgPosition<this.imagesTotal-1?this.imgPosition+1:0;let h=this.images[this.imgPosition];s.gsap.killTweensOf(h.DOM.el),s.gsap.timeline({onStart:()=>this.onImageActivated(),onComplete:()=>this.onImageDeactivated()}).set(this.DOM.el,{perspective:1e3},0).fromTo(h.DOM.el,{opacity:1,z:0,scale:1+this.cachedZValue/1e3,zIndex:this.zIndexVal,x:this.cacheMousePos.x-h.rect.width/2,y:this.cacheMousePos.y-h.rect.height/2,rotationX:this.cachedRotation.x,rotationY:this.cachedRotation.y,filter:`brightness(${.2+2.3*l})`},{duration:1,ease:"expo",scale:1+this.zValue/1e3,x:this.mousePos.x-h.rect.width/2,y:this.mousePos.y-h.rect.height/2,rotationX:this.rotation.x,rotationY:this.rotation.y},0).to(h.DOM.el,{duration:.4,ease:"power2",opacity:0,z:-800},.3)}onImageActivated(){this.activeImagesCount++,this.isIdle=!1}onImageDeactivated(){this.activeImagesCount--,0===this.activeImagesCount&&(this.isIdle=!0)}}};function v({items:e=[],variant:i=1}){let n=(0,r.useRef)(null);return(0,r.useEffect)(()=>{n.current&&new(g[i]||g[1])(n.current)},[i,e]),(0,t.jsx)("div",{className:"content",ref:n,children:e.map((e,i)=>(0,t.jsx)("div",{className:"content__img",children:(0,t.jsx)("div",{className:"content__img-inner",style:{backgroundImage:`url(${e})`}})},i))})}v.propTypes={items:c.default.arrayOf(c.default.string).isRequired,variant:c.default.number.isRequired};let _=({as:e="button",className:i="",color:n="white",speed:r="6s",thickness:s=1,children:a,...o})=>(0,t.jsxs)(e,{className:`star-border-container ${i}`,style:{padding:`${s}px 0`,...o.style},...o,children:[(0,t.jsx)("div",{className:"border-gradient-bottom",style:{background:`radial-gradient(circle, ${n}, transparent 10%)`,animationDuration:r}}),(0,t.jsx)("div",{className:"border-gradient-top",style:{background:`radial-gradient(circle, ${n}, transparent 10%)`,animationDuration:r}}),(0,t.jsx)("div",{className:"inner-content",children:a})]});var x={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},y=r.default.createContext&&r.default.createContext(x),M=["attr","size","title"];function S(){return(S=Object.assign.bind()).apply(this,arguments)}function b(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function E(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?b(Object(i),!0).forEach(function(t){var n,r,s;n=e,r=t,s=i[t],(r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(r))in n?Object.defineProperty(n,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[r]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):b(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function T(e){return t=>r.default.createElement(w,S({attr:E({},e.attr)},t),function e(t){return t&&t.map((t,i)=>r.default.createElement(t.tag,E({key:i},t.attr),e(t.child)))}(e.child))}function w(e){var t=t=>{var i,{attr:n,size:s,title:a}=e,o=function(e,t){if(null==e)return{};var i,n,r=function(e,t){if(null==e)return{};var i={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;i[n]=e[n]}return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)i=s[n],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}(e,M),l=s||t.size||"1em";return t.className&&(i=t.className),e.className&&(i=(i?i+" ":"")+e.className),r.default.createElement("svg",S({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,o,{className:i,style:E(E({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&r.default.createElement("title",null,a),e.children)};return void 0!==y?r.default.createElement(y.Consumer,null,e=>t(e)):t(x)}let A=["/assets/Photos/p1.jpg","/assets/Photos/p2.jpg","/assets/Photos/p3.jpg","/assets/Photos/p4.jpg","/assets/Photos/p5.jpg","/assets/Photos/p6.jpg"],C=[{node:(0,t.jsx)(function(e){return T({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M14.23 12.004a2.236 2.236 0 0 1-2.235 2.236 2.236 2.236 0 0 1-2.236-2.236 2.236 2.236 0 0 1 2.235-2.236 2.236 2.236 0 0 1 2.236 2.236zm2.648-10.69c-1.346 0-3.107.96-4.888 2.622-1.78-1.653-3.542-2.602-4.887-2.602-.41 0-.783.093-1.106.278-1.375.793-1.683 3.264-.973 6.365C1.98 8.917 0 10.42 0 12.004c0 1.59 1.99 3.097 5.043 4.03-.704 3.113-.39 5.588.988 6.38.32.187.69.275 1.102.275 1.345 0 3.107-.96 4.888-2.624 1.78 1.654 3.542 2.603 4.887 2.603.41 0 .783-.09 1.106-.275 1.374-.792 1.683-3.263.973-6.365C22.02 15.096 24 13.59 24 12.004c0-1.59-1.99-3.097-5.043-4.032.704-3.11.39-5.587-.988-6.38-.318-.184-.688-.277-1.092-.278zm-.005 1.09v.006c.225 0 .406.044.558.127.666.382.955 1.835.73 3.704-.054.46-.142.945-.25 1.44-.96-.236-2.006-.417-3.107-.534-.66-.905-1.345-1.727-2.035-2.447 1.592-1.48 3.087-2.292 4.105-2.295zm-9.77.02c1.012 0 2.514.808 4.11 2.28-.686.72-1.37 1.537-2.02 2.442-1.107.117-2.154.298-3.113.538-.112-.49-.195-.964-.254-1.42-.23-1.868.054-3.32.714-3.707.19-.09.4-.127.563-.132zm4.882 3.05c.455.468.91.992 1.36 1.564-.44-.02-.89-.034-1.345-.034-.46 0-.915.01-1.36.034.44-.572.895-1.096 1.345-1.565zM12 8.1c.74 0 1.477.034 2.202.093.406.582.802 1.203 1.183 1.86.372.64.71 1.29 1.018 1.946-.308.655-.646 1.31-1.013 1.95-.38.66-.773 1.288-1.18 1.87-.728.063-1.466.098-2.21.098-.74 0-1.477-.035-2.202-.093-.406-.582-.802-1.204-1.183-1.86-.372-.64-.71-1.29-1.018-1.946.303-.657.646-1.313 1.013-1.954.38-.66.773-1.286 1.18-1.868.728-.064 1.466-.098 2.21-.098zm-3.635.254c-.24.377-.48.763-.704 1.16-.225.39-.435.782-.635 1.174-.265-.656-.49-1.31-.676-1.947.64-.15 1.315-.283 2.015-.386zm7.26 0c.695.103 1.365.23 2.006.387-.18.632-.405 1.282-.66 1.933-.2-.39-.41-.783-.64-1.174-.225-.392-.465-.774-.705-1.146zm3.063.675c.484.15.944.317 1.375.498 1.732.74 2.852 1.708 2.852 2.476-.005.768-1.125 1.74-2.857 2.475-.42.18-.88.342-1.355.493-.28-.958-.646-1.956-1.1-2.98.45-1.017.81-2.01 1.085-2.964zm-13.395.004c.278.96.645 1.957 1.1 2.98-.45 1.017-.812 2.01-1.086 2.964-.484-.15-.944-.318-1.37-.5-1.732-.737-2.852-1.706-2.852-2.474 0-.768 1.12-1.742 2.852-2.476.42-.18.88-.342 1.356-.494zm11.678 4.28c.265.657.49 1.312.676 1.948-.64.157-1.316.29-2.016.39.24-.375.48-.762.705-1.158.225-.39.435-.788.636-1.18zm-9.945.02c.2.392.41.783.64 1.175.23.39.465.772.705 1.143-.695-.102-1.365-.23-2.006-.386.18-.63.406-1.282.66-1.933zM17.92 16.32c.112.493.2.968.254 1.423.23 1.868-.054 3.32-.714 3.708-.147.09-.338.128-.563.128-1.012 0-2.514-.807-4.11-2.28.686-.72 1.37-1.536 2.02-2.44 1.107-.118 2.154-.3 3.113-.54zm-11.83.01c.96.234 2.006.415 3.107.532.66.905 1.345 1.727 2.035 2.446-1.595 1.483-3.092 2.295-4.11 2.295-.22-.005-.406-.05-.553-.132-.666-.38-.955-1.834-.73-3.703.054-.46.142-.944.25-1.438zm4.56.64c.44.02.89.034 1.345.034.46 0 .915-.01 1.36-.034-.44.572-.895 1.095-1.345 1.565-.455-.47-.91-.993-1.36-1.565z"},child:[]}]})(e)},{}),title:"React"},{node:(0,t.jsx)(function(e){return T({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M18.665 21.978C16.758 23.255 14.465 24 12 24 5.377 24 0 18.623 0 12S5.377 0 12 0s12 5.377 12 12c0 3.583-1.574 6.801-4.067 9.001L9.219 7.2H7.2v9.596h1.615V9.251l9.85 12.727Zm-3.332-8.533 1.6 2.061V7.2h-1.6v6.245Z"},child:[]}]})(e)},{}),title:"Next.js"},{node:(0,t.jsx)(function(e){return T({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M1.125 0C.502 0 0 .502 0 1.125v21.75C0 23.498.502 24 1.125 24h21.75c.623 0 1.125-.502 1.125-1.125V1.125C24 .502 23.498 0 22.875 0zm17.363 9.75c.612 0 1.154.037 1.627.111a6.38 6.38 0 0 1 1.306.34v2.458a3.95 3.95 0 0 0-.643-.361 5.093 5.093 0 0 0-.717-.26 5.453 5.453 0 0 0-1.426-.2c-.3 0-.573.028-.819.086a2.1 2.1 0 0 0-.623.242c-.17.104-.3.229-.393.374a.888.888 0 0 0-.14.49c0 .196.053.373.156.529.104.156.252.304.443.444s.423.276.696.41c.273.135.582.274.926.416.47.197.892.407 1.266.628.374.222.695.473.963.753.268.279.472.598.614.957.142.359.214.776.214 1.253 0 .657-.125 1.21-.373 1.656a3.033 3.033 0 0 1-1.012 1.085 4.38 4.38 0 0 1-1.487.596c-.566.12-1.163.18-1.79.18a9.916 9.916 0 0 1-1.84-.164 5.544 5.544 0 0 1-1.512-.493v-2.63a5.033 5.033 0 0 0 3.237 1.2c.333 0 .624-.03.872-.09.249-.06.456-.144.623-.25.166-.108.29-.234.373-.38a1.023 1.023 0 0 0-.074-1.089 2.12 2.12 0 0 0-.537-.5 5.597 5.597 0 0 0-.807-.444 27.72 27.72 0 0 0-1.007-.436c-.918-.383-1.602-.852-2.053-1.405-.45-.553-.676-1.222-.676-2.005 0-.614.123-1.141.369-1.582.246-.441.58-.804 1.004-1.089a4.494 4.494 0 0 1 1.47-.629 7.536 7.536 0 0 1 1.77-.201zm-15.113.188h9.563v2.166H9.506v9.646H6.789v-9.646H3.375z"},child:[]}]})(e)},{}),title:"TypeScript"},{node:(0,t.jsx)(function(e){return T({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.001,4.8c-3.2,0-5.2,1.6-6,4.8c1.2-1.6,2.6-2.2,4.2-1.8c0.913,0.228,1.565,0.89,2.288,1.624 C13.666,10.618,15.027,12,18.001,12c3.2,0,5.2-1.6,6-4.8c-1.2,1.6-2.6,2.2-4.2,1.8c-0.913-0.228-1.565-0.89-2.288-1.624 C16.337,6.182,14.976,4.8,12.001,4.8z M6.001,12c-3.2,0-5.2,1.6-6,4.8c1.2-1.6,2.6-2.2,4.2-1.8c0.913,0.228,1.565,0.89,2.288,1.624 c1.177,1.194,2.538,2.576,5.512,2.576c3.2,0,5.2-1.6,6-4.8c-1.2,1.6-2.6,2.2-4.2,1.8c-0.913-0.228-1.565-0.89-2.288-1.624 C10.337,13.382,8.976,12,6.001,12z"},child:[]}]})(e)},{}),title:"Tailwind CSS"},{node:(0,t.jsx)(function(e){return T({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M14.25.18l.9.2.73.26.59.3.45.32.34.34.25.34.16.33.1.3.04.26.02.2-.01.13V8.5l-.05.63-.13.55-.21.46-.26.38-.3.31-.33.25-.35.19-.35.14-.33.1-.3.07-.26.04-.21.02H8.77l-.69.05-.59.14-.5.22-.41.27-.33.32-.27.35-.2.36-.15.37-.1.35-.07.32-.04.27-.02.21v3.06H3.17l-.21-.03-.28-.07-.32-.12-.35-.18-.36-.26-.36-.36-.35-.46-.32-.59-.28-.73-.21-.88-.14-1.05-.05-1.23.06-1.22.16-1.04.24-.87.32-.71.36-.57.4-.44.42-.33.42-.24.4-.16.36-.1.32-.05.24-.01h.16l.06.01h8.16v-.83H6.18l-.01-2.75-.02-.37.05-.34.11-.31.17-.28.25-.26.31-.23.38-.2.44-.18.51-.15.58-.12.64-.1.71-.06.77-.04.84-.02 1.27.05zm-6.3 1.98l-.23.33-.08.41.08.41.23.34.33.22.41.09.41-.09.33-.22.23-.34.08-.41-.08-.41-.23-.33-.33-.22-.41-.09-.41.09zm13.09 3.95l.28.06.32.12.35.18.36.27.36.35.35.47.32.59.28.73.21.88.14 1.04.05 1.23-.06 1.23-.16 1.04-.24.86-.32.71-.36.57-.4.45-.42.33-.42.24-.4.16-.36.09-.32.05-.24.02-.16-.01h-8.22v.82h5.84l.01 2.76.02.36-.05.34-.11.31-.17.29-.25.25-.31.24-.38.2-.44.17-.51.15-.58.13-.64.09-.71.07-.77.04-.84.01-1.27-.04-1.07-.14-.9-.2-.73-.25-.59-.3-.45-.33-.34-.34-.25-.34-.16-.33-.1-.3-.04-.25-.02-.2.01-.13v-5.34l.05-.64.13-.54.21-.46.26-.38.3-.32.33-.24.35-.2.35-.14.33-.1.3-.06.26-.04.21-.02.13-.01h5.84l.69-.05.59-.14.5-.21.41-.28.33-.32.27-.35.2-.36.15-.36.1-.35.07-.32.04-.28.02-.21V6.07h2.09l.14.01zm-6.47 14.25l-.23.33-.08.41.08.41.23.33.33.23.41.08.41-.08.33-.23.23-.33.08-.41-.08-.41-.23-.33-.33-.23-.41-.08-.41.08z"},child:[]}]})(e)},{}),title:"Python"},{node:(0,t.jsx)(function(e){return T({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M22.394 6c-.167-.29-.398-.543-.652-.69L12.926.22c-.509-.294-1.34-.294-1.848 0L2.26 5.31c-.508.293-.923 1.013-.923 1.6v10.18c0 .294.104.62.271.91.167.29.398.543.652.69l8.816 5.09c.508.293 1.34.293 1.848 0l8.816-5.09c.254-.147.485-.4.652-.69.167-.29.27-.616.27-.91V6.91c.003-.294-.1-.62-.268-.91zM12 19.11c-3.92 0-7.109-3.19-7.109-7.11 0-3.92 3.19-7.11 7.11-7.11a7.133 7.133 0 016.156 3.553l-3.076 1.78a3.567 3.567 0 00-3.08-1.78A3.56 3.56 0 008.444 12 3.56 3.56 0 0012 15.555a3.57 3.57 0 003.08-1.778l3.078 1.78A7.135 7.135 0 0112 19.11zm7.11-6.715h-.79v.79h-.79v-.79h-.79v-.79h.79v-.79h.79v.79h.79zm2.962 0h-.79v.79h-.79v-.79h-.79v-.79h.79v-.79h.79v.79h.79z"},child:[]}]})(e)},{}),title:"C++"},{node:(0,t.jsx)(function(e){return T({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M1.5 0h21l-1.91 21.563L11.977 24l-8.564-2.438L1.5 0zm7.031 9.75l-.232-2.718 10.059.003.23-2.622L5.412 4.41l.698 8.01h9.126l-.326 3.426-2.91.804-2.955-.81-.188-2.11H6.248l.33 4.171L12 19.351l5.379-1.443.744-8.157H8.531z"},child:[]}]})(e)},{}),title:"HTML"},{node:(0,t.jsx)(function(e){return T({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M1.5 0h21l-1.91 21.563L11.977 24l-8.565-2.438L1.5 0zm17.09 4.413L5.41 4.41l.213 2.622 10.125.002-.255 2.716h-6.64l.24 2.573h6.182l-.366 3.523-2.91.804-2.956-.81-.188-2.11h-2.61l.29 3.855L12 19.288l5.373-1.53L18.59 4.414z"},child:[]}]})(e)},{}),title:"CSS"},{node:(0,t.jsx)(function(e){return T({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M15.852 8.981h-4.588V0h4.588c2.476 0 4.49 2.014 4.49 4.49s-2.014 4.491-4.49 4.491zM12.735 7.51h3.117c1.665 0 3.019-1.355 3.019-3.019s-1.355-3.019-3.019-3.019h-3.117V7.51zm0 1.471H8.148c-2.476 0-4.49-2.014-4.49-4.49S5.672 0 8.148 0h4.588v8.981zm-4.587-7.51c-1.665 0-3.019 1.355-3.019 3.019s1.354 3.02 3.019 3.02h3.117V1.471H8.148zm4.587 15.019H8.148c-2.476 0-4.49-2.014-4.49-4.49s2.014-4.49 4.49-4.49h4.588v8.98zM8.148 8.981c-1.665 0-3.019 1.355-3.019 3.019s1.355 3.019 3.019 3.019h3.117V8.981H8.148zM8.172 24c-2.489 0-4.515-2.014-4.515-4.49s2.014-4.49 4.49-4.49h4.588v4.441c0 2.503-2.047 4.539-4.563 4.539zm-.024-7.51a3.023 3.023 0 0 0-3.019 3.019c0 1.665 1.365 3.019 3.044 3.019 1.705 0 3.093-1.376 3.093-3.068v-2.97H8.148zm7.704 0h-.098c-2.476 0-4.49-2.014-4.49-4.49s2.014-4.49 4.49-4.49h.098c2.476 0 4.49 2.014 4.49 4.49s-2.014 4.49-4.49 4.49zm-.097-7.509c-1.665 0-3.019 1.355-3.019 3.019s1.355 3.019 3.019 3.019h.098c1.665 0 3.019-1.355 3.019-3.019s-1.355-3.019-3.019-3.019h-.098z"},child:[]}]})(e)},{}),title:"Figma"},{node:(0,t.jsx)(function(e){return T({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M9.85 8.42c-.37-.15-.77-.21-1.18-.2-.26 0-.49 0-.68.01-.2-.01-.34 0-.41.01v3.36c.14.01.27.02.39.02h.53c.39 0 .78-.06 1.15-.18.32-.09.6-.28.82-.53.21-.25.31-.59.31-1.03.01-.31-.07-.62-.23-.89-.17-.26-.41-.46-.7-.57zM19.75.3H4.25C1.9.3 0 2.2 0 4.55v14.899c0 2.35 1.9 4.25 4.25 4.25h15.5c2.35 0 4.25-1.9 4.25-4.25V4.55C24 2.2 22.1.3 19.75.3zm-7.391 11.65c-.399.56-.959.98-1.609 1.22-.68.25-1.43.34-2.25.34-.24 0-.4 0-.5-.01s-.24-.01-.43-.01v3.209c.01.07-.04.131-.11.141H5.52c-.08 0-.12-.041-.12-.131V6.42c0-.07.03-.11.1-.11.17 0 .33 0 .56-.01.24-.01.49-.01.76-.02s.56-.01.87-.02c.31-.01.61-.01.91-.01.82 0 1.5.1 2.06.31.5.17.96.45 1.34.82.32.32.57.71.73 1.14.149.42.229.85.229 1.3.001.86-.199 1.57-.6 2.13zm7.091 3.89c-.28.4-.671.709-1.12.891-.49.209-1.09.318-1.811.318-.459 0-.91-.039-1.359-.129-.35-.061-.7-.17-1.02-.32-.07-.039-.121-.109-.111-.189v-1.74c0-.029.011-.07.041-.09.029-.02.06-.01.09.01.39.23.8.391 1.24.49.379.1.779.15 1.18.15.38 0 .65-.051.83-.141.16-.07.27-.24.27-.42 0-.141-.08-.27-.24-.4-.16-.129-.489-.279-.979-.471-.51-.18-.979-.42-1.42-.719-.31-.221-.569-.51-.761-.85-.159-.32-.239-.67-.229-1.021 0-.43.12-.84.341-1.21.25-.4.619-.72 1.049-.92.469-.239 1.059-.349 1.769-.349.41 0 .83.03 1.24.09.3.04.59.12.86.23.039.01.08.05.1.09.01.04.02.08.02.12v1.63c0 .04-.02.08-.05.1-.09.02-.14.02-.18 0-.3-.16-.62-.27-.96-.34-.37-.08-.74-.13-1.12-.13-.2-.01-.41.02-.601.07-.129.03-.24.1-.31.2-.05.08-.08.18-.08.27s.04.18.101.26c.09.11.209.2.34.27.229.12.47.23.709.33.541.18 1.061.43 1.541.73.33.209.6.49.789.83.16.318.24.67.23 1.029.011.471-.129.94-.389 1.331z"},child:[]}]})(e)},{}),title:"Photoshop"},{node:(0,t.jsx)(function(e){return T({tag:"svg",attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M10.53 10.73c-.1-.31-.19-.61-.29-.92-.1-.31-.19-.6-.27-.89-.08-.28-.15-.54-.22-.78h-.02c-.09.43-.2.86-.34 1.29-.15.48-.3.98-.46 1.48-.14.51-.29.98-.44 1.4h2.54c-.06-.211-.14-.46-.23-.721-.09-.269-.18-.559-.27-.859zM19.75.3H4.25C1.9.3 0 2.2 0 4.55v14.9c0 2.35 1.9 4.25 4.25 4.25h15.5c2.35 0 4.25-1.9 4.25-4.25V4.55C24 2.2 22.1.3 19.75.3zM14.7 16.83h-2.091c-.069.01-.139-.04-.159-.11l-.82-2.38H7.91l-.76 2.35c-.02.09-.1.15-.19.141H5.08c-.11 0-.14-.061-.11-.18L8.19 7.38c.03-.1.06-.21.1-.33.04-.21.06-.43.06-.65-.01-.05.03-.1.08-.11h2.59c.08 0 .12.03.13.08l3.65 10.3c.03.109 0 .16-.1.16zm3.4-.15c0 .11-.039.16-.129.16H16.01c-.1 0-.15-.061-.15-.16v-7.7c0-.1.041-.14.131-.14h1.98c.09 0 .129.05.129.14v7.7zm-.209-9.03c-.231.24-.571.37-.911.35-.33.01-.65-.12-.891-.35-.23-.25-.35-.58-.34-.92-.01-.34.12-.66.359-.89.242-.23.562-.35.892-.35.391 0 .689.12.91.35.22.24.34.56.33.89.01.34-.11.67-.349.92z"},child:[]}]})(e)},{}),title:"Illustrator"}];function P(){return(0,t.jsxs)(i.default,{id:"about-me",className:"relative bg-[#0a0a0a]",children:[(0,t.jsx)("div",{className:"w-full overflow-hidden",children:(0,t.jsx)(h,{logos:C,speed:100,direction:"left",logoHeight:60,gap:60,hoverSpeed:0,scaleOnHover:!0,fadeOut:!0,fadeOutColor:"#0a0a0a",ariaLabel:"Technology partners"})}),(0,t.jsx)("div",{className:"w-full h-px bg-white/20 mt-10"}),(0,t.jsxs)(n.default,{className:"flex flex-col items-center pt-20 gap-10",children:[(0,t.jsx)(u.default,{text:"~ About Me ~",speed:1.8,delay:.8,color:"#ffffff",shineColor:"#FCA311",spread:90,direction:"left",yoyo:!1,pauseOnHover:!1,disabled:!1,className:"text-center text-xl sm:text-2xl font-bold"}),(0,t.jsx)(o,{text:"Hi, I'm Tengku Hanafi, a passionate web designer and front-end developer. I craft clean, modern, and responsive websites that deliver engaging user experiences. From UI design to seamless interactions, I bring ideas to life."}),(0,t.jsx)(_,{as:"div",color:"#FCA311",speed:"3s",className:"block w-full rounded-2xl",thickness:5,children:(0,t.jsxs)("div",{className:"relative w-full h-[260px] sm:h-[320px] lg:h-[400px] overflow-hidden rounded-2xl",children:[(0,t.jsx)("div",{className:"absolute inset-0",children:(0,t.jsx)(v,{items:A,variant:2})}),(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center z-10 pointer-events-none",children:(0,t.jsx)("span",{className:"text-white/70 text-2xl sm:text-3xl font-bold animate-pulse",children:"Hover Me"})})]})})]})]})}e.s(["default",()=>P],80288)}]);